(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();function kR(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Nm={exports:{}},bc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xb;function NR(){if(xb)return bc;xb=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,r,o){var c=null;if(o!==void 0&&(c=""+o),r.key!==void 0&&(c=""+r.key),"key"in r){o={};for(var u in r)u!=="key"&&(o[u]=r[u])}else o=r;return r=o.ref,{$$typeof:n,type:i,key:c,ref:r!==void 0?r:null,props:o}}return bc.Fragment=t,bc.jsx=e,bc.jsxs=e,bc}var Rb;function PR(){return Rb||(Rb=1,Nm.exports=NR()),Nm.exports}var J=PR(),Pm={exports:{}},Ct={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ib;function VR(){if(Ib)return Ct;Ib=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),y=Symbol.iterator;function b(V){return V===null||typeof V!="object"?null:(V=y&&V[y]||V["@@iterator"],typeof V=="function"?V:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,M={};function C(V,st,ct){this.props=V,this.context=st,this.refs=M,this.updater=ct||S}C.prototype.isReactComponent={},C.prototype.setState=function(V,st){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,st,"setState")},C.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function z(){}z.prototype=C.prototype;function F(V,st,ct){this.props=V,this.context=st,this.refs=M,this.updater=ct||S}var X=F.prototype=new z;X.constructor=F,R(X,C.prototype),X.isPureReactComponent=!0;var $=Array.isArray,W={H:null,A:null,T:null,S:null,V:null},ot=Object.prototype.hasOwnProperty;function D(V,st,ct,at,gt,Rt){return ct=Rt.ref,{$$typeof:n,type:V,key:st,ref:ct!==void 0?ct:null,props:Rt}}function x(V,st){return D(V.type,st,void 0,void 0,void 0,V.props)}function I(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function N(V){var st={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ct){return st[ct]})}var P=/\/+/g;function L(V,st){return typeof V=="object"&&V!==null&&V.key!=null?N(""+V.key):st.toString(36)}function O(){}function Gt(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(O,O):(V.status="pending",V.then(function(st){V.status==="pending"&&(V.status="fulfilled",V.value=st)},function(st){V.status==="pending"&&(V.status="rejected",V.reason=st)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function yt(V,st,ct,at,gt){var Rt=typeof V;(Rt==="undefined"||Rt==="boolean")&&(V=null);var _t=!1;if(V===null)_t=!0;else switch(Rt){case"bigint":case"string":case"number":_t=!0;break;case"object":switch(V.$$typeof){case n:case t:_t=!0;break;case _:return _t=V._init,yt(_t(V._payload),st,ct,at,gt)}}if(_t)return gt=gt(V),_t=at===""?"."+L(V,0):at,$(gt)?(ct="",_t!=null&&(ct=_t.replace(P,"$&/")+"/"),yt(gt,st,ct,"",function(fi){return fi})):gt!=null&&(I(gt)&&(gt=x(gt,ct+(gt.key==null||V&&V.key===gt.key?"":(""+gt.key).replace(P,"$&/")+"/")+_t)),st.push(gt)),1;_t=0;var je=at===""?".":at+":";if($(V))for(var re=0;re<V.length;re++)at=V[re],Rt=je+L(at,re),_t+=yt(at,st,ct,Rt,gt);else if(re=b(V),typeof re=="function")for(V=re.call(V),re=0;!(at=V.next()).done;)at=at.value,Rt=je+L(at,re++),_t+=yt(at,st,ct,Rt,gt);else if(Rt==="object"){if(typeof V.then=="function")return yt(Gt(V),st,ct,at,gt);throw st=String(V),Error("Objects are not valid as a React child (found: "+(st==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":st)+"). If you meant to render a collection of children, use an array instead.")}return _t}function K(V,st,ct){if(V==null)return V;var at=[],gt=0;return yt(V,at,"","",function(Rt){return st.call(ct,Rt,gt++)}),at}function rt(V){if(V._status===-1){var st=V._result;st=st(),st.then(function(ct){(V._status===0||V._status===-1)&&(V._status=1,V._result=ct)},function(ct){(V._status===0||V._status===-1)&&(V._status=2,V._result=ct)}),V._status===-1&&(V._status=0,V._result=st)}if(V._status===1)return V._result.default;throw V._result}var ft=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var st=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(st))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function St(){}return Ct.Children={map:K,forEach:function(V,st,ct){K(V,function(){st.apply(this,arguments)},ct)},count:function(V){var st=0;return K(V,function(){st++}),st},toArray:function(V){return K(V,function(st){return st})||[]},only:function(V){if(!I(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Ct.Component=C,Ct.Fragment=e,Ct.Profiler=r,Ct.PureComponent=F,Ct.StrictMode=i,Ct.Suspense=f,Ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,Ct.__COMPILER_RUNTIME={__proto__:null,c:function(V){return W.H.useMemoCache(V)}},Ct.cache=function(V){return function(){return V.apply(null,arguments)}},Ct.cloneElement=function(V,st,ct){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var at=R({},V.props),gt=V.key,Rt=void 0;if(st!=null)for(_t in st.ref!==void 0&&(Rt=void 0),st.key!==void 0&&(gt=""+st.key),st)!ot.call(st,_t)||_t==="key"||_t==="__self"||_t==="__source"||_t==="ref"&&st.ref===void 0||(at[_t]=st[_t]);var _t=arguments.length-2;if(_t===1)at.children=ct;else if(1<_t){for(var je=Array(_t),re=0;re<_t;re++)je[re]=arguments[re+2];at.children=je}return D(V.type,gt,void 0,void 0,Rt,at)},Ct.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:o,_context:V},V},Ct.createElement=function(V,st,ct){var at,gt={},Rt=null;if(st!=null)for(at in st.key!==void 0&&(Rt=""+st.key),st)ot.call(st,at)&&at!=="key"&&at!=="__self"&&at!=="__source"&&(gt[at]=st[at]);var _t=arguments.length-2;if(_t===1)gt.children=ct;else if(1<_t){for(var je=Array(_t),re=0;re<_t;re++)je[re]=arguments[re+2];gt.children=je}if(V&&V.defaultProps)for(at in _t=V.defaultProps,_t)gt[at]===void 0&&(gt[at]=_t[at]);return D(V,Rt,void 0,void 0,null,gt)},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(V){return{$$typeof:u,render:V}},Ct.isValidElement=I,Ct.lazy=function(V){return{$$typeof:_,_payload:{_status:-1,_result:V},_init:rt}},Ct.memo=function(V,st){return{$$typeof:g,type:V,compare:st===void 0?null:st}},Ct.startTransition=function(V){var st=W.T,ct={};W.T=ct;try{var at=V(),gt=W.S;gt!==null&&gt(ct,at),typeof at=="object"&&at!==null&&typeof at.then=="function"&&at.then(St,ft)}catch(Rt){ft(Rt)}finally{W.T=st}},Ct.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},Ct.use=function(V){return W.H.use(V)},Ct.useActionState=function(V,st,ct){return W.H.useActionState(V,st,ct)},Ct.useCallback=function(V,st){return W.H.useCallback(V,st)},Ct.useContext=function(V){return W.H.useContext(V)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(V,st){return W.H.useDeferredValue(V,st)},Ct.useEffect=function(V,st,ct){var at=W.H;if(typeof ct=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return at.useEffect(V,st)},Ct.useId=function(){return W.H.useId()},Ct.useImperativeHandle=function(V,st,ct){return W.H.useImperativeHandle(V,st,ct)},Ct.useInsertionEffect=function(V,st){return W.H.useInsertionEffect(V,st)},Ct.useLayoutEffect=function(V,st){return W.H.useLayoutEffect(V,st)},Ct.useMemo=function(V,st){return W.H.useMemo(V,st)},Ct.useOptimistic=function(V,st){return W.H.useOptimistic(V,st)},Ct.useReducer=function(V,st,ct){return W.H.useReducer(V,st,ct)},Ct.useRef=function(V){return W.H.useRef(V)},Ct.useState=function(V){return W.H.useState(V)},Ct.useSyncExternalStore=function(V,st,ct){return W.H.useSyncExternalStore(V,st,ct)},Ct.useTransition=function(){return W.H.useTransition()},Ct.version="19.1.0",Ct}var Cb;function Wp(){return Cb||(Cb=1,Pm.exports=VR()),Pm.exports}var xt=Wp();const Vn=kR(xt);var Vm={exports:{}},Ec={},Lm={exports:{}},Um={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mb;function LR(){return Mb||(Mb=1,function(n){function t(K,rt){var ft=K.length;K.push(rt);t:for(;0<ft;){var St=ft-1>>>1,V=K[St];if(0<r(V,rt))K[St]=rt,K[ft]=V,ft=St;else break t}}function e(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var rt=K[0],ft=K.pop();if(ft!==rt){K[0]=ft;t:for(var St=0,V=K.length,st=V>>>1;St<st;){var ct=2*(St+1)-1,at=K[ct],gt=ct+1,Rt=K[gt];if(0>r(at,ft))gt<V&&0>r(Rt,at)?(K[St]=Rt,K[gt]=ft,St=gt):(K[St]=at,K[ct]=ft,St=ct);else if(gt<V&&0>r(Rt,ft))K[St]=Rt,K[gt]=ft,St=gt;else break t}}return rt}function r(K,rt){var ft=K.sortIndex-rt.sortIndex;return ft!==0?ft:K.id-rt.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();n.unstable_now=function(){return c.now()-u}}var f=[],g=[],_=1,y=null,b=3,S=!1,R=!1,M=!1,C=!1,z=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function $(K){for(var rt=e(g);rt!==null;){if(rt.callback===null)i(g);else if(rt.startTime<=K)i(g),rt.sortIndex=rt.expirationTime,t(f,rt);else break;rt=e(g)}}function W(K){if(M=!1,$(K),!R)if(e(f)!==null)R=!0,ot||(ot=!0,L());else{var rt=e(g);rt!==null&&yt(W,rt.startTime-K)}}var ot=!1,D=-1,x=5,I=-1;function N(){return C?!0:!(n.unstable_now()-I<x)}function P(){if(C=!1,ot){var K=n.unstable_now();I=K;var rt=!0;try{t:{R=!1,M&&(M=!1,F(D),D=-1),S=!0;var ft=b;try{e:{for($(K),y=e(f);y!==null&&!(y.expirationTime>K&&N());){var St=y.callback;if(typeof St=="function"){y.callback=null,b=y.priorityLevel;var V=St(y.expirationTime<=K);if(K=n.unstable_now(),typeof V=="function"){y.callback=V,$(K),rt=!0;break e}y===e(f)&&i(f),$(K)}else i(f);y=e(f)}if(y!==null)rt=!0;else{var st=e(g);st!==null&&yt(W,st.startTime-K),rt=!1}}break t}finally{y=null,b=ft,S=!1}rt=void 0}}finally{rt?L():ot=!1}}}var L;if(typeof X=="function")L=function(){X(P)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,Gt=O.port2;O.port1.onmessage=P,L=function(){Gt.postMessage(null)}}else L=function(){z(P,0)};function yt(K,rt){D=z(function(){K(n.unstable_now())},rt)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(K){switch(b){case 1:case 2:case 3:var rt=3;break;default:rt=b}var ft=b;b=rt;try{return K()}finally{b=ft}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(K,rt){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ft=b;b=K;try{return rt()}finally{b=ft}},n.unstable_scheduleCallback=function(K,rt,ft){var St=n.unstable_now();switch(typeof ft=="object"&&ft!==null?(ft=ft.delay,ft=typeof ft=="number"&&0<ft?St+ft:St):ft=St,K){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=ft+V,K={id:_++,callback:rt,priorityLevel:K,startTime:ft,expirationTime:V,sortIndex:-1},ft>St?(K.sortIndex=ft,t(g,K),e(f)===null&&K===e(g)&&(M?(F(D),D=-1):M=!0,yt(W,ft-St))):(K.sortIndex=V,t(f,K),R||S||(R=!0,ot||(ot=!0,L()))),K},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(K){var rt=b;return function(){var ft=b;b=rt;try{return K.apply(this,arguments)}finally{b=ft}}}}(Um)),Um}var Db;function UR(){return Db||(Db=1,Lm.exports=LR()),Lm.exports}var zm={exports:{}},rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ob;function zR(){if(Ob)return rn;Ob=1;var n=Wp();function t(f){var g="https://react.dev/errors/"+f;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+f+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(f,g,_){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:f,containerInfo:g,implementation:_}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,g){if(f==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,rn.createPortal=function(f,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return o(f,g,null,_)},rn.flushSync=function(f){var g=c.T,_=i.p;try{if(c.T=null,i.p=2,f)return f()}finally{c.T=g,i.p=_,i.d.f()}},rn.preconnect=function(f,g){typeof f=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(f,g))},rn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},rn.preinit=function(f,g){if(typeof f=="string"&&g&&typeof g.as=="string"){var _=g.as,y=u(_,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?i.d.S(f,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:S}):_==="script"&&i.d.X(f,{crossOrigin:y,integrity:b,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},rn.preinitModule=function(f,g){if(typeof f=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=u(g.as,g.crossOrigin);i.d.M(f,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(f)},rn.preload=function(f,g){if(typeof f=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,y=u(_,g.crossOrigin);i.d.L(f,_,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},rn.preloadModule=function(f,g){if(typeof f=="string")if(g){var _=u(g.as,g.crossOrigin);i.d.m(f,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(f)},rn.requestFormReset=function(f){i.d.r(f)},rn.unstable_batchedUpdates=function(f,g){return f(g)},rn.useFormState=function(f,g,_){return c.H.useFormState(f,g,_)},rn.useFormStatus=function(){return c.H.useHostTransitionStatus()},rn.version="19.1.0",rn}var kb;function BR(){if(kb)return zm.exports;kb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),zm.exports=zR(),zm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nb;function jR(){if(Nb)return Ec;Nb=1;var n=UR(),t=Wp(),e=BR();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,l=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(l=a.return),s=a.return;while(s)}return a.tag===3?l:null}function c(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function u(s){if(o(s)!==s)throw Error(i(188))}function f(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(i(188));return a!==s?null:s}for(var l=s,h=a;;){var m=l.return;if(m===null)break;var p=m.alternate;if(p===null){if(h=m.return,h!==null){l=h;continue}break}if(m.child===p.child){for(p=m.child;p;){if(p===l)return u(m),s;if(p===h)return u(m),a;p=p.sibling}throw Error(i(188))}if(l.return!==h.return)l=m,h=p;else{for(var T=!1,w=m.child;w;){if(w===l){T=!0,l=m,h=p;break}if(w===h){T=!0,h=m,l=p;break}w=w.sibling}if(!T){for(w=p.child;w;){if(w===l){T=!0,l=p,h=m;break}if(w===h){T=!0,h=p,l=m;break}w=w.sibling}if(!T)throw Error(i(189))}}if(l.alternate!==h)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:a}function g(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=g(s),a!==null)return a;s=s.sibling}return null}var _=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),X=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),ot=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function L(s){return s===null||typeof s!="object"?null:(s=P&&s[P]||s["@@iterator"],typeof s=="function"?s:null)}var O=Symbol.for("react.client.reference");function Gt(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===O?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case R:return"Fragment";case C:return"Profiler";case M:return"StrictMode";case W:return"Suspense";case ot:return"SuspenseList";case I:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case S:return"Portal";case X:return(s.displayName||"Context")+".Provider";case F:return(s._context.displayName||"Context")+".Consumer";case $:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case D:return a=s.displayName||null,a!==null?a:Gt(s.type)||"Memo";case x:a=s._payload,s=s._init;try{return Gt(s(a))}catch{}}return null}var yt=Array.isArray,K=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,rt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ft={pending:!1,data:null,method:null,action:null},St=[],V=-1;function st(s){return{current:s}}function ct(s){0>V||(s.current=St[V],St[V]=null,V--)}function at(s,a){V++,St[V]=s.current,s.current=a}var gt=st(null),Rt=st(null),_t=st(null),je=st(null);function re(s,a){switch(at(_t,a),at(Rt,s),at(gt,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?tb(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=tb(a),s=eb(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ct(gt),at(gt,s)}function fi(){ct(gt),ct(Rt),ct(_t)}function Cs(s){s.memoizedState!==null&&at(je,s);var a=gt.current,l=eb(a,s.type);a!==l&&(at(Rt,s),at(gt,l))}function Fi(s){Rt.current===s&&(ct(gt),ct(Rt)),je.current===s&&(ct(je),mc._currentValue=ft)}var Pr=Object.prototype.hasOwnProperty,Vr=n.unstable_scheduleCallback,Lr=n.unstable_cancelCallback,fl=n.unstable_shouldYield,bu=n.unstable_requestPaint,Ln=n.unstable_now,Nd=n.unstable_getCurrentPriorityLevel,dl=n.unstable_ImmediatePriority,za=n.unstable_UserBlockingPriority,Ur=n.unstable_NormalPriority,Pd=n.unstable_LowPriority,Ba=n.unstable_IdlePriority,gl=n.log,Eu=n.unstable_setDisableYieldValue,me=null,Xt=null;function wn(s){if(typeof gl=="function"&&Eu(s),Xt&&typeof Xt.setStrictMode=="function")try{Xt.setStrictMode(me,s)}catch{}}var nn=Math.clz32?Math.clz32:zr,Tu=Math.log,Vd=Math.LN2;function zr(s){return s>>>=0,s===0?32:31-(Tu(s)/Vd|0)|0}var Br=256,jr=4194304;function ei(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function ja(s,a,l){var h=s.pendingLanes;if(h===0)return 0;var m=0,p=s.suspendedLanes,T=s.pingedLanes;s=s.warmLanes;var w=h&134217727;return w!==0?(h=w&~p,h!==0?m=ei(h):(T&=w,T!==0?m=ei(T):l||(l=w&~s,l!==0&&(m=ei(l))))):(w=h&~p,w!==0?m=ei(w):T!==0?m=ei(T):l||(l=h&~s,l!==0&&(m=ei(l)))),m===0?0:a!==0&&a!==m&&(a&p)===0&&(p=m&-m,l=a&-a,p>=l||p===32&&(l&4194048)!==0)?a:m}function Fr(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function ml(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pl(){var s=Br;return Br<<=1,(Br&4194048)===0&&(Br=256),s}function _l(){var s=jr;return jr<<=1,(jr&62914560)===0&&(jr=4194304),s}function Hi(s){for(var a=[],l=0;31>l;l++)a.push(s);return a}function qi(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function yl(s,a,l,h,m,p){var T=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var w=s.entanglements,k=s.expirationTimes,q=s.hiddenUpdates;for(l=T&~l;0<l;){var Z=31-nn(l),nt=1<<Z;w[Z]=0,k[Z]=-1;var G=q[Z];if(G!==null)for(q[Z]=null,Z=0;Z<G.length;Z++){var Y=G[Z];Y!==null&&(Y.lane&=-536870913)}l&=~nt}h!==0&&di(s,h,0),p!==0&&m===0&&s.tag!==0&&(s.suspendedLanes|=p&~(T&~a))}function di(s,a,l){s.pendingLanes|=a,s.suspendedLanes&=~a;var h=31-nn(a);s.entangledLanes|=a,s.entanglements[h]=s.entanglements[h]|1073741824|l&4194090}function vl(s,a){var l=s.entangledLanes|=a;for(s=s.entanglements;l;){var h=31-nn(l),m=1<<h;m&a|s[h]&a&&(s[h]|=a),l&=~m}}function Ms(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Fa(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ds(){var s=rt.p;return s!==0?s:(s=window.event,s===void 0?32:bb(s.type))}function Su(s,a){var l=rt.p;try{return rt.p=s,a()}finally{rt.p=l}}var ue=Math.random().toString(36).slice(2),Oe="__reactFiber$"+ue,we="__reactProps$"+ue,Un="__reactContainer$"+ue,bl="__reactEvents$"+ue,Ld="__reactListeners$"+ue,Os="__reactHandles$"+ue,wu="__reactResources$"+ue,Hr="__reactMarker$"+ue;function ks(s){delete s[Oe],delete s[we],delete s[bl],delete s[Ld],delete s[Os]}function Gi(s){var a=s[Oe];if(a)return a;for(var l=s.parentNode;l;){if(a=l[Un]||l[Oe]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(s=rb(s);s!==null;){if(l=s[Oe])return l;s=rb(s)}return a}s=l,l=s.parentNode}return null}function gi(s){if(s=s[Oe]||s[Un]){var a=s.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return s}return null}function mi(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function un(s){var a=s[wu];return a||(a=s[wu]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function ve(s){s[Hr]=!0}var El=new Set,Ha={};function ni(s,a){Yi(s,a),Yi(s+"Capture",a)}function Yi(s,a){for(Ha[s]=a,s=0;s<a.length;s++)El.add(a[s])}var Au=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xu={},qr={};function Ru(s){return Pr.call(qr,s)?!0:Pr.call(xu,s)?!1:Au.test(s)?qr[s]=!0:(xu[s]=!0,!1)}function Ns(s,a,l){if(Ru(a))if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+l)}}function pi(s,a,l){if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+l)}}function We(s,a,l,h){if(h===null)s.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(a,l,""+h)}}var Gr,Iu;function Ki(s){if(Gr===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Gr=a&&a[1]||"",Iu=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gr+s+Iu}var qa=!1;function Ga(s,a){if(!s||qa)return"";qa=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var nt=function(){throw Error()};if(Object.defineProperty(nt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(nt,[])}catch(Y){var G=Y}Reflect.construct(s,[],nt)}else{try{nt.call()}catch(Y){G=Y}s.call(nt.prototype)}}else{try{throw Error()}catch(Y){G=Y}(nt=s())&&typeof nt.catch=="function"&&nt.catch(function(){})}}catch(Y){if(Y&&G&&typeof Y.stack=="string")return[Y.stack,G.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=h.DetermineComponentFrameRoot(),T=p[0],w=p[1];if(T&&w){var k=T.split(`
`),q=w.split(`
`);for(m=h=0;h<k.length&&!k[h].includes("DetermineComponentFrameRoot");)h++;for(;m<q.length&&!q[m].includes("DetermineComponentFrameRoot");)m++;if(h===k.length||m===q.length)for(h=k.length-1,m=q.length-1;1<=h&&0<=m&&k[h]!==q[m];)m--;for(;1<=h&&0<=m;h--,m--)if(k[h]!==q[m]){if(h!==1||m!==1)do if(h--,m--,0>m||k[h]!==q[m]){var Z=`
`+k[h].replace(" at new "," at ");return s.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",s.displayName)),Z}while(1<=h&&0<=m);break}}}finally{qa=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Ki(l):""}function Tl(s){switch(s.tag){case 26:case 27:case 5:return Ki(s.type);case 16:return Ki("Lazy");case 13:return Ki("Suspense");case 19:return Ki("SuspenseList");case 0:case 15:return Ga(s.type,!1);case 11:return Ga(s.type.render,!1);case 1:return Ga(s.type,!0);case 31:return Ki("Activity");default:return""}}function Ya(s){try{var a="";do a+=Tl(s),s=s.return;while(s);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function hn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Sl(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ud(s){var a=Sl(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),h=""+s[a];if(!s.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,p=l.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return m.call(this)},set:function(T){h=""+T,p.call(this,T)}}),Object.defineProperty(s,a,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(T){h=""+T},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Ka(s){s._valueTracker||(s._valueTracker=Ud(s))}function wl(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var l=a.getValue(),h="";return s&&(h=Sl(s)?s.checked?"true":"false":s.value),s=h,s!==l?(a.setValue(s),!0):!1}function Yr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var zd=/[\n"\\]/g;function Ae(s){return s.replace(zd,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function An(s,a,l,h,m,p,T,w){s.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?s.type=T:s.removeAttribute("type"),a!=null?T==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+hn(a)):s.value!==""+hn(a)&&(s.value=""+hn(a)):T!=="submit"&&T!=="reset"||s.removeAttribute("value"),a!=null?Ps(s,T,hn(a)):l!=null?Ps(s,T,hn(l)):h!=null&&s.removeAttribute("value"),m==null&&p!=null&&(s.defaultChecked=!!p),m!=null&&(s.checked=m&&typeof m!="function"&&typeof m!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.name=""+hn(w):s.removeAttribute("name")}function Kr(s,a,l,h,m,p,T,w){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(s.type=p),a!=null||l!=null){if(!(p!=="submit"&&p!=="reset"||a!=null))return;l=l!=null?""+hn(l):"",a=a!=null?""+hn(a):l,w||a===s.value||(s.value=a),s.defaultValue=a}h=h??m,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=w?s.checked:!!h,s.defaultChecked=!!h,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.name=T)}function Ps(s,a,l){a==="number"&&Yr(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Wi(s,a,l,h){if(s=s.options,a){a={};for(var m=0;m<l.length;m++)a["$"+l[m]]=!0;for(l=0;l<s.length;l++)m=a.hasOwnProperty("$"+s[l].value),s[l].selected!==m&&(s[l].selected=m),m&&h&&(s[l].defaultSelected=!0)}else{for(l=""+hn(l),a=null,m=0;m<s.length;m++){if(s[m].value===l){s[m].selected=!0,h&&(s[m].defaultSelected=!0);return}a!==null||s[m].disabled||(a=s[m])}a!==null&&(a.selected=!0)}}function Jt(s,a,l){if(a!=null&&(a=""+hn(a),a!==s.value&&(s.value=a),l==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=l!=null?""+hn(l):""}function Wr(s,a,l,h){if(a==null){if(h!=null){if(l!=null)throw Error(i(92));if(yt(h)){if(1<h.length)throw Error(i(93));h=h[0]}l=h}l==null&&(l=""),a=l}l=hn(a),s.defaultValue=l,h=s.textContent,h===l&&h!==""&&h!==null&&(s.value=h)}function zn(s,a){if(a){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=a;return}}s.textContent=a}var Qr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cu(s,a,l){var h=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":h?s.setProperty(a,l):typeof l!="number"||l===0||Qr.has(a)?a==="float"?s.cssFloat=l:s[a]=(""+l).trim():s[a]=l+"px"}function Al(s,a,l){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var m in a)h=a[m],a.hasOwnProperty(m)&&l[m]!==h&&Cu(s,m,h)}else for(var p in a)a.hasOwnProperty(p)&&Cu(s,p,a[p])}function xl(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wa(s){return jd.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Qi=null;function Bn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Xi=null,$i=null;function Rl(s){var a=gi(s);if(a&&(s=a.stateNode)){var l=s[we]||null;t:switch(s=a.stateNode,a.type){case"input":if(An(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Ae(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var h=l[a];if(h!==s&&h.form===s.form){var m=h[we]||null;if(!m)throw Error(i(90));An(h,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<l.length;a++)h=l[a],h.form===s.form&&wl(h)}break t;case"textarea":Jt(s,l.value,l.defaultValue);break t;case"select":a=l.value,a!=null&&Wi(s,!!l.multiple,a,!1)}}}var _i=!1;function Mu(s,a,l){if(_i)return s(a,l);_i=!0;try{var h=s(a);return h}finally{if(_i=!1,(Xi!==null||$i!==null)&&(Sh(),Xi&&(a=Xi,s=$i,$i=Xi=null,Rl(a),s)))for(a=0;a<s.length;a++)Rl(s[a])}}function Xr(s,a){var l=s.stateNode;if(l===null)return null;var h=l[we]||null;if(h===null)return null;l=h[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break t;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,a,typeof l));return l}var ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jn=!1;if(ii)try{var $r={};Object.defineProperty($r,"passive",{get:function(){jn=!0}}),window.addEventListener("test",$r,$r),window.removeEventListener("test",$r,$r)}catch{jn=!1}var yi=null,Vs=null,Zi=null;function Il(){if(Zi)return Zi;var s,a=Vs,l=a.length,h,m="value"in yi?yi.value:yi.textContent,p=m.length;for(s=0;s<l&&a[s]===m[s];s++);var T=l-s;for(h=1;h<=T&&a[l-h]===m[p-h];h++);return Zi=m.slice(s,1<h?1-h:void 0)}function vi(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function bi(){return!0}function Cl(){return!1}function Fe(s){function a(l,h,m,p,T){this._reactName=l,this._targetInst=m,this.type=h,this.nativeEvent=p,this.target=T,this.currentTarget=null;for(var w in s)s.hasOwnProperty(w)&&(l=s[w],this[w]=l?l(p):p[w]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?bi:Cl,this.isPropagationStopped=Cl,this}return _(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=bi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=bi)},persist:function(){},isPersistent:bi}),a}var Kt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qa=Fe(Kt),Zr=_({},Kt,{view:0,detail:0}),Du=Fe(Zr),Xa,$a,Ei,Jr=_({},Zr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:na,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ei&&(Ei&&s.type==="mousemove"?(Xa=s.screenX-Ei.screenX,$a=s.screenY-Ei.screenY):$a=Xa=0,Ei=s),Xa)},movementY:function(s){return"movementY"in s?s.movementY:$a}}),Fn=Fe(Jr),Ou=_({},Jr,{dataTransfer:0}),Fd=Fe(Ou),ta=_({},Zr,{relatedTarget:0}),Za=Fe(ta),Ml=_({},Kt,{animationName:0,elapsedTime:0,pseudoElement:0}),Ja=Fe(Ml),ku=_({},Kt,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),to=Fe(ku),Hd=_({},Kt,{data:0}),Dl=Fe(Hd),ea={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ol(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Pu[s])?!!a[s]:!1}function na(){return Ol}var Vu=_({},Zr,{key:function(s){if(s.key){var a=ea[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=vi(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Nu[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:na,charCode:function(s){return s.type==="keypress"?vi(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?vi(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),eo=Fe(Vu),Lu=_({},Jr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kl=Fe(Lu),Ji=_({},Zr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:na}),Uu=Fe(Ji),zu=_({},Kt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bu=Fe(zu),ju=_({},Jr,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),no=Fe(ju),fn=_({},Kt,{newState:0,oldState:0}),Fu=Fe(fn),Hu=[9,13,27,32],Ti=ii&&"CompositionEvent"in window,d=null;ii&&"documentMode"in document&&(d=document.documentMode);var v=ii&&"TextEvent"in window&&!d,E=ii&&(!Ti||d&&8<d&&11>=d),A=" ",j=!1;function Q(s,a){switch(s){case"keyup":return Hu.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lt(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Lt=!1;function ke(s,a){switch(s){case"compositionend":return lt(a);case"keypress":return a.which!==32?null:(j=!0,A);case"textInput":return s=a.data,s===A&&j?null:s;default:return null}}function Ut(s,a){if(Lt)return s==="compositionend"||!Ti&&Q(s,a)?(s=Il(),Zi=Vs=yi=null,Lt=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return E&&a.locale!=="ko"?null:a.data;default:return null}}var He={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ne(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!He[s.type]:a==="textarea"}function ts(s,a,l,h){Xi?$i?$i.push(h):$i=[h]:Xi=h,a=Ch(a,"onChange"),0<a.length&&(l=new Qa("onChange","change",null,l,h),s.push({event:l,listeners:a}))}var Qe=null,Si=null;function Nl(s){Q0(s,0)}function qu(s){var a=mi(s);if(wl(a))return s}function py(s,a){if(s==="change")return a}var _y=!1;if(ii){var qd;if(ii){var Gd="oninput"in document;if(!Gd){var yy=document.createElement("div");yy.setAttribute("oninput","return;"),Gd=typeof yy.oninput=="function"}qd=Gd}else qd=!1;_y=qd&&(!document.documentMode||9<document.documentMode)}function vy(){Qe&&(Qe.detachEvent("onpropertychange",by),Si=Qe=null)}function by(s){if(s.propertyName==="value"&&qu(Si)){var a=[];ts(a,Si,s,Bn(s)),Mu(Nl,a)}}function cx(s,a,l){s==="focusin"?(vy(),Qe=a,Si=l,Qe.attachEvent("onpropertychange",by)):s==="focusout"&&vy()}function ux(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return qu(Si)}function hx(s,a){if(s==="click")return qu(a)}function fx(s,a){if(s==="input"||s==="change")return qu(a)}function dx(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var xn=typeof Object.is=="function"?Object.is:dx;function Pl(s,a){if(xn(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var l=Object.keys(s),h=Object.keys(a);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var m=l[h];if(!Pr.call(a,m)||!xn(s[m],a[m]))return!1}return!0}function Ey(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ty(s,a){var l=Ey(s);s=0;for(var h;l;){if(l.nodeType===3){if(h=s+l.textContent.length,s<=a&&h>=a)return{node:l,offset:a-s};s=h}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=Ey(l)}}function Sy(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?Sy(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function wy(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=Yr(s.document);a instanceof s.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)s=a.contentWindow;else break;a=Yr(s.document)}return a}function Yd(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var gx=ii&&"documentMode"in document&&11>=document.documentMode,io=null,Kd=null,Vl=null,Wd=!1;function Ay(s,a,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Wd||io==null||io!==Yr(h)||(h=io,"selectionStart"in h&&Yd(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Vl&&Pl(Vl,h)||(Vl=h,h=Ch(Kd,"onSelect"),0<h.length&&(a=new Qa("onSelect","select",null,a,l),s.push({event:a,listeners:h}),a.target=io)))}function ia(s,a){var l={};return l[s.toLowerCase()]=a.toLowerCase(),l["Webkit"+s]="webkit"+a,l["Moz"+s]="moz"+a,l}var so={animationend:ia("Animation","AnimationEnd"),animationiteration:ia("Animation","AnimationIteration"),animationstart:ia("Animation","AnimationStart"),transitionrun:ia("Transition","TransitionRun"),transitionstart:ia("Transition","TransitionStart"),transitioncancel:ia("Transition","TransitionCancel"),transitionend:ia("Transition","TransitionEnd")},Qd={},xy={};ii&&(xy=document.createElement("div").style,"AnimationEvent"in window||(delete so.animationend.animation,delete so.animationiteration.animation,delete so.animationstart.animation),"TransitionEvent"in window||delete so.transitionend.transition);function sa(s){if(Qd[s])return Qd[s];if(!so[s])return s;var a=so[s],l;for(l in a)if(a.hasOwnProperty(l)&&l in xy)return Qd[s]=a[l];return s}var Ry=sa("animationend"),Iy=sa("animationiteration"),Cy=sa("animationstart"),mx=sa("transitionrun"),px=sa("transitionstart"),_x=sa("transitioncancel"),My=sa("transitionend"),Dy=new Map,Xd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xd.push("scrollEnd");function si(s,a){Dy.set(s,a),ni(a,[s])}var Oy=new WeakMap;function Hn(s,a){if(typeof s=="object"&&s!==null){var l=Oy.get(s);return l!==void 0?l:(a={value:s,source:a,stack:Ya(a)},Oy.set(s,a),a)}return{value:s,source:a,stack:Ya(a)}}var qn=[],ro=0,$d=0;function Gu(){for(var s=ro,a=$d=ro=0;a<s;){var l=qn[a];qn[a++]=null;var h=qn[a];qn[a++]=null;var m=qn[a];qn[a++]=null;var p=qn[a];if(qn[a++]=null,h!==null&&m!==null){var T=h.pending;T===null?m.next=m:(m.next=T.next,T.next=m),h.pending=m}p!==0&&ky(l,m,p)}}function Yu(s,a,l,h){qn[ro++]=s,qn[ro++]=a,qn[ro++]=l,qn[ro++]=h,$d|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function Zd(s,a,l,h){return Yu(s,a,l,h),Ku(s)}function ao(s,a){return Yu(s,null,null,a),Ku(s)}function ky(s,a,l){s.lanes|=l;var h=s.alternate;h!==null&&(h.lanes|=l);for(var m=!1,p=s.return;p!==null;)p.childLanes|=l,h=p.alternate,h!==null&&(h.childLanes|=l),p.tag===22&&(s=p.stateNode,s===null||s._visibility&1||(m=!0)),s=p,p=p.return;return s.tag===3?(p=s.stateNode,m&&a!==null&&(m=31-nn(l),s=p.hiddenUpdates,h=s[m],h===null?s[m]=[a]:h.push(a),a.lane=l|536870912),p):null}function Ku(s){if(50<oc)throw oc=0,sm=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var oo={};function yx(s,a,l,h){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(s,a,l,h){return new yx(s,a,l,h)}function Jd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function es(s,a){var l=s.alternate;return l===null?(l=Rn(s.tag,a,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=a,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,a=s.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function Ny(s,a){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,a=l.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function Wu(s,a,l,h,m,p){var T=0;if(h=s,typeof s=="function")Jd(s)&&(T=1);else if(typeof s=="string")T=bR(s,l,gt.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case I:return s=Rn(31,l,a,m),s.elementType=I,s.lanes=p,s;case R:return ra(l.children,m,p,a);case M:T=8,m|=24;break;case C:return s=Rn(12,l,a,m|2),s.elementType=C,s.lanes=p,s;case W:return s=Rn(13,l,a,m),s.elementType=W,s.lanes=p,s;case ot:return s=Rn(19,l,a,m),s.elementType=ot,s.lanes=p,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case z:case X:T=10;break t;case F:T=9;break t;case $:T=11;break t;case D:T=14;break t;case x:T=16,h=null;break t}T=29,l=Error(i(130,s===null?"null":typeof s,"")),h=null}return a=Rn(T,l,a,m),a.elementType=s,a.type=h,a.lanes=p,a}function ra(s,a,l,h){return s=Rn(7,s,h,a),s.lanes=l,s}function tg(s,a,l){return s=Rn(6,s,null,a),s.lanes=l,s}function eg(s,a,l){return a=Rn(4,s.children!==null?s.children:[],s.key,a),a.lanes=l,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var lo=[],co=0,Qu=null,Xu=0,Gn=[],Yn=0,aa=null,ns=1,is="";function oa(s,a){lo[co++]=Xu,lo[co++]=Qu,Qu=s,Xu=a}function Py(s,a,l){Gn[Yn++]=ns,Gn[Yn++]=is,Gn[Yn++]=aa,aa=s;var h=ns;s=is;var m=32-nn(h)-1;h&=~(1<<m),l+=1;var p=32-nn(a)+m;if(30<p){var T=m-m%5;p=(h&(1<<T)-1).toString(32),h>>=T,m-=T,ns=1<<32-nn(a)+m|l<<m|h,is=p+s}else ns=1<<p|l<<m|h,is=s}function ng(s){s.return!==null&&(oa(s,1),Py(s,1,0))}function ig(s){for(;s===Qu;)Qu=lo[--co],lo[co]=null,Xu=lo[--co],lo[co]=null;for(;s===aa;)aa=Gn[--Yn],Gn[Yn]=null,is=Gn[--Yn],Gn[Yn]=null,ns=Gn[--Yn],Gn[Yn]=null}var dn=null,pe=null,Yt=!1,la=null,wi=!1,sg=Error(i(519));function ca(s){var a=Error(i(418,""));throw zl(Hn(a,s)),sg}function Vy(s){var a=s.stateNode,l=s.type,h=s.memoizedProps;switch(a[Oe]=s,a[we]=h,l){case"dialog":Nt("cancel",a),Nt("close",a);break;case"iframe":case"object":case"embed":Nt("load",a);break;case"video":case"audio":for(l=0;l<cc.length;l++)Nt(cc[l],a);break;case"source":Nt("error",a);break;case"img":case"image":case"link":Nt("error",a),Nt("load",a);break;case"details":Nt("toggle",a);break;case"input":Nt("invalid",a),Kr(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),Ka(a);break;case"select":Nt("invalid",a);break;case"textarea":Nt("invalid",a),Wr(a,h.value,h.defaultValue,h.children),Ka(a)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||h.suppressHydrationWarning===!0||J0(a.textContent,l)?(h.popover!=null&&(Nt("beforetoggle",a),Nt("toggle",a)),h.onScroll!=null&&Nt("scroll",a),h.onScrollEnd!=null&&Nt("scrollend",a),h.onClick!=null&&(a.onclick=Mh),a=!0):a=!1,a||ca(s)}function Ly(s){for(dn=s.return;dn;)switch(dn.tag){case 5:case 13:wi=!1;return;case 27:case 3:wi=!0;return;default:dn=dn.return}}function Ll(s){if(s!==dn)return!1;if(!Yt)return Ly(s),Yt=!0,!1;var a=s.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||bm(s.type,s.memoizedProps)),l=!l),l&&pe&&ca(s),Ly(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));t:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8)if(l=s.data,l==="/$"){if(a===0){pe=ai(s.nextSibling);break t}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;s=s.nextSibling}pe=null}}else a===27?(a=pe,Zs(s.type)?(s=wm,wm=null,pe=s):pe=a):pe=dn?ai(s.stateNode.nextSibling):null;return!0}function Ul(){pe=dn=null,Yt=!1}function Uy(){var s=la;return s!==null&&(_n===null?_n=s:_n.push.apply(_n,s),la=null),s}function zl(s){la===null?la=[s]:la.push(s)}var rg=st(null),ua=null,ss=null;function Ls(s,a,l){at(rg,a._currentValue),a._currentValue=l}function rs(s){s._currentValue=rg.current,ct(rg)}function ag(s,a,l){for(;s!==null;){var h=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),s===l)break;s=s.return}}function og(s,a,l,h){var m=s.child;for(m!==null&&(m.return=s);m!==null;){var p=m.dependencies;if(p!==null){var T=m.child;p=p.firstContext;t:for(;p!==null;){var w=p;p=m;for(var k=0;k<a.length;k++)if(w.context===a[k]){p.lanes|=l,w=p.alternate,w!==null&&(w.lanes|=l),ag(p.return,l,s),h||(T=null);break t}p=w.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(i(341));T.lanes|=l,p=T.alternate,p!==null&&(p.lanes|=l),ag(T,l,s),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===s){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function Bl(s,a,l,h){s=null;for(var m=a,p=!1;m!==null;){if(!p){if((m.flags&524288)!==0)p=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var w=m.type;xn(m.pendingProps.value,T.value)||(s!==null?s.push(w):s=[w])}}else if(m===je.current){if(T=m.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(s!==null?s.push(mc):s=[mc])}m=m.return}s!==null&&og(a,s,l,h),a.flags|=262144}function $u(s){for(s=s.firstContext;s!==null;){if(!xn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ha(s){ua=s,ss=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function sn(s){return zy(ua,s)}function Zu(s,a){return ua===null&&ha(s),zy(s,a)}function zy(s,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},ss===null){if(s===null)throw Error(i(308));ss=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else ss=ss.next=a;return l}var vx=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(l,h){s.push(h)}};this.abort=function(){a.aborted=!0,s.forEach(function(l){return l()})}},bx=n.unstable_scheduleCallback,Ex=n.unstable_NormalPriority,Pe={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lg(){return{controller:new vx,data:new Map,refCount:0}}function jl(s){s.refCount--,s.refCount===0&&bx(Ex,function(){s.controller.abort()})}var Fl=null,cg=0,uo=0,ho=null;function Tx(s,a){if(Fl===null){var l=Fl=[];cg=0,uo=hm(),ho={status:"pending",value:void 0,then:function(h){l.push(h)}}}return cg++,a.then(By,By),a}function By(){if(--cg===0&&Fl!==null){ho!==null&&(ho.status="fulfilled");var s=Fl;Fl=null,uo=0,ho=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function Sx(s,a){var l=[],h={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return s.then(function(){h.status="fulfilled",h.value=a;for(var m=0;m<l.length;m++)(0,l[m])(a)},function(m){for(h.status="rejected",h.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),h}var jy=K.S;K.S=function(s,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&Tx(s,a),jy!==null&&jy(s,a)};var fa=st(null);function ug(){var s=fa.current;return s!==null?s:ae.pooledCache}function Ju(s,a){a===null?at(fa,fa.current):at(fa,a.pool)}function Fy(){var s=ug();return s===null?null:{parent:Pe._currentValue,pool:s}}var Hl=Error(i(460)),Hy=Error(i(474)),th=Error(i(542)),hg={then:function(){}};function qy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function eh(){}function Gy(s,a,l){switch(l=s[l],l===void 0?s.push(a):l!==a&&(a.then(eh,eh),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,Ky(s),s;default:if(typeof a.status=="string")a.then(eh,eh);else{if(s=ae,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(h){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=h}},function(h){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,Ky(s),s}throw ql=a,Hl}}var ql=null;function Yy(){if(ql===null)throw Error(i(459));var s=ql;return ql=null,s}function Ky(s){if(s===Hl||s===th)throw Error(i(483))}var Us=!1;function fg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dg(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function zs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Bs(s,a,l){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,($t&2)!==0){var m=h.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),h.pending=a,a=Ku(s),ky(s,null,l),a}return Yu(s,h,a,l),Ku(s)}function Gl(s,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var h=a.lanes;h&=s.pendingLanes,l|=h,a.lanes=l,vl(s,l)}}function gg(s,a){var l=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var m=null,p=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};p===null?m=p=T:p=p.next=T,l=l.next}while(l!==null);p===null?m=p=a:p=p.next=a}else m=p=a;l={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:p,shared:h.shared,callbacks:h.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=a:s.next=a,l.lastBaseUpdate=a}var mg=!1;function Yl(){if(mg){var s=ho;if(s!==null)throw s}}function Kl(s,a,l,h){mg=!1;var m=s.updateQueue;Us=!1;var p=m.firstBaseUpdate,T=m.lastBaseUpdate,w=m.shared.pending;if(w!==null){m.shared.pending=null;var k=w,q=k.next;k.next=null,T===null?p=q:T.next=q,T=k;var Z=s.alternate;Z!==null&&(Z=Z.updateQueue,w=Z.lastBaseUpdate,w!==T&&(w===null?Z.firstBaseUpdate=q:w.next=q,Z.lastBaseUpdate=k))}if(p!==null){var nt=m.baseState;T=0,Z=q=k=null,w=p;do{var G=w.lane&-536870913,Y=G!==w.lane;if(Y?(zt&G)===G:(h&G)===G){G!==0&&G===uo&&(mg=!0),Z!==null&&(Z=Z.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});t:{var wt=s,vt=w;G=a;var ne=l;switch(vt.tag){case 1:if(wt=vt.payload,typeof wt=="function"){nt=wt.call(ne,nt,G);break t}nt=wt;break t;case 3:wt.flags=wt.flags&-65537|128;case 0:if(wt=vt.payload,G=typeof wt=="function"?wt.call(ne,nt,G):wt,G==null)break t;nt=_({},nt,G);break t;case 2:Us=!0}}G=w.callback,G!==null&&(s.flags|=64,Y&&(s.flags|=8192),Y=m.callbacks,Y===null?m.callbacks=[G]:Y.push(G))}else Y={lane:G,tag:w.tag,payload:w.payload,callback:w.callback,next:null},Z===null?(q=Z=Y,k=nt):Z=Z.next=Y,T|=G;if(w=w.next,w===null){if(w=m.shared.pending,w===null)break;Y=w,w=Y.next,Y.next=null,m.lastBaseUpdate=Y,m.shared.pending=null}}while(!0);Z===null&&(k=nt),m.baseState=k,m.firstBaseUpdate=q,m.lastBaseUpdate=Z,p===null&&(m.shared.lanes=0),Ws|=T,s.lanes=T,s.memoizedState=nt}}function Wy(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function Qy(s,a){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)Wy(l[s],a)}var fo=st(null),nh=st(0);function Xy(s,a){s=fs,at(nh,s),at(fo,a),fs=s|a.baseLanes}function pg(){at(nh,fs),at(fo,fo.current)}function _g(){fs=nh.current,ct(fo),ct(nh)}var js=0,Mt=null,te=null,xe=null,ih=!1,go=!1,da=!1,sh=0,Wl=0,mo=null,wx=0;function be(){throw Error(i(321))}function yg(s,a){if(a===null)return!1;for(var l=0;l<a.length&&l<s.length;l++)if(!xn(s[l],a[l]))return!1;return!0}function vg(s,a,l,h,m,p){return js=p,Mt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,K.H=s===null||s.memoizedState===null?kv:Nv,da=!1,p=l(h,m),da=!1,go&&(p=Zy(a,l,h,m)),$y(s),p}function $y(s){K.H=uh;var a=te!==null&&te.next!==null;if(js=0,xe=te=Mt=null,ih=!1,Wl=0,mo=null,a)throw Error(i(300));s===null||qe||(s=s.dependencies,s!==null&&$u(s)&&(qe=!0))}function Zy(s,a,l,h){Mt=s;var m=0;do{if(go&&(mo=null),Wl=0,go=!1,25<=m)throw Error(i(301));if(m+=1,xe=te=null,s.updateQueue!=null){var p=s.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}K.H=Dx,p=a(l,h)}while(go);return p}function Ax(){var s=K.H,a=s.useState()[0];return a=typeof a.then=="function"?Ql(a):a,s=s.useState()[0],(te!==null?te.memoizedState:null)!==s&&(Mt.flags|=1024),a}function bg(){var s=sh!==0;return sh=0,s}function Eg(s,a,l){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~l}function Tg(s){if(ih){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}ih=!1}js=0,xe=te=Mt=null,go=!1,Wl=sh=0,mo=null}function mn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xe===null?Mt.memoizedState=xe=s:xe=xe.next=s,xe}function Re(){if(te===null){var s=Mt.alternate;s=s!==null?s.memoizedState:null}else s=te.next;var a=xe===null?Mt.memoizedState:xe.next;if(a!==null)xe=a,te=s;else{if(s===null)throw Mt.alternate===null?Error(i(467)):Error(i(310));te=s,s={memoizedState:te.memoizedState,baseState:te.baseState,baseQueue:te.baseQueue,queue:te.queue,next:null},xe===null?Mt.memoizedState=xe=s:xe=xe.next=s}return xe}function Sg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ql(s){var a=Wl;return Wl+=1,mo===null&&(mo=[]),s=Gy(mo,s,a),a=Mt,(xe===null?a.memoizedState:xe.next)===null&&(a=a.alternate,K.H=a===null||a.memoizedState===null?kv:Nv),s}function rh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Ql(s);if(s.$$typeof===X)return sn(s)}throw Error(i(438,String(s)))}function wg(s){var a=null,l=Mt.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var h=Mt.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Sg(),Mt.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(s),h=0;h<s;h++)l[h]=N;return a.index++,l}function as(s,a){return typeof a=="function"?a(s):a}function ah(s){var a=Re();return Ag(a,te,s)}function Ag(s,a,l){var h=s.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=l;var m=s.baseQueue,p=h.pending;if(p!==null){if(m!==null){var T=m.next;m.next=p.next,p.next=T}a.baseQueue=m=p,h.pending=null}if(p=s.baseState,m===null)s.memoizedState=p;else{a=m.next;var w=T=null,k=null,q=a,Z=!1;do{var nt=q.lane&-536870913;if(nt!==q.lane?(zt&nt)===nt:(js&nt)===nt){var G=q.revertLane;if(G===0)k!==null&&(k=k.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),nt===uo&&(Z=!0);else if((js&G)===G){q=q.next,G===uo&&(Z=!0);continue}else nt={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},k===null?(w=k=nt,T=p):k=k.next=nt,Mt.lanes|=G,Ws|=G;nt=q.action,da&&l(p,nt),p=q.hasEagerState?q.eagerState:l(p,nt)}else G={lane:nt,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},k===null?(w=k=G,T=p):k=k.next=G,Mt.lanes|=nt,Ws|=nt;q=q.next}while(q!==null&&q!==a);if(k===null?T=p:k.next=w,!xn(p,s.memoizedState)&&(qe=!0,Z&&(l=ho,l!==null)))throw l;s.memoizedState=p,s.baseState=T,s.baseQueue=k,h.lastRenderedState=p}return m===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function xg(s){var a=Re(),l=a.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var h=l.dispatch,m=l.pending,p=a.memoizedState;if(m!==null){l.pending=null;var T=m=m.next;do p=s(p,T.action),T=T.next;while(T!==m);xn(p,a.memoizedState)||(qe=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),l.lastRenderedState=p}return[p,h]}function Jy(s,a,l){var h=Mt,m=Re(),p=Yt;if(p){if(l===void 0)throw Error(i(407));l=l()}else l=a();var T=!xn((te||m).memoizedState,l);T&&(m.memoizedState=l,qe=!0),m=m.queue;var w=nv.bind(null,h,m,s);if(Xl(2048,8,w,[s]),m.getSnapshot!==a||T||xe!==null&&xe.memoizedState.tag&1){if(h.flags|=2048,po(9,oh(),ev.bind(null,h,m,l,a),null),ae===null)throw Error(i(349));p||(js&124)!==0||tv(h,a,l)}return l}function tv(s,a,l){s.flags|=16384,s={getSnapshot:a,value:l},a=Mt.updateQueue,a===null?(a=Sg(),Mt.updateQueue=a,a.stores=[s]):(l=a.stores,l===null?a.stores=[s]:l.push(s))}function ev(s,a,l,h){a.value=l,a.getSnapshot=h,iv(a)&&sv(s)}function nv(s,a,l){return l(function(){iv(a)&&sv(s)})}function iv(s){var a=s.getSnapshot;s=s.value;try{var l=a();return!xn(s,l)}catch{return!0}}function sv(s){var a=ao(s,2);a!==null&&On(a,s,2)}function Rg(s){var a=mn();if(typeof s=="function"){var l=s;if(s=l(),da){wn(!0);try{l()}finally{wn(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:s},a}function rv(s,a,l,h){return s.baseState=l,Ag(s,te,typeof h=="function"?h:as)}function xx(s,a,l,h,m){if(ch(s))throw Error(i(485));if(s=a.action,s!==null){var p={payload:m,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){p.listeners.push(T)}};K.T!==null?l(!0):p.isTransition=!1,h(p),l=a.pending,l===null?(p.next=a.pending=p,av(a,p)):(p.next=l.next,a.pending=l.next=p)}}function av(s,a){var l=a.action,h=a.payload,m=s.state;if(a.isTransition){var p=K.T,T={};K.T=T;try{var w=l(m,h),k=K.S;k!==null&&k(T,w),ov(s,a,w)}catch(q){Ig(s,a,q)}finally{K.T=p}}else try{p=l(m,h),ov(s,a,p)}catch(q){Ig(s,a,q)}}function ov(s,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){lv(s,a,h)},function(h){return Ig(s,a,h)}):lv(s,a,l)}function lv(s,a,l){a.status="fulfilled",a.value=l,cv(a),s.state=l,a=s.pending,a!==null&&(l=a.next,l===a?s.pending=null:(l=l.next,a.next=l,av(s,l)))}function Ig(s,a,l){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=l,cv(a),a=a.next;while(a!==h)}s.action=null}function cv(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function uv(s,a){return a}function hv(s,a){if(Yt){var l=ae.formState;if(l!==null){t:{var h=Mt;if(Yt){if(pe){e:{for(var m=pe,p=wi;m.nodeType!==8;){if(!p){m=null;break e}if(m=ai(m.nextSibling),m===null){m=null;break e}}p=m.data,m=p==="F!"||p==="F"?m:null}if(m){pe=ai(m.nextSibling),h=m.data==="F!";break t}}ca(h)}h=!1}h&&(a=l[0])}}return l=mn(),l.memoizedState=l.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uv,lastRenderedState:a},l.queue=h,l=Mv.bind(null,Mt,h),h.dispatch=l,h=Rg(!1),p=kg.bind(null,Mt,!1,h.queue),h=mn(),m={state:a,dispatch:null,action:s,pending:null},h.queue=m,l=xx.bind(null,Mt,m,p,l),m.dispatch=l,h.memoizedState=s,[a,l,!1]}function fv(s){var a=Re();return dv(a,te,s)}function dv(s,a,l){if(a=Ag(s,a,uv)[0],s=ah(as)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=Ql(a)}catch(T){throw T===Hl?th:T}else h=a;a=Re();var m=a.queue,p=m.dispatch;return l!==a.memoizedState&&(Mt.flags|=2048,po(9,oh(),Rx.bind(null,m,l),null)),[h,p,s]}function Rx(s,a){s.action=a}function gv(s){var a=Re(),l=te;if(l!==null)return dv(a,l,s);Re(),a=a.memoizedState,l=Re();var h=l.queue.dispatch;return l.memoizedState=s,[a,h,!1]}function po(s,a,l,h){return s={tag:s,create:l,deps:h,inst:a,next:null},a=Mt.updateQueue,a===null&&(a=Sg(),Mt.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=s.next=s:(h=l.next,l.next=s,s.next=h,a.lastEffect=s),s}function oh(){return{destroy:void 0,resource:void 0}}function mv(){return Re().memoizedState}function lh(s,a,l,h){var m=mn();h=h===void 0?null:h,Mt.flags|=s,m.memoizedState=po(1|a,oh(),l,h)}function Xl(s,a,l,h){var m=Re();h=h===void 0?null:h;var p=m.memoizedState.inst;te!==null&&h!==null&&yg(h,te.memoizedState.deps)?m.memoizedState=po(a,p,l,h):(Mt.flags|=s,m.memoizedState=po(1|a,p,l,h))}function pv(s,a){lh(8390656,8,s,a)}function _v(s,a){Xl(2048,8,s,a)}function yv(s,a){return Xl(4,2,s,a)}function vv(s,a){return Xl(4,4,s,a)}function bv(s,a){if(typeof a=="function"){s=s();var l=a(s);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function Ev(s,a,l){l=l!=null?l.concat([s]):null,Xl(4,4,bv.bind(null,a,s),l)}function Cg(){}function Tv(s,a){var l=Re();a=a===void 0?null:a;var h=l.memoizedState;return a!==null&&yg(a,h[1])?h[0]:(l.memoizedState=[s,a],s)}function Sv(s,a){var l=Re();a=a===void 0?null:a;var h=l.memoizedState;if(a!==null&&yg(a,h[1]))return h[0];if(h=s(),da){wn(!0);try{s()}finally{wn(!1)}}return l.memoizedState=[h,a],h}function Mg(s,a,l){return l===void 0||(js&1073741824)!==0?s.memoizedState=a:(s.memoizedState=l,s=x0(),Mt.lanes|=s,Ws|=s,l)}function wv(s,a,l,h){return xn(l,a)?l:fo.current!==null?(s=Mg(s,l,h),xn(s,a)||(qe=!0),s):(js&42)===0?(qe=!0,s.memoizedState=l):(s=x0(),Mt.lanes|=s,Ws|=s,a)}function Av(s,a,l,h,m){var p=rt.p;rt.p=p!==0&&8>p?p:8;var T=K.T,w={};K.T=w,kg(s,!1,a,l);try{var k=m(),q=K.S;if(q!==null&&q(w,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var Z=Sx(k,h);$l(s,a,Z,Dn(s))}else $l(s,a,h,Dn(s))}catch(nt){$l(s,a,{then:function(){},status:"rejected",reason:nt},Dn())}finally{rt.p=p,K.T=T}}function Ix(){}function Dg(s,a,l,h){if(s.tag!==5)throw Error(i(476));var m=xv(s).queue;Av(s,m,a,ft,l===null?Ix:function(){return Rv(s),l(h)})}function xv(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:ft,baseState:ft,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:ft},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:l},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function Rv(s){var a=xv(s).next.queue;$l(s,a,{},Dn())}function Og(){return sn(mc)}function Iv(){return Re().memoizedState}function Cv(){return Re().memoizedState}function Cx(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var l=Dn();s=zs(l);var h=Bs(a,s,l);h!==null&&(On(h,a,l),Gl(h,a,l)),a={cache:lg()},s.payload=a;return}a=a.return}}function Mx(s,a,l){var h=Dn();l={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},ch(s)?Dv(a,l):(l=Zd(s,a,l,h),l!==null&&(On(l,s,h),Ov(l,a,h)))}function Mv(s,a,l){var h=Dn();$l(s,a,l,h)}function $l(s,a,l,h){var m={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(ch(s))Dv(a,m);else{var p=s.alternate;if(s.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var T=a.lastRenderedState,w=p(T,l);if(m.hasEagerState=!0,m.eagerState=w,xn(w,T))return Yu(s,a,m,0),ae===null&&Gu(),!1}catch{}finally{}if(l=Zd(s,a,m,h),l!==null)return On(l,s,h),Ov(l,a,h),!0}return!1}function kg(s,a,l,h){if(h={lane:2,revertLane:hm(),action:h,hasEagerState:!1,eagerState:null,next:null},ch(s)){if(a)throw Error(i(479))}else a=Zd(s,l,h,2),a!==null&&On(a,s,2)}function ch(s){var a=s.alternate;return s===Mt||a!==null&&a===Mt}function Dv(s,a){go=ih=!0;var l=s.pending;l===null?a.next=a:(a.next=l.next,l.next=a),s.pending=a}function Ov(s,a,l){if((l&4194048)!==0){var h=a.lanes;h&=s.pendingLanes,l|=h,a.lanes=l,vl(s,l)}}var uh={readContext:sn,use:rh,useCallback:be,useContext:be,useEffect:be,useImperativeHandle:be,useLayoutEffect:be,useInsertionEffect:be,useMemo:be,useReducer:be,useRef:be,useState:be,useDebugValue:be,useDeferredValue:be,useTransition:be,useSyncExternalStore:be,useId:be,useHostTransitionStatus:be,useFormState:be,useActionState:be,useOptimistic:be,useMemoCache:be,useCacheRefresh:be},kv={readContext:sn,use:rh,useCallback:function(s,a){return mn().memoizedState=[s,a===void 0?null:a],s},useContext:sn,useEffect:pv,useImperativeHandle:function(s,a,l){l=l!=null?l.concat([s]):null,lh(4194308,4,bv.bind(null,a,s),l)},useLayoutEffect:function(s,a){return lh(4194308,4,s,a)},useInsertionEffect:function(s,a){lh(4,2,s,a)},useMemo:function(s,a){var l=mn();a=a===void 0?null:a;var h=s();if(da){wn(!0);try{s()}finally{wn(!1)}}return l.memoizedState=[h,a],h},useReducer:function(s,a,l){var h=mn();if(l!==void 0){var m=l(a);if(da){wn(!0);try{l(a)}finally{wn(!1)}}}else m=a;return h.memoizedState=h.baseState=m,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:m},h.queue=s,s=s.dispatch=Mx.bind(null,Mt,s),[h.memoizedState,s]},useRef:function(s){var a=mn();return s={current:s},a.memoizedState=s},useState:function(s){s=Rg(s);var a=s.queue,l=Mv.bind(null,Mt,a);return a.dispatch=l,[s.memoizedState,l]},useDebugValue:Cg,useDeferredValue:function(s,a){var l=mn();return Mg(l,s,a)},useTransition:function(){var s=Rg(!1);return s=Av.bind(null,Mt,s.queue,!0,!1),mn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,l){var h=Mt,m=mn();if(Yt){if(l===void 0)throw Error(i(407));l=l()}else{if(l=a(),ae===null)throw Error(i(349));(zt&124)!==0||tv(h,a,l)}m.memoizedState=l;var p={value:l,getSnapshot:a};return m.queue=p,pv(nv.bind(null,h,p,s),[s]),h.flags|=2048,po(9,oh(),ev.bind(null,h,p,l,a),null),l},useId:function(){var s=mn(),a=ae.identifierPrefix;if(Yt){var l=is,h=ns;l=(h&~(1<<32-nn(h)-1)).toString(32)+l,a=""+a+"R"+l,l=sh++,0<l&&(a+="H"+l.toString(32)),a+=""}else l=wx++,a=""+a+"r"+l.toString(32)+"";return s.memoizedState=a},useHostTransitionStatus:Og,useFormState:hv,useActionState:hv,useOptimistic:function(s){var a=mn();a.memoizedState=a.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=kg.bind(null,Mt,!0,l),l.dispatch=a,[s,a]},useMemoCache:wg,useCacheRefresh:function(){return mn().memoizedState=Cx.bind(null,Mt)}},Nv={readContext:sn,use:rh,useCallback:Tv,useContext:sn,useEffect:_v,useImperativeHandle:Ev,useInsertionEffect:yv,useLayoutEffect:vv,useMemo:Sv,useReducer:ah,useRef:mv,useState:function(){return ah(as)},useDebugValue:Cg,useDeferredValue:function(s,a){var l=Re();return wv(l,te.memoizedState,s,a)},useTransition:function(){var s=ah(as)[0],a=Re().memoizedState;return[typeof s=="boolean"?s:Ql(s),a]},useSyncExternalStore:Jy,useId:Iv,useHostTransitionStatus:Og,useFormState:fv,useActionState:fv,useOptimistic:function(s,a){var l=Re();return rv(l,te,s,a)},useMemoCache:wg,useCacheRefresh:Cv},Dx={readContext:sn,use:rh,useCallback:Tv,useContext:sn,useEffect:_v,useImperativeHandle:Ev,useInsertionEffect:yv,useLayoutEffect:vv,useMemo:Sv,useReducer:xg,useRef:mv,useState:function(){return xg(as)},useDebugValue:Cg,useDeferredValue:function(s,a){var l=Re();return te===null?Mg(l,s,a):wv(l,te.memoizedState,s,a)},useTransition:function(){var s=xg(as)[0],a=Re().memoizedState;return[typeof s=="boolean"?s:Ql(s),a]},useSyncExternalStore:Jy,useId:Iv,useHostTransitionStatus:Og,useFormState:gv,useActionState:gv,useOptimistic:function(s,a){var l=Re();return te!==null?rv(l,te,s,a):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:wg,useCacheRefresh:Cv},_o=null,Zl=0;function hh(s){var a=Zl;return Zl+=1,_o===null&&(_o=[]),Gy(_o,s,a)}function Jl(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function fh(s,a){throw a.$$typeof===y?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function Pv(s){var a=s._init;return a(s._payload)}function Vv(s){function a(B,U){if(s){var H=B.deletions;H===null?(B.deletions=[U],B.flags|=16):H.push(U)}}function l(B,U){if(!s)return null;for(;U!==null;)a(B,U),U=U.sibling;return null}function h(B){for(var U=new Map;B!==null;)B.key!==null?U.set(B.key,B):U.set(B.index,B),B=B.sibling;return U}function m(B,U){return B=es(B,U),B.index=0,B.sibling=null,B}function p(B,U,H){return B.index=H,s?(H=B.alternate,H!==null?(H=H.index,H<U?(B.flags|=67108866,U):H):(B.flags|=67108866,U)):(B.flags|=1048576,U)}function T(B){return s&&B.alternate===null&&(B.flags|=67108866),B}function w(B,U,H,tt){return U===null||U.tag!==6?(U=tg(H,B.mode,tt),U.return=B,U):(U=m(U,H),U.return=B,U)}function k(B,U,H,tt){var dt=H.type;return dt===R?Z(B,U,H.props.children,tt,H.key):U!==null&&(U.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===x&&Pv(dt)===U.type)?(U=m(U,H.props),Jl(U,H),U.return=B,U):(U=Wu(H.type,H.key,H.props,null,B.mode,tt),Jl(U,H),U.return=B,U)}function q(B,U,H,tt){return U===null||U.tag!==4||U.stateNode.containerInfo!==H.containerInfo||U.stateNode.implementation!==H.implementation?(U=eg(H,B.mode,tt),U.return=B,U):(U=m(U,H.children||[]),U.return=B,U)}function Z(B,U,H,tt,dt){return U===null||U.tag!==7?(U=ra(H,B.mode,tt,dt),U.return=B,U):(U=m(U,H),U.return=B,U)}function nt(B,U,H){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=tg(""+U,B.mode,H),U.return=B,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case b:return H=Wu(U.type,U.key,U.props,null,B.mode,H),Jl(H,U),H.return=B,H;case S:return U=eg(U,B.mode,H),U.return=B,U;case x:var tt=U._init;return U=tt(U._payload),nt(B,U,H)}if(yt(U)||L(U))return U=ra(U,B.mode,H,null),U.return=B,U;if(typeof U.then=="function")return nt(B,hh(U),H);if(U.$$typeof===X)return nt(B,Zu(B,U),H);fh(B,U)}return null}function G(B,U,H,tt){var dt=U!==null?U.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return dt!==null?null:w(B,U,""+H,tt);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case b:return H.key===dt?k(B,U,H,tt):null;case S:return H.key===dt?q(B,U,H,tt):null;case x:return dt=H._init,H=dt(H._payload),G(B,U,H,tt)}if(yt(H)||L(H))return dt!==null?null:Z(B,U,H,tt,null);if(typeof H.then=="function")return G(B,U,hh(H),tt);if(H.$$typeof===X)return G(B,U,Zu(B,H),tt);fh(B,H)}return null}function Y(B,U,H,tt,dt){if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return B=B.get(H)||null,w(U,B,""+tt,dt);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case b:return B=B.get(tt.key===null?H:tt.key)||null,k(U,B,tt,dt);case S:return B=B.get(tt.key===null?H:tt.key)||null,q(U,B,tt,dt);case x:var Ot=tt._init;return tt=Ot(tt._payload),Y(B,U,H,tt,dt)}if(yt(tt)||L(tt))return B=B.get(H)||null,Z(U,B,tt,dt,null);if(typeof tt.then=="function")return Y(B,U,H,hh(tt),dt);if(tt.$$typeof===X)return Y(B,U,H,Zu(U,tt),dt);fh(U,tt)}return null}function wt(B,U,H,tt){for(var dt=null,Ot=null,mt=U,bt=U=0,Ye=null;mt!==null&&bt<H.length;bt++){mt.index>bt?(Ye=mt,mt=null):Ye=mt.sibling;var Ht=G(B,mt,H[bt],tt);if(Ht===null){mt===null&&(mt=Ye);break}s&&mt&&Ht.alternate===null&&a(B,mt),U=p(Ht,U,bt),Ot===null?dt=Ht:Ot.sibling=Ht,Ot=Ht,mt=Ye}if(bt===H.length)return l(B,mt),Yt&&oa(B,bt),dt;if(mt===null){for(;bt<H.length;bt++)mt=nt(B,H[bt],tt),mt!==null&&(U=p(mt,U,bt),Ot===null?dt=mt:Ot.sibling=mt,Ot=mt);return Yt&&oa(B,bt),dt}for(mt=h(mt);bt<H.length;bt++)Ye=Y(mt,B,bt,H[bt],tt),Ye!==null&&(s&&Ye.alternate!==null&&mt.delete(Ye.key===null?bt:Ye.key),U=p(Ye,U,bt),Ot===null?dt=Ye:Ot.sibling=Ye,Ot=Ye);return s&&mt.forEach(function(ir){return a(B,ir)}),Yt&&oa(B,bt),dt}function vt(B,U,H,tt){if(H==null)throw Error(i(151));for(var dt=null,Ot=null,mt=U,bt=U=0,Ye=null,Ht=H.next();mt!==null&&!Ht.done;bt++,Ht=H.next()){mt.index>bt?(Ye=mt,mt=null):Ye=mt.sibling;var ir=G(B,mt,Ht.value,tt);if(ir===null){mt===null&&(mt=Ye);break}s&&mt&&ir.alternate===null&&a(B,mt),U=p(ir,U,bt),Ot===null?dt=ir:Ot.sibling=ir,Ot=ir,mt=Ye}if(Ht.done)return l(B,mt),Yt&&oa(B,bt),dt;if(mt===null){for(;!Ht.done;bt++,Ht=H.next())Ht=nt(B,Ht.value,tt),Ht!==null&&(U=p(Ht,U,bt),Ot===null?dt=Ht:Ot.sibling=Ht,Ot=Ht);return Yt&&oa(B,bt),dt}for(mt=h(mt);!Ht.done;bt++,Ht=H.next())Ht=Y(mt,B,bt,Ht.value,tt),Ht!==null&&(s&&Ht.alternate!==null&&mt.delete(Ht.key===null?bt:Ht.key),U=p(Ht,U,bt),Ot===null?dt=Ht:Ot.sibling=Ht,Ot=Ht);return s&&mt.forEach(function(OR){return a(B,OR)}),Yt&&oa(B,bt),dt}function ne(B,U,H,tt){if(typeof H=="object"&&H!==null&&H.type===R&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case b:t:{for(var dt=H.key;U!==null;){if(U.key===dt){if(dt=H.type,dt===R){if(U.tag===7){l(B,U.sibling),tt=m(U,H.props.children),tt.return=B,B=tt;break t}}else if(U.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===x&&Pv(dt)===U.type){l(B,U.sibling),tt=m(U,H.props),Jl(tt,H),tt.return=B,B=tt;break t}l(B,U);break}else a(B,U);U=U.sibling}H.type===R?(tt=ra(H.props.children,B.mode,tt,H.key),tt.return=B,B=tt):(tt=Wu(H.type,H.key,H.props,null,B.mode,tt),Jl(tt,H),tt.return=B,B=tt)}return T(B);case S:t:{for(dt=H.key;U!==null;){if(U.key===dt)if(U.tag===4&&U.stateNode.containerInfo===H.containerInfo&&U.stateNode.implementation===H.implementation){l(B,U.sibling),tt=m(U,H.children||[]),tt.return=B,B=tt;break t}else{l(B,U);break}else a(B,U);U=U.sibling}tt=eg(H,B.mode,tt),tt.return=B,B=tt}return T(B);case x:return dt=H._init,H=dt(H._payload),ne(B,U,H,tt)}if(yt(H))return wt(B,U,H,tt);if(L(H)){if(dt=L(H),typeof dt!="function")throw Error(i(150));return H=dt.call(H),vt(B,U,H,tt)}if(typeof H.then=="function")return ne(B,U,hh(H),tt);if(H.$$typeof===X)return ne(B,U,Zu(B,H),tt);fh(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,U!==null&&U.tag===6?(l(B,U.sibling),tt=m(U,H),tt.return=B,B=tt):(l(B,U),tt=tg(H,B.mode,tt),tt.return=B,B=tt),T(B)):l(B,U)}return function(B,U,H,tt){try{Zl=0;var dt=ne(B,U,H,tt);return _o=null,dt}catch(mt){if(mt===Hl||mt===th)throw mt;var Ot=Rn(29,mt,null,B.mode);return Ot.lanes=tt,Ot.return=B,Ot}finally{}}}var yo=Vv(!0),Lv=Vv(!1),Kn=st(null),Ai=null;function Fs(s){var a=s.alternate;at(Ve,Ve.current&1),at(Kn,s),Ai===null&&(a===null||fo.current!==null||a.memoizedState!==null)&&(Ai=s)}function Uv(s){if(s.tag===22){if(at(Ve,Ve.current),at(Kn,s),Ai===null){var a=s.alternate;a!==null&&a.memoizedState!==null&&(Ai=s)}}else Hs()}function Hs(){at(Ve,Ve.current),at(Kn,Kn.current)}function os(s){ct(Kn),Ai===s&&(Ai=null),ct(Ve)}var Ve=st(0);function dh(s){for(var a=s;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||Sm(l)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Ng(s,a,l,h){a=s.memoizedState,l=l(h,a),l=l==null?a:_({},a,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Pg={enqueueSetState:function(s,a,l){s=s._reactInternals;var h=Dn(),m=zs(h);m.payload=a,l!=null&&(m.callback=l),a=Bs(s,m,h),a!==null&&(On(a,s,h),Gl(a,s,h))},enqueueReplaceState:function(s,a,l){s=s._reactInternals;var h=Dn(),m=zs(h);m.tag=1,m.payload=a,l!=null&&(m.callback=l),a=Bs(s,m,h),a!==null&&(On(a,s,h),Gl(a,s,h))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var l=Dn(),h=zs(l);h.tag=2,a!=null&&(h.callback=a),a=Bs(s,h,l),a!==null&&(On(a,s,l),Gl(a,s,l))}};function zv(s,a,l,h,m,p,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,p,T):a.prototype&&a.prototype.isPureReactComponent?!Pl(l,h)||!Pl(m,p):!0}function Bv(s,a,l,h){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,h),a.state!==s&&Pg.enqueueReplaceState(a,a.state,null)}function ga(s,a){var l=a;if("ref"in a){l={};for(var h in a)h!=="ref"&&(l[h]=a[h])}if(s=s.defaultProps){l===a&&(l=_({},l));for(var m in s)l[m]===void 0&&(l[m]=s[m])}return l}var gh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function jv(s){gh(s)}function Fv(s){console.error(s)}function Hv(s){gh(s)}function mh(s,a){try{var l=s.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function qv(s,a,l){try{var h=s.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Vg(s,a,l){return l=zs(l),l.tag=3,l.payload={element:null},l.callback=function(){mh(s,a)},l}function Gv(s){return s=zs(s),s.tag=3,s}function Yv(s,a,l,h){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var p=h.value;s.payload=function(){return m(p)},s.callback=function(){qv(a,l,h)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(s.callback=function(){qv(a,l,h),typeof m!="function"&&(Qs===null?Qs=new Set([this]):Qs.add(this));var w=h.stack;this.componentDidCatch(h.value,{componentStack:w!==null?w:""})})}function Ox(s,a,l,h,m){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=l.alternate,a!==null&&Bl(a,l,m,!0),l=Kn.current,l!==null){switch(l.tag){case 13:return Ai===null?am():l.alternate===null&&_e===0&&(_e=3),l.flags&=-257,l.flags|=65536,l.lanes=m,h===hg?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([h]):a.add(h),lm(s,h,m)),!1;case 22:return l.flags|=65536,h===hg?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([h]):l.add(h)),lm(s,h,m)),!1}throw Error(i(435,l.tag))}return lm(s,h,m),am(),!1}if(Yt)return a=Kn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,h!==sg&&(s=Error(i(422),{cause:h}),zl(Hn(s,l)))):(h!==sg&&(a=Error(i(423),{cause:h}),zl(Hn(a,l))),s=s.current.alternate,s.flags|=65536,m&=-m,s.lanes|=m,h=Hn(h,l),m=Vg(s.stateNode,h,m),gg(s,m),_e!==4&&(_e=2)),!1;var p=Error(i(520),{cause:h});if(p=Hn(p,l),ac===null?ac=[p]:ac.push(p),_e!==4&&(_e=2),a===null)return!0;h=Hn(h,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,s=m&-m,l.lanes|=s,s=Vg(l.stateNode,h,s),gg(l,s),!1;case 1:if(a=l.type,p=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Qs===null||!Qs.has(p))))return l.flags|=65536,m&=-m,l.lanes|=m,m=Gv(m),Yv(m,s,l,h),gg(l,m),!1}l=l.return}while(l!==null);return!1}var Kv=Error(i(461)),qe=!1;function Xe(s,a,l,h){a.child=s===null?Lv(a,null,l,h):yo(a,s.child,l,h)}function Wv(s,a,l,h,m){l=l.render;var p=a.ref;if("ref"in h){var T={};for(var w in h)w!=="ref"&&(T[w]=h[w])}else T=h;return ha(a),h=vg(s,a,l,T,p,m),w=bg(),s!==null&&!qe?(Eg(s,a,m),ls(s,a,m)):(Yt&&w&&ng(a),a.flags|=1,Xe(s,a,h,m),a.child)}function Qv(s,a,l,h,m){if(s===null){var p=l.type;return typeof p=="function"&&!Jd(p)&&p.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=p,Xv(s,a,p,h,m)):(s=Wu(l.type,null,h,a,a.mode,m),s.ref=a.ref,s.return=a,a.child=s)}if(p=s.child,!qg(s,m)){var T=p.memoizedProps;if(l=l.compare,l=l!==null?l:Pl,l(T,h)&&s.ref===a.ref)return ls(s,a,m)}return a.flags|=1,s=es(p,h),s.ref=a.ref,s.return=a,a.child=s}function Xv(s,a,l,h,m){if(s!==null){var p=s.memoizedProps;if(Pl(p,h)&&s.ref===a.ref)if(qe=!1,a.pendingProps=h=p,qg(s,m))(s.flags&131072)!==0&&(qe=!0);else return a.lanes=s.lanes,ls(s,a,m)}return Lg(s,a,l,h,m)}function $v(s,a,l){var h=a.pendingProps,m=h.children,p=s!==null?s.memoizedState:null;if(h.mode==="hidden"){if((a.flags&128)!==0){if(h=p!==null?p.baseLanes|l:l,s!==null){for(m=a.child=s.child,p=0;m!==null;)p=p|m.lanes|m.childLanes,m=m.sibling;a.childLanes=p&~h}else a.childLanes=0,a.child=null;return Zv(s,a,h,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Ju(a,p!==null?p.cachePool:null),p!==null?Xy(a,p):pg(),Uv(a);else return a.lanes=a.childLanes=536870912,Zv(s,a,p!==null?p.baseLanes|l:l,l)}else p!==null?(Ju(a,p.cachePool),Xy(a,p),Hs(),a.memoizedState=null):(s!==null&&Ju(a,null),pg(),Hs());return Xe(s,a,m,l),a.child}function Zv(s,a,l,h){var m=ug();return m=m===null?null:{parent:Pe._currentValue,pool:m},a.memoizedState={baseLanes:l,cachePool:m},s!==null&&Ju(a,null),pg(),Uv(a),s!==null&&Bl(s,a,h,!0),null}function ph(s,a){var l=a.ref;if(l===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(a.flags|=4194816)}}function Lg(s,a,l,h,m){return ha(a),l=vg(s,a,l,h,void 0,m),h=bg(),s!==null&&!qe?(Eg(s,a,m),ls(s,a,m)):(Yt&&h&&ng(a),a.flags|=1,Xe(s,a,l,m),a.child)}function Jv(s,a,l,h,m,p){return ha(a),a.updateQueue=null,l=Zy(a,h,l,m),$y(s),h=bg(),s!==null&&!qe?(Eg(s,a,p),ls(s,a,p)):(Yt&&h&&ng(a),a.flags|=1,Xe(s,a,l,p),a.child)}function t0(s,a,l,h,m){if(ha(a),a.stateNode===null){var p=oo,T=l.contextType;typeof T=="object"&&T!==null&&(p=sn(T)),p=new l(h,p),a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Pg,a.stateNode=p,p._reactInternals=a,p=a.stateNode,p.props=h,p.state=a.memoizedState,p.refs={},fg(a),T=l.contextType,p.context=typeof T=="object"&&T!==null?sn(T):oo,p.state=a.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(Ng(a,l,T,h),p.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(T=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),T!==p.state&&Pg.enqueueReplaceState(p,p.state,null),Kl(a,h,p,m),Yl(),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(s===null){p=a.stateNode;var w=a.memoizedProps,k=ga(l,w);p.props=k;var q=p.context,Z=l.contextType;T=oo,typeof Z=="object"&&Z!==null&&(T=sn(Z));var nt=l.getDerivedStateFromProps;Z=typeof nt=="function"||typeof p.getSnapshotBeforeUpdate=="function",w=a.pendingProps!==w,Z||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w||q!==T)&&Bv(a,p,h,T),Us=!1;var G=a.memoizedState;p.state=G,Kl(a,h,p,m),Yl(),q=a.memoizedState,w||G!==q||Us?(typeof nt=="function"&&(Ng(a,l,nt,h),q=a.memoizedState),(k=Us||zv(a,l,k,h,G,q,T))?(Z||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(a.flags|=4194308)):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=q),p.props=h,p.state=q,p.context=T,h=k):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{p=a.stateNode,dg(s,a),T=a.memoizedProps,Z=ga(l,T),p.props=Z,nt=a.pendingProps,G=p.context,q=l.contextType,k=oo,typeof q=="object"&&q!==null&&(k=sn(q)),w=l.getDerivedStateFromProps,(q=typeof w=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T!==nt||G!==k)&&Bv(a,p,h,k),Us=!1,G=a.memoizedState,p.state=G,Kl(a,h,p,m),Yl();var Y=a.memoizedState;T!==nt||G!==Y||Us||s!==null&&s.dependencies!==null&&$u(s.dependencies)?(typeof w=="function"&&(Ng(a,l,w,h),Y=a.memoizedState),(Z=Us||zv(a,l,Z,h,G,Y,k)||s!==null&&s.dependencies!==null&&$u(s.dependencies))?(q||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(h,Y,k),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(h,Y,k)),typeof p.componentDidUpdate=="function"&&(a.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof p.componentDidUpdate!="function"||T===s.memoizedProps&&G===s.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&G===s.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=Y),p.props=h,p.state=Y,p.context=k,h=Z):(typeof p.componentDidUpdate!="function"||T===s.memoizedProps&&G===s.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&G===s.memoizedState||(a.flags|=1024),h=!1)}return p=h,ph(s,a),h=(a.flags&128)!==0,p||h?(p=a.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:p.render(),a.flags|=1,s!==null&&h?(a.child=yo(a,s.child,null,m),a.child=yo(a,null,l,m)):Xe(s,a,l,m),a.memoizedState=p.state,s=a.child):s=ls(s,a,m),s}function e0(s,a,l,h){return Ul(),a.flags|=256,Xe(s,a,l,h),a.child}var Ug={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zg(s){return{baseLanes:s,cachePool:Fy()}}function Bg(s,a,l){return s=s!==null?s.childLanes&~l:0,a&&(s|=Wn),s}function n0(s,a,l){var h=a.pendingProps,m=!1,p=(a.flags&128)!==0,T;if((T=p)||(T=s!==null&&s.memoizedState===null?!1:(Ve.current&2)!==0),T&&(m=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,s===null){if(Yt){if(m?Fs(a):Hs(),Yt){var w=pe,k;if(k=w){t:{for(k=w,w=wi;k.nodeType!==8;){if(!w){w=null;break t}if(k=ai(k.nextSibling),k===null){w=null;break t}}w=k}w!==null?(a.memoizedState={dehydrated:w,treeContext:aa!==null?{id:ns,overflow:is}:null,retryLane:536870912,hydrationErrors:null},k=Rn(18,null,null,0),k.stateNode=w,k.return=a,a.child=k,dn=a,pe=null,k=!0):k=!1}k||ca(a)}if(w=a.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return Sm(w)?a.lanes=32:a.lanes=536870912,null;os(a)}return w=h.children,h=h.fallback,m?(Hs(),m=a.mode,w=_h({mode:"hidden",children:w},m),h=ra(h,m,l,null),w.return=a,h.return=a,w.sibling=h,a.child=w,m=a.child,m.memoizedState=zg(l),m.childLanes=Bg(s,T,l),a.memoizedState=Ug,h):(Fs(a),jg(a,w))}if(k=s.memoizedState,k!==null&&(w=k.dehydrated,w!==null)){if(p)a.flags&256?(Fs(a),a.flags&=-257,a=Fg(s,a,l)):a.memoizedState!==null?(Hs(),a.child=s.child,a.flags|=128,a=null):(Hs(),m=h.fallback,w=a.mode,h=_h({mode:"visible",children:h.children},w),m=ra(m,w,l,null),m.flags|=2,h.return=a,m.return=a,h.sibling=m,a.child=h,yo(a,s.child,null,l),h=a.child,h.memoizedState=zg(l),h.childLanes=Bg(s,T,l),a.memoizedState=Ug,a=m);else if(Fs(a),Sm(w)){if(T=w.nextSibling&&w.nextSibling.dataset,T)var q=T.dgst;T=q,h=Error(i(419)),h.stack="",h.digest=T,zl({value:h,source:null,stack:null}),a=Fg(s,a,l)}else if(qe||Bl(s,a,l,!1),T=(l&s.childLanes)!==0,qe||T){if(T=ae,T!==null&&(h=l&-l,h=(h&42)!==0?1:Ms(h),h=(h&(T.suspendedLanes|l))!==0?0:h,h!==0&&h!==k.retryLane))throw k.retryLane=h,ao(s,h),On(T,s,h),Kv;w.data==="$?"||am(),a=Fg(s,a,l)}else w.data==="$?"?(a.flags|=192,a.child=s.child,a=null):(s=k.treeContext,pe=ai(w.nextSibling),dn=a,Yt=!0,la=null,wi=!1,s!==null&&(Gn[Yn++]=ns,Gn[Yn++]=is,Gn[Yn++]=aa,ns=s.id,is=s.overflow,aa=a),a=jg(a,h.children),a.flags|=4096);return a}return m?(Hs(),m=h.fallback,w=a.mode,k=s.child,q=k.sibling,h=es(k,{mode:"hidden",children:h.children}),h.subtreeFlags=k.subtreeFlags&65011712,q!==null?m=es(q,m):(m=ra(m,w,l,null),m.flags|=2),m.return=a,h.return=a,h.sibling=m,a.child=h,h=m,m=a.child,w=s.child.memoizedState,w===null?w=zg(l):(k=w.cachePool,k!==null?(q=Pe._currentValue,k=k.parent!==q?{parent:q,pool:q}:k):k=Fy(),w={baseLanes:w.baseLanes|l,cachePool:k}),m.memoizedState=w,m.childLanes=Bg(s,T,l),a.memoizedState=Ug,h):(Fs(a),l=s.child,s=l.sibling,l=es(l,{mode:"visible",children:h.children}),l.return=a,l.sibling=null,s!==null&&(T=a.deletions,T===null?(a.deletions=[s],a.flags|=16):T.push(s)),a.child=l,a.memoizedState=null,l)}function jg(s,a){return a=_h({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function _h(s,a){return s=Rn(22,s,null,a),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Fg(s,a,l){return yo(a,s.child,null,l),s=jg(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function i0(s,a,l){s.lanes|=a;var h=s.alternate;h!==null&&(h.lanes|=a),ag(s.return,a,l)}function Hg(s,a,l,h,m){var p=s.memoizedState;p===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:m}:(p.isBackwards=a,p.rendering=null,p.renderingStartTime=0,p.last=h,p.tail=l,p.tailMode=m)}function s0(s,a,l){var h=a.pendingProps,m=h.revealOrder,p=h.tail;if(Xe(s,a,h.children,l),h=Ve.current,(h&2)!==0)h=h&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&i0(s,l,a);else if(s.tag===19)i0(s,l,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break t;for(;s.sibling===null;){if(s.return===null||s.return===a)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}h&=1}switch(at(Ve,h),m){case"forwards":for(l=a.child,m=null;l!==null;)s=l.alternate,s!==null&&dh(s)===null&&(m=l),l=l.sibling;l=m,l===null?(m=a.child,a.child=null):(m=l.sibling,l.sibling=null),Hg(a,!1,m,l,p);break;case"backwards":for(l=null,m=a.child,a.child=null;m!==null;){if(s=m.alternate,s!==null&&dh(s)===null){a.child=m;break}s=m.sibling,m.sibling=l,l=m,m=s}Hg(a,!0,l,null,p);break;case"together":Hg(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function ls(s,a,l){if(s!==null&&(a.dependencies=s.dependencies),Ws|=a.lanes,(l&a.childLanes)===0)if(s!==null){if(Bl(s,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,l=es(s,s.pendingProps),a.child=l,l.return=a;s.sibling!==null;)s=s.sibling,l=l.sibling=es(s,s.pendingProps),l.return=a;l.sibling=null}return a.child}function qg(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&$u(s)))}function kx(s,a,l){switch(a.tag){case 3:re(a,a.stateNode.containerInfo),Ls(a,Pe,s.memoizedState.cache),Ul();break;case 27:case 5:Cs(a);break;case 4:re(a,a.stateNode.containerInfo);break;case 10:Ls(a,a.type,a.memoizedProps.value);break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(Fs(a),a.flags|=128,null):(l&a.child.childLanes)!==0?n0(s,a,l):(Fs(a),s=ls(s,a,l),s!==null?s.sibling:null);Fs(a);break;case 19:var m=(s.flags&128)!==0;if(h=(l&a.childLanes)!==0,h||(Bl(s,a,l,!1),h=(l&a.childLanes)!==0),m){if(h)return s0(s,a,l);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),at(Ve,Ve.current),h)break;return null;case 22:case 23:return a.lanes=0,$v(s,a,l);case 24:Ls(a,Pe,s.memoizedState.cache)}return ls(s,a,l)}function r0(s,a,l){if(s!==null)if(s.memoizedProps!==a.pendingProps)qe=!0;else{if(!qg(s,l)&&(a.flags&128)===0)return qe=!1,kx(s,a,l);qe=(s.flags&131072)!==0}else qe=!1,Yt&&(a.flags&1048576)!==0&&Py(a,Xu,a.index);switch(a.lanes=0,a.tag){case 16:t:{s=a.pendingProps;var h=a.elementType,m=h._init;if(h=m(h._payload),a.type=h,typeof h=="function")Jd(h)?(s=ga(h,s),a.tag=1,a=t0(null,a,h,s,l)):(a.tag=0,a=Lg(null,a,h,s,l));else{if(h!=null){if(m=h.$$typeof,m===$){a.tag=11,a=Wv(null,a,h,s,l);break t}else if(m===D){a.tag=14,a=Qv(null,a,h,s,l);break t}}throw a=Gt(h)||h,Error(i(306,a,""))}}return a;case 0:return Lg(s,a,a.type,a.pendingProps,l);case 1:return h=a.type,m=ga(h,a.pendingProps),t0(s,a,h,m,l);case 3:t:{if(re(a,a.stateNode.containerInfo),s===null)throw Error(i(387));h=a.pendingProps;var p=a.memoizedState;m=p.element,dg(s,a),Kl(a,h,null,l);var T=a.memoizedState;if(h=T.cache,Ls(a,Pe,h),h!==p.cache&&og(a,[Pe],l,!0),Yl(),h=T.element,p.isDehydrated)if(p={element:h,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=e0(s,a,h,l);break t}else if(h!==m){m=Hn(Error(i(424)),a),zl(m),a=e0(s,a,h,l);break t}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(pe=ai(s.firstChild),dn=a,Yt=!0,la=null,wi=!0,l=Lv(a,null,h,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Ul(),h===m){a=ls(s,a,l);break t}Xe(s,a,h,l)}a=a.child}return a;case 26:return ph(s,a),s===null?(l=cb(a.type,null,a.pendingProps,null))?a.memoizedState=l:Yt||(l=a.type,s=a.pendingProps,h=Dh(_t.current).createElement(l),h[Oe]=a,h[we]=s,Ze(h,l,s),ve(h),a.stateNode=h):a.memoizedState=cb(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Cs(a),s===null&&Yt&&(h=a.stateNode=ab(a.type,a.pendingProps,_t.current),dn=a,wi=!0,m=pe,Zs(a.type)?(wm=m,pe=ai(h.firstChild)):pe=m),Xe(s,a,a.pendingProps.children,l),ph(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&Yt&&((m=h=pe)&&(h=oR(h,a.type,a.pendingProps,wi),h!==null?(a.stateNode=h,dn=a,pe=ai(h.firstChild),wi=!1,m=!0):m=!1),m||ca(a)),Cs(a),m=a.type,p=a.pendingProps,T=s!==null?s.memoizedProps:null,h=p.children,bm(m,p)?h=null:T!==null&&bm(m,T)&&(a.flags|=32),a.memoizedState!==null&&(m=vg(s,a,Ax,null,null,l),mc._currentValue=m),ph(s,a),Xe(s,a,h,l),a.child;case 6:return s===null&&Yt&&((s=l=pe)&&(l=lR(l,a.pendingProps,wi),l!==null?(a.stateNode=l,dn=a,pe=null,s=!0):s=!1),s||ca(a)),null;case 13:return n0(s,a,l);case 4:return re(a,a.stateNode.containerInfo),h=a.pendingProps,s===null?a.child=yo(a,null,h,l):Xe(s,a,h,l),a.child;case 11:return Wv(s,a,a.type,a.pendingProps,l);case 7:return Xe(s,a,a.pendingProps,l),a.child;case 8:return Xe(s,a,a.pendingProps.children,l),a.child;case 12:return Xe(s,a,a.pendingProps.children,l),a.child;case 10:return h=a.pendingProps,Ls(a,a.type,h.value),Xe(s,a,h.children,l),a.child;case 9:return m=a.type._context,h=a.pendingProps.children,ha(a),m=sn(m),h=h(m),a.flags|=1,Xe(s,a,h,l),a.child;case 14:return Qv(s,a,a.type,a.pendingProps,l);case 15:return Xv(s,a,a.type,a.pendingProps,l);case 19:return s0(s,a,l);case 31:return h=a.pendingProps,l=a.mode,h={mode:h.mode,children:h.children},s===null?(l=_h(h,l),l.ref=a.ref,a.child=l,l.return=a,a=l):(l=es(s.child,h),l.ref=a.ref,a.child=l,l.return=a,a=l),a;case 22:return $v(s,a,l);case 24:return ha(a),h=sn(Pe),s===null?(m=ug(),m===null&&(m=ae,p=lg(),m.pooledCache=p,p.refCount++,p!==null&&(m.pooledCacheLanes|=l),m=p),a.memoizedState={parent:h,cache:m},fg(a),Ls(a,Pe,m)):((s.lanes&l)!==0&&(dg(s,a),Kl(a,null,null,l),Yl()),m=s.memoizedState,p=a.memoizedState,m.parent!==h?(m={parent:h,cache:h},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),Ls(a,Pe,h)):(h=p.cache,Ls(a,Pe,h),h!==m.cache&&og(a,[Pe],l,!0))),Xe(s,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function cs(s){s.flags|=4}function a0(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!gb(a)){if(a=Kn.current,a!==null&&((zt&4194048)===zt?Ai!==null:(zt&62914560)!==zt&&(zt&536870912)===0||a!==Ai))throw ql=hg,Hy;s.flags|=8192}}function yh(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?_l():536870912,s.lanes|=a,To|=a)}function tc(s,a){if(!Yt)switch(s.tailMode){case"hidden":a=s.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function de(s){var a=s.alternate!==null&&s.alternate.child===s.child,l=0,h=0;if(a)for(var m=s.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags&65011712,h|=m.flags&65011712,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=h,s.childLanes=l,a}function Nx(s,a,l){var h=a.pendingProps;switch(ig(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return de(a),null;case 1:return de(a),null;case 3:return l=a.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),rs(Pe),fi(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Ll(a)?cs(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Uy())),de(a),null;case 26:return l=a.memoizedState,s===null?(cs(a),l!==null?(de(a),a0(a,l)):(de(a),a.flags&=-16777217)):l?l!==s.memoizedState?(cs(a),de(a),a0(a,l)):(de(a),a.flags&=-16777217):(s.memoizedProps!==h&&cs(a),de(a),a.flags&=-16777217),null;case 27:Fi(a),l=_t.current;var m=a.type;if(s!==null&&a.stateNode!=null)s.memoizedProps!==h&&cs(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return de(a),null}s=gt.current,Ll(a)?Vy(a):(s=ab(m,h,l),a.stateNode=s,cs(a))}return de(a),null;case 5:if(Fi(a),l=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&cs(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return de(a),null}if(s=gt.current,Ll(a))Vy(a);else{switch(m=Dh(_t.current),s){case 1:s=m.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:s=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":s=m.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":s=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":s=m.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof h.is=="string"?m.createElement("select",{is:h.is}):m.createElement("select"),h.multiple?s.multiple=!0:h.size&&(s.size=h.size);break;default:s=typeof h.is=="string"?m.createElement(l,{is:h.is}):m.createElement(l)}}s[Oe]=a,s[we]=h;t:for(m=a.child;m!==null;){if(m.tag===5||m.tag===6)s.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===a)break t;for(;m.sibling===null;){if(m.return===null||m.return===a)break t;m=m.return}m.sibling.return=m.return,m=m.sibling}a.stateNode=s;t:switch(Ze(s,l,h),l){case"button":case"input":case"select":case"textarea":s=!!h.autoFocus;break t;case"img":s=!0;break t;default:s=!1}s&&cs(a)}}return de(a),a.flags&=-16777217,null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==h&&cs(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(i(166));if(s=_t.current,Ll(a)){if(s=a.stateNode,l=a.memoizedProps,h=null,m=dn,m!==null)switch(m.tag){case 27:case 5:h=m.memoizedProps}s[Oe]=a,s=!!(s.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||J0(s.nodeValue,l)),s||ca(a)}else s=Dh(s).createTextNode(h),s[Oe]=a,a.stateNode=s}return de(a),null;case 13:if(h=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(m=Ll(a),h!==null&&h.dehydrated!==null){if(s===null){if(!m)throw Error(i(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[Oe]=a}else Ul(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;de(a),m=!1}else m=Uy(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(os(a),a):(os(a),null)}if(os(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=h!==null,s=s!==null&&s.memoizedState!==null,l){h=a.child,m=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(m=h.alternate.memoizedState.cachePool.pool);var p=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(p=h.memoizedState.cachePool.pool),p!==m&&(h.flags|=2048)}return l!==s&&l&&(a.child.flags|=8192),yh(a,a.updateQueue),de(a),null;case 4:return fi(),s===null&&mm(a.stateNode.containerInfo),de(a),null;case 10:return rs(a.type),de(a),null;case 19:if(ct(Ve),m=a.memoizedState,m===null)return de(a),null;if(h=(a.flags&128)!==0,p=m.rendering,p===null)if(h)tc(m,!1);else{if(_e!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(p=dh(s),p!==null){for(a.flags|=128,tc(m,!1),s=p.updateQueue,a.updateQueue=s,yh(a,s),a.subtreeFlags=0,s=l,l=a.child;l!==null;)Ny(l,s),l=l.sibling;return at(Ve,Ve.current&1|2),a.child}s=s.sibling}m.tail!==null&&Ln()>Eh&&(a.flags|=128,h=!0,tc(m,!1),a.lanes=4194304)}else{if(!h)if(s=dh(p),s!==null){if(a.flags|=128,h=!0,s=s.updateQueue,a.updateQueue=s,yh(a,s),tc(m,!0),m.tail===null&&m.tailMode==="hidden"&&!p.alternate&&!Yt)return de(a),null}else 2*Ln()-m.renderingStartTime>Eh&&l!==536870912&&(a.flags|=128,h=!0,tc(m,!1),a.lanes=4194304);m.isBackwards?(p.sibling=a.child,a.child=p):(s=m.last,s!==null?s.sibling=p:a.child=p,m.last=p)}return m.tail!==null?(a=m.tail,m.rendering=a,m.tail=a.sibling,m.renderingStartTime=Ln(),a.sibling=null,s=Ve.current,at(Ve,h?s&1|2:s&1),a):(de(a),null);case 22:case 23:return os(a),_g(),h=a.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(l&536870912)!==0&&(a.flags&128)===0&&(de(a),a.subtreeFlags&6&&(a.flags|=8192)):de(a),l=a.updateQueue,l!==null&&yh(a,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==l&&(a.flags|=2048),s!==null&&ct(fa),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),rs(Pe),de(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function Px(s,a){switch(ig(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return rs(Pe),fi(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return Fi(a),null;case 13:if(os(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Ul()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return ct(Ve),null;case 4:return fi(),null;case 10:return rs(a.type),null;case 22:case 23:return os(a),_g(),s!==null&&ct(fa),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return rs(Pe),null;case 25:return null;default:return null}}function o0(s,a){switch(ig(a),a.tag){case 3:rs(Pe),fi();break;case 26:case 27:case 5:Fi(a);break;case 4:fi();break;case 13:os(a);break;case 19:ct(Ve);break;case 10:rs(a.type);break;case 22:case 23:os(a),_g(),s!==null&&ct(fa);break;case 24:rs(Pe)}}function ec(s,a){try{var l=a.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&s)===s){h=void 0;var p=l.create,T=l.inst;h=p(),T.destroy=h}l=l.next}while(l!==m)}}catch(w){ie(a,a.return,w)}}function qs(s,a,l){try{var h=a.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var p=m.next;h=p;do{if((h.tag&s)===s){var T=h.inst,w=T.destroy;if(w!==void 0){T.destroy=void 0,m=a;var k=l,q=w;try{q()}catch(Z){ie(m,k,Z)}}}h=h.next}while(h!==p)}}catch(Z){ie(a,a.return,Z)}}function l0(s){var a=s.updateQueue;if(a!==null){var l=s.stateNode;try{Qy(a,l)}catch(h){ie(s,s.return,h)}}}function c0(s,a,l){l.props=ga(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(h){ie(s,a,h)}}function nc(s,a){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof l=="function"?s.refCleanup=l(h):l.current=h}}catch(m){ie(s,a,m)}}function xi(s,a){var l=s.ref,h=s.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(m){ie(s,a,m)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){ie(s,a,m)}else l.current=null}function u0(s){var a=s.type,l=s.memoizedProps,h=s.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break t;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(m){ie(s,s.return,m)}}function Gg(s,a,l){try{var h=s.stateNode;nR(h,s.type,l,a),h[we]=a}catch(m){ie(s,s.return,m)}}function h0(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Zs(s.type)||s.tag===4}function Yg(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||h0(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Zs(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Kg(s,a,l){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(s),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Mh));else if(h!==4&&(h===27&&Zs(s.type)&&(l=s.stateNode,a=null),s=s.child,s!==null))for(Kg(s,a,l),s=s.sibling;s!==null;)Kg(s,a,l),s=s.sibling}function vh(s,a,l){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?l.insertBefore(s,a):l.appendChild(s);else if(h!==4&&(h===27&&Zs(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(vh(s,a,l),s=s.sibling;s!==null;)vh(s,a,l),s=s.sibling}function f0(s){var a=s.stateNode,l=s.memoizedProps;try{for(var h=s.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);Ze(a,h,l),a[Oe]=s,a[we]=l}catch(p){ie(s,s.return,p)}}var us=!1,Ee=!1,Wg=!1,d0=typeof WeakSet=="function"?WeakSet:Set,Ge=null;function Vx(s,a){if(s=s.containerInfo,ym=Lh,s=wy(s),Yd(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else t:{l=(l=s.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var m=h.anchorOffset,p=h.focusNode;h=h.focusOffset;try{l.nodeType,p.nodeType}catch{l=null;break t}var T=0,w=-1,k=-1,q=0,Z=0,nt=s,G=null;e:for(;;){for(var Y;nt!==l||m!==0&&nt.nodeType!==3||(w=T+m),nt!==p||h!==0&&nt.nodeType!==3||(k=T+h),nt.nodeType===3&&(T+=nt.nodeValue.length),(Y=nt.firstChild)!==null;)G=nt,nt=Y;for(;;){if(nt===s)break e;if(G===l&&++q===m&&(w=T),G===p&&++Z===h&&(k=T),(Y=nt.nextSibling)!==null)break;nt=G,G=nt.parentNode}nt=Y}l=w===-1||k===-1?null:{start:w,end:k}}else l=null}l=l||{start:0,end:0}}else l=null;for(vm={focusedElem:s,selectionRange:l},Lh=!1,Ge=a;Ge!==null;)if(a=Ge,s=a.child,(a.subtreeFlags&1024)!==0&&s!==null)s.return=a,Ge=s;else for(;Ge!==null;){switch(a=Ge,p=a.alternate,s=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&p!==null){s=void 0,l=a,m=p.memoizedProps,p=p.memoizedState,h=l.stateNode;try{var wt=ga(l.type,m,l.elementType===l.type);s=h.getSnapshotBeforeUpdate(wt,p),h.__reactInternalSnapshotBeforeUpdate=s}catch(vt){ie(l,l.return,vt)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,l=s.nodeType,l===9)Tm(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Tm(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,Ge=s;break}Ge=a.return}}function g0(s,a,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:Gs(s,l),h&4&&ec(5,l);break;case 1:if(Gs(s,l),h&4)if(s=l.stateNode,a===null)try{s.componentDidMount()}catch(T){ie(l,l.return,T)}else{var m=ga(l.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(m,a,s.__reactInternalSnapshotBeforeUpdate)}catch(T){ie(l,l.return,T)}}h&64&&l0(l),h&512&&nc(l,l.return);break;case 3:if(Gs(s,l),h&64&&(s=l.updateQueue,s!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{Qy(s,a)}catch(T){ie(l,l.return,T)}}break;case 27:a===null&&h&4&&f0(l);case 26:case 5:Gs(s,l),a===null&&h&4&&u0(l),h&512&&nc(l,l.return);break;case 12:Gs(s,l);break;case 13:Gs(s,l),h&4&&_0(s,l),h&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=Gx.bind(null,l),cR(s,l))));break;case 22:if(h=l.memoizedState!==null||us,!h){a=a!==null&&a.memoizedState!==null||Ee,m=us;var p=Ee;us=h,(Ee=a)&&!p?Ys(s,l,(l.subtreeFlags&8772)!==0):Gs(s,l),us=m,Ee=p}break;case 30:break;default:Gs(s,l)}}function m0(s){var a=s.alternate;a!==null&&(s.alternate=null,m0(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&ks(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var he=null,pn=!1;function hs(s,a,l){for(l=l.child;l!==null;)p0(s,a,l),l=l.sibling}function p0(s,a,l){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(me,l)}catch{}switch(l.tag){case 26:Ee||xi(l,a),hs(s,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ee||xi(l,a);var h=he,m=pn;Zs(l.type)&&(he=l.stateNode,pn=!1),hs(s,a,l),hc(l.stateNode),he=h,pn=m;break;case 5:Ee||xi(l,a);case 6:if(h=he,m=pn,he=null,hs(s,a,l),he=h,pn=m,he!==null)if(pn)try{(he.nodeType===9?he.body:he.nodeName==="HTML"?he.ownerDocument.body:he).removeChild(l.stateNode)}catch(p){ie(l,a,p)}else try{he.removeChild(l.stateNode)}catch(p){ie(l,a,p)}break;case 18:he!==null&&(pn?(s=he,sb(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),vc(s)):sb(he,l.stateNode));break;case 4:h=he,m=pn,he=l.stateNode.containerInfo,pn=!0,hs(s,a,l),he=h,pn=m;break;case 0:case 11:case 14:case 15:Ee||qs(2,l,a),Ee||qs(4,l,a),hs(s,a,l);break;case 1:Ee||(xi(l,a),h=l.stateNode,typeof h.componentWillUnmount=="function"&&c0(l,a,h)),hs(s,a,l);break;case 21:hs(s,a,l);break;case 22:Ee=(h=Ee)||l.memoizedState!==null,hs(s,a,l),Ee=h;break;default:hs(s,a,l)}}function _0(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{vc(s)}catch(l){ie(a,a.return,l)}}function Lx(s){switch(s.tag){case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new d0),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new d0),a;default:throw Error(i(435,s.tag))}}function Qg(s,a){var l=Lx(s);a.forEach(function(h){var m=Yx.bind(null,s,h);l.has(h)||(l.add(h),h.then(m,m))})}function In(s,a){var l=a.deletions;if(l!==null)for(var h=0;h<l.length;h++){var m=l[h],p=s,T=a,w=T;t:for(;w!==null;){switch(w.tag){case 27:if(Zs(w.type)){he=w.stateNode,pn=!1;break t}break;case 5:he=w.stateNode,pn=!1;break t;case 3:case 4:he=w.stateNode.containerInfo,pn=!0;break t}w=w.return}if(he===null)throw Error(i(160));p0(p,T,m),he=null,pn=!1,p=m.alternate,p!==null&&(p.return=null),m.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)y0(a,s),a=a.sibling}var ri=null;function y0(s,a){var l=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:In(a,s),Cn(s),h&4&&(qs(3,s,s.return),ec(3,s),qs(5,s,s.return));break;case 1:In(a,s),Cn(s),h&512&&(Ee||l===null||xi(l,l.return)),h&64&&us&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var m=ri;if(In(a,s),Cn(s),h&512&&(Ee||l===null||xi(l,l.return)),h&4){var p=l!==null?l.memoizedState:null;if(h=s.memoizedState,l===null)if(h===null)if(s.stateNode===null){t:{h=s.type,l=s.memoizedProps,m=m.ownerDocument||m;e:switch(h){case"title":p=m.getElementsByTagName("title")[0],(!p||p[Hr]||p[Oe]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=m.createElement(h),m.head.insertBefore(p,m.querySelector("head > title"))),Ze(p,h,l),p[Oe]=s,ve(p),h=p;break t;case"link":var T=fb("link","href",m).get(h+(l.href||""));if(T){for(var w=0;w<T.length;w++)if(p=T[w],p.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&p.getAttribute("rel")===(l.rel==null?null:l.rel)&&p.getAttribute("title")===(l.title==null?null:l.title)&&p.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(w,1);break e}}p=m.createElement(h),Ze(p,h,l),m.head.appendChild(p);break;case"meta":if(T=fb("meta","content",m).get(h+(l.content||""))){for(w=0;w<T.length;w++)if(p=T[w],p.getAttribute("content")===(l.content==null?null:""+l.content)&&p.getAttribute("name")===(l.name==null?null:l.name)&&p.getAttribute("property")===(l.property==null?null:l.property)&&p.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&p.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(w,1);break e}}p=m.createElement(h),Ze(p,h,l),m.head.appendChild(p);break;default:throw Error(i(468,h))}p[Oe]=s,ve(p),h=p}s.stateNode=h}else db(m,s.type,s.stateNode);else s.stateNode=hb(m,h,s.memoizedProps);else p!==h?(p===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):p.count--,h===null?db(m,s.type,s.stateNode):hb(m,h,s.memoizedProps)):h===null&&s.stateNode!==null&&Gg(s,s.memoizedProps,l.memoizedProps)}break;case 27:In(a,s),Cn(s),h&512&&(Ee||l===null||xi(l,l.return)),l!==null&&h&4&&Gg(s,s.memoizedProps,l.memoizedProps);break;case 5:if(In(a,s),Cn(s),h&512&&(Ee||l===null||xi(l,l.return)),s.flags&32){m=s.stateNode;try{zn(m,"")}catch(Y){ie(s,s.return,Y)}}h&4&&s.stateNode!=null&&(m=s.memoizedProps,Gg(s,m,l!==null?l.memoizedProps:m)),h&1024&&(Wg=!0);break;case 6:if(In(a,s),Cn(s),h&4){if(s.stateNode===null)throw Error(i(162));h=s.memoizedProps,l=s.stateNode;try{l.nodeValue=h}catch(Y){ie(s,s.return,Y)}}break;case 3:if(Nh=null,m=ri,ri=Oh(a.containerInfo),In(a,s),ri=m,Cn(s),h&4&&l!==null&&l.memoizedState.isDehydrated)try{vc(a.containerInfo)}catch(Y){ie(s,s.return,Y)}Wg&&(Wg=!1,v0(s));break;case 4:h=ri,ri=Oh(s.stateNode.containerInfo),In(a,s),Cn(s),ri=h;break;case 12:In(a,s),Cn(s);break;case 13:In(a,s),Cn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(em=Ln()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Qg(s,h)));break;case 22:m=s.memoizedState!==null;var k=l!==null&&l.memoizedState!==null,q=us,Z=Ee;if(us=q||m,Ee=Z||k,In(a,s),Ee=Z,us=q,Cn(s),h&8192)t:for(a=s.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(l===null||k||us||Ee||ma(s)),l=null,a=s;;){if(a.tag===5||a.tag===26){if(l===null){k=l=a;try{if(p=k.stateNode,m)T=p.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{w=k.stateNode;var nt=k.memoizedProps.style,G=nt!=null&&nt.hasOwnProperty("display")?nt.display:null;w.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(Y){ie(k,k.return,Y)}}}else if(a.tag===6){if(l===null){k=a;try{k.stateNode.nodeValue=m?"":k.memoizedProps}catch(Y){ie(k,k.return,Y)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break t;for(;a.sibling===null;){if(a.return===null||a.return===s)break t;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=s.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,Qg(s,l))));break;case 19:In(a,s),Cn(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Qg(s,h)));break;case 30:break;case 21:break;default:In(a,s),Cn(s)}}function Cn(s){var a=s.flags;if(a&2){try{for(var l,h=s.return;h!==null;){if(h0(h)){l=h;break}h=h.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var m=l.stateNode,p=Yg(s);vh(s,p,m);break;case 5:var T=l.stateNode;l.flags&32&&(zn(T,""),l.flags&=-33);var w=Yg(s);vh(s,w,T);break;case 3:case 4:var k=l.stateNode.containerInfo,q=Yg(s);Kg(s,q,k);break;default:throw Error(i(161))}}catch(Z){ie(s,s.return,Z)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function v0(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;v0(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function Gs(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)g0(s,a.alternate,a),a=a.sibling}function ma(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:qs(4,a,a.return),ma(a);break;case 1:xi(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&c0(a,a.return,l),ma(a);break;case 27:hc(a.stateNode);case 26:case 5:xi(a,a.return),ma(a);break;case 22:a.memoizedState===null&&ma(a);break;case 30:ma(a);break;default:ma(a)}s=s.sibling}}function Ys(s,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,m=s,p=a,T=p.flags;switch(p.tag){case 0:case 11:case 15:Ys(m,p,l),ec(4,p);break;case 1:if(Ys(m,p,l),h=p,m=h.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(q){ie(h,h.return,q)}if(h=p,m=h.updateQueue,m!==null){var w=h.stateNode;try{var k=m.shared.hiddenCallbacks;if(k!==null)for(m.shared.hiddenCallbacks=null,m=0;m<k.length;m++)Wy(k[m],w)}catch(q){ie(h,h.return,q)}}l&&T&64&&l0(p),nc(p,p.return);break;case 27:f0(p);case 26:case 5:Ys(m,p,l),l&&h===null&&T&4&&u0(p),nc(p,p.return);break;case 12:Ys(m,p,l);break;case 13:Ys(m,p,l),l&&T&4&&_0(m,p);break;case 22:p.memoizedState===null&&Ys(m,p,l),nc(p,p.return);break;case 30:break;default:Ys(m,p,l)}a=a.sibling}}function Xg(s,a){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&jl(l))}function $g(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&jl(s))}function Ri(s,a,l,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)b0(s,a,l,h),a=a.sibling}function b0(s,a,l,h){var m=a.flags;switch(a.tag){case 0:case 11:case 15:Ri(s,a,l,h),m&2048&&ec(9,a);break;case 1:Ri(s,a,l,h);break;case 3:Ri(s,a,l,h),m&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&jl(s)));break;case 12:if(m&2048){Ri(s,a,l,h),s=a.stateNode;try{var p=a.memoizedProps,T=p.id,w=p.onPostCommit;typeof w=="function"&&w(T,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(k){ie(a,a.return,k)}}else Ri(s,a,l,h);break;case 13:Ri(s,a,l,h);break;case 23:break;case 22:p=a.stateNode,T=a.alternate,a.memoizedState!==null?p._visibility&2?Ri(s,a,l,h):ic(s,a):p._visibility&2?Ri(s,a,l,h):(p._visibility|=2,vo(s,a,l,h,(a.subtreeFlags&10256)!==0)),m&2048&&Xg(T,a);break;case 24:Ri(s,a,l,h),m&2048&&$g(a.alternate,a);break;default:Ri(s,a,l,h)}}function vo(s,a,l,h,m){for(m=m&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var p=s,T=a,w=l,k=h,q=T.flags;switch(T.tag){case 0:case 11:case 15:vo(p,T,w,k,m),ec(8,T);break;case 23:break;case 22:var Z=T.stateNode;T.memoizedState!==null?Z._visibility&2?vo(p,T,w,k,m):ic(p,T):(Z._visibility|=2,vo(p,T,w,k,m)),m&&q&2048&&Xg(T.alternate,T);break;case 24:vo(p,T,w,k,m),m&&q&2048&&$g(T.alternate,T);break;default:vo(p,T,w,k,m)}a=a.sibling}}function ic(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=s,h=a,m=h.flags;switch(h.tag){case 22:ic(l,h),m&2048&&Xg(h.alternate,h);break;case 24:ic(l,h),m&2048&&$g(h.alternate,h);break;default:ic(l,h)}a=a.sibling}}var sc=8192;function bo(s){if(s.subtreeFlags&sc)for(s=s.child;s!==null;)E0(s),s=s.sibling}function E0(s){switch(s.tag){case 26:bo(s),s.flags&sc&&s.memoizedState!==null&&TR(ri,s.memoizedState,s.memoizedProps);break;case 5:bo(s);break;case 3:case 4:var a=ri;ri=Oh(s.stateNode.containerInfo),bo(s),ri=a;break;case 22:s.memoizedState===null&&(a=s.alternate,a!==null&&a.memoizedState!==null?(a=sc,sc=16777216,bo(s),sc=a):bo(s));break;default:bo(s)}}function T0(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function rc(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];Ge=h,w0(h,s)}T0(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)S0(s),s=s.sibling}function S0(s){switch(s.tag){case 0:case 11:case 15:rc(s),s.flags&2048&&qs(9,s,s.return);break;case 3:rc(s);break;case 12:rc(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,bh(s)):rc(s);break;default:rc(s)}}function bh(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];Ge=h,w0(h,s)}T0(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:qs(8,a,a.return),bh(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,bh(a));break;default:bh(a)}s=s.sibling}}function w0(s,a){for(;Ge!==null;){var l=Ge;switch(l.tag){case 0:case 11:case 15:qs(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:jl(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,Ge=h;else t:for(l=s;Ge!==null;){h=Ge;var m=h.sibling,p=h.return;if(m0(h),h===l){Ge=null;break t}if(m!==null){m.return=p,Ge=m;break t}Ge=p}}}var Ux={getCacheForType:function(s){var a=sn(Pe),l=a.data.get(s);return l===void 0&&(l=s(),a.data.set(s,l)),l}},zx=typeof WeakMap=="function"?WeakMap:Map,$t=0,ae=null,kt=null,zt=0,Zt=0,Mn=null,Ks=!1,Eo=!1,Zg=!1,fs=0,_e=0,Ws=0,pa=0,Jg=0,Wn=0,To=0,ac=null,_n=null,tm=!1,em=0,Eh=1/0,Th=null,Qs=null,$e=0,Xs=null,So=null,wo=0,nm=0,im=null,A0=null,oc=0,sm=null;function Dn(){if(($t&2)!==0&&zt!==0)return zt&-zt;if(K.T!==null){var s=uo;return s!==0?s:hm()}return Ds()}function x0(){Wn===0&&(Wn=(zt&536870912)===0||Yt?pl():536870912);var s=Kn.current;return s!==null&&(s.flags|=32),Wn}function On(s,a,l){(s===ae&&(Zt===2||Zt===9)||s.cancelPendingCommit!==null)&&(Ao(s,0),$s(s,zt,Wn,!1)),qi(s,l),(($t&2)===0||s!==ae)&&(s===ae&&(($t&2)===0&&(pa|=l),_e===4&&$s(s,zt,Wn,!1)),Ii(s))}function R0(s,a,l){if(($t&6)!==0)throw Error(i(327));var h=!l&&(a&124)===0&&(a&s.expiredLanes)===0||Fr(s,a),m=h?Fx(s,a):om(s,a,!0),p=h;do{if(m===0){Eo&&!h&&$s(s,a,0,!1);break}else{if(l=s.current.alternate,p&&!Bx(l)){m=om(s,a,!1),p=!1;continue}if(m===2){if(p=a,s.errorRecoveryDisabledLanes&p)var T=0;else T=s.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;t:{var w=s;m=ac;var k=w.current.memoizedState.isDehydrated;if(k&&(Ao(w,T).flags|=256),T=om(w,T,!1),T!==2){if(Zg&&!k){w.errorRecoveryDisabledLanes|=p,pa|=p,m=4;break t}p=_n,_n=m,p!==null&&(_n===null?_n=p:_n.push.apply(_n,p))}m=T}if(p=!1,m!==2)continue}}if(m===1){Ao(s,0),$s(s,a,0,!0);break}t:{switch(h=s,p=m,p){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:$s(h,a,Wn,!Ks);break t;case 2:_n=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(m=em+300-Ln(),10<m)){if($s(h,a,Wn,!Ks),ja(h,0,!0)!==0)break t;h.timeoutHandle=nb(I0.bind(null,h,l,_n,Th,tm,a,Wn,pa,To,Ks,p,2,-0,0),m);break t}I0(h,l,_n,Th,tm,a,Wn,pa,To,Ks,p,0,-0,0)}}break}while(!0);Ii(s)}function I0(s,a,l,h,m,p,T,w,k,q,Z,nt,G,Y){if(s.timeoutHandle=-1,nt=a.subtreeFlags,(nt&8192||(nt&16785408)===16785408)&&(gc={stylesheets:null,count:0,unsuspend:ER},E0(a),nt=SR(),nt!==null)){s.cancelPendingCommit=nt(P0.bind(null,s,a,p,l,h,m,T,w,k,Z,1,G,Y)),$s(s,p,T,!q);return}P0(s,a,p,l,h,m,T,w,k)}function Bx(s){for(var a=s;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var m=l[h],p=m.getSnapshot;m=m.value;try{if(!xn(p(),m))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function $s(s,a,l,h){a&=~Jg,a&=~pa,s.suspendedLanes|=a,s.pingedLanes&=~a,h&&(s.warmLanes|=a),h=s.expirationTimes;for(var m=a;0<m;){var p=31-nn(m),T=1<<p;h[p]=-1,m&=~T}l!==0&&di(s,l,a)}function Sh(){return($t&6)===0?(lc(0),!1):!0}function rm(){if(kt!==null){if(Zt===0)var s=kt.return;else s=kt,ss=ua=null,Tg(s),_o=null,Zl=0,s=kt;for(;s!==null;)o0(s.alternate,s),s=s.return;kt=null}}function Ao(s,a){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,sR(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),rm(),ae=s,kt=l=es(s.current,null),zt=a,Zt=0,Mn=null,Ks=!1,Eo=Fr(s,a),Zg=!1,To=Wn=Jg=pa=Ws=_e=0,_n=ac=null,tm=!1,(a&8)!==0&&(a|=a&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=a;0<h;){var m=31-nn(h),p=1<<m;a|=s[m],h&=~p}return fs=a,Gu(),l}function C0(s,a){Mt=null,K.H=uh,a===Hl||a===th?(a=Yy(),Zt=3):a===Hy?(a=Yy(),Zt=4):Zt=a===Kv?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Mn=a,kt===null&&(_e=1,mh(s,Hn(a,s.current)))}function M0(){var s=K.H;return K.H=uh,s===null?uh:s}function D0(){var s=K.A;return K.A=Ux,s}function am(){_e=4,Ks||(zt&4194048)!==zt&&Kn.current!==null||(Eo=!0),(Ws&134217727)===0&&(pa&134217727)===0||ae===null||$s(ae,zt,Wn,!1)}function om(s,a,l){var h=$t;$t|=2;var m=M0(),p=D0();(ae!==s||zt!==a)&&(Th=null,Ao(s,a)),a=!1;var T=_e;t:do try{if(Zt!==0&&kt!==null){var w=kt,k=Mn;switch(Zt){case 8:rm(),T=6;break t;case 3:case 2:case 9:case 6:Kn.current===null&&(a=!0);var q=Zt;if(Zt=0,Mn=null,xo(s,w,k,q),l&&Eo){T=0;break t}break;default:q=Zt,Zt=0,Mn=null,xo(s,w,k,q)}}jx(),T=_e;break}catch(Z){C0(s,Z)}while(!0);return a&&s.shellSuspendCounter++,ss=ua=null,$t=h,K.H=m,K.A=p,kt===null&&(ae=null,zt=0,Gu()),T}function jx(){for(;kt!==null;)O0(kt)}function Fx(s,a){var l=$t;$t|=2;var h=M0(),m=D0();ae!==s||zt!==a?(Th=null,Eh=Ln()+500,Ao(s,a)):Eo=Fr(s,a);t:do try{if(Zt!==0&&kt!==null){a=kt;var p=Mn;e:switch(Zt){case 1:Zt=0,Mn=null,xo(s,a,p,1);break;case 2:case 9:if(qy(p)){Zt=0,Mn=null,k0(a);break}a=function(){Zt!==2&&Zt!==9||ae!==s||(Zt=7),Ii(s)},p.then(a,a);break t;case 3:Zt=7;break t;case 4:Zt=5;break t;case 7:qy(p)?(Zt=0,Mn=null,k0(a)):(Zt=0,Mn=null,xo(s,a,p,7));break;case 5:var T=null;switch(kt.tag){case 26:T=kt.memoizedState;case 5:case 27:var w=kt;if(!T||gb(T)){Zt=0,Mn=null;var k=w.sibling;if(k!==null)kt=k;else{var q=w.return;q!==null?(kt=q,wh(q)):kt=null}break e}}Zt=0,Mn=null,xo(s,a,p,5);break;case 6:Zt=0,Mn=null,xo(s,a,p,6);break;case 8:rm(),_e=6;break t;default:throw Error(i(462))}}Hx();break}catch(Z){C0(s,Z)}while(!0);return ss=ua=null,K.H=h,K.A=m,$t=l,kt!==null?0:(ae=null,zt=0,Gu(),_e)}function Hx(){for(;kt!==null&&!fl();)O0(kt)}function O0(s){var a=r0(s.alternate,s,fs);s.memoizedProps=s.pendingProps,a===null?wh(s):kt=a}function k0(s){var a=s,l=a.alternate;switch(a.tag){case 15:case 0:a=Jv(l,a,a.pendingProps,a.type,void 0,zt);break;case 11:a=Jv(l,a,a.pendingProps,a.type.render,a.ref,zt);break;case 5:Tg(a);default:o0(l,a),a=kt=Ny(a,fs),a=r0(l,a,fs)}s.memoizedProps=s.pendingProps,a===null?wh(s):kt=a}function xo(s,a,l,h){ss=ua=null,Tg(a),_o=null,Zl=0;var m=a.return;try{if(Ox(s,m,a,l,zt)){_e=1,mh(s,Hn(l,s.current)),kt=null;return}}catch(p){if(m!==null)throw kt=m,p;_e=1,mh(s,Hn(l,s.current)),kt=null;return}a.flags&32768?(Yt||h===1?s=!0:Eo||(zt&536870912)!==0?s=!1:(Ks=s=!0,(h===2||h===9||h===3||h===6)&&(h=Kn.current,h!==null&&h.tag===13&&(h.flags|=16384))),N0(a,s)):wh(a)}function wh(s){var a=s;do{if((a.flags&32768)!==0){N0(a,Ks);return}s=a.return;var l=Nx(a.alternate,a,fs);if(l!==null){kt=l;return}if(a=a.sibling,a!==null){kt=a;return}kt=a=s}while(a!==null);_e===0&&(_e=5)}function N0(s,a){do{var l=Px(s.alternate,s);if(l!==null){l.flags&=32767,kt=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(s=s.sibling,s!==null)){kt=s;return}kt=s=l}while(s!==null);_e=6,kt=null}function P0(s,a,l,h,m,p,T,w,k){s.cancelPendingCommit=null;do Ah();while($e!==0);if(($t&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(p=a.lanes|a.childLanes,p|=$d,yl(s,l,p,T,w,k),s===ae&&(kt=ae=null,zt=0),So=a,Xs=s,wo=l,nm=p,im=m,A0=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Kx(Ur,function(){return B0(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=K.T,K.T=null,m=rt.p,rt.p=2,T=$t,$t|=4;try{Vx(s,a,l)}finally{$t=T,rt.p=m,K.T=h}}$e=1,V0(),L0(),U0()}}function V0(){if($e===1){$e=0;var s=Xs,a=So,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=K.T,K.T=null;var h=rt.p;rt.p=2;var m=$t;$t|=4;try{y0(a,s);var p=vm,T=wy(s.containerInfo),w=p.focusedElem,k=p.selectionRange;if(T!==w&&w&&w.ownerDocument&&Sy(w.ownerDocument.documentElement,w)){if(k!==null&&Yd(w)){var q=k.start,Z=k.end;if(Z===void 0&&(Z=q),"selectionStart"in w)w.selectionStart=q,w.selectionEnd=Math.min(Z,w.value.length);else{var nt=w.ownerDocument||document,G=nt&&nt.defaultView||window;if(G.getSelection){var Y=G.getSelection(),wt=w.textContent.length,vt=Math.min(k.start,wt),ne=k.end===void 0?vt:Math.min(k.end,wt);!Y.extend&&vt>ne&&(T=ne,ne=vt,vt=T);var B=Ty(w,vt),U=Ty(w,ne);if(B&&U&&(Y.rangeCount!==1||Y.anchorNode!==B.node||Y.anchorOffset!==B.offset||Y.focusNode!==U.node||Y.focusOffset!==U.offset)){var H=nt.createRange();H.setStart(B.node,B.offset),Y.removeAllRanges(),vt>ne?(Y.addRange(H),Y.extend(U.node,U.offset)):(H.setEnd(U.node,U.offset),Y.addRange(H))}}}}for(nt=[],Y=w;Y=Y.parentNode;)Y.nodeType===1&&nt.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<nt.length;w++){var tt=nt[w];tt.element.scrollLeft=tt.left,tt.element.scrollTop=tt.top}}Lh=!!ym,vm=ym=null}finally{$t=m,rt.p=h,K.T=l}}s.current=a,$e=2}}function L0(){if($e===2){$e=0;var s=Xs,a=So,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=K.T,K.T=null;var h=rt.p;rt.p=2;var m=$t;$t|=4;try{g0(s,a.alternate,a)}finally{$t=m,rt.p=h,K.T=l}}$e=3}}function U0(){if($e===4||$e===3){$e=0,bu();var s=Xs,a=So,l=wo,h=A0;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?$e=5:($e=0,So=Xs=null,z0(s,s.pendingLanes));var m=s.pendingLanes;if(m===0&&(Qs=null),Fa(l),a=a.stateNode,Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(me,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=K.T,m=rt.p,rt.p=2,K.T=null;try{for(var p=s.onRecoverableError,T=0;T<h.length;T++){var w=h[T];p(w.value,{componentStack:w.stack})}}finally{K.T=a,rt.p=m}}(wo&3)!==0&&Ah(),Ii(s),m=s.pendingLanes,(l&4194090)!==0&&(m&42)!==0?s===sm?oc++:(oc=0,sm=s):oc=0,lc(0)}}function z0(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,jl(a)))}function Ah(s){return V0(),L0(),U0(),B0()}function B0(){if($e!==5)return!1;var s=Xs,a=nm;nm=0;var l=Fa(wo),h=K.T,m=rt.p;try{rt.p=32>l?32:l,K.T=null,l=im,im=null;var p=Xs,T=wo;if($e=0,So=Xs=null,wo=0,($t&6)!==0)throw Error(i(331));var w=$t;if($t|=4,S0(p.current),b0(p,p.current,T,l),$t=w,lc(0,!1),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(me,p)}catch{}return!0}finally{rt.p=m,K.T=h,z0(s,a)}}function j0(s,a,l){a=Hn(l,a),a=Vg(s.stateNode,a,2),s=Bs(s,a,2),s!==null&&(qi(s,2),Ii(s))}function ie(s,a,l){if(s.tag===3)j0(s,s,l);else for(;a!==null;){if(a.tag===3){j0(a,s,l);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Qs===null||!Qs.has(h))){s=Hn(l,s),l=Gv(2),h=Bs(a,l,2),h!==null&&(Yv(l,h,a,s),qi(h,2),Ii(h));break}}a=a.return}}function lm(s,a,l){var h=s.pingCache;if(h===null){h=s.pingCache=new zx;var m=new Set;h.set(a,m)}else m=h.get(a),m===void 0&&(m=new Set,h.set(a,m));m.has(l)||(Zg=!0,m.add(l),s=qx.bind(null,s,a,l),a.then(s,s))}function qx(s,a,l){var h=s.pingCache;h!==null&&h.delete(a),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,ae===s&&(zt&l)===l&&(_e===4||_e===3&&(zt&62914560)===zt&&300>Ln()-em?($t&2)===0&&Ao(s,0):Jg|=l,To===zt&&(To=0)),Ii(s)}function F0(s,a){a===0&&(a=_l()),s=ao(s,a),s!==null&&(qi(s,a),Ii(s))}function Gx(s){var a=s.memoizedState,l=0;a!==null&&(l=a.retryLane),F0(s,l)}function Yx(s,a){var l=0;switch(s.tag){case 13:var h=s.stateNode,m=s.memoizedState;m!==null&&(l=m.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(a),F0(s,l)}function Kx(s,a){return Vr(s,a)}var xh=null,Ro=null,cm=!1,Rh=!1,um=!1,_a=0;function Ii(s){s!==Ro&&s.next===null&&(Ro===null?xh=Ro=s:Ro=Ro.next=s),Rh=!0,cm||(cm=!0,Qx())}function lc(s,a){if(!um&&Rh){um=!0;do for(var l=!1,h=xh;h!==null;){if(s!==0){var m=h.pendingLanes;if(m===0)var p=0;else{var T=h.suspendedLanes,w=h.pingedLanes;p=(1<<31-nn(42|s)+1)-1,p&=m&~(T&~w),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(l=!0,Y0(h,p))}else p=zt,p=ja(h,h===ae?p:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(p&3)===0||Fr(h,p)||(l=!0,Y0(h,p));h=h.next}while(l);um=!1}}function Wx(){H0()}function H0(){Rh=cm=!1;var s=0;_a!==0&&(iR()&&(s=_a),_a=0);for(var a=Ln(),l=null,h=xh;h!==null;){var m=h.next,p=q0(h,a);p===0?(h.next=null,l===null?xh=m:l.next=m,m===null&&(Ro=l)):(l=h,(s!==0||(p&3)!==0)&&(Rh=!0)),h=m}lc(s)}function q0(s,a){for(var l=s.suspendedLanes,h=s.pingedLanes,m=s.expirationTimes,p=s.pendingLanes&-62914561;0<p;){var T=31-nn(p),w=1<<T,k=m[T];k===-1?((w&l)===0||(w&h)!==0)&&(m[T]=ml(w,a)):k<=a&&(s.expiredLanes|=w),p&=~w}if(a=ae,l=zt,l=ja(s,s===a?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,l===0||s===a&&(Zt===2||Zt===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&Lr(h),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Fr(s,l)){if(a=l&-l,a===s.callbackPriority)return a;switch(h!==null&&Lr(h),Fa(l)){case 2:case 8:l=za;break;case 32:l=Ur;break;case 268435456:l=Ba;break;default:l=Ur}return h=G0.bind(null,s),l=Vr(l,h),s.callbackPriority=a,s.callbackNode=l,a}return h!==null&&h!==null&&Lr(h),s.callbackPriority=2,s.callbackNode=null,2}function G0(s,a){if($e!==0&&$e!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Ah()&&s.callbackNode!==l)return null;var h=zt;return h=ja(s,s===ae?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(R0(s,h,a),q0(s,Ln()),s.callbackNode!=null&&s.callbackNode===l?G0.bind(null,s):null)}function Y0(s,a){if(Ah())return null;R0(s,a,!0)}function Qx(){rR(function(){($t&6)!==0?Vr(dl,Wx):H0()})}function hm(){return _a===0&&(_a=pl()),_a}function K0(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Wa(""+s)}function W0(s,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,s.id&&l.setAttribute("form",s.id),a.parentNode.insertBefore(l,a),s=new FormData(s),l.parentNode.removeChild(l),s}function Xx(s,a,l,h,m){if(a==="submit"&&l&&l.stateNode===m){var p=K0((m[we]||null).action),T=h.submitter;T&&(a=(a=T[we]||null)?K0(a.formAction):T.getAttribute("formAction"),a!==null&&(p=a,T=null));var w=new Qa("action","action",null,h,m);s.push({event:w,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(_a!==0){var k=T?W0(m,T):new FormData(m);Dg(l,{pending:!0,data:k,method:m.method,action:p},null,k)}}else typeof p=="function"&&(w.preventDefault(),k=T?W0(m,T):new FormData(m),Dg(l,{pending:!0,data:k,method:m.method,action:p},p,k))},currentTarget:m}]})}}for(var fm=0;fm<Xd.length;fm++){var dm=Xd[fm],$x=dm.toLowerCase(),Zx=dm[0].toUpperCase()+dm.slice(1);si($x,"on"+Zx)}si(Ry,"onAnimationEnd"),si(Iy,"onAnimationIteration"),si(Cy,"onAnimationStart"),si("dblclick","onDoubleClick"),si("focusin","onFocus"),si("focusout","onBlur"),si(mx,"onTransitionRun"),si(px,"onTransitionStart"),si(_x,"onTransitionCancel"),si(My,"onTransitionEnd"),Yi("onMouseEnter",["mouseout","mouseover"]),Yi("onMouseLeave",["mouseout","mouseover"]),Yi("onPointerEnter",["pointerout","pointerover"]),Yi("onPointerLeave",["pointerout","pointerover"]),ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ni("onBeforeInput",["compositionend","keypress","textInput","paste"]),ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cc));function Q0(s,a){a=(a&4)!==0;for(var l=0;l<s.length;l++){var h=s[l],m=h.event;h=h.listeners;t:{var p=void 0;if(a)for(var T=h.length-1;0<=T;T--){var w=h[T],k=w.instance,q=w.currentTarget;if(w=w.listener,k!==p&&m.isPropagationStopped())break t;p=w,m.currentTarget=q;try{p(m)}catch(Z){gh(Z)}m.currentTarget=null,p=k}else for(T=0;T<h.length;T++){if(w=h[T],k=w.instance,q=w.currentTarget,w=w.listener,k!==p&&m.isPropagationStopped())break t;p=w,m.currentTarget=q;try{p(m)}catch(Z){gh(Z)}m.currentTarget=null,p=k}}}}function Nt(s,a){var l=a[bl];l===void 0&&(l=a[bl]=new Set);var h=s+"__bubble";l.has(h)||(X0(a,s,2,!1),l.add(h))}function gm(s,a,l){var h=0;a&&(h|=4),X0(l,s,h,a)}var Ih="_reactListening"+Math.random().toString(36).slice(2);function mm(s){if(!s[Ih]){s[Ih]=!0,El.forEach(function(l){l!=="selectionchange"&&(Jx.has(l)||gm(l,!1,s),gm(l,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Ih]||(a[Ih]=!0,gm("selectionchange",!1,a))}}function X0(s,a,l,h){switch(bb(a)){case 2:var m=xR;break;case 8:m=RR;break;default:m=Cm}l=m.bind(null,a,l,s),m=void 0,!jn||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),h?m!==void 0?s.addEventListener(a,l,{capture:!0,passive:m}):s.addEventListener(a,l,!0):m!==void 0?s.addEventListener(a,l,{passive:m}):s.addEventListener(a,l,!1)}function pm(s,a,l,h,m){var p=h;if((a&1)===0&&(a&2)===0&&h!==null)t:for(;;){if(h===null)return;var T=h.tag;if(T===3||T===4){var w=h.stateNode.containerInfo;if(w===m)break;if(T===4)for(T=h.return;T!==null;){var k=T.tag;if((k===3||k===4)&&T.stateNode.containerInfo===m)return;T=T.return}for(;w!==null;){if(T=Gi(w),T===null)return;if(k=T.tag,k===5||k===6||k===26||k===27){h=p=T;continue t}w=w.parentNode}}h=h.return}Mu(function(){var q=p,Z=Bn(l),nt=[];t:{var G=Dy.get(s);if(G!==void 0){var Y=Qa,wt=s;switch(s){case"keypress":if(vi(l)===0)break t;case"keydown":case"keyup":Y=eo;break;case"focusin":wt="focus",Y=Za;break;case"focusout":wt="blur",Y=Za;break;case"beforeblur":case"afterblur":Y=Za;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Fd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=Uu;break;case Ry:case Iy:case Cy:Y=Ja;break;case My:Y=Bu;break;case"scroll":case"scrollend":Y=Du;break;case"wheel":Y=no;break;case"copy":case"cut":case"paste":Y=to;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=kl;break;case"toggle":case"beforetoggle":Y=Fu}var vt=(a&4)!==0,ne=!vt&&(s==="scroll"||s==="scrollend"),B=vt?G!==null?G+"Capture":null:G;vt=[];for(var U=q,H;U!==null;){var tt=U;if(H=tt.stateNode,tt=tt.tag,tt!==5&&tt!==26&&tt!==27||H===null||B===null||(tt=Xr(U,B),tt!=null&&vt.push(uc(U,tt,H))),ne)break;U=U.return}0<vt.length&&(G=new Y(G,wt,null,l,Z),nt.push({event:G,listeners:vt}))}}if((a&7)===0){t:{if(G=s==="mouseover"||s==="pointerover",Y=s==="mouseout"||s==="pointerout",G&&l!==Qi&&(wt=l.relatedTarget||l.fromElement)&&(Gi(wt)||wt[Un]))break t;if((Y||G)&&(G=Z.window===Z?Z:(G=Z.ownerDocument)?G.defaultView||G.parentWindow:window,Y?(wt=l.relatedTarget||l.toElement,Y=q,wt=wt?Gi(wt):null,wt!==null&&(ne=o(wt),vt=wt.tag,wt!==ne||vt!==5&&vt!==27&&vt!==6)&&(wt=null)):(Y=null,wt=q),Y!==wt)){if(vt=Fn,tt="onMouseLeave",B="onMouseEnter",U="mouse",(s==="pointerout"||s==="pointerover")&&(vt=kl,tt="onPointerLeave",B="onPointerEnter",U="pointer"),ne=Y==null?G:mi(Y),H=wt==null?G:mi(wt),G=new vt(tt,U+"leave",Y,l,Z),G.target=ne,G.relatedTarget=H,tt=null,Gi(Z)===q&&(vt=new vt(B,U+"enter",wt,l,Z),vt.target=H,vt.relatedTarget=ne,tt=vt),ne=tt,Y&&wt)e:{for(vt=Y,B=wt,U=0,H=vt;H;H=Io(H))U++;for(H=0,tt=B;tt;tt=Io(tt))H++;for(;0<U-H;)vt=Io(vt),U--;for(;0<H-U;)B=Io(B),H--;for(;U--;){if(vt===B||B!==null&&vt===B.alternate)break e;vt=Io(vt),B=Io(B)}vt=null}else vt=null;Y!==null&&$0(nt,G,Y,vt,!1),wt!==null&&ne!==null&&$0(nt,ne,wt,vt,!0)}}t:{if(G=q?mi(q):window,Y=G.nodeName&&G.nodeName.toLowerCase(),Y==="select"||Y==="input"&&G.type==="file")var dt=py;else if(Ne(G))if(_y)dt=fx;else{dt=ux;var Ot=cx}else Y=G.nodeName,!Y||Y.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?q&&xl(q.elementType)&&(dt=py):dt=hx;if(dt&&(dt=dt(s,q))){ts(nt,dt,l,Z);break t}Ot&&Ot(s,G,q),s==="focusout"&&q&&G.type==="number"&&q.memoizedProps.value!=null&&Ps(G,"number",G.value)}switch(Ot=q?mi(q):window,s){case"focusin":(Ne(Ot)||Ot.contentEditable==="true")&&(io=Ot,Kd=q,Vl=null);break;case"focusout":Vl=Kd=io=null;break;case"mousedown":Wd=!0;break;case"contextmenu":case"mouseup":case"dragend":Wd=!1,Ay(nt,l,Z);break;case"selectionchange":if(gx)break;case"keydown":case"keyup":Ay(nt,l,Z)}var mt;if(Ti)t:{switch(s){case"compositionstart":var bt="onCompositionStart";break t;case"compositionend":bt="onCompositionEnd";break t;case"compositionupdate":bt="onCompositionUpdate";break t}bt=void 0}else Lt?Q(s,l)&&(bt="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(bt="onCompositionStart");bt&&(E&&l.locale!=="ko"&&(Lt||bt!=="onCompositionStart"?bt==="onCompositionEnd"&&Lt&&(mt=Il()):(yi=Z,Vs="value"in yi?yi.value:yi.textContent,Lt=!0)),Ot=Ch(q,bt),0<Ot.length&&(bt=new Dl(bt,s,null,l,Z),nt.push({event:bt,listeners:Ot}),mt?bt.data=mt:(mt=lt(l),mt!==null&&(bt.data=mt)))),(mt=v?ke(s,l):Ut(s,l))&&(bt=Ch(q,"onBeforeInput"),0<bt.length&&(Ot=new Dl("onBeforeInput","beforeinput",null,l,Z),nt.push({event:Ot,listeners:bt}),Ot.data=mt)),Xx(nt,s,q,l,Z)}Q0(nt,a)})}function uc(s,a,l){return{instance:s,listener:a,currentTarget:l}}function Ch(s,a){for(var l=a+"Capture",h=[];s!==null;){var m=s,p=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||p===null||(m=Xr(s,l),m!=null&&h.unshift(uc(s,m,p)),m=Xr(s,a),m!=null&&h.push(uc(s,m,p))),s.tag===3)return h;s=s.return}return[]}function Io(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function $0(s,a,l,h,m){for(var p=a._reactName,T=[];l!==null&&l!==h;){var w=l,k=w.alternate,q=w.stateNode;if(w=w.tag,k!==null&&k===h)break;w!==5&&w!==26&&w!==27||q===null||(k=q,m?(q=Xr(l,p),q!=null&&T.unshift(uc(l,q,k))):m||(q=Xr(l,p),q!=null&&T.push(uc(l,q,k)))),l=l.return}T.length!==0&&s.push({event:a,listeners:T})}var tR=/\r\n?/g,eR=/\u0000|\uFFFD/g;function Z0(s){return(typeof s=="string"?s:""+s).replace(tR,`
`).replace(eR,"")}function J0(s,a){return a=Z0(a),Z0(s)===a}function Mh(){}function ee(s,a,l,h,m,p){switch(l){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||zn(s,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&zn(s,""+h);break;case"className":pi(s,"class",h);break;case"tabIndex":pi(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":pi(s,l,h);break;case"style":Al(s,h,p);break;case"data":if(a!=="object"){pi(s,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||l!=="href")){s.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(l);break}h=Wa(""+h),s.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(l==="formAction"?(a!=="input"&&ee(s,a,"name",m.name,m,null),ee(s,a,"formEncType",m.formEncType,m,null),ee(s,a,"formMethod",m.formMethod,m,null),ee(s,a,"formTarget",m.formTarget,m,null)):(ee(s,a,"encType",m.encType,m,null),ee(s,a,"method",m.method,m,null),ee(s,a,"target",m.target,m,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(l);break}h=Wa(""+h),s.setAttribute(l,h);break;case"onClick":h!=null&&(s.onclick=Mh);break;case"onScroll":h!=null&&Nt("scroll",s);break;case"onScrollEnd":h!=null&&Nt("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(l=h.__html,l!=null){if(m.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}l=Wa(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(l,""+h):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":h===!0?s.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(l,h):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(l,h):s.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(l):s.setAttribute(l,h);break;case"popover":Nt("beforetoggle",s),Nt("toggle",s),Ns(s,"popover",h);break;case"xlinkActuate":We(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":We(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":We(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":We(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":We(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":We(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":We(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":We(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":We(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Ns(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Bd.get(l)||l,Ns(s,l,h))}}function _m(s,a,l,h,m,p){switch(l){case"style":Al(s,h,p);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(l=h.__html,l!=null){if(m.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof h=="string"?zn(s,h):(typeof h=="number"||typeof h=="bigint")&&zn(s,""+h);break;case"onScroll":h!=null&&Nt("scroll",s);break;case"onScrollEnd":h!=null&&Nt("scrollend",s);break;case"onClick":h!=null&&(s.onclick=Mh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ha.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),a=l.slice(2,m?l.length-7:void 0),p=s[we]||null,p=p!=null?p[l]:null,typeof p=="function"&&s.removeEventListener(a,p,m),typeof h=="function")){typeof p!="function"&&p!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(a,h,m);break t}l in s?s[l]=h:h===!0?s.setAttribute(l,""):Ns(s,l,h)}}}function Ze(s,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nt("error",s),Nt("load",s);var h=!1,m=!1,p;for(p in l)if(l.hasOwnProperty(p)){var T=l[p];if(T!=null)switch(p){case"src":h=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ee(s,a,p,T,l,null)}}m&&ee(s,a,"srcSet",l.srcSet,l,null),h&&ee(s,a,"src",l.src,l,null);return;case"input":Nt("invalid",s);var w=p=T=m=null,k=null,q=null;for(h in l)if(l.hasOwnProperty(h)){var Z=l[h];if(Z!=null)switch(h){case"name":m=Z;break;case"type":T=Z;break;case"checked":k=Z;break;case"defaultChecked":q=Z;break;case"value":p=Z;break;case"defaultValue":w=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,a));break;default:ee(s,a,h,Z,l,null)}}Kr(s,p,w,k,q,T,m,!1),Ka(s);return;case"select":Nt("invalid",s),h=T=p=null;for(m in l)if(l.hasOwnProperty(m)&&(w=l[m],w!=null))switch(m){case"value":p=w;break;case"defaultValue":T=w;break;case"multiple":h=w;default:ee(s,a,m,w,l,null)}a=p,l=T,s.multiple=!!h,a!=null?Wi(s,!!h,a,!1):l!=null&&Wi(s,!!h,l,!0);return;case"textarea":Nt("invalid",s),p=m=h=null;for(T in l)if(l.hasOwnProperty(T)&&(w=l[T],w!=null))switch(T){case"value":h=w;break;case"defaultValue":m=w;break;case"children":p=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:ee(s,a,T,w,l,null)}Wr(s,h,m,p),Ka(s);return;case"option":for(k in l)if(l.hasOwnProperty(k)&&(h=l[k],h!=null))switch(k){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:ee(s,a,k,h,l,null)}return;case"dialog":Nt("beforetoggle",s),Nt("toggle",s),Nt("cancel",s),Nt("close",s);break;case"iframe":case"object":Nt("load",s);break;case"video":case"audio":for(h=0;h<cc.length;h++)Nt(cc[h],s);break;case"image":Nt("error",s),Nt("load",s);break;case"details":Nt("toggle",s);break;case"embed":case"source":case"link":Nt("error",s),Nt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in l)if(l.hasOwnProperty(q)&&(h=l[q],h!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ee(s,a,q,h,l,null)}return;default:if(xl(a)){for(Z in l)l.hasOwnProperty(Z)&&(h=l[Z],h!==void 0&&_m(s,a,Z,h,l,void 0));return}}for(w in l)l.hasOwnProperty(w)&&(h=l[w],h!=null&&ee(s,a,w,h,l,null))}function nR(s,a,l,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,p=null,T=null,w=null,k=null,q=null,Z=null;for(Y in l){var nt=l[Y];if(l.hasOwnProperty(Y)&&nt!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":k=nt;default:h.hasOwnProperty(Y)||ee(s,a,Y,null,h,nt)}}for(var G in h){var Y=h[G];if(nt=l[G],h.hasOwnProperty(G)&&(Y!=null||nt!=null))switch(G){case"type":p=Y;break;case"name":m=Y;break;case"checked":q=Y;break;case"defaultChecked":Z=Y;break;case"value":T=Y;break;case"defaultValue":w=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,a));break;default:Y!==nt&&ee(s,a,G,Y,h,nt)}}An(s,T,w,k,q,Z,p,m);return;case"select":Y=T=w=G=null;for(p in l)if(k=l[p],l.hasOwnProperty(p)&&k!=null)switch(p){case"value":break;case"multiple":Y=k;default:h.hasOwnProperty(p)||ee(s,a,p,null,h,k)}for(m in h)if(p=h[m],k=l[m],h.hasOwnProperty(m)&&(p!=null||k!=null))switch(m){case"value":G=p;break;case"defaultValue":w=p;break;case"multiple":T=p;default:p!==k&&ee(s,a,m,p,h,k)}a=w,l=T,h=Y,G!=null?Wi(s,!!l,G,!1):!!h!=!!l&&(a!=null?Wi(s,!!l,a,!0):Wi(s,!!l,l?[]:"",!1));return;case"textarea":Y=G=null;for(w in l)if(m=l[w],l.hasOwnProperty(w)&&m!=null&&!h.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:ee(s,a,w,null,h,m)}for(T in h)if(m=h[T],p=l[T],h.hasOwnProperty(T)&&(m!=null||p!=null))switch(T){case"value":G=m;break;case"defaultValue":Y=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==p&&ee(s,a,T,m,h,p)}Jt(s,G,Y);return;case"option":for(var wt in l)if(G=l[wt],l.hasOwnProperty(wt)&&G!=null&&!h.hasOwnProperty(wt))switch(wt){case"selected":s.selected=!1;break;default:ee(s,a,wt,null,h,G)}for(k in h)if(G=h[k],Y=l[k],h.hasOwnProperty(k)&&G!==Y&&(G!=null||Y!=null))switch(k){case"selected":s.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:ee(s,a,k,G,h,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var vt in l)G=l[vt],l.hasOwnProperty(vt)&&G!=null&&!h.hasOwnProperty(vt)&&ee(s,a,vt,null,h,G);for(q in h)if(G=h[q],Y=l[q],h.hasOwnProperty(q)&&G!==Y&&(G!=null||Y!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,a));break;default:ee(s,a,q,G,h,Y)}return;default:if(xl(a)){for(var ne in l)G=l[ne],l.hasOwnProperty(ne)&&G!==void 0&&!h.hasOwnProperty(ne)&&_m(s,a,ne,void 0,h,G);for(Z in h)G=h[Z],Y=l[Z],!h.hasOwnProperty(Z)||G===Y||G===void 0&&Y===void 0||_m(s,a,Z,G,h,Y);return}}for(var B in l)G=l[B],l.hasOwnProperty(B)&&G!=null&&!h.hasOwnProperty(B)&&ee(s,a,B,null,h,G);for(nt in h)G=h[nt],Y=l[nt],!h.hasOwnProperty(nt)||G===Y||G==null&&Y==null||ee(s,a,nt,G,h,Y)}var ym=null,vm=null;function Dh(s){return s.nodeType===9?s:s.ownerDocument}function tb(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eb(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function bm(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Em=null;function iR(){var s=window.event;return s&&s.type==="popstate"?s===Em?!1:(Em=s,!0):(Em=null,!1)}var nb=typeof setTimeout=="function"?setTimeout:void 0,sR=typeof clearTimeout=="function"?clearTimeout:void 0,ib=typeof Promise=="function"?Promise:void 0,rR=typeof queueMicrotask=="function"?queueMicrotask:typeof ib<"u"?function(s){return ib.resolve(null).then(s).catch(aR)}:nb;function aR(s){setTimeout(function(){throw s})}function Zs(s){return s==="head"}function sb(s,a){var l=a,h=0,m=0;do{var p=l.nextSibling;if(s.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(0<h&&8>h){l=h;var T=s.ownerDocument;if(l&1&&hc(T.documentElement),l&2&&hc(T.body),l&4)for(l=T.head,hc(l),T=l.firstChild;T;){var w=T.nextSibling,k=T.nodeName;T[Hr]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&T.rel.toLowerCase()==="stylesheet"||l.removeChild(T),T=w}}if(m===0){s.removeChild(p),vc(a);return}m--}else l==="$"||l==="$?"||l==="$!"?m++:h=l.charCodeAt(0)-48;else h=0;l=p}while(l);vc(a)}function Tm(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Tm(l),ks(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function oR(s,a,l,h){for(;s.nodeType===1;){var m=l;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[Hr])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(p=s.getAttribute("rel"),p==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(p!==m.rel||s.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||s.getAttribute("title")!==(m.title==null?null:m.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(p=s.getAttribute("src"),(p!==(m.src==null?null:m.src)||s.getAttribute("type")!==(m.type==null?null:m.type)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&p&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var p=m.name==null?null:""+m.name;if(m.type==="hidden"&&s.getAttribute("name")===p)return s}else return s;if(s=ai(s.nextSibling),s===null)break}return null}function lR(s,a,l){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=ai(s.nextSibling),s===null))return null;return s}function Sm(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function cR(s,a){var l=s.ownerDocument;if(s.data!=="$?"||l.readyState==="complete")a();else{var h=function(){a(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function ai(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return s}var wm=null;function rb(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return s;a--}else l==="/$"&&a++}s=s.previousSibling}return null}function ab(s,a,l){switch(a=Dh(l),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function hc(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);ks(s)}var Qn=new Map,ob=new Set;function Oh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ds=rt.d;rt.d={f:uR,r:hR,D:fR,C:dR,L:gR,m:mR,X:_R,S:pR,M:yR};function uR(){var s=ds.f(),a=Sh();return s||a}function hR(s){var a=gi(s);a!==null&&a.tag===5&&a.type==="form"?Rv(a):ds.r(s)}var Co=typeof document>"u"?null:document;function lb(s,a,l){var h=Co;if(h&&typeof a=="string"&&a){var m=Ae(a);m='link[rel="'+s+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),ob.has(m)||(ob.add(m),s={rel:s,crossOrigin:l,href:a},h.querySelector(m)===null&&(a=h.createElement("link"),Ze(a,"link",s),ve(a),h.head.appendChild(a)))}}function fR(s){ds.D(s),lb("dns-prefetch",s,null)}function dR(s,a){ds.C(s,a),lb("preconnect",s,a)}function gR(s,a,l){ds.L(s,a,l);var h=Co;if(h&&s&&a){var m='link[rel="preload"][as="'+Ae(a)+'"]';a==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+Ae(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+Ae(l.imageSizes)+'"]')):m+='[href="'+Ae(s)+'"]';var p=m;switch(a){case"style":p=Mo(s);break;case"script":p=Do(s)}Qn.has(p)||(s=_({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:s,as:a},l),Qn.set(p,s),h.querySelector(m)!==null||a==="style"&&h.querySelector(fc(p))||a==="script"&&h.querySelector(dc(p))||(a=h.createElement("link"),Ze(a,"link",s),ve(a),h.head.appendChild(a)))}}function mR(s,a){ds.m(s,a);var l=Co;if(l&&s){var h=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+Ae(h)+'"][href="'+Ae(s)+'"]',p=m;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Do(s)}if(!Qn.has(p)&&(s=_({rel:"modulepreload",href:s},a),Qn.set(p,s),l.querySelector(m)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(dc(p)))return}h=l.createElement("link"),Ze(h,"link",s),ve(h),l.head.appendChild(h)}}}function pR(s,a,l){ds.S(s,a,l);var h=Co;if(h&&s){var m=un(h).hoistableStyles,p=Mo(s);a=a||"default";var T=m.get(p);if(!T){var w={loading:0,preload:null};if(T=h.querySelector(fc(p)))w.loading=5;else{s=_({rel:"stylesheet",href:s,"data-precedence":a},l),(l=Qn.get(p))&&Am(s,l);var k=T=h.createElement("link");ve(k),Ze(k,"link",s),k._p=new Promise(function(q,Z){k.onload=q,k.onerror=Z}),k.addEventListener("load",function(){w.loading|=1}),k.addEventListener("error",function(){w.loading|=2}),w.loading|=4,kh(T,a,h)}T={type:"stylesheet",instance:T,count:1,state:w},m.set(p,T)}}}function _R(s,a){ds.X(s,a);var l=Co;if(l&&s){var h=un(l).hoistableScripts,m=Do(s),p=h.get(m);p||(p=l.querySelector(dc(m)),p||(s=_({src:s,async:!0},a),(a=Qn.get(m))&&xm(s,a),p=l.createElement("script"),ve(p),Ze(p,"link",s),l.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},h.set(m,p))}}function yR(s,a){ds.M(s,a);var l=Co;if(l&&s){var h=un(l).hoistableScripts,m=Do(s),p=h.get(m);p||(p=l.querySelector(dc(m)),p||(s=_({src:s,async:!0,type:"module"},a),(a=Qn.get(m))&&xm(s,a),p=l.createElement("script"),ve(p),Ze(p,"link",s),l.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},h.set(m,p))}}function cb(s,a,l,h){var m=(m=_t.current)?Oh(m):null;if(!m)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Mo(l.href),l=un(m).hoistableStyles,h=l.get(a),h||(h={type:"style",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=Mo(l.href);var p=un(m).hoistableStyles,T=p.get(s);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(s,T),(p=m.querySelector(fc(s)))&&!p._p&&(T.instance=p,T.state.loading=5),Qn.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Qn.set(s,l),p||vR(m,s,l,T.state))),a&&h===null)throw Error(i(528,""));return T}if(a&&h!==null)throw Error(i(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Do(l),l=un(m).hoistableScripts,h=l.get(a),h||(h={type:"script",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Mo(s){return'href="'+Ae(s)+'"'}function fc(s){return'link[rel="stylesheet"]['+s+"]"}function ub(s){return _({},s,{"data-precedence":s.precedence,precedence:null})}function vR(s,a,l,h){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=s.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),Ze(a,"link",l),ve(a),s.head.appendChild(a))}function Do(s){return'[src="'+Ae(s)+'"]'}function dc(s){return"script[async]"+s}function hb(s,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var h=s.querySelector('style[data-href~="'+Ae(l.href)+'"]');if(h)return a.instance=h,ve(h),h;var m=_({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),ve(h),Ze(h,"style",m),kh(h,l.precedence,s),a.instance=h;case"stylesheet":m=Mo(l.href);var p=s.querySelector(fc(m));if(p)return a.state.loading|=4,a.instance=p,ve(p),p;h=ub(l),(m=Qn.get(m))&&Am(h,m),p=(s.ownerDocument||s).createElement("link"),ve(p);var T=p;return T._p=new Promise(function(w,k){T.onload=w,T.onerror=k}),Ze(p,"link",h),a.state.loading|=4,kh(p,l.precedence,s),a.instance=p;case"script":return p=Do(l.src),(m=s.querySelector(dc(p)))?(a.instance=m,ve(m),m):(h=l,(m=Qn.get(p))&&(h=_({},l),xm(h,m)),s=s.ownerDocument||s,m=s.createElement("script"),ve(m),Ze(m,"link",h),s.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,kh(h,l.precedence,s));return a.instance}function kh(s,a,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=h.length?h[h.length-1]:null,p=m,T=0;T<h.length;T++){var w=h[T];if(w.dataset.precedence===a)p=w;else if(p!==m)break}p?p.parentNode.insertBefore(s,p.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(s,a.firstChild))}function Am(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function xm(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Nh=null;function fb(s,a,l){if(Nh===null){var h=new Map,m=Nh=new Map;m.set(l,h)}else m=Nh,h=m.get(l),h||(h=new Map,m.set(l,h));if(h.has(s))return h;for(h.set(s,null),l=l.getElementsByTagName(s),m=0;m<l.length;m++){var p=l[m];if(!(p[Hr]||p[Oe]||s==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var T=p.getAttribute(a)||"";T=s+T;var w=h.get(T);w?w.push(p):h.set(T,[p])}}return h}function db(s,a,l){s=s.ownerDocument||s,s.head.insertBefore(l,a==="title"?s.querySelector("head > title"):null)}function bR(s,a,l){if(l===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function gb(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var gc=null;function ER(){}function TR(s,a,l){if(gc===null)throw Error(i(475));var h=gc;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var m=Mo(l.href),p=s.querySelector(fc(m));if(p){s=p._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(h.count++,h=Ph.bind(h),s.then(h,h)),a.state.loading|=4,a.instance=p,ve(p);return}p=s.ownerDocument||s,l=ub(l),(m=Qn.get(m))&&Am(l,m),p=p.createElement("link"),ve(p);var T=p;T._p=new Promise(function(w,k){T.onload=w,T.onerror=k}),Ze(p,"link",l),a.instance=p}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(h.count++,a=Ph.bind(h),s.addEventListener("load",a),s.addEventListener("error",a))}}function SR(){if(gc===null)throw Error(i(475));var s=gc;return s.stylesheets&&s.count===0&&Rm(s,s.stylesheets),0<s.count?function(a){var l=setTimeout(function(){if(s.stylesheets&&Rm(s,s.stylesheets),s.unsuspend){var h=s.unsuspend;s.unsuspend=null,h()}},6e4);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(l)}}:null}function Ph(){if(this.count--,this.count===0){if(this.stylesheets)Rm(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Vh=null;function Rm(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Vh=new Map,a.forEach(wR,s),Vh=null,Ph.call(s))}function wR(s,a){if(!(a.state.loading&4)){var l=Vh.get(s);if(l)var h=l.get(null);else{l=new Map,Vh.set(s,l);for(var m=s.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<m.length;p++){var T=m[p];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),h=T)}h&&l.set(null,h)}m=a.instance,T=m.getAttribute("data-precedence"),p=l.get(T)||h,p===h&&l.set(null,m),l.set(T,m),this.count++,h=Ph.bind(this),m.addEventListener("load",h),m.addEventListener("error",h),p?p.parentNode.insertBefore(m,p.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(m,s.firstChild)),a.state.loading|=4}}var mc={$$typeof:X,Provider:null,Consumer:null,_currentValue:ft,_currentValue2:ft,_threadCount:0};function AR(s,a,l,h,m,p,T,w){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hi(0),this.hiddenUpdates=Hi(null),this.identifierPrefix=h,this.onUncaughtError=m,this.onCaughtError=p,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function mb(s,a,l,h,m,p,T,w,k,q,Z,nt){return s=new AR(s,a,l,T,w,k,q,nt),a=1,p===!0&&(a|=24),p=Rn(3,null,null,a),s.current=p,p.stateNode=s,a=lg(),a.refCount++,s.pooledCache=a,a.refCount++,p.memoizedState={element:h,isDehydrated:l,cache:a},fg(p),s}function pb(s){return s?(s=oo,s):oo}function _b(s,a,l,h,m,p){m=pb(m),h.context===null?h.context=m:h.pendingContext=m,h=zs(a),h.payload={element:l},p=p===void 0?null:p,p!==null&&(h.callback=p),l=Bs(s,h,a),l!==null&&(On(l,s,a),Gl(l,s,a))}function yb(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<a?l:a}}function Im(s,a){yb(s,a),(s=s.alternate)&&yb(s,a)}function vb(s){if(s.tag===13){var a=ao(s,67108864);a!==null&&On(a,s,67108864),Im(s,67108864)}}var Lh=!0;function xR(s,a,l,h){var m=K.T;K.T=null;var p=rt.p;try{rt.p=2,Cm(s,a,l,h)}finally{rt.p=p,K.T=m}}function RR(s,a,l,h){var m=K.T;K.T=null;var p=rt.p;try{rt.p=8,Cm(s,a,l,h)}finally{rt.p=p,K.T=m}}function Cm(s,a,l,h){if(Lh){var m=Mm(h);if(m===null)pm(s,a,h,Uh,l),Eb(s,h);else if(CR(m,s,a,l,h))h.stopPropagation();else if(Eb(s,h),a&4&&-1<IR.indexOf(s)){for(;m!==null;){var p=gi(m);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var T=ei(p.pendingLanes);if(T!==0){var w=p;for(w.pendingLanes|=2,w.entangledLanes|=2;T;){var k=1<<31-nn(T);w.entanglements[1]|=k,T&=~k}Ii(p),($t&6)===0&&(Eh=Ln()+500,lc(0))}}break;case 13:w=ao(p,2),w!==null&&On(w,p,2),Sh(),Im(p,2)}if(p=Mm(h),p===null&&pm(s,a,h,Uh,l),p===m)break;m=p}m!==null&&h.stopPropagation()}else pm(s,a,h,null,l)}}function Mm(s){return s=Bn(s),Dm(s)}var Uh=null;function Dm(s){if(Uh=null,s=Gi(s),s!==null){var a=o(s);if(a===null)s=null;else{var l=a.tag;if(l===13){if(s=c(a),s!==null)return s;s=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Uh=s,null}function bb(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nd()){case dl:return 2;case za:return 8;case Ur:case Pd:return 32;case Ba:return 268435456;default:return 32}default:return 32}}var Om=!1,Js=null,tr=null,er=null,pc=new Map,_c=new Map,nr=[],IR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Eb(s,a){switch(s){case"focusin":case"focusout":Js=null;break;case"dragenter":case"dragleave":tr=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":pc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":_c.delete(a.pointerId)}}function yc(s,a,l,h,m,p){return s===null||s.nativeEvent!==p?(s={blockedOn:a,domEventName:l,eventSystemFlags:h,nativeEvent:p,targetContainers:[m]},a!==null&&(a=gi(a),a!==null&&vb(a)),s):(s.eventSystemFlags|=h,a=s.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),s)}function CR(s,a,l,h,m){switch(a){case"focusin":return Js=yc(Js,s,a,l,h,m),!0;case"dragenter":return tr=yc(tr,s,a,l,h,m),!0;case"mouseover":return er=yc(er,s,a,l,h,m),!0;case"pointerover":var p=m.pointerId;return pc.set(p,yc(pc.get(p)||null,s,a,l,h,m)),!0;case"gotpointercapture":return p=m.pointerId,_c.set(p,yc(_c.get(p)||null,s,a,l,h,m)),!0}return!1}function Tb(s){var a=Gi(s.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=c(l),a!==null){s.blockedOn=a,Su(s.priority,function(){if(l.tag===13){var h=Dn();h=Ms(h);var m=ao(l,h);m!==null&&On(m,l,h),Im(l,h)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function zh(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var l=Mm(s.nativeEvent);if(l===null){l=s.nativeEvent;var h=new l.constructor(l.type,l);Qi=h,l.target.dispatchEvent(h),Qi=null}else return a=gi(l),a!==null&&vb(a),s.blockedOn=l,!1;a.shift()}return!0}function Sb(s,a,l){zh(s)&&l.delete(a)}function MR(){Om=!1,Js!==null&&zh(Js)&&(Js=null),tr!==null&&zh(tr)&&(tr=null),er!==null&&zh(er)&&(er=null),pc.forEach(Sb),_c.forEach(Sb)}function Bh(s,a){s.blockedOn===a&&(s.blockedOn=null,Om||(Om=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,MR)))}var jh=null;function wb(s){jh!==s&&(jh=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){jh===s&&(jh=null);for(var a=0;a<s.length;a+=3){var l=s[a],h=s[a+1],m=s[a+2];if(typeof h!="function"){if(Dm(h||l)===null)continue;break}var p=gi(l);p!==null&&(s.splice(a,3),a-=3,Dg(p,{pending:!0,data:m,method:l.method,action:h},h,m))}}))}function vc(s){function a(k){return Bh(k,s)}Js!==null&&Bh(Js,s),tr!==null&&Bh(tr,s),er!==null&&Bh(er,s),pc.forEach(a),_c.forEach(a);for(var l=0;l<nr.length;l++){var h=nr[l];h.blockedOn===s&&(h.blockedOn=null)}for(;0<nr.length&&(l=nr[0],l.blockedOn===null);)Tb(l),l.blockedOn===null&&nr.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var m=l[h],p=l[h+1],T=m[we]||null;if(typeof p=="function")T||wb(l);else if(T){var w=null;if(p&&p.hasAttribute("formAction")){if(m=p,T=p[we]||null)w=T.formAction;else if(Dm(m)!==null)continue}else w=T.action;typeof w=="function"?l[h+1]=w:(l.splice(h,3),h-=3),wb(l)}}}function km(s){this._internalRoot=s}Fh.prototype.render=km.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var l=a.current,h=Dn();_b(l,h,s,a,null,null)},Fh.prototype.unmount=km.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;_b(s.current,2,null,s,null,null),Sh(),a[Un]=null}};function Fh(s){this._internalRoot=s}Fh.prototype.unstable_scheduleHydration=function(s){if(s){var a=Ds();s={blockedOn:null,target:s,priority:a};for(var l=0;l<nr.length&&a!==0&&a<nr[l].priority;l++);nr.splice(l,0,s),l===0&&Tb(s)}};var Ab=t.version;if(Ab!=="19.1.0")throw Error(i(527,Ab,"19.1.0"));rt.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=f(a),s=s!==null?g(s):null,s=s===null?null:s.stateNode,s};var DR={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hh.isDisabled&&Hh.supportsFiber)try{me=Hh.inject(DR),Xt=Hh}catch{}}return Ec.createRoot=function(s,a){if(!r(s))throw Error(i(299));var l=!1,h="",m=jv,p=Fv,T=Hv,w=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(w=a.unstable_transitionCallbacks)),a=mb(s,1,!1,null,null,l,h,m,p,T,w,null),s[Un]=a.current,mm(s),new km(a)},Ec.hydrateRoot=function(s,a,l){if(!r(s))throw Error(i(299));var h=!1,m="",p=jv,T=Fv,w=Hv,k=null,q=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(p=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(w=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(k=l.unstable_transitionCallbacks),l.formState!==void 0&&(q=l.formState)),a=mb(s,1,!0,a,l??null,h,m,p,T,w,k,q),a.context=pb(null),l=a.current,h=Dn(),h=Ms(h),m=zs(h),m.callback=null,Bs(l,m,h),l=h,a.current.lanes=l,qi(a,l),Ii(a),s[Un]=a.current,mm(s),new Fh(a)},Ec.version="19.1.0",Ec}var Pb;function FR(){if(Pb)return Vm.exports;Pb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Vm.exports=jR(),Vm.exports}var HR=FR();const qR=()=>{};var Vb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},GR=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const r=n[e++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=n[e++];t[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=n[e++],c=n[e++],u=n[e++],f=((r&7)<<18|(o&63)<<12|(c&63)<<6|u&63)-65536;t[i++]=String.fromCharCode(55296+(f>>10)),t[i++]=String.fromCharCode(56320+(f&1023))}else{const o=n[e++],c=n[e++];t[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|c&63)}}return t.join("")},PS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const o=n[r],c=r+1<n.length,u=c?n[r+1]:0,f=r+2<n.length,g=f?n[r+2]:0,_=o>>2,y=(o&3)<<4|u>>4;let b=(u&15)<<2|g>>6,S=g&63;f||(S=64,c||(b=64)),i.push(e[_],e[y],e[b],e[S])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(NS(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):GR(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const o=e[n.charAt(r++)],u=r<n.length?e[n.charAt(r)]:0;++r;const g=r<n.length?e[n.charAt(r)]:64;++r;const y=r<n.length?e[n.charAt(r)]:64;if(++r,o==null||u==null||g==null||y==null)throw new YR;const b=o<<2|u>>4;if(i.push(b),g!==64){const S=u<<4&240|g>>2;if(i.push(S),y!==64){const R=g<<6&192|y;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class YR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KR=function(n){const t=NS(n);return PS.encodeByteArray(t,!0)},xf=function(n){return KR(n).replace(/\./g,"")},VS=function(n){try{return PS.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=()=>WR().__FIREBASE_DEFAULTS__,XR=()=>{if(typeof process>"u"||typeof Vb>"u")return;const n=Vb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},$R=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&VS(n[1]);return t&&JSON.parse(t)},od=()=>{try{return qR()||QR()||XR()||$R()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},LS=n=>{var t,e;return(e=(t=od())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},ZR=n=>{const t=LS(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},US=()=>{var n;return(n=od())===null||n===void 0?void 0:n.config},zS=n=>{var t;return(t=od())===null||t===void 0?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function BS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[xf(JSON.stringify(e)),xf(JSON.stringify(c)),""].join(".")}const Lc={};function e2(){const n={prod:[],emulator:[]};for(const t of Object.keys(Lc))Lc[t]?n.emulator.push(t):n.prod.push(t);return n}function n2(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let Lb=!1;function jS(n,t){if(typeof window>"u"||typeof document>"u"||!tl(window.location.host)||Lc[n]===t||Lc[n]||Lb)return;Lc[n]=t;function e(b){return`__firebase__banner__${b}`}const i="__firebase__banner",o=e2().prod.length>0;function c(){const b=document.getElementById(i);b&&b.remove()}function u(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function f(b,S){b.setAttribute("width","24"),b.setAttribute("id",S),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{Lb=!0,c()},b}function _(b,S){b.setAttribute("id",S),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function y(){const b=n2(i),S=e("text"),R=document.getElementById(S)||document.createElement("span"),M=e("learnmore"),C=document.getElementById(M)||document.createElement("a"),z=e("preprendIcon"),F=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const X=b.element;u(X),_(C,M);const $=g();f(F,z),X.append(F,R,C,$),document.body.appendChild(X)}o?(R.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function i2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function s2(){var n;const t=(n=od())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function r2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function a2(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function o2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function l2(){const n=cn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function c2(){return!s2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function u2(){try{return typeof indexedDB=="object"}catch{return!1}}function h2(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var o;t(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2="FirebaseError";class Rs extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=f2,Object.setPrototypeOf(this,Rs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lu.prototype.create)}}class lu{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},r=`${this.service}/${t}`,o=this.errors[t],c=o?d2(o,i):"Error",u=`${this.serviceName}: ${c} (${r}).`;return new Rs(r,u,i)}}function d2(n,t){return n.replace(g2,(e,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const g2=/\{\$([^}]+)}/g;function m2(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Ia(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const r of e){if(!i.includes(r))return!1;const o=n[r],c=t[r];if(Ub(o)&&Ub(c)){if(!Ia(o,c))return!1}else if(o!==c)return!1}for(const r of i)if(!e.includes(r))return!1;return!0}function Ub(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Ic(n){const t={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");t[decodeURIComponent(r)]=decodeURIComponent(o)}}),t}function Cc(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function p2(n,t){const e=new _2(n,t);return e.subscribe.bind(e)}class _2{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let r;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");y2(t,["next","error","complete"])?r=t:r={next:t,error:e,complete:i},r.next===void 0&&(r.next=Bm),r.error===void 0&&(r.error=Bm),r.complete===void 0&&(r.complete=Bm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function y2(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function Bm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(n){return n&&n._delegate?n._delegate:n}class Ca{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new JR;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const i=this.normalizeInstanceIdentifier(t?.identifier),r=(e=t?.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(E2(t))try{this.getOrInitializeService({instanceIdentifier:Ea})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(t=Ea){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ea){return this.instances.has(t)}getOptions(t=Ea){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[o,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&c.resolve(r)}return r}onInit(t,e){var i;const r=this.normalizeInstanceIdentifier(e),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(t),this.onInitCallbacks.set(r,o);const c=this.instances.get(r);return c&&t(c,r),()=>{o.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const r of i)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:b2(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Ea){return this.component?this.component.multipleInstances?t:Ea:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function b2(n){return n===Ea?void 0:n}function E2(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new v2(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Pt||(Pt={}));const S2={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},w2=Pt.INFO,A2={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},x2=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),r=A2[t];if(r)console[r](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Qp{constructor(t){this.name=t,this._logLevel=w2,this._logHandler=x2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?S2[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...t),this._logHandler(this,Pt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...t),this._logHandler(this,Pt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...t),this._logHandler(this,Pt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...t),this._logHandler(this,Pt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...t),this._logHandler(this,Pt.ERROR,...t)}}const R2=(n,t)=>t.some(e=>n instanceof e);let zb,Bb;function I2(){return zb||(zb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function C2(){return Bb||(Bb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FS=new WeakMap,gp=new WeakMap,HS=new WeakMap,jm=new WeakMap,Xp=new WeakMap;function M2(n){const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{e(gr(n.result)),r()},c=()=>{i(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&FS.set(e,n)}).catch(()=>{}),Xp.set(t,n),t}function D2(n){if(gp.has(n))return;const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{e(),r()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});gp.set(n,t)}let mp={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return gp.get(n);if(t==="objectStoreNames")return n.objectStoreNames||HS.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return gr(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function O2(n){mp=n(mp)}function k2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(Fm(this),t,...e);return HS.set(i,t.sort?t.sort():[t]),gr(i)}:C2().includes(n)?function(...t){return n.apply(Fm(this),t),gr(FS.get(this))}:function(...t){return gr(n.apply(Fm(this),t))}}function N2(n){return typeof n=="function"?k2(n):(n instanceof IDBTransaction&&D2(n),R2(n,I2())?new Proxy(n,mp):n)}function gr(n){if(n instanceof IDBRequest)return M2(n);if(jm.has(n))return jm.get(n);const t=N2(n);return t!==n&&(jm.set(n,t),Xp.set(t,n)),t}const Fm=n=>Xp.get(n);function P2(n,t,{blocked:e,upgrade:i,blocking:r,terminated:o}={}){const c=indexedDB.open(n,t),u=gr(c);return i&&c.addEventListener("upgradeneeded",f=>{i(gr(c.result),f.oldVersion,f.newVersion,gr(c.transaction),f)}),e&&c.addEventListener("blocked",f=>e(f.oldVersion,f.newVersion,f)),u.then(f=>{o&&f.addEventListener("close",()=>o()),r&&f.addEventListener("versionchange",g=>r(g.oldVersion,g.newVersion,g))}).catch(()=>{}),u}const V2=["get","getKey","getAll","getAllKeys","count"],L2=["put","add","delete","clear"],Hm=new Map;function jb(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Hm.get(t))return Hm.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,r=L2.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(r||V2.includes(e)))return;const o=async function(c,...u){const f=this.transaction(c,r?"readwrite":"readonly");let g=f.store;return i&&(g=g.index(u.shift())),(await Promise.all([g[e](...u),r&&f.done]))[0]};return Hm.set(t,o),o}O2(n=>({...n,get:(t,e,i)=>jb(t,e)||n.get(t,e,i),has:(t,e)=>!!jb(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(z2(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function z2(n){const t=n.getComponent();return t?.type==="VERSION"}const pp="@firebase/app",Fb="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=new Qp("@firebase/app"),B2="@firebase/app-compat",j2="@firebase/analytics-compat",F2="@firebase/analytics",H2="@firebase/app-check-compat",q2="@firebase/app-check",G2="@firebase/auth",Y2="@firebase/auth-compat",K2="@firebase/database",W2="@firebase/data-connect",Q2="@firebase/database-compat",X2="@firebase/functions",$2="@firebase/functions-compat",Z2="@firebase/installations",J2="@firebase/installations-compat",tI="@firebase/messaging",eI="@firebase/messaging-compat",nI="@firebase/performance",iI="@firebase/performance-compat",sI="@firebase/remote-config",rI="@firebase/remote-config-compat",aI="@firebase/storage",oI="@firebase/storage-compat",lI="@firebase/firestore",cI="@firebase/ai",uI="@firebase/firestore-compat",hI="firebase",fI="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p="[DEFAULT]",dI={[pp]:"fire-core",[B2]:"fire-core-compat",[F2]:"fire-analytics",[j2]:"fire-analytics-compat",[q2]:"fire-app-check",[H2]:"fire-app-check-compat",[G2]:"fire-auth",[Y2]:"fire-auth-compat",[K2]:"fire-rtdb",[W2]:"fire-data-connect",[Q2]:"fire-rtdb-compat",[X2]:"fire-fn",[$2]:"fire-fn-compat",[Z2]:"fire-iid",[J2]:"fire-iid-compat",[tI]:"fire-fcm",[eI]:"fire-fcm-compat",[nI]:"fire-perf",[iI]:"fire-perf-compat",[sI]:"fire-rc",[rI]:"fire-rc-compat",[aI]:"fire-gcs",[oI]:"fire-gcs-compat",[lI]:"fire-fst",[uI]:"fire-fst-compat",[cI]:"fire-vertex","fire-js":"fire-js",[hI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf=new Map,gI=new Map,yp=new Map;function Hb(n,t){try{n.container.addComponent(t)}catch(e){Ss.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Yo(n){const t=n.name;if(yp.has(t))return Ss.debug(`There were multiple attempts to register component ${t}.`),!1;yp.set(t,n);for(const e of Rf.values())Hb(e,n);for(const e of gI.values())Hb(e,n);return!0}function $p(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function oi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mr=new lu("app","Firebase",mI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ca("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=fI;function qS(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i=Object.assign({name:_p,automaticDataCollectionEnabled:!0},t),r=i.name;if(typeof r!="string"||!r)throw mr.create("bad-app-name",{appName:String(r)});if(e||(e=US()),!e)throw mr.create("no-options");const o=Rf.get(r);if(o){if(Ia(e,o.options)&&Ia(i,o.config))return o;throw mr.create("duplicate-app",{appName:r})}const c=new T2(r);for(const f of yp.values())c.addComponent(f);const u=new pI(e,i,c);return Rf.set(r,u),u}function GS(n=_p){const t=Rf.get(n);if(!t&&n===_p&&US())return qS();if(!t)throw mr.create("no-app",{appName:n});return t}function pr(n,t,e){var i;let r=(i=dI[n])!==null&&i!==void 0?i:n;e&&(r+=`-${e}`);const o=r.match(/\s|\//),c=t.match(/\s|\//);if(o||c){const u=[`Unable to register library "${r}" with version "${t}":`];o&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&c&&u.push("and"),c&&u.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ss.warn(u.join(" "));return}Yo(new Ca(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I="firebase-heartbeat-database",yI=1,Qc="firebase-heartbeat-store";let qm=null;function YS(){return qm||(qm=P2(_I,yI,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Qc)}catch(e){console.warn(e)}}}}).catch(n=>{throw mr.create("idb-open",{originalErrorMessage:n.message})})),qm}async function vI(n){try{const e=(await YS()).transaction(Qc),i=await e.objectStore(Qc).get(KS(n));return await e.done,i}catch(t){if(t instanceof Rs)Ss.warn(t.message);else{const e=mr.create("idb-get",{originalErrorMessage:t?.message});Ss.warn(e.message)}}}async function qb(n,t){try{const i=(await YS()).transaction(Qc,"readwrite");await i.objectStore(Qc).put(t,KS(n)),await i.done}catch(e){if(e instanceof Rs)Ss.warn(e.message);else{const i=mr.create("idb-set",{originalErrorMessage:e?.message});Ss.warn(i.message)}}}function KS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=1024,EI=30;class TI{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new wI(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,e;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Gb();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>EI){const c=AI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ss.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Gb(),{heartbeatsToSend:i,unsentEntries:r}=SI(this._heartbeatsCache.heartbeats),o=xf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Ss.warn(e),""}}}function Gb(){return new Date().toISOString().substring(0,10)}function SI(n,t=bI){const e=[];let i=n.slice();for(const r of n){const o=e.find(c=>c.agent===r.agent);if(o){if(o.dates.push(r.date),Yb(e)>t){o.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),Yb(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class wI{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return u2()?h2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await vI(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return qb(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return qb(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function Yb(n){return xf(JSON.stringify({version:2,heartbeats:n})).length}function AI(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(n){Yo(new Ca("platform-logger",t=>new U2(t),"PRIVATE")),Yo(new Ca("heartbeat",t=>new TI(t),"PRIVATE")),pr(pp,Fb,n),pr(pp,Fb,"esm2017"),pr("fire-js","")}xI("");function Zp(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e}function WS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RI=WS,QS=new lu("auth","Firebase",WS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If=new Qp("@firebase/auth");function II(n,...t){If.logLevel<=Pt.WARN&&If.warn(`Auth (${el}): ${n}`,...t)}function df(n,...t){If.logLevel<=Pt.ERROR&&If.error(`Auth (${el}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(n,...t){throw Jp(n,...t)}function Ni(n,...t){return Jp(n,...t)}function XS(n,t,e){const i=Object.assign(Object.assign({},RI()),{[t]:e});return new lu("auth","Firebase",i).create(t,{appName:n.name})}function _r(n){return XS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jp(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return QS.create(n,...t)}function Et(n,t,...e){if(!n)throw Jp(t,...e)}function ys(n){const t="INTERNAL ASSERTION FAILED: "+n;throw df(t),new Error(t)}function ws(n,t){n||ys(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function CI(){return Kb()==="http:"||Kb()==="https:"}function Kb(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CI()||a2()||"connection"in navigator)?navigator.onLine:!0}function DI(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(t,e){this.shortDelay=t,this.longDelay=e,ws(e>t,"Short delay should be less than long delay!"),this.isMobile=i2()||o2()}get(){return MI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(n,t){ws(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ys("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ys("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ys("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],NI=new uu(3e4,6e4);function Pa(n,t){return n.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:n.tenantId}):t}async function Or(n,t,e,i,r={}){return ZS(n,r,async()=>{let o={},c={};i&&(t==="GET"?c=i:o={body:JSON.stringify(i)});const u=cu(Object.assign({key:n.config.apiKey},c)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const g=Object.assign({method:t,headers:f},o);return r2()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&tl(n.emulatorConfig.host)&&(g.credentials="include"),$S.fetch()(await JS(n,n.config.apiHost,e,u),g)})}async function ZS(n,t,e){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},OI),t);try{const r=new VI(n),o=await Promise.race([e(),r.promise]);r.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw qh(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const u=o.ok?c.errorMessage:c.error.message,[f,g]=u.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw qh(n,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw qh(n,"email-already-in-use",c);if(f==="USER_DISABLED")throw qh(n,"user-disabled",c);const _=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw XS(n,_,g);ui(n,_)}}catch(r){if(r instanceof Rs)throw r;ui(n,"network-request-failed",{message:String(r)})}}async function ld(n,t,e,i,r={}){const o=await Or(n,t,e,i,r);return"mfaPendingCredential"in o&&ui(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function JS(n,t,e,i){const r=`${t}${e}?${i}`,o=n,c=o.config.emulator?t_(n.config,r):`${n.config.apiScheme}://${r}`;return kI.includes(e)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function PI(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class VI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(Ni(this.auth,"network-request-failed")),NI.get())})}}function qh(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const r=Ni(n,t,i);return r.customData._tokenResponse=e,r}function Wb(n){return n!==void 0&&n.enterprise!==void 0}class LI{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return PI(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function UI(n,t){return Or(n,"GET","/v2/recaptchaConfig",Pa(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zI(n,t){return Or(n,"POST","/v1/accounts:delete",t)}async function Cf(n,t){return Or(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function BI(n,t=!1){const e=Be(n),i=await e.getIdToken(t),r=e_(i);Et(r&&r.exp&&r.auth_time&&r.iat,e.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,c=o?.sign_in_provider;return{claims:r,token:i,authTime:Uc(Gm(r.auth_time)),issuedAtTime:Uc(Gm(r.iat)),expirationTime:Uc(Gm(r.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Gm(n){return Number(n)*1e3}function e_(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return df("JWT malformed, contained fewer than 3 sections"),null;try{const r=VS(e);return r?JSON.parse(r):(df("Failed to decode base64 JWT payload"),null)}catch(r){return df("Caught error parsing JWT payload as JSON",r?.toString()),null}}function Qb(n){const t=e_(n);return Et(t,"internal-error"),Et(typeof t.exp<"u","internal-error"),Et(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xc(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof Rs&&jI(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function jI({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Uc(this.lastLoginAt),this.creationTime=Uc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mf(n){var t;const e=n.auth,i=await n.getIdToken(),r=await Xc(n,Cf(e,{idToken:i}));Et(r?.users.length,e,"internal-error");const o=r.users[0];n._notifyReloadListener(o);const c=!((t=o.providerUserInfo)===null||t===void 0)&&t.length?tw(o.providerUserInfo):[],u=qI(n.providerData,c),f=n.isAnonymous,g=!(n.email&&o.passwordHash)&&!u?.length,_=f?g:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new bp(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(n,y)}async function HI(n){const t=Be(n);await Mf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function qI(n,t){return[...n.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function tw(n){return n.map(t=>{var{providerId:e}=t,i=Zp(t,["providerId"]);return{providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GI(n,t){const e=await ZS(n,{},async()=>{const i=cu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,c=await JS(n,r,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:u,body:i};return n.emulatorConfig&&tl(n.emulatorConfig.host)&&(f.credentials="include"),$S.fetch()(c,f)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function YI(n,t){return Or(n,"POST","/v2/accounts:revokeToken",Pa(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Et(t.idToken,"internal-error"),Et(typeof t.idToken<"u","internal-error"),Et(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Qb(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Et(t.length!==0,"internal-error");const e=Qb(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Et(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:r,expiresIn:o}=await GI(t,e);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:r,expirationTime:o}=e,c=new zo;return i&&(Et(typeof i=="string","internal-error",{appName:t}),c.refreshToken=i),r&&(Et(typeof r=="string","internal-error",{appName:t}),c.accessToken=r),o&&(Et(typeof o=="number","internal-error",{appName:t}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new zo,this.toJSON())}_performRefresh(){return ys("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(n,t){Et(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class li{constructor(t){var{uid:e,auth:i,stsTokenManager:r}=t,o=Zp(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new FI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new bp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const e=await Xc(this,this.stsTokenManager.getToken(this.auth,t));return Et(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return BI(this,t)}reload(){return HI(this)}_assign(t){this!==t&&(Et(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new li(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){Et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await Mf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(oi(this.auth.app))return Promise.reject(_r(this.auth));const t=await this.getIdToken();return await Xc(this,zI(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var i,r,o,c,u,f,g,_;const y=(i=e.displayName)!==null&&i!==void 0?i:void 0,b=(r=e.email)!==null&&r!==void 0?r:void 0,S=(o=e.phoneNumber)!==null&&o!==void 0?o:void 0,R=(c=e.photoURL)!==null&&c!==void 0?c:void 0,M=(u=e.tenantId)!==null&&u!==void 0?u:void 0,C=(f=e._redirectEventId)!==null&&f!==void 0?f:void 0,z=(g=e.createdAt)!==null&&g!==void 0?g:void 0,F=(_=e.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:X,emailVerified:$,isAnonymous:W,providerData:ot,stsTokenManager:D}=e;Et(X&&D,t,"internal-error");const x=zo.fromJSON(this.name,D);Et(typeof X=="string",t,"internal-error"),sr(y,t.name),sr(b,t.name),Et(typeof $=="boolean",t,"internal-error"),Et(typeof W=="boolean",t,"internal-error"),sr(S,t.name),sr(R,t.name),sr(M,t.name),sr(C,t.name),sr(z,t.name),sr(F,t.name);const I=new li({uid:X,auth:t,email:b,emailVerified:$,displayName:y,isAnonymous:W,photoURL:R,phoneNumber:S,tenantId:M,stsTokenManager:x,createdAt:z,lastLoginAt:F});return ot&&Array.isArray(ot)&&(I.providerData=ot.map(N=>Object.assign({},N))),C&&(I._redirectEventId=C),I}static async _fromIdTokenResponse(t,e,i=!1){const r=new zo;r.updateFromServerResponse(e);const o=new li({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await Mf(o),o}static async _fromGetAccountInfoResponse(t,e,i){const r=e.users[0];Et(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?tw(r.providerUserInfo):[],c=!(r.email&&r.passwordHash)&&!o?.length,u=new zo;u.updateFromIdToken(i);const f=new li({uid:r.localId,auth:t,stsTokenManager:u,isAnonymous:c}),g={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new bp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!o?.length};return Object.assign(f,g),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb=new Map;function vs(n){ws(n instanceof Function,"Expected a class definition");let t=Xb.get(n);return t?(ws(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,Xb.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}ew.type="NONE";const $b=ew;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(n,t,e){return`firebase:${n}:${t}:${e}`}class Bo{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=gf(this.userKey,r.apiKey,o),this.fullPersistenceKey=gf("persistence",r.apiKey,o),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await Cf(this.auth,{idToken:t}).catch(()=>{});return e?li._fromGetAccountInfoResponse(this.auth,e,t):null}return li._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new Bo(vs($b),t,i);const r=(await Promise.all(e.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let o=r[0]||vs($b);const c=gf(i,t.config.apiKey,t.name);let u=null;for(const g of e)try{const _=await g._get(c);if(_){let y;if(typeof _=="string"){const b=await Cf(t,{idToken:_}).catch(()=>{});if(!b)break;y=await li._fromGetAccountInfoResponse(t,b,_)}else y=li._fromJSON(t,_);g!==o&&(u=y),o=g;break}}catch{}const f=r.filter(g=>g._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new Bo(o,t,i):(o=f[0],u&&await o._set(c,u.toJSON()),await Promise.all(e.map(async g=>{if(g!==o)try{await g._remove(c)}catch{}})),new Bo(o,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(rw(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(nw(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ow(t))return"Blackberry";if(lw(t))return"Webos";if(iw(t))return"Safari";if((t.includes("chrome/")||sw(t))&&!t.includes("edge/"))return"Chrome";if(aw(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if(i?.length===2)return i[1]}return"Other"}function nw(n=cn()){return/firefox\//i.test(n)}function iw(n=cn()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function sw(n=cn()){return/crios\//i.test(n)}function rw(n=cn()){return/iemobile/i.test(n)}function aw(n=cn()){return/android/i.test(n)}function ow(n=cn()){return/blackberry/i.test(n)}function lw(n=cn()){return/webos/i.test(n)}function n_(n=cn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function KI(n=cn()){var t;return n_(n)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function WI(){return l2()&&document.documentMode===10}function cw(n=cn()){return n_(n)||aw(n)||lw(n)||ow(n)||/windows phone/i.test(n)||rw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(n,t=[]){let e;switch(n){case"Browser":e=Zb(cn());break;case"Worker":e=`${Zb(cn())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${el}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=o=>new Promise((c,u)=>{try{const f=t(o);c(f)}catch(f){u(f)}});i.onAbort=e,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const r of e)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XI(n,t={}){return Or(n,"GET","/v2/passwordPolicy",Pa(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=6;class ZI{constructor(t){var e,i,r,o;const c=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=c.minPasswordLength)!==null&&e!==void 0?e:$I,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=t.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,i,r,o,c,u;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,f),this.validatePasswordCharacterOptions(t,f),f.isValid&&(f.isValid=(e=f.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),f.isValid&&(f.isValid=(i=f.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(r=f.containsLowercaseLetter)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(o=f.containsUppercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(c=f.containsNumericCharacter)!==null&&c!==void 0?c:!0),f.isValid&&(f.isValid=(u=f.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),f}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),r&&(e.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(t,e,i,r){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jb(this),this.idTokenSubscription=new Jb(this),this.beforeStateQueue=new QI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=QS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=vs(e)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await Bo.create(this,t),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await Cf(this,{idToken:t}),i=await li._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var e;if(oi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,u=r?._redirectEventId,f=await this.tryRedirectSignIn(t);(!c||c===u)&&f?.user&&(r=f.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Mf(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=DI()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(oi(this.app))return Promise.reject(_r(this));const e=t?Be(t):null;return e&&Et(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Et(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return oi(this.app)?Promise.reject(_r(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return oi(this.app)?Promise.reject(_r(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vs(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await XI(this),e=new ZI(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new lu("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await YI(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&vs(t)||this._popupRedirectResolver;Et(e,this,"argument-error"),this.redirectPersistenceManager=await Bo.create(this,[vs(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,i;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,r){if(this._deleted)return()=>{};const o=typeof e=="function"?e:e.next.bind(e);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Et(u,this,"internal-error"),u.then(()=>{c||o(this.currentUser)}),typeof e=="function"){const f=t.addObserver(e,i,r);return()=>{c=!0,f()}}else{const f=t.addObserver(e);return()=>{c=!0,f()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=uw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const i=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());i&&(e["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(oi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return e?.error&&II(`Error while retrieving App Check token: ${e.error}`),e?.token}}function nl(n){return Be(n)}class Jb{constructor(t){this.auth=t,this.observer=null,this.addObserver=p2(e=>this.observer=e)}get next(){return Et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tC(n){cd=n}function hw(n){return cd.loadJS(n)}function eC(){return cd.recaptchaEnterpriseScript}function nC(){return cd.gapiScript}function iC(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class sC{constructor(){this.enterprise=new rC}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class rC{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const aC="recaptcha-enterprise",fw="NO_RECAPTCHA";class oC{constructor(t){this.type=aC,this.auth=nl(t)}async verify(t="verify",e=!1){async function i(o){if(!e){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,u)=>{UI(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const g=new LI(f);return o.tenantId==null?o._agentRecaptchaConfig=g:o._tenantRecaptchaConfigs[o.tenantId]=g,c(g.siteKey)}}).catch(f=>{u(f)})})}function r(o,c,u){const f=window.grecaptcha;Wb(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:t}).then(g=>{c(g)}).catch(()=>{c(fw)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new sC().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{i(this.auth).then(u=>{if(!e&&Wb(window.grecaptcha))r(u,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=eC();f.length!==0&&(f+=u),hw(f).then(()=>{r(u,o,c)}).catch(g=>{c(g)})}}).catch(u=>{c(u)})})}}async function tE(n,t,e,i=!1,r=!1){const o=new oC(n);let c;if(r)c=fw;else try{c=await o.verify(e)}catch{c=await o.verify(e,!0)}const u=Object.assign({},t);if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const f=u.phoneEnrollmentInfo.phoneNumber,g=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const f=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return i?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function eE(n,t,e,i,r){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await tE(n,t,e,e==="getOobCode");return i(n,c)}else return i(n,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await tE(n,t,e,e==="getOobCode");return i(n,u)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(n,t){const e=$p(n,"auth");if(e.isInitialized()){const r=e.getImmediate(),o=e.getOptions();if(Ia(o,t??{}))return r;ui(r,"already-initialized")}return e.initialize({options:t})}function cC(n,t){const e=t?.persistence||[],i=(Array.isArray(e)?e:[e]).map(vs);t?.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t?.popupRedirectResolver)}function uC(n,t,e){const i=nl(n);Et(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,o=dw(t),{host:c,port:u}=hC(t),f=u===null?"":`:${u}`,g={url:`${o}//${c}${f}/`},_=Object.freeze({host:c,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Et(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Et(Ia(g,i.config.emulator)&&Ia(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,tl(c)?(BS(`${o}//${c}${f}`),jS("Auth",!0)):fC()}function dw(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function hC(n){const t=dw(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:nE(i.substr(o.length+1))}}else{const[o,c]=i.split(":");return{host:o,port:nE(c)}}}function nE(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function fC(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return ys("not implemented")}_getIdTokenResponse(t){return ys("not implemented")}_linkToIdToken(t,e){return ys("not implemented")}_getReauthenticationResolver(t){return ys("not implemented")}}async function dC(n,t){return Or(n,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gC(n,t){return ld(n,"POST","/v1/accounts:signInWithPassword",Pa(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mC(n,t){return ld(n,"POST","/v1/accounts:signInWithEmailLink",Pa(n,t))}async function pC(n,t){return ld(n,"POST","/v1/accounts:signInWithEmailLink",Pa(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends i_{constructor(t,e,i,r=null){super("password",i),this._email=t,this._password=e,this._tenantId=r}static _fromEmailAndPassword(t,e){return new $c(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new $c(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e?.email&&e?.password){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return eE(t,e,"signInWithPassword",gC);case"emailLink":return mC(t,{email:this._email,oobCode:this._password});default:ui(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return eE(t,i,"signUpPassword",dC);case"emailLink":return pC(t,{idToken:e,email:this._email,oobCode:this._password});default:ui(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jo(n,t){return ld(n,"POST","/v1/accounts:signInWithIdp",Pa(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="http://localhost";class Ma extends i_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Ma(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):ui("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r}=e,o=Zp(e,["providerId","signInMethod"]);if(!i||!r)return null;const c=new Ma(i,r);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return jo(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,jo(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,jo(t,e)}buildRequest(){const t={requestUri:_C,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=cu(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vC(n){const t=Ic(Cc(n)).link,e=t?Ic(Cc(t)).deep_link_id:null,i=Ic(Cc(n)).deep_link_id;return(i?Ic(Cc(i)).link:null)||i||e||t||n}class s_{constructor(t){var e,i,r,o,c,u;const f=Ic(Cc(t)),g=(e=f.apiKey)!==null&&e!==void 0?e:null,_=(i=f.oobCode)!==null&&i!==void 0?i:null,y=yC((r=f.mode)!==null&&r!==void 0?r:null);Et(g&&_&&y,"argument-error"),this.apiKey=g,this.operation=y,this.code=_,this.continueUrl=(o=f.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(c=f.lang)!==null&&c!==void 0?c:null,this.tenantId=(u=f.tenantId)!==null&&u!==void 0?u:null}static parseLink(t){const e=vC(t);try{return new s_(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(){this.providerId=il.PROVIDER_ID}static credential(t,e){return $c._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const i=s_.parseLink(e);return Et(i,"argument-error"),$c._fromEmailAndCode(t,i.code,i.tenantId)}}il.PROVIDER_ID="password";il.EMAIL_PASSWORD_SIGN_IN_METHOD="password";il.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu extends gw{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends hu{constructor(){super("facebook.com")}static credential(t){return Ma._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ar.credentialFromTaggedObject(t)}static credentialFromError(t){return ar.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ar.credential(t.oauthAccessToken)}catch{return null}}}ar.FACEBOOK_SIGN_IN_METHOD="facebook.com";ar.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends hu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Ma._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return or.credentialFromTaggedObject(t)}static credentialFromError(t){return or.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return or.credential(e,i)}catch{return null}}}or.GOOGLE_SIGN_IN_METHOD="google.com";or.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends hu{constructor(){super("github.com")}static credential(t){return Ma._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return lr.credentialFromTaggedObject(t)}static credentialFromError(t){return lr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return lr.credential(t.oauthAccessToken)}catch{return null}}}lr.GITHUB_SIGN_IN_METHOD="github.com";lr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends hu{constructor(){super("twitter.com")}static credential(t,e){return Ma._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return cr.credentialFromTaggedObject(t)}static credentialFromError(t){return cr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return cr.credential(e,i)}catch{return null}}}cr.TWITTER_SIGN_IN_METHOD="twitter.com";cr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,r=!1){const o=await li._fromIdTokenResponse(t,i,r),c=iE(i);return new Ko({user:o,providerId:c,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const r=iE(i);return new Ko({user:t,providerId:r,_tokenResponse:i,operationType:e})}}function iE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df extends Rs{constructor(t,e,i,r){var o;super(e.code,e.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Df.prototype),this.customData={appName:t.name,tenantId:(o=t.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,r){return new Df(t,e,i,r)}}function mw(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Df._fromErrorAndOperation(n,o,t,i):o})}async function bC(n,t,e=!1){const i=await Xc(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return Ko._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EC(n,t,e=!1){const{auth:i}=n;if(oi(i.app))return Promise.reject(_r(i));const r="reauthenticate";try{const o=await Xc(n,mw(i,r,t,n),e);Et(o.idToken,i,"internal-error");const c=e_(o.idToken);Et(c,i,"internal-error");const{sub:u}=c;return Et(n.uid===u,i,"user-mismatch"),Ko._forOperation(n,r,o)}catch(o){throw o?.code==="auth/user-not-found"&&ui(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pw(n,t,e=!1){if(oi(n.app))return Promise.reject(_r(n));const i="signIn",r=await mw(n,i,t),o=await Ko._fromIdTokenResponse(n,i,r);return e||await n._updateCurrentUser(o.user),o}async function TC(n,t){return pw(nl(n),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SC(n){const t=nl(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function wC(n,t,e){return oi(n.app)?Promise.reject(_r(n)):TC(Be(n),il.credential(t,e)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&SC(n),i})}function AC(n,t,e,i){return Be(n).onIdTokenChanged(t,e,i)}function xC(n,t,e){return Be(n).beforeAuthStateChanged(t,e)}function RC(n,t,e,i){return Be(n).onAuthStateChanged(t,e,i)}function IC(n){return Be(n).signOut()}const Of="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Of,"1"),this.storage.removeItem(Of),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=1e3,MC=10;class yw extends _w{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cw(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),r=this.localCache[e];i!==r&&t(e,r,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,u,f)=>{this.notifyListeners(c,f)});return}const i=t.key;e?this.detachListener():this.stopPolling();const r=()=>{const c=this.storage.getItem(i);!e&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);WI()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,MC):r()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},CC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}yw.type="LOCAL";const DC=yw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw extends _w{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}vw.type="SESSION";const bw=vw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(r=>r.isListeningto(t));if(e)return e;const i=new ud(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:r,data:o}=e.data,c=this.handlersMap[r];if(!c?.size)return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(c).map(async g=>g(e.origin,o)),f=await OC(u);e.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:f})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ud.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,c;return new Promise((u,f)=>{const g=r_("",20);r.port1.start();const _=setTimeout(()=>{f(new Error("unsupported_event"))},i);c={messageChannel:r,onMessage(y){const b=y;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(_),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(b.data.response);break;default:clearTimeout(_),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(c),r.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:g,data:e},[r.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(){return window}function NC(n){Pi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(){return typeof Pi().WorkerGlobalScope<"u"&&typeof Pi().importScripts=="function"}async function PC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VC(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function LC(){return Ew()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw="firebaseLocalStorageDb",UC=1,kf="firebaseLocalStorage",Sw="fbase_key";class fu{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function hd(n,t){return n.transaction([kf],t?"readwrite":"readonly").objectStore(kf)}function zC(){const n=indexedDB.deleteDatabase(Tw);return new fu(n).toPromise()}function Ep(){const n=indexedDB.open(Tw,UC);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(kf,{keyPath:Sw})}catch(r){e(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(kf)?t(i):(i.close(),await zC(),t(await Ep()))})})}async function sE(n,t,e){const i=hd(n,!0).put({[Sw]:t,value:e});return new fu(i).toPromise()}async function BC(n,t){const e=hd(n,!1).get(t),i=await new fu(e).toPromise();return i===void 0?null:i.value}function rE(n,t){const e=hd(n,!0).delete(t);return new fu(e).toPromise()}const jC=800,FC=3;class ww{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ep(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>FC)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ew()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ud._getInstance(LC()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var t,e;if(this.activeServiceWorker=await PC(),!this.activeServiceWorker)return;this.sender=new kC(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((e=i[0])===null||e===void 0)&&e.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||VC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Ep();return await sE(t,Of,"1"),await rE(t,Of),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>sE(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>BC(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>rE(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const o=hd(r,!1).getAll();return new fu(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:o}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),e.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),e.push(r));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ww.type="LOCAL";const HC=ww;new uu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(n,t){return t?vs(t):(Et(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_ extends i_{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return jo(t,this._buildIdpRequest())}_linkToIdToken(t,e){return jo(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return jo(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function GC(n){return pw(n.auth,new a_(n),n.bypassAuthState)}function YC(n){const{auth:t,user:e}=n;return Et(e,t,"internal-error"),EC(e,new a_(n),n.bypassAuthState)}async function KC(n){const{auth:t,user:e}=n;return Et(e,t,"internal-error"),bC(e,new a_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(t,e,i,r,o=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:r,tenantId:o,error:c,type:u}=t;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:e,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(f))}catch(g){this.reject(g)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return GC;case"linkViaPopup":case"linkViaRedirect":return KC;case"reauthViaPopup":case"reauthViaRedirect":return YC;default:ui(this.auth,"internal-error")}}resolve(t){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=new uu(2e3,1e4);class Uo extends Aw{constructor(t,e,i,r,o){super(t,e,r,o),this.provider=i,this.authWindow=null,this.pollId=null,Uo.currentPopupAction&&Uo.currentPopupAction.cancel(),Uo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Et(t,this.auth,"internal-error"),t}async onExecution(){ws(this.filter.length===1,"Popup operations only handle one event");const t=r_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Ni(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Ni(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Uo.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,i;if(!((i=(e=this.authWindow)===null||e===void 0?void 0:e.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ni(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,WC.get())};t()}}Uo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC="pendingRedirect",mf=new Map;class XC extends Aw{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=mf.get(this.auth._key());if(!t){try{const i=await $C(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}mf.set(this.auth._key(),t)}return this.bypassAuthState||mf.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $C(n,t){const e=tM(t),i=JC(n);if(!await i._isAvailable())return!1;const r=await i._get(e)==="true";return await i._remove(e),r}function ZC(n,t){mf.set(n._key(),t)}function JC(n){return vs(n._redirectPersistence)}function tM(n){return gf(QC,n.config.apiKey,n.name)}async function eM(n,t,e=!1){if(oi(n.app))return Promise.reject(_r(n));const i=nl(n),r=qC(i,t),c=await new XC(i,r,e).execute();return c&&!e&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM=10*60*1e3;class iM{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!sM(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!xw(t)){const r=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";e.onError(Ni(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=nM&&this.cachedEventUids.clear(),this.cachedEventUids.has(aE(t))}saveEventToCache(t){this.cachedEventUids.add(aE(t)),this.lastProcessedEventTime=Date.now()}}function aE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function xw({type:n,error:t}){return n==="unknown"&&t?.code==="auth/no-auth-event"}function sM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xw(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rM(n,t={}){return Or(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oM=/^https?/;async function lM(n){if(n.config.emulator)return;const{authorizedDomains:t}=await rM(n);for(const e of t)try{if(cM(e))return}catch{}ui(n,"unauthorized-domain")}function cM(n){const t=vp(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===i}if(!oM.test(e))return!1;if(aM.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM=new uu(3e4,6e4);function oE(){const n=Pi().___jsl;if(n?.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function hM(n){return new Promise((t,e)=>{var i,r,o;function c(){oE(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{oE(),e(Ni(n,"network-request-failed"))},timeout:uM.get()})}if(!((r=(i=Pi().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)t(gapi.iframes.getContext());else if(!((o=Pi().gapi)===null||o===void 0)&&o.load)c();else{const u=iC("iframefcb");return Pi()[u]=()=>{gapi.load?c():e(Ni(n,"network-request-failed"))},hw(`${nC()}?onload=${u}`).catch(f=>e(f))}}).catch(t=>{throw pf=null,t})}let pf=null;function fM(n){return pf=pf||hM(n),pf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM=new uu(5e3,15e3),gM="__/auth/iframe",mM="emulator/auth/iframe",pM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_M=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yM(n){const t=n.config;Et(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?t_(t,mM):`https://${n.config.authDomain}/${gM}`,i={apiKey:t.apiKey,appName:n.name,v:el},r=_M.get(n.config.apiHost);r&&(i.eid=r);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${e}?${cu(i).slice(1)}`}async function vM(n){const t=await fM(n),e=Pi().gapi;return Et(e,n,"internal-error"),t.open({where:document.body,url:yM(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pM,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const c=Ni(n,"network-request-failed"),u=Pi().setTimeout(()=>{o(c)},dM.get());function f(){Pi().clearTimeout(u),r(i)}i.ping(f).then(f,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EM=500,TM=600,SM="_blank",wM="http://localhost";class lE{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function AM(n,t,e,i=EM,r=TM){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const f=Object.assign(Object.assign({},bM),{width:i.toString(),height:r.toString(),top:o,left:c}),g=cn().toLowerCase();e&&(u=sw(g)?SM:e),nw(g)&&(t=t||wM,f.scrollbars="yes");const _=Object.entries(f).reduce((b,[S,R])=>`${b}${S}=${R},`,"");if(KI(g)&&u!=="_self")return xM(t||"",u),new lE(null);const y=window.open(t||"",u,_);Et(y,n,"popup-blocked");try{y.focus()}catch{}return new lE(y)}function xM(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM="__/auth/handler",IM="emulator/auth/handler",CM=encodeURIComponent("fac");async function cE(n,t,e,i,r,o){Et(n.config.authDomain,n,"auth-domain-config-required"),Et(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:el,eventId:r};if(t instanceof gw){t.setDefaultLanguage(n.languageCode),c.providerId=t.providerId||"",m2(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[_,y]of Object.entries({}))c[_]=y}if(t instanceof hu){const _=t.getScopes().filter(y=>y!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const u=c;for(const _ of Object.keys(u))u[_]===void 0&&delete u[_];const f=await n._getAppCheckToken(),g=f?`#${CM}=${encodeURIComponent(f)}`:"";return`${MM(n)}?${cu(u).slice(1)}${g}`}function MM({config:n}){return n.emulator?t_(n,IM):`https://${n.authDomain}/${RM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="webStorageSupport";class DM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bw,this._completeRedirectFn=eM,this._overrideRedirectResult=ZC}async _openPopup(t,e,i,r){var o;ws((o=this.eventManagers[t._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const c=await cE(t,e,i,vp(),r);return AM(t,c,r_())}async _openRedirect(t,e,i,r){await this._originValidation(t);const o=await cE(t,e,i,vp(),r);return NC(o),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:r,promise:o}=this.eventManagers[e];return r?Promise.resolve(r):(ws(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await vM(t),i=new iM(t);return e.register("authEvent",r=>(Et(r?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Ym,{type:Ym},r=>{var o;const c=(o=r?.[0])===null||o===void 0?void 0:o[Ym];c!==void 0&&e(!!c),ui(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=lM(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return cw()||iw()||n_()}}const OM=DM;var uE="@firebase/auth",hE="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PM(n){Yo(new Ca("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=i.options;Et(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:c,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uw(n)},g=new JI(i,r,o,f);return cC(g,e),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),Yo(new Ca("auth-internal",t=>{const e=nl(t.getProvider("auth").getImmediate());return(i=>new kM(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),pr(uE,hE,NM(n)),pr(uE,hE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=5*60,LM=zS("authIdTokenMaxAge")||VM;let fE=null;const UM=n=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>LM)return;const r=e?.token;fE!==r&&(fE=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function zM(n=GS()){const t=$p(n,"auth");if(t.isInitialized())return t.getImmediate();const e=lC(n,{popupRedirectResolver:OM,persistence:[HC,DC,bw]}),i=zS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const c=UM(o.toString());xC(e,c,()=>c(e.currentUser)),AC(e,u=>c(u))}}const r=LS("auth");return r&&uC(e,`http://${r}`),e}function BM(){var n,t;return(t=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&t!==void 0?t:document}tC({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=r=>{const o=Ni("internal-error");o.customData=r,e(o)},i.type="text/javascript",i.charset="UTF-8",BM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PM("Browser");var jM="firebase",FM="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pr(jM,FM,"app");var dE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yr,Rw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(D,x){function I(){}I.prototype=x.prototype,D.D=x.prototype,D.prototype=new I,D.prototype.constructor=D,D.C=function(N,P,L){for(var O=Array(arguments.length-2),Gt=2;Gt<arguments.length;Gt++)O[Gt-2]=arguments[Gt];return x.prototype[P].apply(N,O)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(D,x,I){I||(I=0);var N=Array(16);if(typeof x=="string")for(var P=0;16>P;++P)N[P]=x.charCodeAt(I++)|x.charCodeAt(I++)<<8|x.charCodeAt(I++)<<16|x.charCodeAt(I++)<<24;else for(P=0;16>P;++P)N[P]=x[I++]|x[I++]<<8|x[I++]<<16|x[I++]<<24;x=D.g[0],I=D.g[1],P=D.g[2];var L=D.g[3],O=x+(L^I&(P^L))+N[0]+3614090360&4294967295;x=I+(O<<7&4294967295|O>>>25),O=L+(P^x&(I^P))+N[1]+3905402710&4294967295,L=x+(O<<12&4294967295|O>>>20),O=P+(I^L&(x^I))+N[2]+606105819&4294967295,P=L+(O<<17&4294967295|O>>>15),O=I+(x^P&(L^x))+N[3]+3250441966&4294967295,I=P+(O<<22&4294967295|O>>>10),O=x+(L^I&(P^L))+N[4]+4118548399&4294967295,x=I+(O<<7&4294967295|O>>>25),O=L+(P^x&(I^P))+N[5]+1200080426&4294967295,L=x+(O<<12&4294967295|O>>>20),O=P+(I^L&(x^I))+N[6]+2821735955&4294967295,P=L+(O<<17&4294967295|O>>>15),O=I+(x^P&(L^x))+N[7]+4249261313&4294967295,I=P+(O<<22&4294967295|O>>>10),O=x+(L^I&(P^L))+N[8]+1770035416&4294967295,x=I+(O<<7&4294967295|O>>>25),O=L+(P^x&(I^P))+N[9]+2336552879&4294967295,L=x+(O<<12&4294967295|O>>>20),O=P+(I^L&(x^I))+N[10]+4294925233&4294967295,P=L+(O<<17&4294967295|O>>>15),O=I+(x^P&(L^x))+N[11]+2304563134&4294967295,I=P+(O<<22&4294967295|O>>>10),O=x+(L^I&(P^L))+N[12]+1804603682&4294967295,x=I+(O<<7&4294967295|O>>>25),O=L+(P^x&(I^P))+N[13]+4254626195&4294967295,L=x+(O<<12&4294967295|O>>>20),O=P+(I^L&(x^I))+N[14]+2792965006&4294967295,P=L+(O<<17&4294967295|O>>>15),O=I+(x^P&(L^x))+N[15]+1236535329&4294967295,I=P+(O<<22&4294967295|O>>>10),O=x+(P^L&(I^P))+N[1]+4129170786&4294967295,x=I+(O<<5&4294967295|O>>>27),O=L+(I^P&(x^I))+N[6]+3225465664&4294967295,L=x+(O<<9&4294967295|O>>>23),O=P+(x^I&(L^x))+N[11]+643717713&4294967295,P=L+(O<<14&4294967295|O>>>18),O=I+(L^x&(P^L))+N[0]+3921069994&4294967295,I=P+(O<<20&4294967295|O>>>12),O=x+(P^L&(I^P))+N[5]+3593408605&4294967295,x=I+(O<<5&4294967295|O>>>27),O=L+(I^P&(x^I))+N[10]+38016083&4294967295,L=x+(O<<9&4294967295|O>>>23),O=P+(x^I&(L^x))+N[15]+3634488961&4294967295,P=L+(O<<14&4294967295|O>>>18),O=I+(L^x&(P^L))+N[4]+3889429448&4294967295,I=P+(O<<20&4294967295|O>>>12),O=x+(P^L&(I^P))+N[9]+568446438&4294967295,x=I+(O<<5&4294967295|O>>>27),O=L+(I^P&(x^I))+N[14]+3275163606&4294967295,L=x+(O<<9&4294967295|O>>>23),O=P+(x^I&(L^x))+N[3]+4107603335&4294967295,P=L+(O<<14&4294967295|O>>>18),O=I+(L^x&(P^L))+N[8]+1163531501&4294967295,I=P+(O<<20&4294967295|O>>>12),O=x+(P^L&(I^P))+N[13]+2850285829&4294967295,x=I+(O<<5&4294967295|O>>>27),O=L+(I^P&(x^I))+N[2]+4243563512&4294967295,L=x+(O<<9&4294967295|O>>>23),O=P+(x^I&(L^x))+N[7]+1735328473&4294967295,P=L+(O<<14&4294967295|O>>>18),O=I+(L^x&(P^L))+N[12]+2368359562&4294967295,I=P+(O<<20&4294967295|O>>>12),O=x+(I^P^L)+N[5]+4294588738&4294967295,x=I+(O<<4&4294967295|O>>>28),O=L+(x^I^P)+N[8]+2272392833&4294967295,L=x+(O<<11&4294967295|O>>>21),O=P+(L^x^I)+N[11]+1839030562&4294967295,P=L+(O<<16&4294967295|O>>>16),O=I+(P^L^x)+N[14]+4259657740&4294967295,I=P+(O<<23&4294967295|O>>>9),O=x+(I^P^L)+N[1]+2763975236&4294967295,x=I+(O<<4&4294967295|O>>>28),O=L+(x^I^P)+N[4]+1272893353&4294967295,L=x+(O<<11&4294967295|O>>>21),O=P+(L^x^I)+N[7]+4139469664&4294967295,P=L+(O<<16&4294967295|O>>>16),O=I+(P^L^x)+N[10]+3200236656&4294967295,I=P+(O<<23&4294967295|O>>>9),O=x+(I^P^L)+N[13]+681279174&4294967295,x=I+(O<<4&4294967295|O>>>28),O=L+(x^I^P)+N[0]+3936430074&4294967295,L=x+(O<<11&4294967295|O>>>21),O=P+(L^x^I)+N[3]+3572445317&4294967295,P=L+(O<<16&4294967295|O>>>16),O=I+(P^L^x)+N[6]+76029189&4294967295,I=P+(O<<23&4294967295|O>>>9),O=x+(I^P^L)+N[9]+3654602809&4294967295,x=I+(O<<4&4294967295|O>>>28),O=L+(x^I^P)+N[12]+3873151461&4294967295,L=x+(O<<11&4294967295|O>>>21),O=P+(L^x^I)+N[15]+530742520&4294967295,P=L+(O<<16&4294967295|O>>>16),O=I+(P^L^x)+N[2]+3299628645&4294967295,I=P+(O<<23&4294967295|O>>>9),O=x+(P^(I|~L))+N[0]+4096336452&4294967295,x=I+(O<<6&4294967295|O>>>26),O=L+(I^(x|~P))+N[7]+1126891415&4294967295,L=x+(O<<10&4294967295|O>>>22),O=P+(x^(L|~I))+N[14]+2878612391&4294967295,P=L+(O<<15&4294967295|O>>>17),O=I+(L^(P|~x))+N[5]+4237533241&4294967295,I=P+(O<<21&4294967295|O>>>11),O=x+(P^(I|~L))+N[12]+1700485571&4294967295,x=I+(O<<6&4294967295|O>>>26),O=L+(I^(x|~P))+N[3]+2399980690&4294967295,L=x+(O<<10&4294967295|O>>>22),O=P+(x^(L|~I))+N[10]+4293915773&4294967295,P=L+(O<<15&4294967295|O>>>17),O=I+(L^(P|~x))+N[1]+2240044497&4294967295,I=P+(O<<21&4294967295|O>>>11),O=x+(P^(I|~L))+N[8]+1873313359&4294967295,x=I+(O<<6&4294967295|O>>>26),O=L+(I^(x|~P))+N[15]+4264355552&4294967295,L=x+(O<<10&4294967295|O>>>22),O=P+(x^(L|~I))+N[6]+2734768916&4294967295,P=L+(O<<15&4294967295|O>>>17),O=I+(L^(P|~x))+N[13]+1309151649&4294967295,I=P+(O<<21&4294967295|O>>>11),O=x+(P^(I|~L))+N[4]+4149444226&4294967295,x=I+(O<<6&4294967295|O>>>26),O=L+(I^(x|~P))+N[11]+3174756917&4294967295,L=x+(O<<10&4294967295|O>>>22),O=P+(x^(L|~I))+N[2]+718787259&4294967295,P=L+(O<<15&4294967295|O>>>17),O=I+(L^(P|~x))+N[9]+3951481745&4294967295,D.g[0]=D.g[0]+x&4294967295,D.g[1]=D.g[1]+(P+(O<<21&4294967295|O>>>11))&4294967295,D.g[2]=D.g[2]+P&4294967295,D.g[3]=D.g[3]+L&4294967295}i.prototype.u=function(D,x){x===void 0&&(x=D.length);for(var I=x-this.blockSize,N=this.B,P=this.h,L=0;L<x;){if(P==0)for(;L<=I;)r(this,D,L),L+=this.blockSize;if(typeof D=="string"){for(;L<x;)if(N[P++]=D.charCodeAt(L++),P==this.blockSize){r(this,N),P=0;break}}else for(;L<x;)if(N[P++]=D[L++],P==this.blockSize){r(this,N),P=0;break}}this.h=P,this.o+=x},i.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var x=1;x<D.length-8;++x)D[x]=0;var I=8*this.o;for(x=D.length-8;x<D.length;++x)D[x]=I&255,I/=256;for(this.u(D),D=Array(16),x=I=0;4>x;++x)for(var N=0;32>N;N+=8)D[I++]=this.g[x]>>>N&255;return D};function o(D,x){var I=u;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=x(D)}function c(D,x){this.h=x;for(var I=[],N=!0,P=D.length-1;0<=P;P--){var L=D[P]|0;N&&L==x||(I[P]=L,N=!1)}this.g=I}var u={};function f(D){return-128<=D&&128>D?o(D,function(x){return new c([x|0],0>x?-1:0)}):new c([D|0],0>D?-1:0)}function g(D){if(isNaN(D)||!isFinite(D))return y;if(0>D)return C(g(-D));for(var x=[],I=1,N=0;D>=I;N++)x[N]=D/I|0,I*=4294967296;return new c(x,0)}function _(D,x){if(D.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(D.charAt(0)=="-")return C(_(D.substring(1),x));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=g(Math.pow(x,8)),N=y,P=0;P<D.length;P+=8){var L=Math.min(8,D.length-P),O=parseInt(D.substring(P,P+L),x);8>L?(L=g(Math.pow(x,L)),N=N.j(L).add(g(O))):(N=N.j(I),N=N.add(g(O)))}return N}var y=f(0),b=f(1),S=f(16777216);n=c.prototype,n.m=function(){if(M(this))return-C(this).m();for(var D=0,x=1,I=0;I<this.g.length;I++){var N=this.i(I);D+=(0<=N?N:4294967296+N)*x,x*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(R(this))return"0";if(M(this))return"-"+C(this).toString(D);for(var x=g(Math.pow(D,6)),I=this,N="";;){var P=$(I,x).g;I=z(I,P.j(x));var L=((0<I.g.length?I.g[0]:I.h)>>>0).toString(D);if(I=P,R(I))return L+N;for(;6>L.length;)L="0"+L;N=L+N}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function R(D){if(D.h!=0)return!1;for(var x=0;x<D.g.length;x++)if(D.g[x]!=0)return!1;return!0}function M(D){return D.h==-1}n.l=function(D){return D=z(this,D),M(D)?-1:R(D)?0:1};function C(D){for(var x=D.g.length,I=[],N=0;N<x;N++)I[N]=~D.g[N];return new c(I,~D.h).add(b)}n.abs=function(){return M(this)?C(this):this},n.add=function(D){for(var x=Math.max(this.g.length,D.g.length),I=[],N=0,P=0;P<=x;P++){var L=N+(this.i(P)&65535)+(D.i(P)&65535),O=(L>>>16)+(this.i(P)>>>16)+(D.i(P)>>>16);N=O>>>16,L&=65535,O&=65535,I[P]=O<<16|L}return new c(I,I[I.length-1]&-2147483648?-1:0)};function z(D,x){return D.add(C(x))}n.j=function(D){if(R(this)||R(D))return y;if(M(this))return M(D)?C(this).j(C(D)):C(C(this).j(D));if(M(D))return C(this.j(C(D)));if(0>this.l(S)&&0>D.l(S))return g(this.m()*D.m());for(var x=this.g.length+D.g.length,I=[],N=0;N<2*x;N++)I[N]=0;for(N=0;N<this.g.length;N++)for(var P=0;P<D.g.length;P++){var L=this.i(N)>>>16,O=this.i(N)&65535,Gt=D.i(P)>>>16,yt=D.i(P)&65535;I[2*N+2*P]+=O*yt,F(I,2*N+2*P),I[2*N+2*P+1]+=L*yt,F(I,2*N+2*P+1),I[2*N+2*P+1]+=O*Gt,F(I,2*N+2*P+1),I[2*N+2*P+2]+=L*Gt,F(I,2*N+2*P+2)}for(N=0;N<x;N++)I[N]=I[2*N+1]<<16|I[2*N];for(N=x;N<2*x;N++)I[N]=0;return new c(I,0)};function F(D,x){for(;(D[x]&65535)!=D[x];)D[x+1]+=D[x]>>>16,D[x]&=65535,x++}function X(D,x){this.g=D,this.h=x}function $(D,x){if(R(x))throw Error("division by zero");if(R(D))return new X(y,y);if(M(D))return x=$(C(D),x),new X(C(x.g),C(x.h));if(M(x))return x=$(D,C(x)),new X(C(x.g),x.h);if(30<D.g.length){if(M(D)||M(x))throw Error("slowDivide_ only works with positive integers.");for(var I=b,N=x;0>=N.l(D);)I=W(I),N=W(N);var P=ot(I,1),L=ot(N,1);for(N=ot(N,2),I=ot(I,2);!R(N);){var O=L.add(N);0>=O.l(D)&&(P=P.add(I),L=O),N=ot(N,1),I=ot(I,1)}return x=z(D,P.j(x)),new X(P,x)}for(P=y;0<=D.l(x);){for(I=Math.max(1,Math.floor(D.m()/x.m())),N=Math.ceil(Math.log(I)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),L=g(I),O=L.j(x);M(O)||0<O.l(D);)I-=N,L=g(I),O=L.j(x);R(L)&&(L=b),P=P.add(L),D=z(D,O)}return new X(P,D)}n.A=function(D){return $(this,D).h},n.and=function(D){for(var x=Math.max(this.g.length,D.g.length),I=[],N=0;N<x;N++)I[N]=this.i(N)&D.i(N);return new c(I,this.h&D.h)},n.or=function(D){for(var x=Math.max(this.g.length,D.g.length),I=[],N=0;N<x;N++)I[N]=this.i(N)|D.i(N);return new c(I,this.h|D.h)},n.xor=function(D){for(var x=Math.max(this.g.length,D.g.length),I=[],N=0;N<x;N++)I[N]=this.i(N)^D.i(N);return new c(I,this.h^D.h)};function W(D){for(var x=D.g.length+1,I=[],N=0;N<x;N++)I[N]=D.i(N)<<1|D.i(N-1)>>>31;return new c(I,D.h)}function ot(D,x){var I=x>>5;x%=32;for(var N=D.g.length-I,P=[],L=0;L<N;L++)P[L]=0<x?D.i(L+I)>>>x|D.i(L+I+1)<<32-x:D.i(L+I);return new c(P,D.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Rw=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,yr=c}).apply(typeof dE<"u"?dE:typeof self<"u"?self:typeof window<"u"?window:{});var Gh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Iw,Mc,Cw,_f,Tp,Mw,Dw,Ow;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,v,E){return d==Array.prototype||d==Object.prototype||(d[v]=E.value),d};function e(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gh=="object"&&Gh];for(var v=0;v<d.length;++v){var E=d[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=e(this);function r(d,v){if(v)t:{var E=i;d=d.split(".");for(var A=0;A<d.length-1;A++){var j=d[A];if(!(j in E))break t;E=E[j]}d=d[d.length-1],A=E[d],v=v(A),v!=A&&v!=null&&t(E,d,{configurable:!0,writable:!0,value:v})}}function o(d,v){d instanceof String&&(d+="");var E=0,A=!1,j={next:function(){if(!A&&E<d.length){var Q=E++;return{value:v(Q,d[Q]),done:!1}}return A=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}r("Array.prototype.values",function(d){return d||function(){return o(this,function(v,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function f(d){var v=typeof d;return v=v!="object"?v:d?Array.isArray(d)?"array":v:"null",v=="array"||v=="object"&&typeof d.length=="number"}function g(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function _(d,v,E){return d.call.apply(d.bind,arguments)}function y(d,v,E){if(!d)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,A),d.apply(v,j)}}return function(){return d.apply(v,arguments)}}function b(d,v,E){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:y,b.apply(null,arguments)}function S(d,v){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),d.apply(this,A)}}function R(d,v){function E(){}E.prototype=v.prototype,d.aa=v.prototype,d.prototype=new E,d.prototype.constructor=d,d.Qb=function(A,j,Q){for(var lt=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)lt[Lt-2]=arguments[Lt];return v.prototype[j].apply(A,lt)}}function M(d){const v=d.length;if(0<v){const E=Array(v);for(let A=0;A<v;A++)E[A]=d[A];return E}return[]}function C(d,v){for(let E=1;E<arguments.length;E++){const A=arguments[E];if(f(A)){const j=d.length||0,Q=A.length||0;d.length=j+Q;for(let lt=0;lt<Q;lt++)d[j+lt]=A[lt]}else d.push(A)}}class z{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function F(d){return/^[\s\xa0]*$/.test(d)}function X(){var d=u.navigator;return d&&(d=d.userAgent)?d:""}function $(d){return $[" "](d),d}$[" "]=function(){};var W=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function ot(d,v,E){for(const A in d)v.call(E,d[A],A,d)}function D(d,v){for(const E in d)v.call(void 0,d[E],E,d)}function x(d){const v={};for(const E in d)v[E]=d[E];return v}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(d,v){let E,A;for(let j=1;j<arguments.length;j++){A=arguments[j];for(E in A)d[E]=A[E];for(let Q=0;Q<I.length;Q++)E=I[Q],Object.prototype.hasOwnProperty.call(A,E)&&(d[E]=A[E])}}function P(d){var v=1;d=d.split(":");const E=[];for(;0<v&&d.length;)E.push(d.shift()),v--;return d.length&&E.push(d.join(":")),E}function L(d){u.setTimeout(()=>{throw d},0)}function O(){var d=St;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class Gt{constructor(){this.h=this.g=null}add(v,E){const A=yt.get();A.set(v,E),this.h?this.h.next=A:this.g=A,this.h=A}}var yt=new z(()=>new K,d=>d.reset());class K{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let rt,ft=!1,St=new Gt,V=()=>{const d=u.Promise.resolve(void 0);rt=()=>{d.then(st)}};var st=()=>{for(var d;d=O();){try{d.h.call(d.g)}catch(E){L(E)}var v=yt;v.j(d),100>v.h&&(v.h++,d.next=v.g,v.g=d)}ft=!1};function ct(){this.s=this.s,this.C=this.C}ct.prototype.s=!1,ct.prototype.ma=function(){this.s||(this.s=!0,this.N())},ct.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function at(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}at.prototype.h=function(){this.defaultPrevented=!0};var gt=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};u.addEventListener("test",E,v),u.removeEventListener("test",E,v)}catch{}return d}();function Rt(d,v){if(at.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var E=this.type=d.type,A=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget){if(W){t:{try{$(v.nodeName);var j=!0;break t}catch{}j=!1}j||(v=null)}}else E=="mouseover"?v=d.fromElement:E=="mouseout"&&(v=d.toElement);this.relatedTarget=v,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:_t[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Rt.aa.h.call(this)}}R(Rt,at);var _t={2:"touch",3:"pen",4:"mouse"};Rt.prototype.h=function(){Rt.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),re=0;function fi(d,v,E,A,j){this.listener=d,this.proxy=null,this.src=v,this.type=E,this.capture=!!A,this.ha=j,this.key=++re,this.da=this.fa=!1}function Cs(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Fi(d){this.src=d,this.g={},this.h=0}Fi.prototype.add=function(d,v,E,A,j){var Q=d.toString();d=this.g[Q],d||(d=this.g[Q]=[],this.h++);var lt=Vr(d,v,A,j);return-1<lt?(v=d[lt],E||(v.fa=!1)):(v=new fi(v,this.src,Q,!!A,j),v.fa=E,d.push(v)),v};function Pr(d,v){var E=v.type;if(E in d.g){var A=d.g[E],j=Array.prototype.indexOf.call(A,v,void 0),Q;(Q=0<=j)&&Array.prototype.splice.call(A,j,1),Q&&(Cs(v),d.g[E].length==0&&(delete d.g[E],d.h--))}}function Vr(d,v,E,A){for(var j=0;j<d.length;++j){var Q=d[j];if(!Q.da&&Q.listener==v&&Q.capture==!!E&&Q.ha==A)return j}return-1}var Lr="closure_lm_"+(1e6*Math.random()|0),fl={};function bu(d,v,E,A,j){if(Array.isArray(v)){for(var Q=0;Q<v.length;Q++)bu(d,v[Q],E,A,j);return null}return E=Eu(E),d&&d[je]?d.K(v,E,g(A)?!!A.capture:!1,j):Ln(d,v,E,!1,A,j)}function Ln(d,v,E,A,j,Q){if(!v)throw Error("Invalid event type");var lt=g(j)?!!j.capture:!!j,Lt=Ba(d);if(Lt||(d[Lr]=Lt=new Fi(d)),E=Lt.add(v,E,A,lt,Q),E.proxy)return E;if(A=Nd(),E.proxy=A,A.src=d,A.listener=E,d.addEventListener)gt||(j=lt),j===void 0&&(j=!1),d.addEventListener(v.toString(),A,j);else if(d.attachEvent)d.attachEvent(Ur(v.toString()),A);else if(d.addListener&&d.removeListener)d.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Nd(){function d(E){return v.call(d.src,d.listener,E)}const v=Pd;return d}function dl(d,v,E,A,j){if(Array.isArray(v))for(var Q=0;Q<v.length;Q++)dl(d,v[Q],E,A,j);else A=g(A)?!!A.capture:!!A,E=Eu(E),d&&d[je]?(d=d.i,v=String(v).toString(),v in d.g&&(Q=d.g[v],E=Vr(Q,E,A,j),-1<E&&(Cs(Q[E]),Array.prototype.splice.call(Q,E,1),Q.length==0&&(delete d.g[v],d.h--)))):d&&(d=Ba(d))&&(v=d.g[v.toString()],d=-1,v&&(d=Vr(v,E,A,j)),(E=-1<d?v[d]:null)&&za(E))}function za(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[je])Pr(v.i,d);else{var E=d.type,A=d.proxy;v.removeEventListener?v.removeEventListener(E,A,d.capture):v.detachEvent?v.detachEvent(Ur(E),A):v.addListener&&v.removeListener&&v.removeListener(A),(E=Ba(v))?(Pr(E,d),E.h==0&&(E.src=null,v[Lr]=null)):Cs(d)}}}function Ur(d){return d in fl?fl[d]:fl[d]="on"+d}function Pd(d,v){if(d.da)d=!0;else{v=new Rt(v,this);var E=d.listener,A=d.ha||d.src;d.fa&&za(d),d=E.call(A,v)}return d}function Ba(d){return d=d[Lr],d instanceof Fi?d:null}var gl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Eu(d){return typeof d=="function"?d:(d[gl]||(d[gl]=function(v){return d.handleEvent(v)}),d[gl])}function me(){ct.call(this),this.i=new Fi(this),this.M=this,this.F=null}R(me,ct),me.prototype[je]=!0,me.prototype.removeEventListener=function(d,v,E,A){dl(this,d,v,E,A)};function Xt(d,v){var E,A=d.F;if(A)for(E=[];A;A=A.F)E.push(A);if(d=d.M,A=v.type||v,typeof v=="string")v=new at(v,d);else if(v instanceof at)v.target=v.target||d;else{var j=v;v=new at(A,d),N(v,j)}if(j=!0,E)for(var Q=E.length-1;0<=Q;Q--){var lt=v.g=E[Q];j=wn(lt,A,!0,v)&&j}if(lt=v.g=d,j=wn(lt,A,!0,v)&&j,j=wn(lt,A,!1,v)&&j,E)for(Q=0;Q<E.length;Q++)lt=v.g=E[Q],j=wn(lt,A,!1,v)&&j}me.prototype.N=function(){if(me.aa.N.call(this),this.i){var d=this.i,v;for(v in d.g){for(var E=d.g[v],A=0;A<E.length;A++)Cs(E[A]);delete d.g[v],d.h--}}this.F=null},me.prototype.K=function(d,v,E,A){return this.i.add(String(d),v,!1,E,A)},me.prototype.L=function(d,v,E,A){return this.i.add(String(d),v,!0,E,A)};function wn(d,v,E,A){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();for(var j=!0,Q=0;Q<v.length;++Q){var lt=v[Q];if(lt&&!lt.da&&lt.capture==E){var Lt=lt.listener,ke=lt.ha||lt.src;lt.fa&&Pr(d.i,lt),j=Lt.call(ke,A)!==!1&&j}}return j&&!A.defaultPrevented}function nn(d,v,E){if(typeof d=="function")E&&(d=b(d,E));else if(d&&typeof d.handleEvent=="function")d=b(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:u.setTimeout(d,v||0)}function Tu(d){d.g=nn(()=>{d.g=null,d.i&&(d.i=!1,Tu(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class Vd extends ct{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Tu(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zr(d){ct.call(this),this.h=d,this.g={}}R(zr,ct);var Br=[];function jr(d){ot(d.g,function(v,E){this.g.hasOwnProperty(E)&&za(v)},d),d.g={}}zr.prototype.N=function(){zr.aa.N.call(this),jr(this)},zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ei=u.JSON.stringify,ja=u.JSON.parse,Fr=class{stringify(d){return u.JSON.stringify(d,void 0)}parse(d){return u.JSON.parse(d,void 0)}};function ml(){}ml.prototype.h=null;function pl(d){return d.h||(d.h=d.i())}function _l(){}var Hi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qi(){at.call(this,"d")}R(qi,at);function yl(){at.call(this,"c")}R(yl,at);var di={},vl=null;function Ms(){return vl=vl||new me}di.La="serverreachability";function Fa(d){at.call(this,di.La,d)}R(Fa,at);function Ds(d){const v=Ms();Xt(v,new Fa(v))}di.STAT_EVENT="statevent";function Su(d,v){at.call(this,di.STAT_EVENT,d),this.stat=v}R(Su,at);function ue(d){const v=Ms();Xt(v,new Su(v,d))}di.Ma="timingevent";function Oe(d,v){at.call(this,di.Ma,d),this.size=v}R(Oe,at);function we(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){d()},v)}function Un(){this.g=!0}Un.prototype.xa=function(){this.g=!1};function bl(d,v,E,A,j,Q){d.info(function(){if(d.g)if(Q)for(var lt="",Lt=Q.split("&"),ke=0;ke<Lt.length;ke++){var Ut=Lt[ke].split("=");if(1<Ut.length){var He=Ut[0];Ut=Ut[1];var Ne=He.split("_");lt=2<=Ne.length&&Ne[1]=="type"?lt+(He+"="+Ut+"&"):lt+(He+"=redacted&")}}else lt=null;else lt=Q;return"XMLHTTP REQ ("+A+") [attempt "+j+"]: "+v+`
`+E+`
`+lt})}function Ld(d,v,E,A,j,Q,lt){d.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+j+"]: "+v+`
`+E+`
`+Q+" "+lt})}function Os(d,v,E,A){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+Hr(d,E)+(A?" "+A:"")})}function wu(d,v){d.info(function(){return"TIMEOUT: "+v})}Un.prototype.info=function(){};function Hr(d,v){if(!d.g)return v;if(!v)return null;try{var E=JSON.parse(v);if(E){for(d=0;d<E.length;d++)if(Array.isArray(E[d])){var A=E[d];if(!(2>A.length)){var j=A[1];if(Array.isArray(j)&&!(1>j.length)){var Q=j[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var lt=1;lt<j.length;lt++)j[lt]=""}}}}return ei(E)}catch{return v}}var ks={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},gi;function mi(){}R(mi,ml),mi.prototype.g=function(){return new XMLHttpRequest},mi.prototype.i=function(){return{}},gi=new mi;function un(d,v,E,A){this.j=d,this.i=v,this.l=E,this.R=A||1,this.U=new zr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ve}function ve(){this.i=null,this.g="",this.h=!1}var El={},Ha={};function ni(d,v,E){d.L=1,d.v=Wr(An(v)),d.m=E,d.P=!0,Yi(d,null)}function Yi(d,v){d.F=Date.now(),qr(d),d.A=An(d.v);var E=d.A,A=d.R;Array.isArray(A)||(A=[String(A)]),Rl(E.i,"t",A),d.C=0,E=d.j.J,d.h=new ve,d.g=Bu(d.j,E?v:null,!d.m),0<d.O&&(d.M=new Vd(b(d.Y,d,d.g),d.O)),v=d.U,E=d.g,A=d.ca;var j="readystatechange";Array.isArray(j)||(j&&(Br[0]=j.toString()),j=Br);for(var Q=0;Q<j.length;Q++){var lt=bu(E,j[Q],A||v.handleEvent,!1,v.h||v);if(!lt)break;v.g[lt.key]=lt}v=d.H?x(d.H):{},d.m?(d.u||(d.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,v)):(d.u="GET",d.g.ea(d.A,d.u,null,v)),Ds(),bl(d.i,d.u,d.A,d.l,d.R,d.m)}un.prototype.ca=function(d){d=d.target;const v=this.M;v&&Fn(d)==3?v.j():this.Y(d)},un.prototype.Y=function(d){try{if(d==this.g)t:{const Ne=Fn(this.g);var v=this.g.Ba();const ts=this.g.Z();if(!(3>Ne)&&(Ne!=3||this.g&&(this.h.h||this.g.oa()||Ou(this.g)))){this.J||Ne!=4||v==7||(v==8||0>=ts?Ds(3):Ds(2)),Ns(this);var E=this.g.Z();this.X=E;e:if(Au(this)){var A=Ou(this.g);d="";var j=A.length,Q=Fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){We(this),pi(this);var lt="";break e}this.h.i=new u.TextDecoder}for(v=0;v<j;v++)this.h.h=!0,d+=this.h.i.decode(A[v],{stream:!(Q&&v==j-1)});A.length=0,this.h.g+=d,this.C=0,lt=this.h.g}else lt=this.g.oa();if(this.o=E==200,Ld(this.i,this.u,this.A,this.l,this.R,Ne,E),this.o){if(this.T&&!this.K){e:{if(this.g){var Lt,ke=this.g;if((Lt=ke.g?ke.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(Lt)){var Ut=Lt;break e}}Ut=null}if(E=Ut)Os(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gr(this,E);else{this.o=!1,this.s=3,ue(12),We(this),pi(this);break t}}if(this.P){E=!0;let Qe;for(;!this.J&&this.C<lt.length;)if(Qe=xu(this,lt),Qe==Ha){Ne==4&&(this.s=4,ue(14),E=!1),Os(this.i,this.l,null,"[Incomplete Response]");break}else if(Qe==El){this.s=4,ue(15),Os(this.i,this.l,lt,"[Invalid Chunk]"),E=!1;break}else Os(this.i,this.l,Qe,null),Gr(this,Qe);if(Au(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||lt.length!=0||this.h.h||(this.s=1,ue(16),E=!1),this.o=this.o&&E,!E)Os(this.i,this.l,lt,"[Invalid Chunked Response]"),We(this),pi(this);else if(0<lt.length&&!this.W){this.W=!0;var He=this.j;He.g==this&&He.ba&&!He.M&&(He.j.info("Great, no buffering proxy detected. Bytes received: "+lt.length),na(He),He.M=!0,ue(11))}}else Os(this.i,this.l,lt,null),Gr(this,lt);Ne==4&&We(this),this.o&&!this.J&&(Ne==4?Lu(this.j,this):(this.o=!1,qr(this)))}else Fd(this.g),E==400&&0<lt.indexOf("Unknown SID")?(this.s=3,ue(12)):(this.s=0,ue(13)),We(this),pi(this)}}}catch{}finally{}};function Au(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function xu(d,v){var E=d.C,A=v.indexOf(`
`,E);return A==-1?Ha:(E=Number(v.substring(E,A)),isNaN(E)?El:(A+=1,A+E>v.length?Ha:(v=v.slice(A,A+E),d.C=A+E,v)))}un.prototype.cancel=function(){this.J=!0,We(this)};function qr(d){d.S=Date.now()+d.I,Ru(d,d.I)}function Ru(d,v){if(d.B!=null)throw Error("WatchDog timer not null");d.B=we(b(d.ba,d),v)}function Ns(d){d.B&&(u.clearTimeout(d.B),d.B=null)}un.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(wu(this.i,this.A),this.L!=2&&(Ds(),ue(17)),We(this),this.s=2,pi(this)):Ru(this,this.S-d)};function pi(d){d.j.G==0||d.J||Lu(d.j,d)}function We(d){Ns(d);var v=d.M;v&&typeof v.ma=="function"&&v.ma(),d.M=null,jr(d.U),d.g&&(v=d.g,d.g=null,v.abort(),v.ma())}function Gr(d,v){try{var E=d.j;if(E.G!=0&&(E.g==d||Tl(E.h,d))){if(!d.K&&Tl(E.h,d)&&E.G==3){try{var A=E.Da.g.parse(v)}catch{A=null}if(Array.isArray(A)&&A.length==3){var j=A;if(j[0]==0){t:if(!E.u){if(E.g)if(E.g.F+3e3<d.F)eo(E),Ja(E);else break t;Ol(E),ue(18)}}else E.za=j[1],0<E.za-E.T&&37500>j[2]&&E.F&&E.v==0&&!E.C&&(E.C=we(b(E.Za,E),6e3));if(1>=Ga(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Ji(E,11)}else if((d.K||E.g==d)&&eo(E),!F(v))for(j=E.Da.g.parse(v),v=0;v<j.length;v++){let Ut=j[v];if(E.T=Ut[0],Ut=Ut[1],E.G==2)if(Ut[0]=="c"){E.K=Ut[1],E.ia=Ut[2];const He=Ut[3];He!=null&&(E.la=He,E.j.info("VER="+E.la));const Ne=Ut[4];Ne!=null&&(E.Aa=Ne,E.j.info("SVER="+E.Aa));const ts=Ut[5];ts!=null&&typeof ts=="number"&&0<ts&&(A=1.5*ts,E.L=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const Qe=d.g;if(Qe){const Si=Qe.g?Qe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Si){var Q=A.h;Q.g||Si.indexOf("spdy")==-1&&Si.indexOf("quic")==-1&&Si.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Ya(Q,Q.h),Q.h=null))}if(A.D){const Nl=Qe.g?Qe.g.getResponseHeader("X-HTTP-Session-Id"):null;Nl&&(A.ya=Nl,Jt(A.I,A.D,Nl))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-d.F,E.j.info("Handshake RTT: "+E.R+"ms")),A=E;var lt=d;if(A.qa=zu(A,A.J?A.ia:null,A.W),lt.K){hn(A.h,lt);var Lt=lt,ke=A.L;ke&&(Lt.I=ke),Lt.B&&(Ns(Lt),qr(Lt)),A.g=lt}else Pu(A);0<E.i.length&&to(E)}else Ut[0]!="stop"&&Ut[0]!="close"||Ji(E,7);else E.G==3&&(Ut[0]=="stop"||Ut[0]=="close"?Ut[0]=="stop"?Ji(E,7):Ml(E):Ut[0]!="noop"&&E.l&&E.l.ta(Ut),E.v=0)}}Ds(4)}catch{}}var Iu=class{constructor(d,v){this.g=d,this.map=v}};function Ki(d){this.l=d||10,u.PerformanceNavigationTiming?(d=u.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qa(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Ga(d){return d.h?1:d.g?d.g.size:0}function Tl(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function Ya(d,v){d.g?d.g.add(v):d.h=v}function hn(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}Ki.prototype.cancel=function(){if(this.i=Sl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Sl(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const E of d.g.values())v=v.concat(E.D);return v}return M(d.i)}function Ud(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(f(d)){for(var v=[],E=d.length,A=0;A<E;A++)v.push(d[A]);return v}v=[],E=0;for(A in d)v[E++]=d[A];return v}function Ka(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(f(d)||typeof d=="string"){var v=[];d=d.length;for(var E=0;E<d;E++)v.push(E);return v}v=[],E=0;for(const A in d)v[E++]=A;return v}}}function wl(d,v){if(d.forEach&&typeof d.forEach=="function")d.forEach(v,void 0);else if(f(d)||typeof d=="string")Array.prototype.forEach.call(d,v,void 0);else for(var E=Ka(d),A=Ud(d),j=A.length,Q=0;Q<j;Q++)v.call(void 0,A[Q],E&&E[Q],d)}var Yr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zd(d,v){if(d){d=d.split("&");for(var E=0;E<d.length;E++){var A=d[E].indexOf("="),j=null;if(0<=A){var Q=d[E].substring(0,A);j=d[E].substring(A+1)}else Q=d[E];v(Q,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Ae(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Ae){this.h=d.h,Kr(this,d.j),this.o=d.o,this.g=d.g,Ps(this,d.s),this.l=d.l;var v=d.i,E=new Qi;E.i=v.i,v.g&&(E.g=new Map(v.g),E.h=v.h),Wi(this,E),this.m=d.m}else d&&(v=String(d).match(Yr))?(this.h=!1,Kr(this,v[1]||"",!0),this.o=zn(v[2]||""),this.g=zn(v[3]||"",!0),Ps(this,v[4]),this.l=zn(v[5]||"",!0),Wi(this,v[6]||"",!0),this.m=zn(v[7]||"")):(this.h=!1,this.i=new Qi(null,this.h))}Ae.prototype.toString=function(){var d=[],v=this.j;v&&d.push(Qr(v,Al,!0),":");var E=this.g;return(E||v=="file")&&(d.push("//"),(v=this.o)&&d.push(Qr(v,Al,!0),"@"),d.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&d.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(Qr(E,E.charAt(0)=="/"?Bd:xl,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",Qr(E,Wa)),d.join("")};function An(d){return new Ae(d)}function Kr(d,v,E){d.j=E?zn(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function Ps(d,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);d.s=v}else d.s=null}function Wi(d,v,E){v instanceof Qi?(d.i=v,Mu(d.i,d.h)):(E||(v=Qr(v,jd)),d.i=new Qi(v,d.h))}function Jt(d,v,E){d.i.set(v,E)}function Wr(d){return Jt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function zn(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Qr(d,v,E){return typeof d=="string"?(d=encodeURI(d).replace(v,Cu),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Cu(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Al=/[#\/\?@]/g,xl=/[#\?:]/g,Bd=/[#\?]/g,jd=/[#\?@]/g,Wa=/#/g;function Qi(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function Bn(d){d.g||(d.g=new Map,d.h=0,d.i&&zd(d.i,function(v,E){d.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}n=Qi.prototype,n.add=function(d,v){Bn(this),this.i=null,d=_i(this,d);var E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(v),this.h+=1,this};function Xi(d,v){Bn(d),v=_i(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function $i(d,v){return Bn(d),v=_i(d,v),d.g.has(v)}n.forEach=function(d,v){Bn(this),this.g.forEach(function(E,A){E.forEach(function(j){d.call(v,j,A,this)},this)},this)},n.na=function(){Bn(this);const d=Array.from(this.g.values()),v=Array.from(this.g.keys()),E=[];for(let A=0;A<v.length;A++){const j=d[A];for(let Q=0;Q<j.length;Q++)E.push(v[A])}return E},n.V=function(d){Bn(this);let v=[];if(typeof d=="string")$i(this,d)&&(v=v.concat(this.g.get(_i(this,d))));else{d=Array.from(this.g.values());for(let E=0;E<d.length;E++)v=v.concat(d[E])}return v},n.set=function(d,v){return Bn(this),this.i=null,d=_i(this,d),$i(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},n.get=function(d,v){return d?(d=this.V(d),0<d.length?String(d[0]):v):v};function Rl(d,v,E){Xi(d,v),0<E.length&&(d.i=null,d.g.set(_i(d,v),M(E)),d.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(var E=0;E<v.length;E++){var A=v[E];const Q=encodeURIComponent(String(A)),lt=this.V(A);for(A=0;A<lt.length;A++){var j=Q;lt[A]!==""&&(j+="="+encodeURIComponent(String(lt[A]))),d.push(j)}}return this.i=d.join("&")};function _i(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function Mu(d,v){v&&!d.j&&(Bn(d),d.i=null,d.g.forEach(function(E,A){var j=A.toLowerCase();A!=j&&(Xi(this,A),Rl(this,j,E))},d)),d.j=v}function Xr(d,v){const E=new Un;if(u.Image){const A=new Image;A.onload=S(jn,E,"TestLoadImage: loaded",!0,v,A),A.onerror=S(jn,E,"TestLoadImage: error",!1,v,A),A.onabort=S(jn,E,"TestLoadImage: abort",!1,v,A),A.ontimeout=S(jn,E,"TestLoadImage: timeout",!1,v,A),u.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=d}else v(!1)}function ii(d,v){const E=new Un,A=new AbortController,j=setTimeout(()=>{A.abort(),jn(E,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:A.signal}).then(Q=>{clearTimeout(j),Q.ok?jn(E,"TestPingServer: ok",!0,v):jn(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(j),jn(E,"TestPingServer: error",!1,v)})}function jn(d,v,E,A,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),A(E)}catch{}}function $r(){this.g=new Fr}function yi(d,v,E){const A=E||"";try{wl(d,function(j,Q){let lt=j;g(j)&&(lt=ei(j)),v.push(A+Q+"="+encodeURIComponent(lt))})}catch(j){throw v.push(A+"type="+encodeURIComponent("_badmap")),j}}function Vs(d){this.l=d.Ub||null,this.j=d.eb||!1}R(Vs,ml),Vs.prototype.g=function(){return new Zi(this.l,this.j)},Vs.prototype.i=function(d){return function(){return d}}({});function Zi(d,v){me.call(this),this.D=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Zi,me),n=Zi.prototype,n.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=v,this.readyState=1,bi(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(v.body=d),(this.D||u).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vi(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,bi(this)),this.g&&(this.readyState=3,bi(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Il(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Il(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?vi(this):bi(this),this.readyState==3&&Il(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,vi(this))},n.Qa=function(d){this.g&&(this.response=d,vi(this))},n.ga=function(){this.g&&vi(this)};function vi(d){d.readyState=4,d.l=null,d.j=null,d.v=null,bi(d)}n.setRequestHeader=function(d,v){this.u.append(d,v)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=v.next();return d.join(`\r
`)};function bi(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Zi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Cl(d){let v="";return ot(d,function(E,A){v+=A,v+=":",v+=E,v+=`\r
`}),v}function Fe(d,v,E){t:{for(A in E){var A=!1;break t}A=!0}A||(E=Cl(E),typeof d=="string"?E!=null&&encodeURIComponent(String(E)):Jt(d,v,E))}function Kt(d){me.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(Kt,me);var Qa=/^https?$/i,Zr=["POST","PUT"];n=Kt.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,v,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():gi.g(),this.v=this.o?pl(this.o):pl(gi),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(Q){Du(this,Q);return}if(d=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var j in A)E.set(j,A[j]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Q of A.keys())E.set(Q,A.get(Q));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find(Q=>Q.toLowerCase()=="content-type"),j=u.FormData&&d instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Zr,v,void 0))||A||j||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,lt]of E)this.g.setRequestHeader(Q,lt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jr(this),this.u=!0,this.g.send(d),this.u=!1}catch(Q){Du(this,Q)}};function Du(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.m=5,Xa(d),Ei(d)}function Xa(d){d.A||(d.A=!0,Xt(d,"complete"),Xt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Xt(this,"complete"),Xt(this,"abort"),Ei(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ei(this,!0)),Kt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?$a(this):this.bb())},n.bb=function(){$a(this)};function $a(d){if(d.h&&typeof c<"u"&&(!d.v[1]||Fn(d)!=4||d.Z()!=2)){if(d.u&&Fn(d)==4)nn(d.Ea,0,d);else if(Xt(d,"readystatechange"),Fn(d)==4){d.h=!1;try{const lt=d.Z();t:switch(lt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break t;default:v=!1}var E;if(!(E=v)){var A;if(A=lt===0){var j=String(d.D).match(Yr)[1]||null;!j&&u.self&&u.self.location&&(j=u.self.location.protocol.slice(0,-1)),A=!Qa.test(j?j.toLowerCase():"")}E=A}if(E)Xt(d,"complete"),Xt(d,"success");else{d.m=6;try{var Q=2<Fn(d)?d.g.statusText:""}catch{Q=""}d.l=Q+" ["+d.Z()+"]",Xa(d)}}finally{Ei(d)}}}}function Ei(d,v){if(d.g){Jr(d);const E=d.g,A=d.v[0]?()=>{}:null;d.g=null,d.v=null,v||Xt(d,"ready");try{E.onreadystatechange=A}catch{}}}function Jr(d){d.I&&(u.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Fn(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Fn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),ja(v)}};function Ou(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Fd(d){const v={};d=(d.g&&2<=Fn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<d.length;A++){if(F(d[A]))continue;var E=P(d[A]);const j=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Q=v[j]||[];v[j]=Q,Q.push(E)}D(v,function(A){return A.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ta(d,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||v}function Za(d){this.Aa=0,this.i=[],this.j=new Un,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ta("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ta("baseRetryDelayMs",5e3,d),this.cb=ta("retryDelaySeedMs",1e4,d),this.Wa=ta("forwardChannelMaxRetries",2,d),this.wa=ta("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Ki(d&&d.concurrentRequestLimit),this.Da=new $r,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Za.prototype,n.la=8,n.G=1,n.connect=function(d,v,E,A){ue(0),this.W=d,this.H=v||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.I=zu(this,null,this.W),to(this)};function Ml(d){if(ku(d),d.G==3){var v=d.U++,E=An(d.I);if(Jt(E,"SID",d.K),Jt(E,"RID",v),Jt(E,"TYPE","terminate"),ea(d,E),v=new un(d,d.j,v),v.L=2,v.v=Wr(An(E)),E=!1,u.navigator&&u.navigator.sendBeacon)try{E=u.navigator.sendBeacon(v.v.toString(),"")}catch{}!E&&u.Image&&(new Image().src=v.v,E=!0),E||(v.g=Bu(v.j,null),v.g.ea(v.v)),v.F=Date.now(),qr(v)}Uu(d)}function Ja(d){d.g&&(na(d),d.g.cancel(),d.g=null)}function ku(d){Ja(d),d.u&&(u.clearTimeout(d.u),d.u=null),eo(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&u.clearTimeout(d.s),d.s=null)}function to(d){if(!qa(d.h)&&!d.s){d.s=!0;var v=d.Ga;rt||V(),ft||(rt(),ft=!0),St.add(v,d),d.B=0}}function Hd(d,v){return Ga(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=v.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=we(b(d.Ga,d,v),kl(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const j=new un(this,this.j,d);let Q=this.o;if(this.S&&(Q?(Q=x(Q),N(Q,this.S)):Q=this.S),this.m!==null||this.O||(j.H=Q,Q=null),this.P)t:{for(var v=0,E=0;E<this.i.length;E++){e:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(v+=A,4096<v){v=E;break t}if(v===4096||E===this.i.length-1){v=E+1;break t}}v=1e3}else v=1e3;v=Nu(this,j,v),E=An(this.I),Jt(E,"RID",d),Jt(E,"CVER",22),this.D&&Jt(E,"X-HTTP-Session-Id",this.D),ea(this,E),Q&&(this.O?v="headers="+encodeURIComponent(String(Cl(Q)))+"&"+v:this.m&&Fe(E,this.m,Q)),Ya(this.h,j),this.Ua&&Jt(E,"TYPE","init"),this.P?(Jt(E,"$req",v),Jt(E,"SID","null"),j.T=!0,ni(j,E,null)):ni(j,E,v),this.G=2}}else this.G==3&&(d?Dl(this,d):this.i.length==0||qa(this.h)||Dl(this))};function Dl(d,v){var E;v?E=v.l:E=d.U++;const A=An(d.I);Jt(A,"SID",d.K),Jt(A,"RID",E),Jt(A,"AID",d.T),ea(d,A),d.m&&d.o&&Fe(A,d.m,d.o),E=new un(d,d.j,E,d.B+1),d.m===null&&(E.H=d.o),v&&(d.i=v.D.concat(d.i)),v=Nu(d,E,1e3),E.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Ya(d.h,E),ni(E,A,v)}function ea(d,v){d.H&&ot(d.H,function(E,A){Jt(v,A,E)}),d.l&&wl({},function(E,A){Jt(v,A,E)})}function Nu(d,v,E){E=Math.min(d.i.length,E);var A=d.l?b(d.l.Na,d.l,d):null;t:{var j=d.i;let Q=-1;for(;;){const lt=["count="+E];Q==-1?0<E?(Q=j[0].g,lt.push("ofs="+Q)):Q=0:lt.push("ofs="+Q);let Lt=!0;for(let ke=0;ke<E;ke++){let Ut=j[ke].g;const He=j[ke].map;if(Ut-=Q,0>Ut)Q=Math.max(0,j[ke].g-100),Lt=!1;else try{yi(He,lt,"req"+Ut+"_")}catch{A&&A(He)}}if(Lt){A=lt.join("&");break t}}}return d=d.i.splice(0,E),v.D=d,A}function Pu(d){if(!d.g&&!d.u){d.Y=1;var v=d.Fa;rt||V(),ft||(rt(),ft=!0),St.add(v,d),d.v=0}}function Ol(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=we(b(d.Fa,d),kl(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,Vu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=we(b(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ue(10),Ja(this),Vu(this))};function na(d){d.A!=null&&(u.clearTimeout(d.A),d.A=null)}function Vu(d){d.g=new un(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var v=An(d.qa);Jt(v,"RID","rpc"),Jt(v,"SID",d.K),Jt(v,"AID",d.T),Jt(v,"CI",d.F?"0":"1"),!d.F&&d.ja&&Jt(v,"TO",d.ja),Jt(v,"TYPE","xmlhttp"),ea(d,v),d.m&&d.o&&Fe(v,d.m,d.o),d.L&&(d.g.I=d.L);var E=d.g;d=d.ia,E.L=1,E.v=Wr(An(v)),E.m=null,E.P=!0,Yi(E,d)}n.Za=function(){this.C!=null&&(this.C=null,Ja(this),Ol(this),ue(19))};function eo(d){d.C!=null&&(u.clearTimeout(d.C),d.C=null)}function Lu(d,v){var E=null;if(d.g==v){eo(d),na(d),d.g=null;var A=2}else if(Tl(d.h,v))E=v.D,hn(d.h,v),A=1;else return;if(d.G!=0){if(v.o)if(A==1){E=v.m?v.m.length:0,v=Date.now()-v.F;var j=d.B;A=Ms(),Xt(A,new Oe(A,E)),to(d)}else Pu(d);else if(j=v.s,j==3||j==0&&0<v.X||!(A==1&&Hd(d,v)||A==2&&Ol(d)))switch(E&&0<E.length&&(v=d.h,v.i=v.i.concat(E)),j){case 1:Ji(d,5);break;case 4:Ji(d,10);break;case 3:Ji(d,6);break;default:Ji(d,2)}}}function kl(d,v){let E=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(E*=2),E*v}function Ji(d,v){if(d.j.info("Error code "+v),v==2){var E=b(d.fb,d),A=d.Xa;const j=!A;A=new Ae(A||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Kr(A,"https"),Wr(A),j?Xr(A.toString(),E):ii(A.toString(),E)}else ue(2);d.G=0,d.l&&d.l.sa(v),Uu(d),ku(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),ue(2)):(this.j.info("Failed to ping google.com"),ue(1))};function Uu(d){if(d.G=0,d.ka=[],d.l){const v=Sl(d.h);(v.length!=0||d.i.length!=0)&&(C(d.ka,v),C(d.ka,d.i),d.h.i.length=0,M(d.i),d.i.length=0),d.l.ra()}}function zu(d,v,E){var A=E instanceof Ae?An(E):new Ae(E);if(A.g!="")v&&(A.g=v+"."+A.g),Ps(A,A.s);else{var j=u.location;A=j.protocol,v=v?v+"."+j.hostname:j.hostname,j=+j.port;var Q=new Ae(null);A&&Kr(Q,A),v&&(Q.g=v),j&&Ps(Q,j),E&&(Q.l=E),A=Q}return E=d.D,v=d.ya,E&&v&&Jt(A,E,v),Jt(A,"VER",d.la),ea(d,A),A}function Bu(d,v,E){if(v&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Ca&&!d.pa?new Kt(new Vs({eb:E})):new Kt(d.pa),v.Ha(d.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ju(){}n=ju.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function no(){}no.prototype.g=function(d,v){return new fn(d,v)};function fn(d,v){me.call(this),this.g=new Za(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(d?d["X-WebChannel-Client-Profile"]=v.va:d={"X-WebChannel-Client-Profile":v.va}),this.g.S=d,(d=v&&v.Sb)&&!F(d)&&(this.g.m=d),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!F(v)&&(this.g.D=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new Ti(this)}R(fn,me),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Ml(this.g)},fn.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.u&&(E={},E.__data__=ei(d),d=E);v.i.push(new Iu(v.Ya++,d)),v.G==3&&to(v)},fn.prototype.N=function(){this.g.l=null,delete this.j,Ml(this.g),delete this.g,fn.aa.N.call(this)};function Fu(d){qi.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){t:{for(const E in v){d=E;break t}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}R(Fu,qi);function Hu(){yl.call(this),this.status=1}R(Hu,yl);function Ti(d){this.g=d}R(Ti,ju),Ti.prototype.ua=function(){Xt(this.g,"a")},Ti.prototype.ta=function(d){Xt(this.g,new Fu(d))},Ti.prototype.sa=function(d){Xt(this.g,new Hu)},Ti.prototype.ra=function(){Xt(this.g,"b")},no.prototype.createWebChannel=no.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,Ow=function(){return new no},Dw=function(){return Ms()},Mw=di,Tp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ks.NO_ERROR=0,ks.TIMEOUT=8,ks.HTTP_ERROR=6,_f=ks,Gi.COMPLETE="complete",Cw=Gi,_l.EventType=Hi,Hi.OPEN="a",Hi.CLOSE="b",Hi.ERROR="c",Hi.MESSAGE="d",me.prototype.listen=me.prototype.K,Mc=_l,Kt.prototype.listenOnce=Kt.prototype.L,Kt.prototype.getLastError=Kt.prototype.Ka,Kt.prototype.getLastErrorCode=Kt.prototype.Ba,Kt.prototype.getStatus=Kt.prototype.Z,Kt.prototype.getResponseJson=Kt.prototype.Oa,Kt.prototype.getResponseText=Kt.prototype.oa,Kt.prototype.send=Kt.prototype.ea,Kt.prototype.setWithCredentials=Kt.prototype.Ha,Iw=Kt}).apply(typeof Gh<"u"?Gh:typeof self<"u"?self:typeof window<"u"?window:{});const gE="@firebase/firestore",mE="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sl="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=new Qp("@firebase/firestore");function No(){return Da.logLevel}function ht(n,...t){if(Da.logLevel<=Pt.DEBUG){const e=t.map(o_);Da.debug(`Firestore (${sl}): ${n}`,...e)}}function As(n,...t){if(Da.logLevel<=Pt.ERROR){const e=t.map(o_);Da.error(`Firestore (${sl}): ${n}`,...e)}}function Sr(n,...t){if(Da.logLevel<=Pt.WARN){const e=t.map(o_);Da.warn(`Firestore (${sl}): ${n}`,...e)}}function o_(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,kw(n,i,e)}function kw(n,t,e){let i=`FIRESTORE (${sl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw As(i),new Error(i)}function Qt(n,t,e,i){let r="Unexpected state";typeof e=="string"?r=e:i=e,n||kw(t,r,i)}function It(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ut extends Rs{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class HM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(on.UNAUTHENTICATED))}shutdown(){}}class qM{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class GM{constructor(t){this.t=t,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Qt(this.o===void 0,42304);let i=this.i;const r=f=>this.i!==i?(i=this.i,e(f)):Promise.resolve();let o=new Ts;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ts,t.enqueueRetryable(()=>r(this.currentUser))};const c=()=>{const f=o;t.enqueueRetryable(async()=>{await f.promise,await r(this.currentUser)})},u=f=>{ht("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(f=>u(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?u(f):(ht("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ts)}},0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(ht("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Qt(typeof i.accessToken=="string",31837,{l:i}),new Nw(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Qt(t===null||typeof t=="string",2055,{h:t}),new on(t)}}class YM{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=on.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class KM{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new YM(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(on.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pE{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WM{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,oi(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Qt(this.o===void 0,3512);const i=o=>{o.error!=null&&ht("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,ht("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>i(o))};const r=o=>{ht("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):ht("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new pE(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Qt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new pE(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QM(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=QM(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<e&&(i+=t.charAt(r[o]%62))}return i}}function Dt(n,t){return n<t?-1:n>t?1:0}function Sp(n,t){let e=0;for(;e<n.length&&e<t.length;){const i=n.codePointAt(e),r=t.codePointAt(e);if(i!==r){if(i<128&&r<128)return Dt(i,r);{const o=Pw(),c=XM(o.encode(_E(n,e)),o.encode(_E(t,e)));return c!==0?c:Dt(i,r)}}e+=i>65535?2:1}return Dt(n.length,t.length)}function _E(n,t){return n.codePointAt(t)>65535?n.substring(t,t+2):n.substring(t,t+1)}function XM(n,t){for(let e=0;e<n.length&&e<t.length;++e)if(n[e]!==t[e])return Dt(n[e],t[e]);return Dt(n.length,t.length)}function Wo(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="__name__";class Oi{constructor(t,e,i){e===void 0?e=0:e>t.length&&Tt(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&Tt(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return Oi.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Oi?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const o=Oi.compareSegments(t.get(r),e.get(r));if(o!==0)return o}return Dt(t.length,e.length)}static compareSegments(t,e){const i=Oi.isNumericId(t),r=Oi.isNumericId(e);return i&&!r?-1:!i&&r?1:i&&r?Oi.extractNumericId(t).compare(Oi.extractNumericId(e)):Sp(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return yr.fromString(t.substring(4,t.length-2))}}class oe extends Oi{construct(t,e,i){return new oe(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new ut(et.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new oe(e)}static emptyPath(){return new oe([])}}const $M=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends Oi{construct(t,e,i){return new tn(t,e,i)}static isValidIdentifier(t){return $M.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yE}static keyField(){return new tn([yE])}static fromServerFormat(t){const e=[];let i="",r=0;const o=()=>{if(i.length===0)throw new ut(et.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;r<t.length;){const u=t[r];if(u==="\\"){if(r+1===t.length)throw new ut(et.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const f=t[r+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ut(et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=f,r+=2}else u==="`"?(c=!c,r++):u!=="."||c?(i+=u,r++):(o(),r++)}if(o(),c)throw new ut(et.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new tn(e)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(t){this.path=t}static fromPath(t){return new pt(oe.fromString(t))}static fromName(t){return new pt(oe.fromString(t).popFirst(5))}static empty(){return new pt(oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&oe.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return oe.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new pt(new oe(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(n,t,e){if(!e)throw new ut(et.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function ZM(n,t,e,i){if(t===!0&&i===!0)throw new ut(et.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function vE(n){if(!pt.isDocumentKey(n))throw new ut(et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function bE(n){if(pt.isDocumentKey(n))throw new ut(et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Lw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function fd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":Tt(12329,{type:typeof n})}function Zn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new ut(et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=fd(n);throw new ut(et.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(n,t){const e={typeString:n};return t&&(e.value=t),e}function du(n,t){if(!Lw(n))throw new ut(et.INVALID_ARGUMENT,"JSON must be an object");let e;for(const i in t)if(t[i]){const r=t[i].typeString,o="value"in t[i]?{value:t[i].value}:void 0;if(!(i in n)){e=`JSON missing required field: '${i}'`;break}const c=n[i];if(r&&typeof c!==r){e=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&c!==o.value){e=`Expected '${i}' field to equal '${o.value}'`;break}}if(e)throw new ut(et.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=-62135596800,TE=1e6;class le{static now(){return le.fromMillis(Date.now())}static fromDate(t){return le.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*TE);return new le(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ut(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ut(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<EE)throw new ut(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ut(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/TE}_compareTo(t){return this.seconds===t.seconds?Dt(this.nanoseconds,t.nanoseconds):Dt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:le._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(du(t,le._jsonSchema))return new le(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-EE;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}le._jsonSchemaVersion="firestore/timestamp/1.0",le._jsonSchema={type:Me("string",le._jsonSchemaVersion),seconds:Me("number"),nanoseconds:Me("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{static fromTimestamp(t){return new At(t)}static min(){return new At(new le(0,0))}static max(){return new At(new le(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc=-1;function JM(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=At.fromTimestamp(i===1e9?new le(e+1,0):new le(e,i));return new wr(r,pt.empty(),t)}function tD(n){return new wr(n.readTime,n.key,Zc)}class wr{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new wr(At.min(),pt.empty(),Zc)}static max(){return new wr(At.max(),pt.empty(),Zc)}}function eD(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=pt.comparator(n.documentKey,t.documentKey),e!==0?e:Dt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rl(n){if(n.code!==et.FAILED_PRECONDITION||n.message!==nD)throw n;ht("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Tt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new it((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof it?e:it.resolve(e)}catch(e){return it.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):it.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):it.reject(e)}static resolve(t){return new it((e,i)=>{e(t)})}static reject(t){return new it((e,i)=>{i(t)})}static waitFor(t){return new it((e,i)=>{let r=0,o=0,c=!1;t.forEach(u=>{++r,u.next(()=>{++o,c&&o===r&&e()},f=>i(f))}),c=!0,o===r&&e()})}static or(t){let e=it.resolve(!1);for(const i of t)e=e.next(r=>r?it.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,o)=>{i.push(e.call(this,r,o))}),this.waitFor(i)}static mapArray(t,e){return new it((i,r)=>{const o=t.length,c=new Array(o);let u=0;for(let f=0;f<o;f++){const g=f;e(t[g]).next(_=>{c[g]=_,++u,u===o&&i(c)},_=>r(_))}})}static doWhile(t,e){return new it((i,r)=>{const o=()=>{t()===!0?e().next(()=>{o()},r):i()};o()})}}function sD(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function al(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this._e(i),this.ae=i=>e.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ae&&this.ae(t),t}}dd.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_=-1;function gd(n){return n==null}function Nf(n){return n===0&&1/n==-1/0}function rD(n){return typeof n=="number"&&Number.isInteger(n)&&!Nf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="";function aD(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=SE(t)),t=oD(n.get(e),t);return SE(t)}function oD(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const o=n.charAt(r);switch(o){case"\0":e+="";break;case Uw:e+="";break;default:e+=o}}return e}function SE(n){return n+Uw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function kr(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function zw(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(t,e){this.comparator=t,this.root=e||Je.EMPTY}insert(t,e){return new ge(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(t){return new ge(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Je.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Yh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Yh(this.root,t,this.comparator,!1)}getReverseIterator(){return new Yh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Yh(this.root,t,this.comparator,!0)}}class Yh{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Je{constructor(t,e,i,r,o){this.key=t,this.value=e,this.color=i??Je.RED,this.left=r??Je.EMPTY,this.right=o??Je.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,o){return new Je(t??this.key,e??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const o=i(t,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(t,e,i),null):o===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Je.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return Je.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Tt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Tt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Tt(27949);return t+(this.isRed()?0:1)}}Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw Tt(57766)}get value(){throw Tt(16141)}get color(){throw Tt(16727)}get left(){throw Tt(29726)}get right(){throw Tt(36894)}copy(t,e,i,r,o){return this}insert(t,e,i){return new Je(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(t){this.comparator=t,this.data=new ge(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new AE(this.data.getIterator())}getIteratorFrom(t){return new AE(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof ze)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new ze(this.comparator);return e.data=t,e}}class AE{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(t){this.fields=t,t.sort(tn.comparator)}static empty(){return new Pn([])}unionWith(t){let e=new ze(tn.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Pn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Wo(this.fields,t.fields,(e,i)=>e.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Bw("Invalid base64 string: "+o):o}}(t);return new en(e)}static fromUint8Array(t){const e=function(r){let o="";for(let c=0;c<r.length;++c)o+=String.fromCharCode(r[c]);return o}(t);return new en(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Dt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}en.EMPTY_BYTE_STRING=new en("");const lD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ar(n){if(Qt(!!n,39018),typeof n=="string"){let t=0;const e=lD.exec(n);if(Qt(!!e,46558,{timestamp:n}),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Te(n.seconds),nanos:Te(n.nanos)}}function Te(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function xr(n){return typeof n=="string"?en.fromBase64String(n):en.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="server_timestamp",Fw="__type__",Hw="__previous_value__",qw="__local_write_time__";function u_(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{})[Fw])===null||e===void 0?void 0:e.stringValue)===jw}function md(n){const t=n.mapValue.fields[Hw];return u_(t)?md(t):t}function Jc(n){const t=Ar(n.mapValue.fields[qw].timestampValue);return new le(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(t,e,i,r,o,c,u,f,g,_){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=f,this.useFetchStreams=g,this.isUsingEmulator=_}}const Pf="(default)";class tu{constructor(t,e){this.projectId=t,this.database=e||Pf}static empty(){return new tu("","")}get isDefaultDatabase(){return this.database===Pf}isEqual(t){return t instanceof tu&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw="__type__",uD="__max__",Kh={mapValue:{}},Yw="__vector__",Vf="value";function Rr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?u_(n)?4:fD(n)?9007199254740991:hD(n)?10:11:Tt(28295,{value:n})}function Bi(n,t){if(n===t)return!0;const e=Rr(n);if(e!==Rr(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Jc(n).isEqual(Jc(t));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const c=Ar(r.timestampValue),u=Ar(o.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,o){return xr(r.bytesValue).isEqual(xr(o.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,o){return Te(r.geoPointValue.latitude)===Te(o.geoPointValue.latitude)&&Te(r.geoPointValue.longitude)===Te(o.geoPointValue.longitude)}(n,t);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Te(r.integerValue)===Te(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const c=Te(r.doubleValue),u=Te(o.doubleValue);return c===u?Nf(c)===Nf(u):isNaN(c)&&isNaN(u)}return!1}(n,t);case 9:return Wo(n.arrayValue.values||[],t.arrayValue.values||[],Bi);case 10:case 11:return function(r,o){const c=r.mapValue.fields||{},u=o.mapValue.fields||{};if(wE(c)!==wE(u))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(u[f]===void 0||!Bi(c[f],u[f])))return!1;return!0}(n,t);default:return Tt(52216,{left:n})}}function eu(n,t){return(n.values||[]).find(e=>Bi(e,t))!==void 0}function Qo(n,t){if(n===t)return 0;const e=Rr(n),i=Rr(t);if(e!==i)return Dt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Dt(n.booleanValue,t.booleanValue);case 2:return function(o,c){const u=Te(o.integerValue||o.doubleValue),f=Te(c.integerValue||c.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1}(n,t);case 3:return xE(n.timestampValue,t.timestampValue);case 4:return xE(Jc(n),Jc(t));case 5:return Sp(n.stringValue,t.stringValue);case 6:return function(o,c){const u=xr(o),f=xr(c);return u.compareTo(f)}(n.bytesValue,t.bytesValue);case 7:return function(o,c){const u=o.split("/"),f=c.split("/");for(let g=0;g<u.length&&g<f.length;g++){const _=Dt(u[g],f[g]);if(_!==0)return _}return Dt(u.length,f.length)}(n.referenceValue,t.referenceValue);case 8:return function(o,c){const u=Dt(Te(o.latitude),Te(c.latitude));return u!==0?u:Dt(Te(o.longitude),Te(c.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return RE(n.arrayValue,t.arrayValue);case 10:return function(o,c){var u,f,g,_;const y=o.fields||{},b=c.fields||{},S=(u=y[Vf])===null||u===void 0?void 0:u.arrayValue,R=(f=b[Vf])===null||f===void 0?void 0:f.arrayValue,M=Dt(((g=S?.values)===null||g===void 0?void 0:g.length)||0,((_=R?.values)===null||_===void 0?void 0:_.length)||0);return M!==0?M:RE(S,R)}(n.mapValue,t.mapValue);case 11:return function(o,c){if(o===Kh.mapValue&&c===Kh.mapValue)return 0;if(o===Kh.mapValue)return 1;if(c===Kh.mapValue)return-1;const u=o.fields||{},f=Object.keys(u),g=c.fields||{},_=Object.keys(g);f.sort(),_.sort();for(let y=0;y<f.length&&y<_.length;++y){const b=Sp(f[y],_[y]);if(b!==0)return b;const S=Qo(u[f[y]],g[_[y]]);if(S!==0)return S}return Dt(f.length,_.length)}(n.mapValue,t.mapValue);default:throw Tt(23264,{le:e})}}function xE(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Dt(n,t);const e=Ar(n),i=Ar(t),r=Dt(e.seconds,i.seconds);return r!==0?r:Dt(e.nanos,i.nanos)}function RE(n,t){const e=n.values||[],i=t.values||[];for(let r=0;r<e.length&&r<i.length;++r){const o=Qo(e[r],i[r]);if(o)return o}return Dt(e.length,i.length)}function Xo(n){return wp(n)}function wp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const i=Ar(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return xr(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return pt.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",r=!0;for(const o of e.values||[])r?r=!1:i+=",",i+=wp(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){const i=Object.keys(e.fields||{}).sort();let r="{",o=!0;for(const c of i)o?o=!1:r+=",",r+=`${c}:${wp(e.fields[c])}`;return r+"}"}(n.mapValue):Tt(61005,{value:n})}function yf(n){switch(Rr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=md(n);return t?16+yf(t):16;case 5:return 2*n.stringValue.length;case 6:return xr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+yf(o),0)}(n.arrayValue);case 10:case 11:return function(i){let r=0;return kr(i.fields,(o,c)=>{r+=o.length+yf(c)}),r}(n.mapValue);default:throw Tt(13486,{value:n})}}function IE(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Ap(n){return!!n&&"integerValue"in n}function h_(n){return!!n&&"arrayValue"in n}function CE(n){return!!n&&"nullValue"in n}function ME(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function vf(n){return!!n&&"mapValue"in n}function hD(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{})[Gw])===null||e===void 0?void 0:e.stringValue)===Yw}function zc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return kr(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=zc(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=zc(n.arrayValue.values[e]);return t}return Object.assign({},n)}function fD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===uD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(t){this.value=t}static empty(){return new En({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!vf(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=zc(e)}setAll(t){let e=tn.emptyPath(),i={},r=[];t.forEach((c,u)=>{if(!e.isImmediateParentOf(u)){const f=this.getFieldsMap(e);this.applyChanges(f,i,r),i={},r=[],e=u.popLast()}c?i[u.lastSegment()]=zc(c):r.push(u.lastSegment())});const o=this.getFieldsMap(e);this.applyChanges(o,i,r)}delete(t){const e=this.field(t.popLast());vf(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Bi(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];vf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){kr(e,(r,o)=>t[r]=o);for(const r of i)delete t[r]}clone(){return new En(zc(this.value))}}function Kw(n){const t=[];return kr(n.fields,(e,i)=>{const r=new tn([e]);if(vf(i)){const o=Kw(i.mapValue).fields;if(o.length===0)t.push(r);else for(const c of o)t.push(r.child(c))}else t.push(r)}),new Pn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(t,e,i,r,o,c,u){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=o,this.data=c,this.documentState=u}static newInvalidDocument(t){return new ln(t,0,At.min(),At.min(),At.min(),En.empty(),0)}static newFoundDocument(t,e,i,r){return new ln(t,1,e,At.min(),i,r,0)}static newNoDocument(t,e){return new ln(t,2,e,At.min(),At.min(),En.empty(),0)}static newUnknownDocument(t,e){return new ln(t,3,e,At.min(),At.min(),En.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(At.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=En.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=En.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ln&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(t,e){this.position=t,this.inclusive=e}}function DE(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const o=t[r],c=n.position[r];if(o.field.isKeyField()?i=pt.comparator(pt.fromName(c.referenceValue),e.key):i=Qo(c,e.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function OE(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Bi(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(t,e="asc"){this.field=t,this.dir=e}}function dD(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{}class Ce extends Ww{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new mD(t,e,i):e==="array-contains"?new yD(t,i):e==="in"?new vD(t,i):e==="not-in"?new bD(t,i):e==="array-contains-any"?new ED(t,i):new Ce(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new pD(t,i):new _D(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Qo(e,this.value)):e!==null&&Rr(this.value)===Rr(e)&&this.matchesComparison(Qo(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Tt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hi extends Ww{constructor(t,e){super(),this.filters=t,this.op=e,this.he=null}static create(t,e){return new hi(t,e)}matches(t){return Qw(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Qw(n){return n.op==="and"}function Xw(n){return gD(n)&&Qw(n)}function gD(n){for(const t of n.filters)if(t instanceof hi)return!1;return!0}function xp(n){if(n instanceof Ce)return n.field.canonicalString()+n.op.toString()+Xo(n.value);if(Xw(n))return n.filters.map(t=>xp(t)).join(",");{const t=n.filters.map(e=>xp(e)).join(",");return`${n.op}(${t})`}}function $w(n,t){return n instanceof Ce?function(i,r){return r instanceof Ce&&i.op===r.op&&i.field.isEqual(r.field)&&Bi(i.value,r.value)}(n,t):n instanceof hi?function(i,r){return r instanceof hi&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,c,u)=>o&&$w(c,r.filters[u]),!0):!1}(n,t):void Tt(19439)}function Zw(n){return n instanceof Ce?function(e){return`${e.field.canonicalString()} ${e.op} ${Xo(e.value)}`}(n):n instanceof hi?function(e){return e.op.toString()+" {"+e.getFilters().map(Zw).join(" ,")+"}"}(n):"Filter"}class mD extends Ce{constructor(t,e,i){super(t,e,i),this.key=pt.fromName(i.referenceValue)}matches(t){const e=pt.comparator(t.key,this.key);return this.matchesComparison(e)}}class pD extends Ce{constructor(t,e){super(t,"in",e),this.keys=Jw("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class _D extends Ce{constructor(t,e){super(t,"not-in",e),this.keys=Jw("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function Jw(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>pt.fromName(i.referenceValue))}class yD extends Ce{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return h_(e)&&eu(e.arrayValue,this.value)}}class vD extends Ce{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&eu(this.value.arrayValue,e)}}class bD extends Ce{constructor(t,e){super(t,"not-in",e)}matches(t){if(eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!eu(this.value.arrayValue,e)}}class ED extends Ce{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!h_(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>eu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(t,e=null,i=[],r=[],o=null,c=null,u=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=c,this.endAt=u,this.Pe=null}}function kE(n,t=null,e=[],i=[],r=null,o=null,c=null){return new TD(n,t,e,i,r,o,c)}function f_(n){const t=It(n);if(t.Pe===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>xp(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),gd(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Xo(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Xo(i)).join(",")),t.Pe=e}return t.Pe}function d_(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!dD(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!$w(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!OE(n.startAt,t.startAt)&&OE(n.endAt,t.endAt)}function Rp(n){return pt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(t,e=null,i=[],r=[],o=null,c="F",u=null,f=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=c,this.startAt=u,this.endAt=f,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function SD(n,t,e,i,r,o,c,u){return new ol(n,t,e,i,r,o,c,u)}function pd(n){return new ol(n)}function NE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function t1(n){return n.collectionGroup!==null}function Bc(n){const t=It(n);if(t.Te===null){t.Te=[];const e=new Set;for(const o of t.explicitOrderBy)t.Te.push(o),e.add(o.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new ze(tn.comparator);return c.filters.forEach(f=>{f.getFlattenedFilters().forEach(g=>{g.isInequality()&&(u=u.add(g.field))})}),u})(t).forEach(o=>{e.has(o.canonicalString())||o.isKeyField()||t.Te.push(new nu(o,i))}),e.has(tn.keyField().canonicalString())||t.Te.push(new nu(tn.keyField(),i))}return t.Te}function Vi(n){const t=It(n);return t.Ie||(t.Ie=wD(t,Bc(n))),t.Ie}function wD(n,t){if(n.limitType==="F")return kE(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new nu(r.field,o)});const e=n.endAt?new Lf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Lf(n.startAt.position,n.startAt.inclusive):null;return kE(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function Ip(n,t){const e=n.filters.concat([t]);return new ol(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function Uf(n,t,e){return new ol(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function _d(n,t){return d_(Vi(n),Vi(t))&&n.limitType===t.limitType}function e1(n){return`${f_(Vi(n))}|lt:${n.limitType}`}function Po(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(r=>Zw(r)).join(", ")}]`),gd(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(r=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(r)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(r=>Xo(r)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(r=>Xo(r)).join(",")),`Target(${i})`}(Vi(n))}; limitType=${n.limitType})`}function yd(n,t){return t.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):pt.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,t)&&function(i,r){for(const o of Bc(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(n,t)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(n,t)&&function(i,r){return!(i.startAt&&!function(c,u,f){const g=DE(c,u,f);return c.inclusive?g<=0:g<0}(i.startAt,Bc(i),r)||i.endAt&&!function(c,u,f){const g=DE(c,u,f);return c.inclusive?g>=0:g>0}(i.endAt,Bc(i),r))}(n,t)}function AD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function n1(n){return(t,e)=>{let i=!1;for(const r of Bc(n)){const o=xD(r,t,e);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function xD(n,t,e){const i=n.field.isKeyField()?pt.comparator(t.key,e.key):function(o,c,u){const f=c.data.field(o),g=u.data.field(o);return f!==null&&g!==null?Qo(f,g):Tt(42886)}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Tt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return void(r[o]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){kr(this.inner,(e,i)=>{for(const[r,o]of i)t(r,o)})}isEmpty(){return zw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD=new ge(pt.comparator);function xs(){return RD}const i1=new ge(pt.comparator);function Dc(...n){let t=i1;for(const e of n)t=t.insert(e.key,e);return t}function s1(n){let t=i1;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Sa(){return jc()}function r1(){return jc()}function jc(){return new Va(n=>n.toString(),(n,t)=>n.isEqual(t))}const ID=new ge(pt.comparator),CD=new ze(pt.comparator);function Vt(...n){let t=CD;for(const e of n)t=t.add(e);return t}const MD=new ze(Dt);function DD(){return MD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nf(t)?"-0":t}}function a1(n){return{integerValue:""+n}}function OD(n,t){return rD(t)?a1(t):g_(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(){this._=void 0}}function kD(n,t,e){return n instanceof zf?function(r,o){const c={fields:{[Fw]:{stringValue:jw},[qw]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&u_(o)&&(o=md(o)),o&&(c.fields[Hw]=o),{mapValue:c}}(e,t):n instanceof iu?l1(n,t):n instanceof su?c1(n,t):function(r,o){const c=o1(r,o),u=PE(c)+PE(r.Ee);return Ap(c)&&Ap(r.Ee)?a1(u):g_(r.serializer,u)}(n,t)}function ND(n,t,e){return n instanceof iu?l1(n,t):n instanceof su?c1(n,t):e}function o1(n,t){return n instanceof Bf?function(i){return Ap(i)||function(o){return!!o&&"doubleValue"in o}(i)}(t)?t:{integerValue:0}:null}class zf extends vd{}class iu extends vd{constructor(t){super(),this.elements=t}}function l1(n,t){const e=u1(t);for(const i of n.elements)e.some(r=>Bi(r,i))||e.push(i);return{arrayValue:{values:e}}}class su extends vd{constructor(t){super(),this.elements=t}}function c1(n,t){let e=u1(t);for(const i of n.elements)e=e.filter(r=>!Bi(r,i));return{arrayValue:{values:e}}}class Bf extends vd{constructor(t,e){super(),this.serializer=t,this.Ee=e}}function PE(n){return Te(n.integerValue||n.doubleValue)}function u1(n){return h_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function PD(n,t){return n.field.isEqual(t.field)&&function(i,r){return i instanceof iu&&r instanceof iu||i instanceof su&&r instanceof su?Wo(i.elements,r.elements,Bi):i instanceof Bf&&r instanceof Bf?Bi(i.Ee,r.Ee):i instanceof zf&&r instanceof zf}(n.transform,t.transform)}class VD{constructor(t,e){this.version=t,this.transformResults=e}}class ci{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ci}static exists(t){return new ci(void 0,t)}static updateTime(t){return new ci(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function bf(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class bd{}function h1(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new m_(n.key,ci.none()):new gu(n.key,n.data,ci.none());{const e=n.data,i=En.empty();let r=new ze(tn.comparator);for(let o of t.fields)if(!r.has(o)){let c=e.field(o);c===null&&o.length>1&&(o=o.popLast(),c=e.field(o)),c===null?i.delete(o):i.set(o,c),r=r.add(o)}return new Nr(n.key,i,new Pn(r.toArray()),ci.none())}}function LD(n,t,e){n instanceof gu?function(r,o,c){const u=r.value.clone(),f=LE(r.fieldTransforms,o,c.transformResults);u.setAll(f),o.convertToFoundDocument(c.version,u).setHasCommittedMutations()}(n,t,e):n instanceof Nr?function(r,o,c){if(!bf(r.precondition,o))return void o.convertToUnknownDocument(c.version);const u=LE(r.fieldTransforms,o,c.transformResults),f=o.data;f.setAll(f1(r)),f.setAll(u),o.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(n,t,e):function(r,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,t,e)}function Fc(n,t,e,i){return n instanceof gu?function(o,c,u,f){if(!bf(o.precondition,c))return u;const g=o.value.clone(),_=UE(o.fieldTransforms,f,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(n,t,e,i):n instanceof Nr?function(o,c,u,f){if(!bf(o.precondition,c))return u;const g=UE(o.fieldTransforms,f,c),_=c.data;return _.setAll(f1(o)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(n,t,e,i):function(o,c,u){return bf(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u}(n,t,e)}function UD(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),o=o1(i.transform,r||null);o!=null&&(e===null&&(e=En.empty()),e.set(i.field,o))}return e||null}function VE(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Wo(i,r,(o,c)=>PD(o,c))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class gu extends bd{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Nr extends bd{constructor(t,e,i,r,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function f1(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function LE(n,t,e){const i=new Map;Qt(n.length===e.length,32656,{Ae:e.length,Re:n.length});for(let r=0;r<e.length;r++){const o=n[r],c=o.transform,u=t.data.field(o.field);i.set(o.field,ND(c,u,e[r]))}return i}function UE(n,t,e){const i=new Map;for(const r of n){const o=r.transform,c=e.data.field(r.field);i.set(r.field,kD(o,c,t))}return i}class m_ extends bd{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zD extends bd{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(t.key)&&LD(o,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=Fc(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=Fc(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=r1();return this.mutations.forEach(r=>{const o=t.get(r.key),c=o.overlayedDocument;let u=this.applyToLocalView(c,o.mutatedFields);u=e.has(r.key)?null:u;const f=h1(c,u);f!==null&&i.set(r.key,f),c.isValidDocument()||c.convertToNoDocument(At.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Vt())}isEqual(t){return this.batchId===t.batchId&&Wo(this.mutations,t.mutations,(e,i)=>VE(e,i))&&Wo(this.baseMutations,t.baseMutations,(e,i)=>VE(e,i))}}class p_{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){Qt(t.mutations.length===i.length,58842,{Ve:t.mutations.length,me:i.length});let r=function(){return ID}();const o=t.mutations;for(let c=0;c<o.length;c++)r=r.insert(o[c].key,i[c].version);return new p_(t,e,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ie,Bt;function HD(n){switch(n){case et.OK:return Tt(64938);case et.CANCELLED:case et.UNKNOWN:case et.DEADLINE_EXCEEDED:case et.RESOURCE_EXHAUSTED:case et.INTERNAL:case et.UNAVAILABLE:case et.UNAUTHENTICATED:return!1;case et.INVALID_ARGUMENT:case et.NOT_FOUND:case et.ALREADY_EXISTS:case et.PERMISSION_DENIED:case et.FAILED_PRECONDITION:case et.ABORTED:case et.OUT_OF_RANGE:case et.UNIMPLEMENTED:case et.DATA_LOSS:return!0;default:return Tt(15467,{code:n})}}function d1(n){if(n===void 0)return As("GRPC error has no .code"),et.UNKNOWN;switch(n){case Ie.OK:return et.OK;case Ie.CANCELLED:return et.CANCELLED;case Ie.UNKNOWN:return et.UNKNOWN;case Ie.DEADLINE_EXCEEDED:return et.DEADLINE_EXCEEDED;case Ie.RESOURCE_EXHAUSTED:return et.RESOURCE_EXHAUSTED;case Ie.INTERNAL:return et.INTERNAL;case Ie.UNAVAILABLE:return et.UNAVAILABLE;case Ie.UNAUTHENTICATED:return et.UNAUTHENTICATED;case Ie.INVALID_ARGUMENT:return et.INVALID_ARGUMENT;case Ie.NOT_FOUND:return et.NOT_FOUND;case Ie.ALREADY_EXISTS:return et.ALREADY_EXISTS;case Ie.PERMISSION_DENIED:return et.PERMISSION_DENIED;case Ie.FAILED_PRECONDITION:return et.FAILED_PRECONDITION;case Ie.ABORTED:return et.ABORTED;case Ie.OUT_OF_RANGE:return et.OUT_OF_RANGE;case Ie.UNIMPLEMENTED:return et.UNIMPLEMENTED;case Ie.DATA_LOSS:return et.DATA_LOSS;default:return Tt(39323,{code:n})}}(Bt=Ie||(Ie={}))[Bt.OK=0]="OK",Bt[Bt.CANCELLED=1]="CANCELLED",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bt[Bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bt[Bt.NOT_FOUND=5]="NOT_FOUND",Bt[Bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bt[Bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bt[Bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bt[Bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bt[Bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bt[Bt.ABORTED=10]="ABORTED",Bt[Bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bt[Bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bt[Bt.INTERNAL=13]="INTERNAL",Bt[Bt.UNAVAILABLE=14]="UNAVAILABLE",Bt[Bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=new yr([4294967295,4294967295],0);function zE(n){const t=Pw().encode(n),e=new Rw;return e.update(t),new Uint8Array(e.digest())}function BE(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new yr([e,i],0),new yr([r,o],0)]}class __{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new Oc(`Invalid padding: ${e}`);if(i<0)throw new Oc(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Oc(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new Oc(`Invalid padding when bitmap length is 0: ${e}`);this.fe=8*t.length-e,this.ge=yr.fromNumber(this.fe)}pe(t,e,i){let r=t.add(e.multiply(yr.fromNumber(i)));return r.compare(qD)===1&&(r=new yr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.fe===0)return!1;const e=zE(t),[i,r]=BE(e);for(let o=0;o<this.hashCount;o++){const c=this.pe(i,r,o);if(!this.ye(c))return!1}return!0}static create(t,e,i){const r=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),c=new __(o,r,e);return i.forEach(u=>c.insert(u)),c}insert(t){if(this.fe===0)return;const e=zE(t),[i,r]=BE(e);for(let o=0;o<this.hashCount;o++){const c=this.pe(i,r,o);this.we(c)}}we(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class Oc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(t,e,i,r,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,mu.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new Ed(At.min(),r,new ge(Dt),xs(),Vt())}}class mu{constructor(t,e,i,r,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new mu(i,e,Vt(),Vt(),Vt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(t,e,i,r){this.Se=t,this.removedTargetIds=e,this.key=i,this.be=r}}class g1{constructor(t,e){this.targetId=t,this.De=e}}class m1{constructor(t,e,i=en.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class jE{constructor(){this.ve=0,this.Ce=FE(),this.Fe=en.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(t){t.approximateByteSize()>0&&(this.xe=!0,this.Fe=t)}Le(){let t=Vt(),e=Vt(),i=Vt();return this.Ce.forEach((r,o)=>{switch(o){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:Tt(38017,{changeType:o})}}),new mu(this.Fe,this.Me,t,e,i)}ke(){this.xe=!1,this.Ce=FE()}qe(t,e){this.xe=!0,this.Ce=this.Ce.insert(t,e)}Qe(t){this.xe=!0,this.Ce=this.Ce.remove(t)}$e(){this.ve+=1}Ue(){this.ve-=1,Qt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class GD{constructor(t){this.We=t,this.Ge=new Map,this.ze=xs(),this.je=Wh(),this.Je=Wh(),this.He=new ge(Dt)}Ye(t){for(const e of t.Se)t.be&&t.be.isFoundDocument()?this.Ze(e,t.be):this.Xe(e,t.key,t.be);for(const e of t.removedTargetIds)this.Xe(e,t.key,t.be)}et(t){this.forEachTarget(t,e=>{const i=this.tt(e);switch(t.state){case 0:this.nt(e)&&i.Be(t.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(t.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(e);break;case 3:this.nt(e)&&(i.Ke(),i.Be(t.resumeToken));break;case 4:this.nt(e)&&(this.rt(e),i.Be(t.resumeToken));break;default:Tt(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Ge.forEach((i,r)=>{this.nt(r)&&e(r)})}it(t){const e=t.targetId,i=t.De.count,r=this.st(e);if(r){const o=r.target;if(Rp(o))if(i===0){const c=new pt(o.path);this.Xe(e,c,ln.newNoDocument(c,At.min()))}else Qt(i===1,20013,{expectedCount:i});else{const c=this.ot(e);if(c!==i){const u=this._t(t),f=u?this.ut(u,t,c):1;if(f!==0){this.rt(e);const g=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(e,g)}}}}}_t(t){const e=t.De.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=e;let c,u;try{c=xr(i).toUint8Array()}catch(f){if(f instanceof Bw)return Sr("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{u=new __(c,r,o)}catch(f){return Sr(f instanceof Oc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return u.fe===0?null:u}ut(t,e,i){return e.De.count===i-this.ht(t,e.targetId)?0:2}ht(t,e){const i=this.We.getRemoteKeysForTarget(e);let r=0;return i.forEach(o=>{const c=this.We.lt(),u=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;t.mightContain(u)||(this.Xe(e,o,null),r++)}),r}Pt(t){const e=new Map;this.Ge.forEach((o,c)=>{const u=this.st(c);if(u){if(o.current&&Rp(u.target)){const f=new pt(u.target.path);this.Tt(f).has(c)||this.It(c,f)||this.Xe(c,f,ln.newNoDocument(f,t))}o.Ne&&(e.set(c,o.Le()),o.ke())}});let i=Vt();this.Je.forEach((o,c)=>{let u=!0;c.forEachWhile(f=>{const g=this.st(f);return!g||g.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.ze.forEach((o,c)=>c.setReadTime(t));const r=new Ed(t,e,this.He,this.ze,i);return this.ze=xs(),this.je=Wh(),this.Je=Wh(),this.He=new ge(Dt),r}Ze(t,e){if(!this.nt(t))return;const i=this.It(t,e.key)?2:0;this.tt(t).qe(e.key,i),this.ze=this.ze.insert(e.key,e),this.je=this.je.insert(e.key,this.Tt(e.key).add(t)),this.Je=this.Je.insert(e.key,this.dt(e.key).add(t))}Xe(t,e,i){if(!this.nt(t))return;const r=this.tt(t);this.It(t,e)?r.qe(e,1):r.Qe(e),this.Je=this.Je.insert(e,this.dt(e).delete(t)),this.Je=this.Je.insert(e,this.dt(e).add(t)),i&&(this.ze=this.ze.insert(e,i))}removeTarget(t){this.Ge.delete(t)}ot(t){const e=this.tt(t).Le();return this.We.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}$e(t){this.tt(t).$e()}tt(t){let e=this.Ge.get(t);return e||(e=new jE,this.Ge.set(t,e)),e}dt(t){let e=this.Je.get(t);return e||(e=new ze(Dt),this.Je=this.Je.insert(t,e)),e}Tt(t){let e=this.je.get(t);return e||(e=new ze(Dt),this.je=this.je.insert(t,e)),e}nt(t){const e=this.st(t)!==null;return e||ht("WatchChangeAggregator","Detected inactive target",t),e}st(t){const e=this.Ge.get(t);return e&&e.Oe?null:this.We.Et(t)}rt(t){this.Ge.set(t,new jE),this.We.getRemoteKeysForTarget(t).forEach(e=>{this.Xe(t,e,null)})}It(t,e){return this.We.getRemoteKeysForTarget(t).has(e)}}function Wh(){return new ge(pt.comparator)}function FE(){return new ge(pt.comparator)}const YD={asc:"ASCENDING",desc:"DESCENDING"},KD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WD={and:"AND",or:"OR"};class QD{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Cp(n,t){return n.useProto3Json||gd(t)?t:{value:t}}function jf(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function p1(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function XD(n,t){return jf(n,t.toTimestamp())}function Li(n){return Qt(!!n,49232),At.fromTimestamp(function(e){const i=Ar(e);return new le(i.seconds,i.nanos)}(n))}function y_(n,t){return Mp(n,t).canonicalString()}function Mp(n,t){const e=function(r){return new oe(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function _1(n){const t=oe.fromString(n);return Qt(T1(t),10190,{key:t.toString()}),t}function Dp(n,t){return y_(n.databaseId,t.path)}function Km(n,t){const e=_1(t);if(e.get(1)!==n.databaseId.projectId)throw new ut(et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new ut(et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new pt(v1(e))}function y1(n,t){return y_(n.databaseId,t)}function $D(n){const t=_1(n);return t.length===4?oe.emptyPath():v1(t)}function Op(n){return new oe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function v1(n){return Qt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function HE(n,t,e){return{name:Dp(n,t),fields:e.value.mapValue.fields}}function ZD(n,t){let e;if("targetChange"in t){t.targetChange;const i=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Tt(39313,{state:g})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],o=function(g,_){return g.useProto3Json?(Qt(_===void 0||typeof _=="string",58123),en.fromBase64String(_||"")):(Qt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),en.fromUint8Array(_||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,u=c&&function(g){const _=g.code===void 0?et.UNKNOWN:d1(g.code);return new ut(_,g.message||"")}(c);e=new m1(i,r,o,u||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=Km(n,i.document.name),o=Li(i.document.updateTime),c=i.document.createTime?Li(i.document.createTime):At.min(),u=new En({mapValue:{fields:i.document.fields}}),f=ln.newFoundDocument(r,o,c,u),g=i.targetIds||[],_=i.removedTargetIds||[];e=new Ef(g,_,f.key,f)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=Km(n,i.document),o=i.readTime?Li(i.readTime):At.min(),c=ln.newNoDocument(r,o),u=i.removedTargetIds||[];e=new Ef([],u,c.key,c)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=Km(n,i.document),o=i.removedTargetIds||[];e=new Ef([],o,r,null)}else{if(!("filter"in t))return Tt(11601,{At:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,c=new FD(r,o),u=i.targetId;e=new g1(u,c)}}return e}function JD(n,t){let e;if(t instanceof gu)e={update:HE(n,t.key,t.value)};else if(t instanceof m_)e={delete:Dp(n,t.key)};else if(t instanceof Nr)e={update:HE(n,t.key,t.data),updateMask:lO(t.fieldMask)};else{if(!(t instanceof zD))return Tt(16599,{Rt:t.type});e={verify:Dp(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(o,c){const u=c.transform;if(u instanceof zf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof iu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof su)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Bf)return{fieldPath:c.field.canonicalString(),increment:u.Ee};throw Tt(20930,{transform:c.transform})}(0,i))),t.precondition.isNone||(e.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:XD(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Tt(27497)}(n,t.precondition)),e}function tO(n,t){return n&&n.length>0?(Qt(t!==void 0,14353),n.map(e=>function(r,o){let c=r.updateTime?Li(r.updateTime):Li(o);return c.isEqual(At.min())&&(c=Li(o)),new VD(c,r.transformResults||[])}(e,t))):[]}function eO(n,t){return{documents:[y1(n,t.path)]}}function nO(n,t){const e={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=y1(n,r);const o=function(g){if(g.length!==0)return E1(hi.create(g,"and"))}(t.filters);o&&(e.structuredQuery.where=o);const c=function(g){if(g.length!==0)return g.map(_=>function(b){return{field:Vo(b.field),direction:rO(b.dir)}}(_))}(t.orderBy);c&&(e.structuredQuery.orderBy=c);const u=Cp(n,t.limit);return u!==null&&(e.structuredQuery.limit=u),t.startAt&&(e.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(t.endAt)),{Vt:e,parent:r}}function iO(n){let t=$D(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){Qt(i===1,65062);const _=e.from[0];_.allDescendants?r=_.collectionId:t=t.child(_.collectionId)}let o=[];e.where&&(o=function(y){const b=b1(y);return b instanceof hi&&Xw(b)?b.getFilters():[b]}(e.where));let c=[];e.orderBy&&(c=function(y){return y.map(b=>function(R){return new nu(Lo(R.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(b))}(e.orderBy));let u=null;e.limit&&(u=function(y){let b;return b=typeof y=="object"?y.value:y,gd(b)?null:b}(e.limit));let f=null;e.startAt&&(f=function(y){const b=!!y.before,S=y.values||[];return new Lf(S,b)}(e.startAt));let g=null;return e.endAt&&(g=function(y){const b=!y.before,S=y.values||[];return new Lf(S,b)}(e.endAt)),SD(t,r,c,o,u,"F",f,g)}function sO(n,t){const e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Tt(28987,{purpose:r})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function b1(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Lo(e.unaryFilter.field);return Ce.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Lo(e.unaryFilter.field);return Ce.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Lo(e.unaryFilter.field);return Ce.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Lo(e.unaryFilter.field);return Ce.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Tt(61313);default:return Tt(60726)}}(n):n.fieldFilter!==void 0?function(e){return Ce.create(Lo(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Tt(58110);default:return Tt(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return hi.create(e.compositeFilter.filters.map(i=>b1(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Tt(1026)}}(e.compositeFilter.op))}(n):Tt(30097,{filter:n})}function rO(n){return YD[n]}function aO(n){return KD[n]}function oO(n){return WD[n]}function Vo(n){return{fieldPath:n.canonicalString()}}function Lo(n){return tn.fromServerFormat(n.fieldPath)}function E1(n){return n instanceof Ce?function(e){if(e.op==="=="){if(ME(e.value))return{unaryFilter:{field:Vo(e.field),op:"IS_NAN"}};if(CE(e.value))return{unaryFilter:{field:Vo(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(ME(e.value))return{unaryFilter:{field:Vo(e.field),op:"IS_NOT_NAN"}};if(CE(e.value))return{unaryFilter:{field:Vo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vo(e.field),op:aO(e.op),value:e.value}}}(n):n instanceof hi?function(e){const i=e.getFilters().map(r=>E1(r));return i.length===1?i[0]:{compositeFilter:{op:oO(e.op),filters:i}}}(n):Tt(54877,{filter:n})}function lO(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function T1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(t,e,i,r,o=At.min(),c=At.min(),u=en.EMPTY_BYTE_STRING,f=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=f}withSequenceNumber(t){return new ur(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(t){this.gt=t}}function uO(n){const t=iO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Uf(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(){this.Dn=new fO}addToCollectionParentIndex(t,e){return this.Dn.add(e),it.resolve()}getCollectionParents(t,e){return it.resolve(this.Dn.getEntries(e))}addFieldIndex(t,e){return it.resolve()}deleteFieldIndex(t,e){return it.resolve()}deleteAllFieldIndexes(t){return it.resolve()}createTargetIndexes(t,e){return it.resolve()}getDocumentsMatchingTarget(t,e){return it.resolve(null)}getIndexType(t,e){return it.resolve(0)}getFieldIndexes(t,e){return it.resolve([])}getNextCollectionGroupToUpdate(t){return it.resolve(null)}getMinOffset(t,e){return it.resolve(wr.min())}getMinOffsetFromCollectionGroup(t,e){return it.resolve(wr.min())}updateCollectionGroup(t,e,i){return it.resolve()}updateIndexEntries(t,e){return it.resolve()}}class fO{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new ze(oe.comparator),o=!r.has(i);return this.index[e]=r.add(i),o}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new ze(oe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},S1=41943040;class bn{static withCacheSize(t){return new bn(t,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(S1,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(t){this._r=t}next(){return this._r+=2,this._r}static ar(){return new $o(0)}static ur(){return new $o(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE="LruGarbageCollector",dO=1048576;function YE([n,t],[e,i]){const r=Dt(n,e);return r===0?Dt(t,i):r}class gO{constructor(t){this.Tr=t,this.buffer=new ze(YE),this.Ir=0}dr(){return++this.Ir}Er(t){const e=[t,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();YE(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class mO{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(t){ht(GE,`Garbage collection scheduled in ${t}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){al(e)?ht(GE,"Ignoring IndexedDB error during garbage collection: ",e):await rl(e)}await this.Rr(3e5)})}}class pO{constructor(t,e){this.Vr=t,this.params=e}calculateTargetCount(t,e){return this.Vr.mr(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return it.resolve(dd.ue);const i=new gO(e);return this.Vr.forEachTarget(t,r=>i.Er(r.sequenceNumber)).next(()=>this.Vr.gr(t,r=>i.Er(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.Vr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Vr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(ht("LruGarbageCollector","Garbage collection skipped; disabled"),it.resolve(qE)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(ht("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qE):this.pr(t,e))}getCacheSize(t){return this.Vr.getCacheSize(t)}pr(t,e){let i,r,o,c,u,f,g;const _=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(ht("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),r=this.params.maximumSequenceNumbersToCollect):r=y,c=Date.now(),this.nthSequenceNumber(t,r))).next(y=>(i=y,u=Date.now(),this.removeTargets(t,i,e))).next(y=>(o=y,f=Date.now(),this.removeOrphanedDocuments(t,i))).next(y=>(g=Date.now(),No()<=Pt.DEBUG&&ht("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${r} in `+(u-c)+`ms
	Removed ${o} targets in `+(f-u)+`ms
	Removed ${y} documents in `+(g-f)+`ms
Total Duration: ${g-_}ms`),it.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:y})))}}function _O(n,t){return new pO(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(){this.changes=new Va(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ln.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?it.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(i!==null&&Fc(i.mutation,r,Pn.empty(),le.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,Vt()).next(()=>i))}getLocalViewOfDocuments(t,e,i=Vt()){const r=Sa();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(o=>{let c=Dc();return o.forEach((u,f)=>{c=c.insert(u,f.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const i=Sa();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,Vt()))}populateOverlays(t,e,i){const r=[];return i.forEach(o=>{e.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(t,r).next(o=>{o.forEach((c,u)=>{e.set(c,u)})})}computeViews(t,e,i,r){let o=xs();const c=jc(),u=function(){return jc()}();return e.forEach((f,g)=>{const _=i.get(g.key);r.has(g.key)&&(_===void 0||_.mutation instanceof Nr)?o=o.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),Fc(_.mutation,g,_.mutation.getFieldMask(),le.now())):c.set(g.key,Pn.empty())}),this.recalculateAndSaveOverlays(t,o).next(f=>(f.forEach((g,_)=>c.set(g,_)),e.forEach((g,_)=>{var y;return u.set(g,new vO(_,(y=c.get(g))!==null&&y!==void 0?y:null))}),u))}recalculateAndSaveOverlays(t,e){const i=jc();let r=new ge((c,u)=>c-u),o=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const u of c)u.keys().forEach(f=>{const g=e.get(f);if(g===null)return;let _=i.get(f)||Pn.empty();_=u.applyToLocalView(g,_),i.set(f,_);const y=(r.get(u.batchId)||Vt()).add(f);r=r.insert(u.batchId,y)})}).next(()=>{const c=[],u=r.getReverseIterator();for(;u.hasNext();){const f=u.getNext(),g=f.key,_=f.value,y=r1();_.forEach(b=>{if(!o.has(b)){const S=h1(e.get(b),i.get(b));S!==null&&y.set(b,S),o=o.add(b)}}),c.push(this.documentOverlayCache.saveOverlays(t,g,y))}return it.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,r){return function(c){return pt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):t1(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(o=>{const c=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-o.size):it.resolve(Sa());let u=Zc,f=o;return c.next(g=>it.forEach(g,(_,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(_)?it.resolve():this.remoteDocumentCache.getEntry(t,_).next(b=>{f=f.insert(_,b)}))).next(()=>this.populateOverlays(t,g,o)).next(()=>this.computeViews(t,f,g,Vt())).next(_=>({batchId:u,changes:s1(_)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new pt(e)).next(i=>{let r=Dc();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){const o=e.collectionGroup;let c=Dc();return this.indexManager.getCollectionParents(t,o).next(u=>it.forEach(u,f=>{const g=function(y,b){return new ol(b,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(e,f.child(o));return this.getDocumentsMatchingCollectionQuery(t,g,i,r).next(_=>{_.forEach((y,b)=>{c=c.insert(y,b)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(t,e,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,o,r))).next(c=>{o.forEach((f,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,ln.newInvalidDocument(_)))});let u=Dc();return c.forEach((f,g)=>{const _=o.get(f);_!==void 0&&Fc(_.mutation,g,Pn.empty(),le.now()),yd(e,g)&&(u=u.insert(f,g))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(t){this.serializer=t,this.Br=new Map,this.Lr=new Map}getBundleMetadata(t,e){return it.resolve(this.Br.get(e))}saveBundleMetadata(t,e){return this.Br.set(e.id,function(r){return{id:r.id,version:r.version,createTime:Li(r.createTime)}}(e)),it.resolve()}getNamedQuery(t,e){return it.resolve(this.Lr.get(e))}saveNamedQuery(t,e){return this.Lr.set(e.name,function(r){return{name:r.name,query:uO(r.bundledQuery),readTime:Li(r.readTime)}}(e)),it.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(){this.overlays=new ge(pt.comparator),this.kr=new Map}getOverlay(t,e){return it.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Sa();return it.forEach(e,r=>this.getOverlay(t,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,o)=>{this.wt(t,e,o)}),it.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.kr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(i)),it.resolve()}getOverlaysForCollection(t,e,i){const r=Sa(),o=e.length+1,c=new pt(e.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const f=u.getNext().value,g=f.getKey();if(!e.isPrefixOf(g.path))break;g.path.length===o&&f.largestBatchId>i&&r.set(f.getKey(),f)}return it.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let o=new ge((g,_)=>g-_);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===e&&g.largestBatchId>i){let _=o.get(g.largestBatchId);_===null&&(_=Sa(),o=o.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const u=Sa(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((g,_)=>u.set(g,_)),!(u.size()>=r)););return it.resolve(u)}wt(t,e,i){const r=this.overlays.get(i.key);if(r!==null){const c=this.kr.get(r.largestBatchId).delete(i.key);this.kr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new jD(e,i));let o=this.kr.get(e);o===void 0&&(o=Vt(),this.kr.set(e,o)),this.kr.set(e,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(t){return it.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,it.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(){this.qr=new ze(Ke.Qr),this.$r=new ze(Ke.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(t,e){const i=new Ke(t,e);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Wr(new Ke(t,e))}Gr(t,e){t.forEach(i=>this.removeReference(i,e))}zr(t){const e=new pt(new oe([])),i=new Ke(e,t),r=new Ke(e,t+1),o=[];return this.$r.forEachInRange([i,r],c=>{this.Wr(c),o.push(c.key)}),o}jr(){this.qr.forEach(t=>this.Wr(t))}Wr(t){this.qr=this.qr.delete(t),this.$r=this.$r.delete(t)}Jr(t){const e=new pt(new oe([])),i=new Ke(e,t),r=new Ke(e,t+1);let o=Vt();return this.$r.forEachInRange([i,r],c=>{o=o.add(c.key)}),o}containsKey(t){const e=new Ke(t,0),i=this.qr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class Ke{constructor(t,e){this.key=t,this.Hr=e}static Qr(t,e){return pt.comparator(t.key,e.key)||Dt(t.Hr,e.Hr)}static Ur(t,e){return Dt(t.Hr,e.Hr)||pt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.er=1,this.Yr=new ze(Ke.Qr)}checkEmpty(t){return it.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new BD(o,e,i,r);this.mutationQueue.push(c);for(const u of r)this.Yr=this.Yr.add(new Ke(u.key,o)),this.indexManager.addToCollectionParentIndex(t,u.key.path.popLast());return it.resolve(c)}lookupMutationBatch(t,e){return it.resolve(this.Zr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=this.Xr(i),o=r<0?0:r;return it.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return it.resolve(this.mutationQueue.length===0?c_:this.er-1)}getAllMutationBatches(t){return it.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Ke(e,0),r=new Ke(e,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([i,r],c=>{const u=this.Zr(c.Hr);o.push(u)}),it.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new ze(Dt);return e.forEach(r=>{const o=new Ke(r,0),c=new Ke(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,c],u=>{i=i.add(u.Hr)})}),it.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let o=i;pt.isDocumentKey(o)||(o=o.child(""));const c=new Ke(new pt(o),0);let u=new ze(Dt);return this.Yr.forEachWhile(f=>{const g=f.key.path;return!!i.isPrefixOf(g)&&(g.length===r&&(u=u.add(f.Hr)),!0)},c),it.resolve(this.ei(u))}ei(t){const e=[];return t.forEach(i=>{const r=this.Zr(i);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){Qt(this.ti(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return it.forEach(e.mutations,r=>{const o=new Ke(r.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Yr=i})}rr(t){}containsKey(t,e){const i=new Ke(e,0),r=this.Yr.firstAfterOrEqual(i);return it.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,it.resolve()}ti(t,e){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const e=this.Xr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(t){this.ni=t,this.docs=function(){return new ge(pt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),o=r?r.size:0,c=this.ni(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return it.resolve(i?i.document.mutableCopy():ln.newInvalidDocument(e))}getEntries(t,e){let i=xs();return e.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():ln.newInvalidDocument(r))}),it.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let o=xs();const c=e.path,u=new pt(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(u);for(;f.hasNext();){const{key:g,value:{document:_}}=f.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||eD(tD(_),i)<=0||(r.has(_.key)||yd(e,_))&&(o=o.insert(_.key,_.mutableCopy()))}return it.resolve(o)}getAllFromCollectionGroup(t,e,i,r){Tt(9500)}ri(t,e){return it.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new xO(this)}getSize(t){return it.resolve(this.size)}}class xO extends yO{constructor(t){super(),this.Or=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.Or.addEntry(t,r)):this.Or.removeEntry(i)}),it.waitFor(e)}getFromCache(t,e){return this.Or.getEntry(t,e)}getAllFromCache(t,e){return this.Or.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(t){this.persistence=t,this.ii=new Va(e=>f_(e),d_),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.si=0,this.oi=new v_,this.targetCount=0,this._i=$o.ar()}forEachTarget(t,e){return this.ii.forEach((i,r)=>e(r)),it.resolve()}getLastRemoteSnapshotVersion(t){return it.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return it.resolve(this.si)}allocateTargetId(t){return this.highestTargetId=this._i.next(),it.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.si&&(this.si=e),it.resolve()}hr(t){this.ii.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this._i=new $o(e),this.highestTargetId=e),t.sequenceNumber>this.si&&(this.si=t.sequenceNumber)}addTargetData(t,e){return this.hr(e),this.targetCount+=1,it.resolve()}updateTargetData(t,e){return this.hr(e),it.resolve()}removeTargetData(t,e){return this.ii.delete(e.target),this.oi.zr(e.targetId),this.targetCount-=1,it.resolve()}removeTargets(t,e,i){let r=0;const o=[];return this.ii.forEach((c,u)=>{u.sequenceNumber<=e&&i.get(u.targetId)===null&&(this.ii.delete(c),o.push(this.removeMatchingKeysForTargetId(t,u.targetId)),r++)}),it.waitFor(o).next(()=>r)}getTargetCount(t){return it.resolve(this.targetCount)}getTargetData(t,e){const i=this.ii.get(e)||null;return it.resolve(i)}addMatchingKeys(t,e,i){return this.oi.Kr(e,i),it.resolve()}removeMatchingKeys(t,e,i){this.oi.Gr(e,i);const r=this.persistence.referenceDelegate,o=[];return r&&e.forEach(c=>{o.push(r.markPotentiallyOrphaned(t,c))}),it.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this.oi.zr(e),it.resolve()}getMatchingKeysForTargetId(t,e){const i=this.oi.Jr(e);return it.resolve(i)}containsKey(t,e){return it.resolve(this.oi.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(t,e){this.ai={},this.overlays={},this.ui=new dd(0),this.ci=!1,this.ci=!0,this.li=new SO,this.referenceDelegate=t(this),this.hi=new RO(this),this.indexManager=new hO,this.remoteDocumentCache=function(r){return new AO(r)}(i=>this.referenceDelegate.Pi(i)),this.serializer=new cO(e),this.Ti=new EO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new TO,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.ai[t.toKey()];return i||(i=new wO(e,this.referenceDelegate),this.ai[t.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(t,e,i){ht("MemoryPersistence","Starting transaction:",t);const r=new IO(this.ui.next());return this.referenceDelegate.Ii(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ei(t,e){return it.or(Object.values(this.ai).map(i=>()=>i.containsKey(t,e)))}}class IO extends iD{constructor(t){super(),this.currentSequenceNumber=t}}class b_{constructor(t){this.persistence=t,this.Ai=new v_,this.Ri=null}static Vi(t){return new b_(t)}get mi(){if(this.Ri)return this.Ri;throw Tt(60996)}addReference(t,e,i){return this.Ai.addReference(i,e),this.mi.delete(i.toString()),it.resolve()}removeReference(t,e,i){return this.Ai.removeReference(i,e),this.mi.add(i.toString()),it.resolve()}markPotentiallyOrphaned(t,e){return this.mi.add(e.toString()),it.resolve()}removeTarget(t,e){this.Ai.zr(e.targetId).forEach(r=>this.mi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(o=>this.mi.add(o.toString()))}).next(()=>i.removeTargetData(t,e))}Ii(){this.Ri=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return it.forEach(this.mi,i=>{const r=pt.fromPath(i);return this.fi(t,r).next(o=>{o||e.removeEntry(r,At.min())})}).next(()=>(this.Ri=null,e.apply(t)))}updateLimboDocument(t,e){return this.fi(t,e).next(i=>{i?this.mi.delete(e.toString()):this.mi.add(e.toString())})}Pi(t){return 0}fi(t,e){return it.or([()=>it.resolve(this.Ai.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ei(t,e)])}}class Ff{constructor(t,e){this.persistence=t,this.gi=new Va(i=>aD(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=_O(this,e)}static Vi(t,e){return new Ff(t,e)}Ii(){}di(t){return it.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}mr(t){const e=this.yr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}yr(t){let e=0;return this.gr(t,i=>{e++}).next(()=>e)}gr(t,e){return it.forEach(this.gi,(i,r)=>this.Sr(t,i,r).next(o=>o?it.resolve():e(r)))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ri(t,c=>this.Sr(t,c,e).next(u=>{u||(i++,o.removeEntry(c,At.min()))})).next(()=>o.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,e){return this.gi.set(e,t.currentSequenceNumber),it.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.gi.set(i,t.currentSequenceNumber),it.resolve()}removeReference(t,e,i){return this.gi.set(i,t.currentSequenceNumber),it.resolve()}updateLimboDocument(t,e){return this.gi.set(e,t.currentSequenceNumber),it.resolve()}Pi(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=yf(t.data.value)),e}Sr(t,e,i){return it.or([()=>this.persistence.Ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const r=this.gi.get(e);return it.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Is=i,this.ds=r}static Es(t,e){let i=Vt(),r=Vt();for(const o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new E_(t,e.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return c2()?8:sD(cn())>0?6:4}()}initialize(t,e){this.gs=t,this.indexManager=e,this.As=!0}getDocumentsMatchingQuery(t,e,i,r){const o={result:null};return this.ps(t,e).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.ys(t,e,r,i).next(c=>{o.result=c})}).next(()=>{if(o.result)return;const c=new CO;return this.ws(t,e,c).next(u=>{if(o.result=u,this.Rs)return this.Ss(t,e,c,u.size)})}).next(()=>o.result)}Ss(t,e,i,r){return i.documentReadCount<this.Vs?(No()<=Pt.DEBUG&&ht("QueryEngine","SDK will not create cache indexes for query:",Po(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),it.resolve()):(No()<=Pt.DEBUG&&ht("QueryEngine","Query:",Po(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.fs*r?(No()<=Pt.DEBUG&&ht("QueryEngine","The SDK decides to create cache indexes for query:",Po(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Vi(e))):it.resolve())}ps(t,e){if(NE(e))return it.resolve(null);let i=Vi(e);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=Uf(e,null,"F"),i=Vi(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(o=>{const c=Vt(...o);return this.gs.getDocuments(t,c).next(u=>this.indexManager.getMinOffset(t,i).next(f=>{const g=this.bs(e,u);return this.Ds(e,g,c,f.readTime)?this.ps(t,Uf(e,null,"F")):this.vs(t,g,e,f)}))})))}ys(t,e,i,r){return NE(e)||r.isEqual(At.min())?it.resolve(null):this.gs.getDocuments(t,i).next(o=>{const c=this.bs(e,o);return this.Ds(e,c,i,r)?it.resolve(null):(No()<=Pt.DEBUG&&ht("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Po(e)),this.vs(t,c,e,JM(r,Zc)).next(u=>u))})}bs(t,e){let i=new ze(n1(t));return e.forEach((r,o)=>{yd(t,o)&&(i=i.add(o))}),i}Ds(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}ws(t,e,i){return No()<=Pt.DEBUG&&ht("QueryEngine","Using full collection scan to execute query:",Po(e)),this.gs.getDocumentsMatchingQuery(t,e,wr.min(),i)}vs(t,e,i,r){return this.gs.getDocumentsMatchingQuery(t,i,r).next(o=>(e.forEach(c=>{o=o.insert(c.key,c)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="LocalStore",DO=3e8;class OO{constructor(t,e,i,r){this.persistence=t,this.Cs=e,this.serializer=r,this.Fs=new ge(Dt),this.Ms=new Va(o=>f_(o),d_),this.xs=new Map,this.Os=t.getRemoteDocumentCache(),this.hi=t.getTargetCache(),this.Ti=t.getBundleCache(),this.Ns(i)}Ns(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new bO(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Fs))}}function kO(n,t,e,i){return new OO(n,t,e,i)}async function A1(n,t){const e=It(n);return await e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,e.Ns(t),e.mutationQueue.getAllMutationBatches(i))).next(o=>{const c=[],u=[];let f=Vt();for(const g of r){c.push(g.batchId);for(const _ of g.mutations)f=f.add(_.key)}for(const g of o){u.push(g.batchId);for(const _ of g.mutations)f=f.add(_.key)}return e.localDocuments.getDocuments(i,f).next(g=>({Bs:g,removedBatchIds:c,addedBatchIds:u}))})})}function NO(n,t){const e=It(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),o=e.Os.newChangeBuffer({trackRemovals:!0});return function(u,f,g,_){const y=g.batch,b=y.keys();let S=it.resolve();return b.forEach(R=>{S=S.next(()=>_.getEntry(f,R)).next(M=>{const C=g.docVersions.get(R);Qt(C!==null,48541),M.version.compareTo(C)<0&&(y.applyToRemoteDocument(M,g),M.isValidDocument()&&(M.setReadTime(g.commitVersion),_.addEntry(M)))})}),S.next(()=>u.mutationQueue.removeMutationBatch(f,y))}(e,i,t,o).next(()=>o.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let f=Vt();for(let g=0;g<u.mutationResults.length;++g)u.mutationResults[g].transformResults.length>0&&(f=f.add(u.batch.mutations[g].key));return f}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function x1(n){const t=It(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.hi.getLastRemoteSnapshotVersion(e))}function PO(n,t){const e=It(n),i=t.snapshotVersion;let r=e.Fs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=e.Os.newChangeBuffer({trackRemovals:!0});r=e.Fs;const u=[];t.targetChanges.forEach((_,y)=>{const b=r.get(y);if(!b)return;u.push(e.hi.removeMatchingKeys(o,_.removedDocuments,y).next(()=>e.hi.addMatchingKeys(o,_.addedDocuments,y)));let S=b.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(y)!==null?S=S.withResumeToken(en.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):_.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(_.resumeToken,i)),r=r.insert(y,S),function(M,C,z){return M.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=DO?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0}(b,S,_)&&u.push(e.hi.updateTargetData(o,S))});let f=xs(),g=Vt();if(t.documentUpdates.forEach(_=>{t.resolvedLimboDocuments.has(_)&&u.push(e.persistence.referenceDelegate.updateLimboDocument(o,_))}),u.push(VO(o,c,t.documentUpdates).next(_=>{f=_.Ls,g=_.ks})),!i.isEqual(At.min())){const _=e.hi.getLastRemoteSnapshotVersion(o).next(y=>e.hi.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(_)}return it.waitFor(u).next(()=>c.apply(o)).next(()=>e.localDocuments.getLocalViewOfDocuments(o,f,g)).next(()=>f)}).then(o=>(e.Fs=r,o))}function VO(n,t,e){let i=Vt(),r=Vt();return e.forEach(o=>i=i.add(o)),t.getEntries(n,i).next(o=>{let c=xs();return e.forEach((u,f)=>{const g=o.get(u);f.isFoundDocument()!==g.isFoundDocument()&&(r=r.add(u)),f.isNoDocument()&&f.version.isEqual(At.min())?(t.removeEntry(u,f.readTime),c=c.insert(u,f)):!g.isValidDocument()||f.version.compareTo(g.version)>0||f.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(f),c=c.insert(u,f)):ht(T_,"Ignoring outdated watch update for ",u,". Current version:",g.version," Watch version:",f.version)}),{Ls:c,ks:r}})}function LO(n,t){const e=It(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=c_),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function UO(n,t){const e=It(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.hi.getTargetData(i,t).next(o=>o?(r=o,it.resolve(r)):e.hi.allocateTargetId(i).next(c=>(r=new ur(t,c,"TargetPurposeListen",i.currentSequenceNumber),e.hi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.Fs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Fs=e.Fs.insert(i.targetId,i),e.Ms.set(t,i.targetId)),i})}async function kp(n,t,e){const i=It(n),r=i.Fs.get(t),o=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",o,c=>i.persistence.referenceDelegate.removeTarget(c,r))}catch(c){if(!al(c))throw c;ht(T_,`Failed to update sequence numbers for target ${t}: ${c}`)}i.Fs=i.Fs.remove(t),i.Ms.delete(r.target)}function KE(n,t,e){const i=It(n);let r=At.min(),o=Vt();return i.persistence.runTransaction("Execute query","readwrite",c=>function(f,g,_){const y=It(f),b=y.Ms.get(_);return b!==void 0?it.resolve(y.Fs.get(b)):y.hi.getTargetData(g,_)}(i,c,Vi(t)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(c,u.targetId).next(f=>{o=f})}).next(()=>i.Cs.getDocumentsMatchingQuery(c,t,e?r:At.min(),e?o:Vt())).next(u=>(zO(i,AD(t),u),{documents:u,qs:o})))}function zO(n,t,e){let i=n.xs.get(t)||At.min();e.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.xs.set(t,i)}class WE{constructor(){this.activeTargetIds=DD()}Gs(t){this.activeTargetIds=this.activeTargetIds.add(t)}zs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class BO{constructor(){this.Fo=new WE,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.Fo.Gs(t),this.Mo[t]||"not-current"}updateQueryState(t,e,i){this.Mo[t]=e}removeLocalQueryTarget(t){this.Fo.zs(t)}isLocalQueryTarget(t){return this.Fo.activeTargetIds.has(t)}clearQueryState(t){delete this.Mo[t]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(t){return this.Fo.activeTargetIds.has(t)}start(){return this.Fo=new WE,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{xo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="ConnectivityMonitor";class XE{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(t){this.ko.push(t)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ht(QE,"Network connectivity changed: AVAILABLE");for(const t of this.ko)t(0)}Lo(){ht(QE,"Network connectivity changed: UNAVAILABLE");for(const t of this.ko)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qh=null;function Np(){return Qh===null?Qh=function(){return 268435456+Math.round(2147483648*Math.random())}():Qh++,"0x"+Qh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm="RestConnection",FO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class HO{get Qo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=e+"://"+t.host,this.Uo=`projects/${i}/databases/${r}`,this.Ko=this.databaseId.database===Pf?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(t,e,i,r,o){const c=Np(),u=this.Go(t,e.toUriEncodedString());ht(Wm,`Sending RPC '${t}' ${c}:`,u,i);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(f,r,o);const{host:g}=new URL(u),_=tl(g);return this.jo(t,u,f,i,_).then(y=>(ht(Wm,`Received RPC '${t}' ${c}: `,y),y),y=>{throw Sr(Wm,`RPC '${t}' ${c} failed with error: `,y,"url: ",u,"request:",i),y})}Jo(t,e,i,r,o,c){return this.Wo(t,e,i,r,o)}zo(t,e,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+sl}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,o)=>t[o]=r),i&&i.headers.forEach((r,o)=>t[o]=r)}Go(t,e){const i=FO[t];return`${this.$o}/v1/${e}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(t){this.Ho=t.Ho,this.Yo=t.Yo}Zo(t){this.Xo=t}e_(t){this.t_=t}n_(t){this.r_=t}onMessage(t){this.i_=t}close(){this.Yo()}send(t){this.Ho(t)}s_(){this.Xo()}o_(){this.t_()}__(t){this.r_(t)}a_(t){this.i_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="WebChannelConnection";class GO extends HO{constructor(t){super(t),this.u_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}jo(t,e,i,r,o){const c=Np();return new Promise((u,f)=>{const g=new Iw;g.setWithCredentials(!0),g.listenOnce(Cw.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case _f.NO_ERROR:const y=g.getResponseJson();ht(an,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(y)),u(y);break;case _f.TIMEOUT:ht(an,`RPC '${t}' ${c} timed out`),f(new ut(et.DEADLINE_EXCEEDED,"Request time out"));break;case _f.HTTP_ERROR:const b=g.getStatus();if(ht(an,`RPC '${t}' ${c} failed with status:`,b,"response text:",g.getResponseText()),b>0){let S=g.getResponseJson();Array.isArray(S)&&(S=S[0]);const R=S?.error;if(R&&R.status&&R.message){const M=function(z){const F=z.toLowerCase().replace(/_/g,"-");return Object.values(et).indexOf(F)>=0?F:et.UNKNOWN}(R.status);f(new ut(M,R.message))}else f(new ut(et.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new ut(et.UNAVAILABLE,"Connection failed."));break;default:Tt(9055,{c_:t,streamId:c,l_:g.getLastErrorCode(),h_:g.getLastError()})}}finally{ht(an,`RPC '${t}' ${c} completed.`)}});const _=JSON.stringify(r);ht(an,`RPC '${t}' ${c} sending request:`,r),g.send(e,"POST",_,i,15)})}P_(t,e,i){const r=Np(),o=[this.$o,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=Ow(),u=Dw(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(f.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(f.useFetchStreams=!0),this.zo(f.initMessageHeaders,e,i),f.encodeInitMessageHeaders=!0;const _=o.join("");ht(an,`Creating RPC '${t}' stream ${r}: ${_}`,f);const y=c.createWebChannel(_,f);this.T_(y);let b=!1,S=!1;const R=new qO({Ho:C=>{S?ht(an,`Not sending because RPC '${t}' stream ${r} is closed:`,C):(b||(ht(an,`Opening RPC '${t}' stream ${r} transport.`),y.open(),b=!0),ht(an,`RPC '${t}' stream ${r} sending:`,C),y.send(C))},Yo:()=>y.close()}),M=(C,z,F)=>{C.listen(z,X=>{try{F(X)}catch($){setTimeout(()=>{throw $},0)}})};return M(y,Mc.EventType.OPEN,()=>{S||(ht(an,`RPC '${t}' stream ${r} transport opened.`),R.s_())}),M(y,Mc.EventType.CLOSE,()=>{S||(S=!0,ht(an,`RPC '${t}' stream ${r} transport closed`),R.__(),this.I_(y))}),M(y,Mc.EventType.ERROR,C=>{S||(S=!0,Sr(an,`RPC '${t}' stream ${r} transport errored. Name:`,C.name,"Message:",C.message),R.__(new ut(et.UNAVAILABLE,"The operation could not be completed")))}),M(y,Mc.EventType.MESSAGE,C=>{var z;if(!S){const F=C.data[0];Qt(!!F,16349);const X=F,$=X?.error||((z=X[0])===null||z===void 0?void 0:z.error);if($){ht(an,`RPC '${t}' stream ${r} received error:`,$);const W=$.status;let ot=function(I){const N=Ie[I];if(N!==void 0)return d1(N)}(W),D=$.message;ot===void 0&&(ot=et.INTERNAL,D="Unknown error status: "+W+" with message "+$.message),S=!0,R.__(new ut(ot,D)),y.close()}else ht(an,`RPC '${t}' stream ${r} received:`,F),R.a_(F)}}),M(u,Mw.STAT_EVENT,C=>{C.stat===Tp.PROXY?ht(an,`RPC '${t}' stream ${r} detected buffering proxy`):C.stat===Tp.NOPROXY&&ht(an,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{R.o_()},0),R}terminate(){this.u_.forEach(t=>t.close()),this.u_=[]}T_(t){this.u_.push(t)}I_(t){this.u_=this.u_.filter(e=>e===t)}}function Qm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(n){return new QD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(t,e,i=1e3,r=1.5,o=6e4){this.Fi=t,this.timerId=e,this.d_=i,this.E_=r,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const e=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),r=Math.max(0,e-i);r>0&&ht("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),t())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E="PersistentStream";class I1{constructor(t,e,i,r,o,c,u,f){this.Fi=t,this.w_=i,this.S_=r,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=f,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new R1(t,e)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(t){this.q_(),this.stream.send(t)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,t!==4?this.F_.reset():e&&e.code===et.RESOURCE_EXHAUSTED?(As(e.toString()),As("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):e&&e.code===et.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.n_(e)}U_(){}auth(){this.state=1;const t=this.K_(this.b_),e=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.b_===e&&this.W_(i,r)},i=>{t(()=>{const r=new ut(et.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(r)})})}W_(t,e){const i=this.K_(this.b_);this.stream=this.z_(t,e),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(r=>{i(()=>this.G_(r))}),this.stream.onMessage(r=>{i(()=>++this.C_==1?this.j_(r):this.onNext(r))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(t){return ht($E,`close with error: ${t}`),this.stream=null,this.close(4,t)}K_(t){return e=>{this.Fi.enqueueAndForget(()=>this.b_===t?e():(ht($E,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class YO extends I1{constructor(t,e,i,r,o,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,c),this.serializer=o}z_(t,e){return this.connection.P_("Listen",t,e)}j_(t){return this.onNext(t)}onNext(t){this.F_.reset();const e=ZD(this.serializer,t),i=function(o){if(!("targetChange"in o))return At.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?At.min():c.readTime?Li(c.readTime):At.min()}(t);return this.listener.J_(e,i)}H_(t){const e={};e.database=Op(this.serializer),e.addTarget=function(o,c){let u;const f=c.target;if(u=Rp(f)?{documents:eO(o,f)}:{query:nO(o,f).Vt},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=p1(o,c.resumeToken);const g=Cp(o,c.expectedCount);g!==null&&(u.expectedCount=g)}else if(c.snapshotVersion.compareTo(At.min())>0){u.readTime=jf(o,c.snapshotVersion.toTimestamp());const g=Cp(o,c.expectedCount);g!==null&&(u.expectedCount=g)}return u}(this.serializer,t);const i=sO(this.serializer,t);i&&(e.labels=i),this.k_(e)}Y_(t){const e={};e.database=Op(this.serializer),e.removeTarget=t,this.k_(e)}}class KO extends I1{constructor(t,e,i,r,o,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,c),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(t,e){return this.connection.P_("Write",t,e)}j_(t){return Qt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Qt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ea()}onNext(t){Qt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.F_.reset();const e=tO(t.writeResults,t.commitTime),i=Li(t.commitTime);return this.listener.ta(i,e)}na(){const t={};t.database=Op(this.serializer),this.k_(t)}X_(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>JD(this.serializer,i))};this.k_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{}class QO extends WO{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new ut(et.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,e,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Wo(t,Mp(e,i),r,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ut(et.UNKNOWN,o.toString())})}Jo(t,e,i,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,u])=>this.connection.Jo(t,Mp(e,i),r,c,u,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ut(et.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class XO{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(t){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ua("Offline")))}set(t){this.ha(),this.sa=0,t==="Online"&&(this._a=!1),this.ua(t)}ua(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ca(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(As(e),this._a=!1):ht("OnlineStateTracker",e)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="RemoteStore";class $O{constructor(t,e,i,r,o){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(c=>{i.enqueueAndForget(async()=>{La(this)&&(ht(Oa,"Restarting streams for network reachability change."),await async function(f){const g=It(f);g.Ia.add(4),await pu(g),g.Aa.set("Unknown"),g.Ia.delete(4),await Sd(g)}(this))})}),this.Aa=new XO(i,r)}}async function Sd(n){if(La(n))for(const t of n.da)await t(!0)}async function pu(n){for(const t of n.da)await t(!1)}function C1(n,t){const e=It(n);e.Ta.has(t.targetId)||(e.Ta.set(t.targetId,t),x_(e)?A_(e):ll(e).x_()&&w_(e,t))}function S_(n,t){const e=It(n),i=ll(e);e.Ta.delete(t),i.x_()&&M1(e,t),e.Ta.size===0&&(i.x_()?i.B_():La(e)&&e.Aa.set("Unknown"))}function w_(n,t){if(n.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(At.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}ll(n).H_(t)}function M1(n,t){n.Ra.$e(t),ll(n).Y_(t)}function A_(n){n.Ra=new GD({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>n.Ta.get(t)||null,lt:()=>n.datastore.serializer.databaseId}),ll(n).start(),n.Aa.aa()}function x_(n){return La(n)&&!ll(n).M_()&&n.Ta.size>0}function La(n){return It(n).Ia.size===0}function D1(n){n.Ra=void 0}async function ZO(n){n.Aa.set("Online")}async function JO(n){n.Ta.forEach((t,e)=>{w_(n,t)})}async function tk(n,t){D1(n),x_(n)?(n.Aa.la(t),A_(n)):n.Aa.set("Unknown")}async function ek(n,t,e){if(n.Aa.set("Online"),t instanceof m1&&t.state===2&&t.cause)try{await async function(r,o){const c=o.cause;for(const u of o.targetIds)r.Ta.has(u)&&(await r.remoteSyncer.rejectListen(u,c),r.Ta.delete(u),r.Ra.removeTarget(u))}(n,t)}catch(i){ht(Oa,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Hf(n,i)}else if(t instanceof Ef?n.Ra.Ye(t):t instanceof g1?n.Ra.it(t):n.Ra.et(t),!e.isEqual(At.min()))try{const i=await x1(n.localStore);e.compareTo(i)>=0&&await function(o,c){const u=o.Ra.Pt(c);return u.targetChanges.forEach((f,g)=>{if(f.resumeToken.approximateByteSize()>0){const _=o.Ta.get(g);_&&o.Ta.set(g,_.withResumeToken(f.resumeToken,c))}}),u.targetMismatches.forEach((f,g)=>{const _=o.Ta.get(f);if(!_)return;o.Ta.set(f,_.withResumeToken(en.EMPTY_BYTE_STRING,_.snapshotVersion)),M1(o,f);const y=new ur(_.target,f,g,_.sequenceNumber);w_(o,y)}),o.remoteSyncer.applyRemoteEvent(u)}(n,e)}catch(i){ht(Oa,"Failed to raise snapshot:",i),await Hf(n,i)}}async function Hf(n,t,e){if(!al(t))throw t;n.Ia.add(1),await pu(n),n.Aa.set("Offline"),e||(e=()=>x1(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ht(Oa,"Retrying IndexedDB access"),await e(),n.Ia.delete(1),await Sd(n)})}function O1(n,t){return t().catch(e=>Hf(n,e,t))}async function wd(n){const t=It(n),e=Ir(t);let i=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:c_;for(;nk(t);)try{const r=await LO(t.localStore,i);if(r===null){t.Pa.length===0&&e.B_();break}i=r.batchId,ik(t,r)}catch(r){await Hf(t,r)}k1(t)&&N1(t)}function nk(n){return La(n)&&n.Pa.length<10}function ik(n,t){n.Pa.push(t);const e=Ir(n);e.x_()&&e.Z_&&e.X_(t.mutations)}function k1(n){return La(n)&&!Ir(n).M_()&&n.Pa.length>0}function N1(n){Ir(n).start()}async function sk(n){Ir(n).na()}async function rk(n){const t=Ir(n);for(const e of n.Pa)t.X_(e.mutations)}async function ak(n,t,e){const i=n.Pa.shift(),r=p_.from(i,t,e);await O1(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),await wd(n)}async function ok(n,t){t&&Ir(n).Z_&&await async function(i,r){if(function(c){return HD(c)&&c!==et.ABORTED}(r.code)){const o=i.Pa.shift();Ir(i).N_(),await O1(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await wd(i)}}(n,t),k1(n)&&N1(n)}async function ZE(n,t){const e=It(n);e.asyncQueue.verifyOperationInProgress(),ht(Oa,"RemoteStore received new credentials");const i=La(e);e.Ia.add(3),await pu(e),i&&e.Aa.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ia.delete(3),await Sd(e)}async function lk(n,t){const e=It(n);t?(e.Ia.delete(2),await Sd(e)):t||(e.Ia.add(2),await pu(e),e.Aa.set("Unknown"))}function ll(n){return n.Va||(n.Va=function(e,i,r){const o=It(e);return o.ia(),new YO(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Zo:ZO.bind(null,n),e_:JO.bind(null,n),n_:tk.bind(null,n),J_:ek.bind(null,n)}),n.da.push(async t=>{t?(n.Va.N_(),x_(n)?A_(n):n.Aa.set("Unknown")):(await n.Va.stop(),D1(n))})),n.Va}function Ir(n){return n.ma||(n.ma=function(e,i,r){const o=It(e);return o.ia(),new KO(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:sk.bind(null,n),n_:ok.bind(null,n),ea:rk.bind(null,n),ta:ak.bind(null,n)}),n.da.push(async t=>{t?(n.ma.N_(),await wd(n)):(await n.ma.stop(),n.Pa.length>0&&(ht(Oa,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(t,e,i,r,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,o){const c=Date.now()+i,u=new R_(t,e,c,r,o);return u.start(i),u}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ut(et.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function I_(n,t){if(As("AsyncQueue",`${t}: ${n}`),al(n))return new ut(et.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{static emptySet(t){return new Fo(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||pt.comparator(e.key,i.key):(e,i)=>pt.comparator(e.key,i.key),this.keyedMap=Dc(),this.sortedSet=new ge(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Fo)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new Fo;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(){this.fa=new ge(pt.comparator)}track(t){const e=t.doc.key,i=this.fa.get(e);i?t.type!==0&&i.type===3?this.fa=this.fa.insert(e,t):t.type===3&&i.type!==1?this.fa=this.fa.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.fa=this.fa.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.fa=this.fa.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.fa=this.fa.remove(e):t.type===1&&i.type===2?this.fa=this.fa.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.fa=this.fa.insert(e,{type:2,doc:t.doc}):Tt(63341,{At:t,ga:i}):this.fa=this.fa.insert(e,t)}pa(){const t=[];return this.fa.inorderTraversal((e,i)=>{t.push(i)}),t}}class Zo{constructor(t,e,i,r,o,c,u,f,g){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=f,this.hasCachedResults=g}static fromInitialDocuments(t,e,i,r,o){const c=[];return e.forEach(u=>{c.push({type:0,doc:u})}),new Zo(t,e,Fo.emptySet(e),c,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&_d(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(t=>t.ba())}}class uk{constructor(){this.queries=tT(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(e,i){const r=It(e),o=r.queries;r.queries=tT(),o.forEach((c,u)=>{for(const f of u.wa)f.onError(i)})})(this,new ut(et.ABORTED,"Firestore shutting down"))}}function tT(){return new Va(n=>e1(n),_d)}async function C_(n,t){const e=It(n);let i=3;const r=t.query;let o=e.queries.get(r);o?!o.Sa()&&t.ba()&&(i=2):(o=new ck,i=t.ba()?0:1);try{switch(i){case 0:o.ya=await e.onListen(r,!0);break;case 1:o.ya=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(c){const u=I_(c,`Initialization of query '${Po(t.query)}' failed`);return void t.onError(u)}e.queries.set(r,o),o.wa.push(t),t.va(e.onlineState),o.ya&&t.Ca(o.ya)&&D_(e)}async function M_(n,t){const e=It(n),i=t.query;let r=3;const o=e.queries.get(i);if(o){const c=o.wa.indexOf(t);c>=0&&(o.wa.splice(c,1),o.wa.length===0?r=t.ba()?0:1:!o.Sa()&&t.ba()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function hk(n,t){const e=It(n);let i=!1;for(const r of t){const o=r.query,c=e.queries.get(o);if(c){for(const u of c.wa)u.Ca(r)&&(i=!0);c.ya=r}}i&&D_(e)}function fk(n,t,e){const i=It(n),r=i.queries.get(t);if(r)for(const o of r.wa)o.onError(e);i.queries.delete(t)}function D_(n){n.Da.forEach(t=>{t.next()})}var Pp,eT;(eT=Pp||(Pp={})).Fa="default",eT.Cache="cache";class O_{constructor(t,e,i){this.query=t,this.Ma=e,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new Zo(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.xa?this.Na(t)&&(this.Ma.next(t),e=!0):this.Ba(t,this.onlineState)&&(this.La(t),e=!0),this.Oa=t,e}onError(t){this.Ma.error(t)}va(t){this.onlineState=t;let e=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,t)&&(this.La(this.Oa),e=!0),e}Ba(t,e){if(!t.fromCache||!this.ba())return!0;const i=e!=="Offline";return(!this.options.ka||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Na(t){if(t.docChanges.length>0)return!0;const e=this.Oa&&this.Oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}La(t){t=Zo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.xa=!0,this.Ma.next(t)}ba(){return this.options.source!==Pp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(t){this.key=t}}class V1{constructor(t){this.key=t}}class dk{constructor(t,e){this.query=t,this.Ha=e,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Vt(),this.mutatedKeys=Vt(),this.Xa=n1(t),this.eu=new Fo(this.Xa)}get tu(){return this.Ha}nu(t,e){const i=e?e.ru:new JE,r=e?e.eu:this.eu;let o=e?e.mutatedKeys:this.mutatedKeys,c=r,u=!1;const f=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,g=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((_,y)=>{const b=r.get(_),S=yd(this.query,y)?y:null,R=!!b&&this.mutatedKeys.has(b.key),M=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let C=!1;b&&S?b.data.isEqual(S.data)?R!==M&&(i.track({type:3,doc:S}),C=!0):this.iu(b,S)||(i.track({type:2,doc:S}),C=!0,(f&&this.Xa(S,f)>0||g&&this.Xa(S,g)<0)&&(u=!0)):!b&&S?(i.track({type:0,doc:S}),C=!0):b&&!S&&(i.track({type:1,doc:b}),C=!0,(f||g)&&(u=!0)),C&&(S?(c=c.add(S),o=M?o.add(_):o.delete(_)):(c=c.delete(_),o=o.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),o=o.delete(_.key),i.track({type:1,doc:_})}return{eu:c,ru:i,Ds:u,mutatedKeys:o}}iu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){const o=this.eu;this.eu=t.eu,this.mutatedKeys=t.mutatedKeys;const c=t.ru.pa();c.sort((_,y)=>function(S,R){const M=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Tt(20277,{At:C})}};return M(S)-M(R)}(_.type,y.type)||this.Xa(_.doc,y.doc)),this.su(i),r=r!=null&&r;const u=e&&!r?this.ou():[],f=this.Za.size===0&&this.current&&!r?1:0,g=f!==this.Ya;return this.Ya=f,c.length!==0||g?{snapshot:new Zo(this.query,t.eu,o,c,t.mutatedKeys,f===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:u}:{_u:u}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new JE,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(t){return!this.Ha.has(t)&&!!this.eu.has(t)&&!this.eu.get(t).hasLocalMutations}su(t){t&&(t.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=t.current)}ou(){if(!this.current)return[];const t=this.Za;this.Za=Vt(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});const e=[];return t.forEach(i=>{this.Za.has(i)||e.push(new V1(i))}),this.Za.forEach(i=>{t.has(i)||e.push(new P1(i))}),e}uu(t){this.Ha=t.qs,this.Za=Vt();const e=this.nu(t.documents);return this.applyChanges(e,!0)}cu(){return Zo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const k_="SyncEngine";class gk{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class mk{constructor(t){this.key=t,this.lu=!1}}class pk{constructor(t,e,i,r,o,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new Va(u=>e1(u),_d),this.Tu=new Map,this.Iu=new Set,this.du=new ge(pt.comparator),this.Eu=new Map,this.Au=new v_,this.Ru={},this.Vu=new Map,this.mu=$o.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function _k(n,t,e=!0){const i=F1(n);let r;const o=i.Pu.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.cu()):r=await L1(i,t,e,!0),r}async function yk(n,t){const e=F1(n);await L1(e,t,!0,!1)}async function L1(n,t,e,i){const r=await UO(n.localStore,Vi(t)),o=r.targetId,c=n.sharedClientState.addLocalQueryTarget(o,e);let u;return i&&(u=await vk(n,t,o,c==="current",r.resumeToken)),n.isPrimaryClient&&e&&C1(n.remoteStore,r),u}async function vk(n,t,e,i,r){n.gu=(y,b,S)=>async function(M,C,z,F){let X=C.view.nu(z);X.Ds&&(X=await KE(M.localStore,C.query,!1).then(({documents:D})=>C.view.nu(D,X)));const $=F&&F.targetChanges.get(C.targetId),W=F&&F.targetMismatches.get(C.targetId)!=null,ot=C.view.applyChanges(X,M.isPrimaryClient,$,W);return iT(M,C.targetId,ot._u),ot.snapshot}(n,y,b,S);const o=await KE(n.localStore,t,!0),c=new dk(t,o.qs),u=c.nu(o.documents),f=mu.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),g=c.applyChanges(u,n.isPrimaryClient,f);iT(n,e,g._u);const _=new gk(t,e,c);return n.Pu.set(t,_),n.Tu.has(e)?n.Tu.get(e).push(t):n.Tu.set(e,[t]),g.snapshot}async function bk(n,t,e){const i=It(n),r=i.Pu.get(t),o=i.Tu.get(r.targetId);if(o.length>1)return i.Tu.set(r.targetId,o.filter(c=>!_d(c,t))),void i.Pu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await kp(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),e&&S_(i.remoteStore,r.targetId),Vp(i,r.targetId)}).catch(rl)):(Vp(i,r.targetId),await kp(i.localStore,r.targetId,!0))}async function Ek(n,t){const e=It(n),i=e.Pu.get(t),r=e.Tu.get(i.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),S_(e.remoteStore,i.targetId))}async function Tk(n,t,e){const i=Ck(n);try{const r=await function(c,u){const f=It(c),g=le.now(),_=u.reduce((S,R)=>S.add(R.key),Vt());let y,b;return f.persistence.runTransaction("Locally write mutations","readwrite",S=>{let R=xs(),M=Vt();return f.Os.getEntries(S,_).next(C=>{R=C,R.forEach((z,F)=>{F.isValidDocument()||(M=M.add(z))})}).next(()=>f.localDocuments.getOverlayedDocuments(S,R)).next(C=>{y=C;const z=[];for(const F of u){const X=UD(F,y.get(F.key).overlayedDocument);X!=null&&z.push(new Nr(F.key,X,Kw(X.value.mapValue),ci.exists(!0)))}return f.mutationQueue.addMutationBatch(S,g,z,u)}).next(C=>{b=C;const z=C.applyToLocalDocumentSet(y,M);return f.documentOverlayCache.saveOverlays(S,C.batchId,z)})}).then(()=>({batchId:b.batchId,changes:s1(y)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(c,u,f){let g=c.Ru[c.currentUser.toKey()];g||(g=new ge(Dt)),g=g.insert(u,f),c.Ru[c.currentUser.toKey()]=g}(i,r.batchId,e),await _u(i,r.changes),await wd(i.remoteStore)}catch(r){const o=I_(r,"Failed to persist write");e.reject(o)}}async function U1(n,t){const e=It(n);try{const i=await PO(e.localStore,t);t.targetChanges.forEach((r,o)=>{const c=e.Eu.get(o);c&&(Qt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?c.lu=!0:r.modifiedDocuments.size>0?Qt(c.lu,14607):r.removedDocuments.size>0&&(Qt(c.lu,42227),c.lu=!1))}),await _u(e,i,t)}catch(i){await rl(i)}}function nT(n,t,e){const i=It(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const r=[];i.Pu.forEach((o,c)=>{const u=c.view.va(t);u.snapshot&&r.push(u.snapshot)}),function(c,u){const f=It(c);f.onlineState=u;let g=!1;f.queries.forEach((_,y)=>{for(const b of y.wa)b.va(u)&&(g=!0)}),g&&D_(f)}(i.eventManager,t),r.length&&i.hu.J_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function Sk(n,t,e){const i=It(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.Eu.get(t),o=r&&r.key;if(o){let c=new ge(pt.comparator);c=c.insert(o,ln.newNoDocument(o,At.min()));const u=Vt().add(o),f=new Ed(At.min(),new Map,new ge(Dt),c,u);await U1(i,f),i.du=i.du.remove(o),i.Eu.delete(t),N_(i)}else await kp(i.localStore,t,!1).then(()=>Vp(i,t,e)).catch(rl)}async function wk(n,t){const e=It(n),i=t.batch.batchId;try{const r=await NO(e.localStore,t);B1(e,i,null),z1(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await _u(e,r)}catch(r){await rl(r)}}async function Ak(n,t,e){const i=It(n);try{const r=await function(c,u){const f=It(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let _;return f.mutationQueue.lookupMutationBatch(g,u).next(y=>(Qt(y!==null,37113),_=y.keys(),f.mutationQueue.removeMutationBatch(g,y))).next(()=>f.mutationQueue.performConsistencyCheck(g)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(g,_,u)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_)).next(()=>f.localDocuments.getDocuments(g,_))})}(i.localStore,t);B1(i,t,e),z1(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await _u(i,r)}catch(r){await rl(r)}}function z1(n,t){(n.Vu.get(t)||[]).forEach(e=>{e.resolve()}),n.Vu.delete(t)}function B1(n,t,e){const i=It(n);let r=i.Ru[i.currentUser.toKey()];if(r){const o=r.get(t);o&&(e?o.reject(e):o.resolve(),r=r.remove(t)),i.Ru[i.currentUser.toKey()]=r}}function Vp(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Tu.get(t))n.Pu.delete(i),e&&n.hu.pu(i,e);n.Tu.delete(t),n.isPrimaryClient&&n.Au.zr(t).forEach(i=>{n.Au.containsKey(i)||j1(n,i)})}function j1(n,t){n.Iu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(S_(n.remoteStore,e),n.du=n.du.remove(t),n.Eu.delete(e),N_(n))}function iT(n,t,e){for(const i of e)i instanceof P1?(n.Au.addReference(i.key,t),xk(n,i)):i instanceof V1?(ht(k_,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,t),n.Au.containsKey(i.key)||j1(n,i.key)):Tt(19791,{yu:i})}function xk(n,t){const e=t.key,i=e.path.canonicalString();n.du.get(e)||n.Iu.has(i)||(ht(k_,"New document in limbo: "+e),n.Iu.add(i),N_(n))}function N_(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Iu.values().next().value;n.Iu.delete(t);const e=new pt(oe.fromString(t)),i=n.mu.next();n.Eu.set(i,new mk(e)),n.du=n.du.insert(e,i),C1(n.remoteStore,new ur(Vi(pd(e.path)),i,"TargetPurposeLimboResolution",dd.ue))}}async function _u(n,t,e){const i=It(n),r=[],o=[],c=[];i.Pu.isEmpty()||(i.Pu.forEach((u,f)=>{c.push(i.gu(f,t,e).then(g=>{var _;if((g||e)&&i.isPrimaryClient){const y=g?!g.fromCache:(_=e?.targetChanges.get(f.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(f.targetId,y?"current":"not-current")}if(g){r.push(g);const y=E_.Es(f.targetId,g);o.push(y)}}))}),await Promise.all(c),i.hu.J_(r),await async function(f,g){const _=It(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>it.forEach(g,b=>it.forEach(b.Is,S=>_.persistence.referenceDelegate.addReference(y,b.targetId,S)).next(()=>it.forEach(b.ds,S=>_.persistence.referenceDelegate.removeReference(y,b.targetId,S)))))}catch(y){if(!al(y))throw y;ht(T_,"Failed to update sequence numbers: "+y)}for(const y of g){const b=y.targetId;if(!y.fromCache){const S=_.Fs.get(b),R=S.snapshotVersion,M=S.withLastLimboFreeSnapshotVersion(R);_.Fs=_.Fs.insert(b,M)}}}(i.localStore,o))}async function Rk(n,t){const e=It(n);if(!e.currentUser.isEqual(t)){ht(k_,"User change. New user:",t.toKey());const i=await A1(e.localStore,t);e.currentUser=t,function(o,c){o.Vu.forEach(u=>{u.forEach(f=>{f.reject(new ut(et.CANCELLED,c))})}),o.Vu.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await _u(e,i.Bs)}}function Ik(n,t){const e=It(n),i=e.Eu.get(t);if(i&&i.lu)return Vt().add(i.key);{let r=Vt();const o=e.Tu.get(t);if(!o)return r;for(const c of o){const u=e.Pu.get(c);r=r.unionWith(u.view.tu)}return r}}function F1(n){const t=It(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=U1.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ik.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Sk.bind(null,t),t.hu.J_=hk.bind(null,t.eventManager),t.hu.pu=fk.bind(null,t.eventManager),t}function Ck(n){const t=It(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=wk.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ak.bind(null,t),t}class qf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Td(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,e){return null}Fu(t,e){return null}vu(t){return kO(this.persistence,new MO,t.initialUser,this.serializer)}Du(t){return new w1(b_.Vi,this.serializer)}bu(t){return new BO}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qf.provider={build:()=>new qf};class Mk extends qf{constructor(t){super(),this.cacheSizeBytes=t}Cu(t,e){Qt(this.persistence.referenceDelegate instanceof Ff,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new mO(i,t.asyncQueue,e)}Du(t){const e=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new w1(i=>Ff.Vi(i,e),this.serializer)}}class Lp{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>nT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Rk.bind(null,this.syncEngine),await lk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new uk}()}createDatastore(t){const e=Td(t.databaseInfo.databaseId),i=function(o){return new GO(o)}(t.databaseInfo);return function(o,c,u,f){return new QO(o,c,u,f)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,r,o,c,u){return new $O(i,r,o,c,u)}(this.localStore,this.datastore,t.asyncQueue,e=>nT(this.syncEngine,e,0),function(){return XE.C()?new XE:new jO}())}createSyncEngine(t,e){return function(r,o,c,u,f,g,_){const y=new pk(r,o,c,u,f,g);return _&&(y.fu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(r){const o=It(r);ht(Oa,"RemoteStore shutting down."),o.Ia.add(5),await pu(o),o.Ea.shutdown(),o.Aa.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}Lp.provider={build:()=>new Lp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.xu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.xu(this.observer.error,t):As("Uncaught Error in snapshot listener:",t.toString()))}Ou(){this.muted=!0}xu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr="FirestoreClient";class Dk{constructor(t,e,i,r,o){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=on.UNAUTHENTICATED,this.clientId=l_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async c=>{ht(Cr,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(ht(Cr,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=I_(e,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function Xm(n,t){n.asyncQueue.verifyOperationInProgress(),ht(Cr,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(async r=>{i.isEqual(r)||(await A1(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>{Sr("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{ht("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(r=>{Sr("Terminating Firestore due to IndexedDb database deletion failed",r)})}),n._offlineComponents=t}async function sT(n,t){n.asyncQueue.verifyOperationInProgress();const e=await Ok(n);ht(Cr,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>ZE(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>ZE(t.remoteStore,r)),n._onlineComponents=t}async function Ok(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ht(Cr,"Using user provided OfflineComponentProvider");try{await Xm(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(r){return r.name==="FirebaseError"?r.code===et.FAILED_PRECONDITION||r.code===et.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(e))throw e;Sr("Error using user provided cache. Falling back to memory cache: "+e),await Xm(n,new qf)}}else ht(Cr,"Using default OfflineComponentProvider"),await Xm(n,new Mk(void 0));return n._offlineComponents}async function H1(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ht(Cr,"Using user provided OnlineComponentProvider"),await sT(n,n._uninitializedComponentsProvider._online)):(ht(Cr,"Using default OnlineComponentProvider"),await sT(n,new Lp))),n._onlineComponents}function kk(n){return H1(n).then(t=>t.syncEngine)}async function Gf(n){const t=await H1(n),e=t.eventManager;return e.onListen=_k.bind(null,t.syncEngine),e.onUnlisten=bk.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=yk.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=Ek.bind(null,t.syncEngine),e}function Nk(n,t,e={}){const i=new Ts;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,u,f,g){const _=new P_({next:b=>{_.Ou(),c.enqueueAndForget(()=>M_(o,y));const S=b.docs.has(u);!S&&b.fromCache?g.reject(new ut(et.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&b.fromCache&&f&&f.source==="server"?g.reject(new ut(et.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(b)},error:b=>g.reject(b)}),y=new O_(pd(u.path),_,{includeMetadataChanges:!0,ka:!0});return C_(o,y)}(await Gf(n),n.asyncQueue,t,e,i)),i.promise}function Pk(n,t,e={}){const i=new Ts;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,u,f,g){const _=new P_({next:b=>{_.Ou(),c.enqueueAndForget(()=>M_(o,y)),b.fromCache&&f.source==="server"?g.reject(new ut(et.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(b)},error:b=>g.reject(b)}),y=new O_(u,_,{includeMetadataChanges:!0,ka:!0});return C_(o,y)}(await Gf(n),n.asyncQueue,t,e,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="firestore.googleapis.com",aT=!0;class oT{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new ut(et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=G1,this.ssl=aT}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:aT;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=S1;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<dO)throw new ut(et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}ZM("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=q1((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ut(et.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ut(et.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ut(et.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Ad{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ut(et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ut(et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oT(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new HM;switch(i.type){case"firstParty":return new KM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ut(et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=rT.get(e);i&&(ht("ComponentProvider","Removing Datastore"),rT.delete(e),i.terminate())}(this),Promise.resolve()}}function Vk(n,t,e,i={}){var r;n=Zn(n,Ad);const o=tl(t),c=n._getSettings(),u=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),f=`${t}:${e}`;o&&(BS(`https://${f}`),jS("Firestore",!0)),c.host!==G1&&c.host!==f&&Sr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},c),{host:f,ssl:o,emulatorOptions:i});if(!Ia(g,u)&&(n._setSettings(g),i.mockUserToken)){let _,y;if(typeof i.mockUserToken=="string")_=i.mockUserToken,y=on.MOCK_USER;else{_=t2(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new ut(et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new on(b)}n._authCredentials=new qM(new Nw(_,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Is(this.firestore,t,this._query)}}class Se{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Se(this.firestore,t,this._key)}toJSON(){return{type:Se._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(du(e,Se._jsonSchema))return new Se(t,i||null,new pt(oe.fromString(e.referencePath)))}}Se._jsonSchemaVersion="firestore/documentReference/1.0",Se._jsonSchema={type:Me("string",Se._jsonSchemaVersion),referencePath:Me("string")};class vr extends Is{constructor(t,e,i){super(t,e,pd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Se(this.firestore,null,new pt(t))}withConverter(t){return new vr(this.firestore,t,this._path)}}function Ho(n,t,...e){if(n=Be(n),Vw("collection","path",t),n instanceof Ad){const i=oe.fromString(t,...e);return bE(i),new vr(n,null,i)}{if(!(n instanceof Se||n instanceof vr))throw new ut(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(oe.fromString(t,...e));return bE(i),new vr(n.firestore,null,i)}}function Yf(n,t,...e){if(n=Be(n),arguments.length===1&&(t=l_.newId()),Vw("doc","path",t),n instanceof Ad){const i=oe.fromString(t,...e);return vE(i),new Se(n,null,new pt(i))}{if(!(n instanceof Se||n instanceof vr))throw new ut(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(oe.fromString(t,...e));return vE(i),new Se(n.firestore,n instanceof vr?n.converter:null,new pt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="AsyncQueue";class cT{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new R1(this,"async_queue_retry"),this.oc=()=>{const i=Qm();i&&ht(lT,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=t;const e=Qm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const e=Qm();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise(()=>{});const e=new Ts;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Zu.push(t),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!al(t))throw t;ht(lT,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(t){const e=this._c.then(()=>(this.nc=!0,t().catch(i=>{throw this.tc=i,this.nc=!1,As("INTERNAL UNHANDLED ERROR: ",uT(i)),i}).then(i=>(this.nc=!1,i))));return this._c=e,e}enqueueAfterDelay(t,e,i){this.ac(),this.sc.indexOf(t)>-1&&(e=0);const r=R_.createAndSchedule(this,t,e,i,o=>this.lc(o));return this.ec.push(r),r}ac(){this.tc&&Tt(47125,{hc:uT(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const e of this.ec)if(e.timerId===t)return!0;return!1}Ic(t){return this.Pc().then(()=>{this.ec.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.ec)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Pc()})}dc(t){this.sc.push(t)}lc(t){const e=this.ec.indexOf(t);this.ec.splice(e,1)}}function uT(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(n){return function(e,i){if(typeof e!="object"||e===null)return!1;const r=e;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(n,["next","error","complete"])}class Mr extends Ad{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new cT,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new cT(t),this._firestoreClient=void 0,await t}}}function Y1(n,t){const e=typeof n=="object"?n:GS(),i=typeof n=="string"?n:Pf,r=$p(e,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=ZR("firestore");o&&Vk(r,...o)}return r}function xd(n){if(n._terminated)throw new ut(et.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Lk(n),n._firestoreClient}function Lk(n){var t,e,i;const r=n._freezeSettings(),o=function(u,f,g,_){return new cD(u,f,g,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,q1(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new Dk(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(u){const f=u?._online.build();return{_offline:u?._offline.build(f),_online:f}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(t){this._byteString=t}static fromBase64String(t){try{return new $n(en.fromBase64String(t))}catch(e){throw new ut(et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new $n(en.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:$n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(du(t,$n._jsonSchema))return $n.fromBase64String(t.bytes)}}$n._jsonSchemaVersion="firestore/bytes/1.0",$n._jsonSchema={type:Me("string",$n._jsonSchemaVersion),bytes:Me("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new ut(et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ut(et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ut(et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Dt(this._lat,t._lat)||Dt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ui._jsonSchemaVersion}}static fromJSON(t){if(du(t,Ui._jsonSchema))return new Ui(t.latitude,t.longitude)}}Ui._jsonSchemaVersion="firestore/geoPoint/1.0",Ui._jsonSchema={type:Me("string",Ui._jsonSchemaVersion),latitude:Me("number"),longitude:Me("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,t._values)}toJSON(){return{type:zi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(du(t,zi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(e=>typeof e=="number"))return new zi(t.vectorValues);throw new ut(et.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}zi._jsonSchemaVersion="firestore/vectorValue/1.0",zi._jsonSchema={type:Me("string",zi._jsonSchemaVersion),vectorValues:Me("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk=/^__.*__$/;class zk{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new Nr(t,this.data,this.fieldMask,e,this.fieldTransforms):new gu(t,this.data,e,this.fieldTransforms)}}class K1{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new Nr(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function W1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Tt(40011,{Ec:n})}}class L_{constructor(t,e,i,r,o,c){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new L_(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.Rc({path:i,mc:!1});return r.fc(t),r}gc(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.Rc({path:i,mc:!1});return r.Ac(),r}yc(t){return this.Rc({path:void 0,mc:!0})}wc(t){return Kf(t,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Ac(){if(this.path)for(let t=0;t<this.path.length;t++)this.fc(this.path.get(t))}fc(t){if(t.length===0)throw this.wc("Document fields must not be empty");if(W1(this.Ec)&&Uk.test(t))throw this.wc('Document fields cannot begin and end with "__"')}}class Bk{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||Td(t)}Dc(t,e,i,r=!1){return new L_({Ec:t,methodName:e,bc:i,path:tn.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function U_(n){const t=n._freezeSettings(),e=Td(n._databaseId);return new Bk(n._databaseId,!!t.ignoreUndefinedProperties,e)}function jk(n,t,e,i,r,o={}){const c=n.Dc(o.merge||o.mergeFields?2:0,t,e,r);z_("Data must be an object, but it was:",c,i);const u=Q1(i,c);let f,g;if(o.merge)f=new Pn(c.fieldMask),g=c.fieldTransforms;else if(o.mergeFields){const _=[];for(const y of o.mergeFields){const b=Up(t,y,e);if(!c.contains(b))throw new ut(et.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);$1(_,b)||_.push(b)}f=new Pn(_),g=c.fieldTransforms.filter(y=>f.covers(y.field))}else f=null,g=c.fieldTransforms;return new zk(new En(u),f,g)}class Id extends V_{_toFieldTransform(t){if(t.Ec!==2)throw t.Ec===1?t.wc(`${this._methodName}() can only appear at the top level of your update data`):t.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Id}}function Fk(n,t,e,i){const r=n.Dc(1,t,e);z_("Data must be an object, but it was:",r,i);const o=[],c=En.empty();kr(i,(f,g)=>{const _=B_(t,f,e);g=Be(g);const y=r.gc(_);if(g instanceof Id)o.push(_);else{const b=yu(g,y);b!=null&&(o.push(_),c.set(_,b))}});const u=new Pn(o);return new K1(c,u,r.fieldTransforms)}function Hk(n,t,e,i,r,o){const c=n.Dc(1,t,e),u=[Up(t,i,e)],f=[r];if(o.length%2!=0)throw new ut(et.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<o.length;b+=2)u.push(Up(t,o[b])),f.push(o[b+1]);const g=[],_=En.empty();for(let b=u.length-1;b>=0;--b)if(!$1(g,u[b])){const S=u[b];let R=f[b];R=Be(R);const M=c.gc(S);if(R instanceof Id)g.push(S);else{const C=yu(R,M);C!=null&&(g.push(S),_.set(S,C))}}const y=new Pn(g);return new K1(_,y,c.fieldTransforms)}function qk(n,t,e,i=!1){return yu(e,n.Dc(i?4:3,t))}function yu(n,t){if(X1(n=Be(n)))return z_("Unsupported field value:",t,n),Q1(n,t);if(n instanceof V_)return function(i,r){if(!W1(r.Ec))throw r.wc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.mc&&t.Ec!==4)throw t.wc("Nested arrays are not supported");return function(i,r){const o=[];let c=0;for(const u of i){let f=yu(u,r.yc(c));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),c++}return{arrayValue:{values:o}}}(n,t)}return function(i,r){if((i=Be(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return OD(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=le.fromDate(i);return{timestampValue:jf(r.serializer,o)}}if(i instanceof le){const o=new le(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:jf(r.serializer,o)}}if(i instanceof Ui)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof $n)return{bytesValue:p1(r.serializer,i._byteString)};if(i instanceof Se){const o=r.databaseId,c=i.firestore._databaseId;if(!c.isEqual(o))throw r.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:y_(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof zi)return function(c,u){return{mapValue:{fields:{[Gw]:{stringValue:Yw},[Vf]:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw u.wc("VectorValues must only contain numeric values.");return g_(u.serializer,g)})}}}}}}(i,r);throw r.wc(`Unsupported field value: ${fd(i)}`)}(n,t)}function Q1(n,t){const e={};return zw(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):kr(n,(i,r)=>{const o=yu(r,t.Vc(i));o!=null&&(e[i]=o)}),{mapValue:{fields:e}}}function X1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof le||n instanceof Ui||n instanceof $n||n instanceof Se||n instanceof V_||n instanceof zi)}function z_(n,t,e){if(!X1(e)||!Lw(e)){const i=fd(e);throw i==="an object"?t.wc(n+" a custom object"):t.wc(n+" "+i)}}function Up(n,t,e){if((t=Be(t))instanceof Rd)return t._internalPath;if(typeof t=="string")return B_(n,t);throw Kf("Field path arguments must be of type string or ",n,!1,void 0,e)}const Gk=new RegExp("[~\\*/\\[\\]]");function B_(n,t,e){if(t.search(Gk)>=0)throw Kf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Rd(...t.split("."))._internalPath}catch{throw Kf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function Kf(n,t,e,i,r){const o=i&&!i.isEmpty(),c=r!==void 0;let u=`Function ${t}() called with invalid data`;e&&(u+=" (via `toFirestore()`)"),u+=". ";let f="";return(o||c)&&(f+=" (found",o&&(f+=` in field ${i}`),c&&(f+=` in document ${r}`),f+=")"),new ut(et.INVALID_ARGUMENT,u+n+f)}function $1(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(t,e,i,r,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Se(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Yk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Cd("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class Yk extends Z1{data(){return super.data()}}function Cd(n,t){return typeof t=="string"?B_(n,t):t instanceof Rd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ut(et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class j_{}class F_ extends j_{}function zp(n,t,...e){let i=[];t instanceof j_&&i.push(t),i=i.concat(e),function(o){const c=o.filter(f=>f instanceof H_).length,u=o.filter(f=>f instanceof Md).length;if(c>1||c>0&&u>0)throw new ut(et.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class Md extends F_{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new Md(t,e,i)}_apply(t){const e=this._parse(t);return eA(t._query,e),new Is(t.firestore,t.converter,Ip(t._query,e))}_parse(t){const e=U_(t.firestore);return function(o,c,u,f,g,_,y){let b;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ut(et.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){gT(y,_);const R=[];for(const M of y)R.push(dT(f,o,M));b={arrayValue:{values:R}}}else b=dT(f,o,y)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||gT(y,_),b=qk(u,c,y,_==="in"||_==="not-in");return Ce.create(g,_,b)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function fT(n,t,e){const i=t,r=Cd("where",n);return Md._create(r,i,e)}class H_ extends j_{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new H_(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:hi.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(r,o){let c=r;const u=o.getFlattenedFilters();for(const f of u)eA(c,f),c=Ip(c,f)}(t._query,e),new Is(t.firestore,t.converter,Ip(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class q_ extends F_{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new q_(t,e)}_apply(t){const e=function(r,o,c){if(r.startAt!==null)throw new ut(et.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ut(et.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new nu(o,c)}(t._query,this._field,this._direction);return new Is(t.firestore,t.converter,function(r,o){const c=r.explicitOrderBy.concat([o]);return new ol(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}}function tA(n,t="asc"){const e=t,i=Cd("orderBy",n);return q_._create(i,e)}class G_ extends F_{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new G_(t,e,i)}_apply(t){return new Is(t.firestore,t.converter,Uf(t._query,this._limit,this._limitType))}}function Kk(n){return G_._create("limit",n,"F")}function dT(n,t,e){if(typeof(e=Be(e))=="string"){if(e==="")throw new ut(et.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!t1(t)&&e.indexOf("/")!==-1)throw new ut(et.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(oe.fromString(e));if(!pt.isDocumentKey(i))throw new ut(et.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return IE(n,new pt(i))}if(e instanceof Se)return IE(n,e._key);throw new ut(et.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fd(e)}.`)}function gT(n,t){if(!Array.isArray(n)||n.length===0)throw new ut(et.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function eA(n,t){const e=function(r,o){for(const c of r)for(const u of c.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new ut(et.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ut(et.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class Wk{convertValue(t,e="none"){switch(Rr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Te(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(xr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Tt(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return kr(t,(r,o)=>{i[r]=this.convertValue(o,e)}),i}convertVectorValue(t){var e,i,r;const o=(r=(i=(e=t.fields)===null||e===void 0?void 0:e[Vf].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(c=>Te(c.doubleValue));return new zi(o)}convertGeoPoint(t){return new Ui(Te(t.latitude),Te(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=md(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Jc(t));default:return null}}convertTimestamp(t){const e=Ar(t);return new le(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=oe.fromString(t);Qt(T1(i),9688,{name:t});const r=new tu(i.get(1),i.get(3)),o=new pt(i.popFirst(5));return r.isEqual(e)||As(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(n,t,e){let i;return i=n?n.toFirestore(t):t,i}class kc{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Aa extends Z1{constructor(t,e,i,r,o,c){super(t,e,i,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Tf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(Cd("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ut(et.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=Aa._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}Aa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Aa._jsonSchema={type:Me("string",Aa._jsonSchemaVersion),bundleSource:Me("string","DocumentSnapshot"),bundleName:Me("string"),bundle:Me("string")};class Tf extends Aa{data(t={}){return super.data(t)}}class xa{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new kc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new Tf(this._firestore,this._userDataWriter,i.key,i,new kc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ut(et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(u=>{const f=new Tf(r._firestore,r._userDataWriter,u.doc.key,u.doc,new kc(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}})}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const f=new Tf(r._firestore,r._userDataWriter,u.doc.key,u.doc,new kc(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,_=-1;return u.type!==0&&(g=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),_=c.indexOf(u.doc.key)),{type:Xk(u.type),doc:f,oldIndex:g,newIndex:_}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ut(et.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=xa._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=l_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(e.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Xk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Tt(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(n){n=Zn(n,Se);const t=Zn(n.firestore,Mr);return Nk(xd(t),n._key).then(e=>sA(t,n,e))}xa._jsonSchemaVersion="firestore/querySnapshot/1.0",xa._jsonSchema={type:Me("string",xa._jsonSchemaVersion),bundleSource:Me("string","QuerySnapshot"),bundleName:Me("string"),bundle:Me("string")};class Y_ extends Wk{constructor(t){super(),this.firestore=t}convertBytes(t){return new $n(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Se(this.firestore,null,e)}}function nA(n){n=Zn(n,Is);const t=Zn(n.firestore,Mr),e=xd(t),i=new Y_(t);return J1(n._query),Pk(e,n._query).then(r=>new xa(t,i,n,r))}function mT(n,t,e,...i){n=Zn(n,Se);const r=Zn(n.firestore,Mr),o=U_(r);let c;return c=typeof(t=Be(t))=="string"||t instanceof Rd?Hk(o,"updateDoc",n._key,t,e,i):Fk(o,"updateDoc",n._key,t),K_(r,[c.toMutation(n._key,ci.exists(!0))])}function Zk(n){return K_(Zn(n.firestore,Mr),[new m_(n._key,ci.none())])}function iA(n,t){const e=Zn(n.firestore,Mr),i=Yf(n),r=Qk(n.converter,t);return K_(e,[jk(U_(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,ci.exists(!1))]).then(()=>i)}function pT(n,...t){var e,i,r;n=Be(n);let o={includeMetadataChanges:!1,source:"default"},c=0;typeof t[c]!="object"||hT(t[c])||(o=t[c++]);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(hT(t[c])){const y=t[c];t[c]=(e=y.next)===null||e===void 0?void 0:e.bind(y),t[c+1]=(i=y.error)===null||i===void 0?void 0:i.bind(y),t[c+2]=(r=y.complete)===null||r===void 0?void 0:r.bind(y)}let f,g,_;if(n instanceof Se)g=Zn(n.firestore,Mr),_=pd(n._key.path),f={next:y=>{t[c]&&t[c](sA(g,n,y))},error:t[c+1],complete:t[c+2]};else{const y=Zn(n,Is);g=Zn(y.firestore,Mr),_=y._query;const b=new Y_(g);f={next:S=>{t[c]&&t[c](new xa(g,b,y,S))},error:t[c+1],complete:t[c+2]},J1(n._query)}return function(b,S,R,M){const C=new P_(M),z=new O_(S,C,R);return b.asyncQueue.enqueueAndForget(async()=>C_(await Gf(b),z)),()=>{C.Ou(),b.asyncQueue.enqueueAndForget(async()=>M_(await Gf(b),z))}}(xd(g),_,u,f)}function K_(n,t){return function(i,r){const o=new Ts;return i.asyncQueue.enqueueAndForget(async()=>Tk(await kk(i),r,o)),o.promise}(xd(n),t)}function sA(n,t,e){const i=e.docs.get(t._key),r=new Y_(n);return new Aa(n,r,t._key,i,new kc(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(r){sl=r})(el),Yo(new Ca("firestore",(i,{instanceIdentifier:r,options:o})=>{const c=i.getProvider("app").getImmediate(),u=new Mr(new GM(i.getProvider("auth-internal")),new WM(c,i.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ut(et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tu(g.options.projectId,_)}(c,r),c);return o=Object.assign({useFetchStreams:e},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),pr(gE,mE,t),pr(gE,mE,"esm2017")})();const Jk={apiKey:"AIzaSyBCquZbrEGg9CHUhbzrFhFwDejhc0Mw-aQ",authDomain:"pruebas-c80da.firebaseapp.com",projectId:"pruebas-c80da",storageBucket:"pruebas-c80da.firebasestorage.app",messagingSenderId:"168916926366",appId:"1:168916926366:web:a3b7e882356f6d0cb8a08f",measurementId:"G-XMVGNQ24XY"},rA=qS(Jk),Bp=zM(rA),br=Y1(rA);function tN({onLogin:n}){const[t,e]=xt.useState(""),[i,r]=xt.useState(""),[o,c]=xt.useState(""),u=async f=>{f.preventDefault();try{await wC(Bp,t,i),n()}catch{c("Credenciales incorrectas o usuario no autorizado")}};return J.jsxs("div",{className:"max-w-sm mx-auto mt-10 p-4 border rounded shadow",children:[J.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Inicia sesin"}),J.jsxs("form",{onSubmit:u,className:"flex flex-col gap-4",children:[J.jsx("input",{type:"email",placeholder:"Correo",value:t,onChange:f=>e(f.target.value),className:"p-2 border rounded",required:!0}),J.jsx("input",{type:"password",placeholder:"Contrasea",value:i,onChange:f=>r(f.target.value),className:"p-2 border rounded",required:!0}),o&&J.jsx("p",{className:"text-red-500 text-sm",children:o}),J.jsx("button",{type:"submit",className:"bg-blue-500 text-white py-2 rounded hover:bg-blue-600",children:"Entrar"})]})]})}var aA={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},_T=Vn.createContext&&Vn.createContext(aA),eN=["attr","size","title"];function nN(n,t){if(n==null)return{};var e=iN(n,t),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)i=o[r],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(e[i]=n[i])}return e}function iN(n,t){if(n==null)return{};var e={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(t.indexOf(i)>=0)continue;e[i]=n[i]}return e}function Wf(){return Wf=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Wf.apply(this,arguments)}function yT(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function Qf(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?yT(Object(e),!0).forEach(function(i){sN(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):yT(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function sN(n,t,e){return t=rN(t),t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function rN(n){var t=aN(n,"string");return typeof t=="symbol"?t:t+""}function aN(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function oA(n){return n&&n.map((t,e)=>Vn.createElement(t.tag,Qf({key:e},t.attr),oA(t.child)))}function lA(n){return t=>Vn.createElement(oN,Wf({attr:Qf({},n.attr)},t),oA(n.child))}function oN(n){var t=e=>{var{attr:i,size:r,title:o}=n,c=nN(n,eN),u=r||e.size||"1em",f;return e.className&&(f=e.className),n.className&&(f=(f?f+" ":"")+n.className),Vn.createElement("svg",Wf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,i,c,{className:f,style:Qf(Qf({color:n.color||e.color},e.style),n.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&Vn.createElement("title",null,o),n.children)};return _T!==void 0?Vn.createElement(_T.Consumer,null,e=>t(e)):t(aA)}function lN(n){return lA({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(n)}function cN(n){return lA({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"},child:[]}]})(n)}const $m=[{id:"chupito",nombre:"Chupito"},{id:"cerveza",nombre:"Cerveza"},{id:"ron-cola",nombre:"Ron - Cola"},{id:"ron-naranja",nombre:"Ron - Naranja"},{id:"kalimotxo",nombre:"kalimotxo"},{id:"ron-blanco-limon",nombre:"Ron Blanco - Limn"},{id:"ron-energetica",nombre:"Ron - Energtica"},{id:"litrona",nombre:"Litrona"}];function uN({onAdd:n,uid:t}){const[e,i]=xt.useState(null),[r,o]=xt.useState(!1),[c,u]=xt.useState(null),f=xt.useRef(null);xt.useEffect(()=>{function b(S){f.current&&!f.current.contains(S.target)&&o(!1)}return r?document.addEventListener("mousedown",b):document.removeEventListener("mousedown",b),()=>{document.removeEventListener("mousedown",b)}},[r]);const g=async b=>{if(!t)return;const S=Yf(br,"usuarios",t);c===b?(await mT(S,{bebidaFav:null}),u(null)):(await mT(S,{bebidaFav:b}),u(b))},_=async()=>{if(!t)return;const b=Yf(br,"usuarios",t),S=await $k(b);S.exists()&&u(S.data().bebidaFav||null)};xt.useEffect(()=>{_()},[t]);const y=()=>{e&&(n(e),i(null))};return J.jsxs("div",{className:"flex flex-col items-center gap-4 relative",ref:f,children:[J.jsx("button",{onClick:()=>o(!r),className:"border border-gray-300 rounded px-4 py-2 w-64 bg-white text-left",children:e?$m.find(b=>b.id===e)?.nombre:"Selecciona una bebida"}),r&&J.jsx("div",{className:"absolute top-12 w-64 border border-gray-300 rounded bg-white z-10 shadow",children:$m.map(b=>J.jsxs("div",{className:"flex justify-between items-center px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>{i(b.id),o(!1)},children:[J.jsx("span",{children:b.nombre}),J.jsx("button",{onClick:S=>{S.stopPropagation(),g(b.id)},className:"text-yellow-500",children:c===b.id?J.jsx(lN,{}):J.jsx(cN,{})})]},b.id))}),J.jsx("button",{onClick:y,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-50",disabled:!e,children:"Aadir bebida"}),c&&J.jsxs("button",{onClick:()=>n(c),className:"bg-yellow-400 hover:bg-yellow-500 text-yellow-900 font-semibold px-4 py-2 rounded disabled:opacity-50 transition-colors duration-200",disabled:!c,children:["Aadir favorita (",$m.find(b=>b.id===c)?.nombre,")"]})]})}const hN={"vilari.ser@gmail.com":"Sergio","iriasanchezgarcia@gmail.com":"Iria","antonlopezleal2@gmail.com":"Toni","pablorodriguezlopez190@gmail.com":"Pablo","markusweber192@gmail.com":"Marco","rubensanchezgarcia10@gmail.com":"Rubn","hugoby888@gmail.com":"Hugo"};function cA({email:n}){const t=hN[n]||"Usuario Desconocido";return J.jsx("span",{className:"text-gray-700 font-semibold",children:t})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function vu(n){return n+.5|0}const hr=(n,t,e)=>Math.max(Math.min(n,e),t);function Nc(n){return hr(vu(n*2.55),0,255)}function Er(n){return hr(vu(n*255),0,255)}function _s(n){return hr(vu(n/2.55)/100,0,1)}function vT(n){return hr(vu(n*100),0,100)}const Xn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},jp=[..."0123456789ABCDEF"],fN=n=>jp[n&15],dN=n=>jp[(n&240)>>4]+jp[n&15],Xh=n=>(n&240)>>4===(n&15),gN=n=>Xh(n.r)&&Xh(n.g)&&Xh(n.b)&&Xh(n.a);function mN(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&Xn[n[1]]*17,g:255&Xn[n[2]]*17,b:255&Xn[n[3]]*17,a:t===5?Xn[n[4]]*17:255}:(t===7||t===9)&&(e={r:Xn[n[1]]<<4|Xn[n[2]],g:Xn[n[3]]<<4|Xn[n[4]],b:Xn[n[5]]<<4|Xn[n[6]],a:t===9?Xn[n[7]]<<4|Xn[n[8]]:255})),e}const pN=(n,t)=>n<255?t(n):"";function _N(n){var t=gN(n)?fN:dN;return n?"#"+t(n.r)+t(n.g)+t(n.b)+pN(n.a,t):void 0}const yN=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function uA(n,t,e){const i=t*Math.min(e,1-e),r=(o,c=(o+n/30)%12)=>e-i*Math.max(Math.min(c-3,9-c,1),-1);return[r(0),r(8),r(4)]}function vN(n,t,e){const i=(r,o=(r+n/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function bN(n,t,e){const i=uA(n,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)i[r]*=1-t-e,i[r]+=t;return i}function EN(n,t,e,i,r){return n===r?(t-e)/i+(t<e?6:0):t===r?(e-n)/i+2:(n-t)/i+4}function W_(n){const e=n.r/255,i=n.g/255,r=n.b/255,o=Math.max(e,i,r),c=Math.min(e,i,r),u=(o+c)/2;let f,g,_;return o!==c&&(_=o-c,g=u>.5?_/(2-o-c):_/(o+c),f=EN(e,i,r,_,o),f=f*60+.5),[f|0,g||0,u]}function Q_(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(Er)}function X_(n,t,e){return Q_(uA,n,t,e)}function TN(n,t,e){return Q_(bN,n,t,e)}function SN(n,t,e){return Q_(vN,n,t,e)}function hA(n){return(n%360+360)%360}function wN(n){const t=yN.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?Nc(+t[5]):Er(+t[5]));const r=hA(+t[2]),o=+t[3]/100,c=+t[4]/100;return t[1]==="hwb"?i=TN(r,o,c):t[1]==="hsv"?i=SN(r,o,c):i=X_(r,o,c),{r:i[0],g:i[1],b:i[2],a:e}}function AN(n,t){var e=W_(n);e[0]=hA(e[0]+t),e=X_(e),n.r=e[0],n.g=e[1],n.b=e[2]}function xN(n){if(!n)return;const t=W_(n),e=t[0],i=vT(t[1]),r=vT(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${r}%, ${_s(n.a)})`:`hsl(${e}, ${i}%, ${r}%)`}const bT={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ET={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function RN(){const n={},t=Object.keys(ET),e=Object.keys(bT);let i,r,o,c,u;for(i=0;i<t.length;i++){for(c=u=t[i],r=0;r<e.length;r++)o=e[r],u=u.replace(o,bT[o]);o=parseInt(ET[c],16),n[u]=[o>>16&255,o>>8&255,o&255]}return n}let $h;function IN(n){$h||($h=RN(),$h.transparent=[0,0,0,0]);const t=$h[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const CN=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function MN(n){const t=CN.exec(n);let e=255,i,r,o;if(t){if(t[7]!==i){const c=+t[7];e=t[8]?Nc(c):hr(c*255,0,255)}return i=+t[1],r=+t[3],o=+t[5],i=255&(t[2]?Nc(i):hr(i,0,255)),r=255&(t[4]?Nc(r):hr(r,0,255)),o=255&(t[6]?Nc(o):hr(o,0,255)),{r:i,g:r,b:o,a:e}}}function DN(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${_s(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Zm=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Oo=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function ON(n,t,e){const i=Oo(_s(n.r)),r=Oo(_s(n.g)),o=Oo(_s(n.b));return{r:Er(Zm(i+e*(Oo(_s(t.r))-i))),g:Er(Zm(r+e*(Oo(_s(t.g))-r))),b:Er(Zm(o+e*(Oo(_s(t.b))-o))),a:n.a+e*(t.a-n.a)}}function Zh(n,t,e){if(n){let i=W_(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=X_(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function fA(n,t){return n&&Object.assign(t||{},n)}function TT(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=Er(n[3]))):(t=fA(n,{r:0,g:0,b:0,a:1}),t.a=Er(t.a)),t}function kN(n){return n.charAt(0)==="r"?MN(n):wN(n)}class ru{constructor(t){if(t instanceof ru)return t;const e=typeof t;let i;e==="object"?i=TT(t):e==="string"&&(i=mN(t)||IN(t)||kN(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=fA(this._rgb);return t&&(t.a=_s(t.a)),t}set rgb(t){this._rgb=TT(t)}rgbString(){return this._valid?DN(this._rgb):void 0}hexString(){return this._valid?_N(this._rgb):void 0}hslString(){return this._valid?xN(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,r=t.rgb;let o;const c=e===o?.5:e,u=2*c-1,f=i.a-r.a,g=((u*f===-1?u:(u+f)/(1+u*f))+1)/2;o=1-g,i.r=255&g*i.r+o*r.r+.5,i.g=255&g*i.g+o*r.g+.5,i.b=255&g*i.b+o*r.b+.5,i.a=c*i.a+(1-c)*r.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=ON(this._rgb,t._rgb,e)),this}clone(){return new ru(this.rgb)}alpha(t){return this._rgb.a=Er(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=vu(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Zh(this._rgb,2,t),this}darken(t){return Zh(this._rgb,2,-t),this}saturate(t){return Zh(this._rgb,1,t),this}desaturate(t){return Zh(this._rgb,1,-t),this}rotate(t){return AN(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function gs(){}const NN=(()=>{let n=0;return()=>n++})();function qt(n){return n==null}function Le(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ft(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Jn(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Ci(n,t){return Jn(n)?n:t}function jt(n,t){return typeof n>"u"?t:n}const PN=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,dA=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function se(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function Wt(n,t,e,i){let r,o,c;if(Le(n))for(o=n.length,r=0;r<o;r++)t.call(e,n[r],r);else if(Ft(n))for(c=Object.keys(n),o=c.length,r=0;r<o;r++)t.call(e,n[c[r]],c[r])}function Xf(n,t){let e,i,r,o;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(r=n[e],o=t[e],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function $f(n){if(Le(n))return n.map($f);if(Ft(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let r=0;for(;r<i;++r)t[e[r]]=$f(n[e[r]]);return t}return n}function gA(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function VN(n,t,e,i){if(!gA(n))return;const r=t[n],o=e[n];Ft(r)&&Ft(o)?ji(r,o,i):t[n]=$f(o)}function ji(n,t,e){const i=Le(t)?t:[t],r=i.length;if(!Ft(n))return n;e=e||{};const o=e.merger||VN;let c;for(let u=0;u<r;++u){if(c=i[u],!Ft(c))continue;const f=Object.keys(c);for(let g=0,_=f.length;g<_;++g)o(f[g],n,c,e)}return n}function Hc(n,t){return ji(n,t,{merger:LN})}function LN(n,t,e){if(!gA(n))return;const i=t[n],r=e[n];Ft(i)&&Ft(r)?Hc(i,r):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=$f(r))}const ST={"":n=>n,x:n=>n.x,y:n=>n.y};function UN(n){const t=n.split("."),e=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function zN(n){const t=UN(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function ka(n,t){return(ST[t]||(ST[t]=zN(t)))(n)}function $_(n){return n.charAt(0).toUpperCase()+n.slice(1)}const au=n=>typeof n<"u",Dr=n=>typeof n=="function",wT=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function BN(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const ce=Math.PI,De=2*ce,Zf=Number.POSITIVE_INFINITY,jN=ce/180,Ue=ce/2,ya=ce/4,AT=ce*2/3,mA=Math.log10,Tr=Math.sign;function Sf(n,t,e){return Math.abs(n-t)<e}function xT(n){const t=Math.round(n);n=Sf(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(mA(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function FN(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((r,o)=>r-o).pop(),t}function HN(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Jf(n){return!HN(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function qN(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function GN(n,t,e){let i,r,o;for(i=0,r=n.length;i<r;i++)o=n[i][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function bs(n){return n*(ce/180)}function YN(n){return n*(180/ce)}function RT(n){if(!Jn(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function pA(n,t){const e=t.x-n.x,i=t.y-n.y,r=Math.sqrt(e*e+i*i);let o=Math.atan2(i,e);return o<-.5*ce&&(o+=De),{angle:o,distance:r}}function KN(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function ki(n){return(n%De+De)%De}function td(n,t,e,i){const r=ki(n),o=ki(t),c=ki(e),u=ki(o-r),f=ki(c-r),g=ki(r-o),_=ki(r-c);return r===o||r===c||i&&o===c||u>f&&g<_}function Sn(n,t,e){return Math.max(t,Math.min(e,n))}function WN(n){return Sn(n,-32768,32767)}function wa(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function Z_(n,t,e){e=e||(c=>n[c]<t);let i=n.length-1,r=0,o;for(;i-r>1;)o=r+i>>1,e(o)?r=o:i=o;return{lo:r,hi:i}}const Fp=(n,t,e,i)=>Z_(n,e,i?r=>{const o=n[r][t];return o<e||o===e&&n[r+1][t]===e}:r=>n[r][t]<e),QN=(n,t,e)=>Z_(n,e,i=>n[i][t]>=e);function XN(n,t,e){let i=0,r=n.length;for(;i<r&&n[i]<t;)i++;for(;r>i&&n[r-1]>e;)r--;return i>0||r<n.length?n.slice(i,r):n}const _A=["push","pop","shift","splice","unshift"];function $N(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),_A.forEach(e=>{const i="_onData"+$_(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...o){const c=r.apply(this,o);return n._chartjs.listeners.forEach(u=>{typeof u[i]=="function"&&u[i](...o)}),c}})})}function IT(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(_A.forEach(o=>{delete n[o]}),delete n._chartjs)}function yA(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const vA=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function bA(n,t){let e=[],i=!1;return function(...r){e=r,i||(i=!0,vA.call(window,()=>{i=!1,n.apply(t,e)}))}}function ZN(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const EA=n=>n==="start"?"left":n==="end"?"right":"center",kn=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,JN=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t,Jh=n=>n===0||n===1,CT=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*De/e)),MT=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*De/e)+1,qc={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Ue)+1,easeOutSine:n=>Math.sin(n*Ue),easeInOutSine:n=>-.5*(Math.cos(ce*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Jh(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Jh(n)?n:CT(n,.075,.3),easeOutElastic:n=>Jh(n)?n:MT(n,.075,.3),easeInOutElastic(n){return Jh(n)?n:n<.5?.5*CT(n*2,.1125,.45):.5+.5*MT(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-qc.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?qc.easeInBounce(n*2)*.5:qc.easeOutBounce(n*2-1)*.5+.5};function TA(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function DT(n){return TA(n)?n:new ru(n)}function Jm(n){return TA(n)?n:new ru(n).saturate(.5).darken(.1).hexString()}const tP=["x","y","borderWidth","radius","tension"],eP=["color","borderColor","backgroundColor"];function nP(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:eP},numbers:{type:"number",properties:tP}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function iP(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const OT=new Map;function sP(n,t){t=t||{};const e=n+JSON.stringify(t);let i=OT.get(e);return i||(i=new Intl.NumberFormat(n,t),OT.set(e,i)),i}function J_(n,t,e){return sP(t,e).format(n)}const rP={values(n){return Le(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let r,o=n;if(e.length>1){const g=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(g<1e-4||g>1e15)&&(r="scientific"),o=aP(n,e)}const c=mA(Math.abs(o)),u=isNaN(c)?1:Math.max(Math.min(-1*Math.floor(c),20),0),f={notation:r,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(f,this.options.ticks.format),J_(n,i,f)}};function aP(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var SA={formatters:rP};function oP(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:SA.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Na=Object.create(null),Hp=Object.create(null);function Gc(n,t){if(!t)return n;const e=t.split(".");for(let i=0,r=e.length;i<r;++i){const o=e[i];n=n[o]||(n[o]=Object.create(null))}return n}function tp(n,t,e){return typeof t=="string"?ji(Gc(n,t),e):ji(Gc(n,""),t)}class lP{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>Jm(r.backgroundColor),this.hoverBorderColor=(i,r)=>Jm(r.borderColor),this.hoverColor=(i,r)=>Jm(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return tp(this,t,e)}get(t){return Gc(this,t)}describe(t,e){return tp(Hp,t,e)}override(t,e){return tp(Na,t,e)}route(t,e,i,r){const o=Gc(this,t),c=Gc(this,i),u="_"+e;Object.defineProperties(o,{[u]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const f=this[u],g=c[r];return Ft(f)?Object.assign({},g,f):jt(f,g)},set(f){this[u]=f}}})}apply(t){t.forEach(e=>e(this))}}var ye=new lP({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[nP,iP,oP]);function cP(n){return!n||qt(n.size)||qt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function kT(n,t,e,i,r){let o=t[r];return o||(o=t[r]=n.measureText(r).width,e.push(r)),o>i&&(i=o),i}function va(n,t,e){const i=n.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((t-r)*i)/i+r}function NT(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function qp(n,t,e,i){wA(n,t,e,i,null)}function wA(n,t,e,i,r){let o,c,u,f,g,_,y,b;const S=t.pointStyle,R=t.rotation,M=t.radius;let C=(R||0)*jN;if(S&&typeof S=="object"&&(o=S.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(C),n.drawImage(S,-S.width/2,-S.height/2,S.width,S.height),n.restore();return}if(!(isNaN(M)||M<=0)){switch(n.beginPath(),S){default:r?n.ellipse(e,i,r/2,M,0,0,De):n.arc(e,i,M,0,De),n.closePath();break;case"triangle":_=r?r/2:M,n.moveTo(e+Math.sin(C)*_,i-Math.cos(C)*M),C+=AT,n.lineTo(e+Math.sin(C)*_,i-Math.cos(C)*M),C+=AT,n.lineTo(e+Math.sin(C)*_,i-Math.cos(C)*M),n.closePath();break;case"rectRounded":g=M*.516,f=M-g,c=Math.cos(C+ya)*f,y=Math.cos(C+ya)*(r?r/2-g:f),u=Math.sin(C+ya)*f,b=Math.sin(C+ya)*(r?r/2-g:f),n.arc(e-y,i-u,g,C-ce,C-Ue),n.arc(e+b,i-c,g,C-Ue,C),n.arc(e+y,i+u,g,C,C+Ue),n.arc(e-b,i+c,g,C+Ue,C+ce),n.closePath();break;case"rect":if(!R){f=Math.SQRT1_2*M,_=r?r/2:f,n.rect(e-_,i-f,2*_,2*f);break}C+=ya;case"rectRot":y=Math.cos(C)*(r?r/2:M),c=Math.cos(C)*M,u=Math.sin(C)*M,b=Math.sin(C)*(r?r/2:M),n.moveTo(e-y,i-u),n.lineTo(e+b,i-c),n.lineTo(e+y,i+u),n.lineTo(e-b,i+c),n.closePath();break;case"crossRot":C+=ya;case"cross":y=Math.cos(C)*(r?r/2:M),c=Math.cos(C)*M,u=Math.sin(C)*M,b=Math.sin(C)*(r?r/2:M),n.moveTo(e-y,i-u),n.lineTo(e+y,i+u),n.moveTo(e+b,i-c),n.lineTo(e-b,i+c);break;case"star":y=Math.cos(C)*(r?r/2:M),c=Math.cos(C)*M,u=Math.sin(C)*M,b=Math.sin(C)*(r?r/2:M),n.moveTo(e-y,i-u),n.lineTo(e+y,i+u),n.moveTo(e+b,i-c),n.lineTo(e-b,i+c),C+=ya,y=Math.cos(C)*(r?r/2:M),c=Math.cos(C)*M,u=Math.sin(C)*M,b=Math.sin(C)*(r?r/2:M),n.moveTo(e-y,i-u),n.lineTo(e+y,i+u),n.moveTo(e+b,i-c),n.lineTo(e-b,i+c);break;case"line":c=r?r/2:Math.cos(C)*M,u=Math.sin(C)*M,n.moveTo(e-c,i-u),n.lineTo(e+c,i+u);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(C)*(r?r/2:M),i+Math.sin(C)*M);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function ty(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function ey(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function ny(n){n.restore()}function uP(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),qt(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function hP(n,t,e,i,r){if(r.strikethrough||r.underline){const o=n.measureText(i),c=t-o.actualBoundingBoxLeft,u=t+o.actualBoundingBoxRight,f=e-o.actualBoundingBoxAscent,g=e+o.actualBoundingBoxDescent,_=r.strikethrough?(f+g)/2:g;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(c,_),n.lineTo(u,_),n.stroke()}}function fP(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function ed(n,t,e,i,r,o={}){const c=Le(t)?t:[t],u=o.strokeWidth>0&&o.strokeColor!=="";let f,g;for(n.save(),n.font=r.string,uP(n,o),f=0;f<c.length;++f)g=c[f],o.backdrop&&fP(n,o.backdrop),u&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),qt(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(g,e,i,o.maxWidth)),n.fillText(g,e,i,o.maxWidth),hP(n,e,i,g,o),i+=Number(r.lineHeight);n.restore()}function nd(n,t){const{x:e,y:i,w:r,h:o,radius:c}=t;n.arc(e+c.topLeft,i+c.topLeft,c.topLeft,1.5*ce,ce,!0),n.lineTo(e,i+o-c.bottomLeft),n.arc(e+c.bottomLeft,i+o-c.bottomLeft,c.bottomLeft,ce,Ue,!0),n.lineTo(e+r-c.bottomRight,i+o),n.arc(e+r-c.bottomRight,i+o-c.bottomRight,c.bottomRight,Ue,0,!0),n.lineTo(e+r,i+c.topRight),n.arc(e+r-c.topRight,i+c.topRight,c.topRight,0,-Ue,!0),n.lineTo(e+c.topLeft,i)}const dP=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,gP=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function mP(n,t){const e=(""+n).match(dP);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const pP=n=>+n||0;function iy(n,t){const e={},i=Ft(t),r=i?Object.keys(t):t,o=Ft(n)?i?c=>jt(n[c],n[t[c]]):c=>n[c]:()=>n;for(const c of r)e[c]=pP(o(c));return e}function AA(n){return iy(n,{top:"y",right:"x",bottom:"y",left:"x"})}function qo(n){return iy(n,["topLeft","topRight","bottomLeft","bottomRight"])}function ti(n){const t=AA(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function gn(n,t){n=n||{},t=t||ye.font;let e=jt(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=jt(n.style,t.style);i&&!(""+i).match(gP)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:jt(n.family,t.family),lineHeight:mP(jt(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:jt(n.weight,t.weight),string:""};return r.string=cP(r),r}function fe(n,t,e,i){let r,o,c;for(r=0,o=n.length;r<o;++r)if(c=n[r],c!==void 0&&(t!==void 0&&typeof c=="function"&&(c=c(t)),e!==void 0&&Le(c)&&(c=c[e%c.length]),c!==void 0))return c}function _P(n,t,e){const{min:i,max:r}=n,o=dA(t,(r-i)/2),c=(u,f)=>e&&u===0?0:u+f;return{min:c(i,-Math.abs(o)),max:c(r,o)}}function cl(n,t){return Object.assign(Object.create(n),t)}function sy(n,t=[""],e,i,r=()=>n[0]){const o=e||n;typeof i>"u"&&(i=CA("_fallback",n));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:i,_getTarget:r,override:u=>sy([u,...n],t,o,i)};return new Proxy(c,{deleteProperty(u,f){return delete u[f],delete u._keys,delete n[0][f],!0},get(u,f){return RA(u,f,()=>AP(f,t,n,u))},getOwnPropertyDescriptor(u,f){return Reflect.getOwnPropertyDescriptor(u._scopes[0],f)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(u,f){return VT(u).includes(f)},ownKeys(u){return VT(u)},set(u,f,g){const _=u._storage||(u._storage=r());return u[f]=_[f]=g,delete u._keys,!0}})}function Jo(n,t,e,i){const r={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:xA(n,i),setContext:o=>Jo(n,o,e,i),override:o=>Jo(n.override(o),t,e,i)};return new Proxy(r,{deleteProperty(o,c){return delete o[c],delete n[c],!0},get(o,c,u){return RA(o,c,()=>vP(o,c,u))},getOwnPropertyDescriptor(o,c){return o._descriptors.allKeys?Reflect.has(n,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,c)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,c){return Reflect.has(n,c)},ownKeys(){return Reflect.ownKeys(n)},set(o,c,u){return n[c]=u,delete o[c],!0}})}function xA(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=n;return{allKeys:r,scriptable:e,indexable:i,isScriptable:Dr(e)?e:()=>e,isIndexable:Dr(i)?i:()=>i}}const yP=(n,t)=>n?n+$_(t):t,ry=(n,t)=>Ft(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function RA(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function vP(n,t,e){const{_proxy:i,_context:r,_subProxy:o,_descriptors:c}=n;let u=i[t];return Dr(u)&&c.isScriptable(t)&&(u=bP(t,u,n,e)),Le(u)&&u.length&&(u=EP(t,u,n,c.isIndexable)),ry(t,u)&&(u=Jo(u,r,o&&o[t],c)),u}function bP(n,t,e,i){const{_proxy:r,_context:o,_subProxy:c,_stack:u}=e;if(u.has(n))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+n);u.add(n);let f=t(o,c||i);return u.delete(n),ry(n,f)&&(f=ay(r._scopes,r,n,f)),f}function EP(n,t,e,i){const{_proxy:r,_context:o,_subProxy:c,_descriptors:u}=e;if(typeof o.index<"u"&&i(n))return t[o.index%t.length];if(Ft(t[0])){const f=t,g=r._scopes.filter(_=>_!==f);t=[];for(const _ of f){const y=ay(g,r,n,_);t.push(Jo(y,o,c&&c[n],u))}}return t}function IA(n,t,e){return Dr(n)?n(t,e):n}const TP=(n,t)=>n===!0?t:typeof n=="string"?ka(t,n):void 0;function SP(n,t,e,i,r){for(const o of t){const c=TP(e,o);if(c){n.add(c);const u=IA(c._fallback,e,r);if(typeof u<"u"&&u!==e&&u!==i)return u}else if(c===!1&&typeof i<"u"&&e!==i)return null}return!1}function ay(n,t,e,i){const r=t._rootScopes,o=IA(t._fallback,e,i),c=[...n,...r],u=new Set;u.add(i);let f=PT(u,c,e,o||e,i);return f===null||typeof o<"u"&&o!==e&&(f=PT(u,c,o,f,i),f===null)?!1:sy(Array.from(u),[""],r,o,()=>wP(t,e,i))}function PT(n,t,e,i,r){for(;e;)e=SP(n,t,e,i,r);return e}function wP(n,t,e){const i=n._getTarget();t in i||(i[t]={});const r=i[t];return Le(r)&&Ft(e)?e:r||{}}function AP(n,t,e,i){let r;for(const o of t)if(r=CA(yP(o,n),e),typeof r<"u")return ry(n,r)?ay(e,i,n,r):r}function CA(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function VT(n){let t=n._keys;return t||(t=n._keys=xP(n._scopes)),t}function xP(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}function oy(){return typeof window<"u"&&typeof document<"u"}function ly(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function id(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const Dd=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function RP(n,t){return Dd(n).getPropertyValue(t)}const IP=["top","right","bottom","left"];function Ra(n,t,e){const i={};e=e?"-"+e:"";for(let r=0;r<4;r++){const o=IP[r];i[o]=parseFloat(n[t+"-"+o+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const CP=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function MP(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:r,offsetY:o}=i;let c=!1,u,f;if(CP(r,o,n.target))u=r,f=o;else{const g=t.getBoundingClientRect();u=i.clientX-g.left,f=i.clientY-g.top,c=!0}return{x:u,y:f,box:c}}function Ta(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,r=Dd(e),o=r.boxSizing==="border-box",c=Ra(r,"padding"),u=Ra(r,"border","width"),{x:f,y:g,box:_}=MP(n,e),y=c.left+(_&&u.left),b=c.top+(_&&u.top);let{width:S,height:R}=t;return o&&(S-=c.width+u.width,R-=c.height+u.height),{x:Math.round((f-y)/S*e.width/i),y:Math.round((g-b)/R*e.height/i)}}function DP(n,t,e){let i,r;if(t===void 0||e===void 0){const o=n&&ly(n);if(!o)t=n.clientWidth,e=n.clientHeight;else{const c=o.getBoundingClientRect(),u=Dd(o),f=Ra(u,"border","width"),g=Ra(u,"padding");t=c.width-g.width-f.width,e=c.height-g.height-f.height,i=id(u.maxWidth,o,"clientWidth"),r=id(u.maxHeight,o,"clientHeight")}}return{width:t,height:e,maxWidth:i||Zf,maxHeight:r||Zf}}const tf=n=>Math.round(n*10)/10;function OP(n,t,e,i){const r=Dd(n),o=Ra(r,"margin"),c=id(r.maxWidth,n,"clientWidth")||Zf,u=id(r.maxHeight,n,"clientHeight")||Zf,f=DP(n,t,e);let{width:g,height:_}=f;if(r.boxSizing==="content-box"){const b=Ra(r,"border","width"),S=Ra(r,"padding");g-=S.width+b.width,_-=S.height+b.height}return g=Math.max(0,g-o.width),_=Math.max(0,i?g/i:_-o.height),g=tf(Math.min(g,c,f.maxWidth)),_=tf(Math.min(_,u,f.maxHeight)),g&&!_&&(_=tf(g/2)),(t!==void 0||e!==void 0)&&i&&f.height&&_>f.height&&(_=f.height,g=tf(Math.floor(_*i))),{width:g,height:_}}function LT(n,t,e){const i=t||1,r=Math.floor(n.height*i),o=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const c=n.canvas;return c.style&&(e||!c.style.height&&!c.style.width)&&(c.style.height=`${n.height}px`,c.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||c.height!==r||c.width!==o?(n.currentDevicePixelRatio=i,c.height=r,c.width=o,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const kP=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};oy()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function UT(n,t){const e=RP(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const NP=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},PP=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function Go(n,t,e){return n?NP(t,e):PP()}function MA(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function DA(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function ef(n,t,e){return n.options.clip?n[e]:t[e]}function VP(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:ef(e,t,"left"),right:ef(e,t,"right"),top:ef(i,t,"top"),bottom:ef(i,t,"bottom")}:t}function LP(n,t){const e=t._clip;if(e.disabled)return!1;const i=VP(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class UP{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){const o=e.listeners[r],c=e.duration;o.forEach(u=>u({chart:t,initial:e.initial,numSteps:c,currentStep:Math.min(i-e.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=vA.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const o=i.items;let c=o.length-1,u=!1,f;for(;c>=0;--c)f=o[c],f._active?(f._total>i.duration&&(i.duration=f._total),f.tick(t),u=!0):(o[c]=o[o.length-1],o.pop());u&&(r.draw(),this._notify(r,i,t,"progress")),o.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ms=new UP;const zT="transparent",zP={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=DT(n||zT),r=i.valid&&DT(t||zT);return r&&r.valid?r.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class BP{constructor(t,e,i,r){const o=e[i];r=fe([t.to,r,o,t.from]);const c=fe([t.from,o,r]);this._active=!0,this._fn=t.fn||zP[t.type||typeof c],this._easing=qc[t.easing]||qc.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=c,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const r=this._target[this._prop],o=i-this._start,c=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(c,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=fe([t.to,e,r,t.from]),this._from=fe([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,r=this._prop,o=this._from,c=this._loop,u=this._to;let f;if(this._active=o!==u&&(c||e<i),!this._active){this._target[r]=u,this._notify(!0);return}if(e<0){this._target[r]=o;return}f=e/i%2,f=c&&f>1?2-f:f,f=this._easing(Math.min(1,Math.max(0,f))),this._target[r]=this._fn(o,u,f)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][e]()}}class OA{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Ft(t))return;const e=Object.keys(ye.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const o=t[r];if(!Ft(o))return;const c={};for(const u of e)c[u]=o[u];(Le(o.properties)&&o.properties||[r]).forEach(u=>{(u===r||!i.has(u))&&i.set(u,c)})})}_animateOptions(t,e){const i=e.options,r=FP(t,i);if(!r)return[];const o=this._createAnimations(r,i);return i.$shared&&jP(t.options.$animations,i).then(()=>{t.options=i},()=>{}),o}_createAnimations(t,e){const i=this._properties,r=[],o=t.$animations||(t.$animations={}),c=Object.keys(e),u=Date.now();let f;for(f=c.length-1;f>=0;--f){const g=c[f];if(g.charAt(0)==="$")continue;if(g==="options"){r.push(...this._animateOptions(t,e));continue}const _=e[g];let y=o[g];const b=i.get(g);if(y)if(b&&y.active()){y.update(b,_,u);continue}else y.cancel();if(!b||!b.duration){t[g]=_;continue}o[g]=y=new BP(b,t,g,_),r.push(y)}return r}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return ms.add(this._chart,i),!0}}function jP(n,t){const e=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const o=n[i[r]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function FP(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function BT(n,t){const e=n&&n.options||{},i=e.reverse,r=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:i?o:r,end:i?r:o}}function HP(n,t,e){if(e===!1)return!1;const i=BT(n,e),r=BT(t,e);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function qP(n){let t,e,i,r;return Ft(n)?(t=n.top,e=n.right,i=n.bottom,r=n.left):t=e=i=r=n,{top:t,right:e,bottom:i,left:r,disabled:n===!1}}function kA(n,t){const e=[],i=n._getSortedDatasetMetas(t);let r,o;for(r=0,o=i.length;r<o;++r)e.push(i[r].index);return e}function jT(n,t,e,i={}){const r=n.keys,o=i.mode==="single";let c,u,f,g;if(t===null)return;let _=!1;for(c=0,u=r.length;c<u;++c){if(f=+r[c],f===e){if(_=!0,i.all)continue;break}g=n.values[f],Jn(g)&&(o||t===0||Tr(t)===Tr(g))&&(t+=g)}return!_&&!i.all?0:t}function GP(n,t){const{iScale:e,vScale:i}=t,r=e.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",c=Object.keys(n),u=new Array(c.length);let f,g,_;for(f=0,g=c.length;f<g;++f)_=c[f],u[f]={[r]:_,[o]:n[_]};return u}function ep(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function YP(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function KP(n){const{min:t,max:e,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function WP(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function FT(n,t,e,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const o=n[r.index];if(e&&o>0||!e&&o<0)return r.index}return null}function HT(n,t){const{chart:e,_cachedMeta:i}=n,r=e._stacks||(e._stacks={}),{iScale:o,vScale:c,index:u}=i,f=o.axis,g=c.axis,_=YP(o,c,i),y=t.length;let b;for(let S=0;S<y;++S){const R=t[S],{[f]:M,[g]:C}=R,z=R._stacks||(R._stacks={});b=z[g]=WP(r,_,M),b[u]=C,b._top=FT(b,c,!0,i.type),b._bottom=FT(b,c,!1,i.type);const F=b._visualValues||(b._visualValues={});F[u]=C}}function np(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function QP(n,t){return cl(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function XP(n,t,e){return cl(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Tc(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const r of t){const o=r._stacks;if(!o||o[i]===void 0||o[i][e]===void 0)return;delete o[i][e],o[i]._visualValues!==void 0&&o[i]._visualValues[e]!==void 0&&delete o[i]._visualValues[e]}}}const ip=n=>n==="reset"||n==="none",qT=(n,t)=>t?n:Object.assign({},n),$P=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:kA(e,!0),values:null};class cy{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=ep(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Tc(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),r=(y,b,S,R)=>y==="x"?b:y==="r"?R:S,o=e.xAxisID=jt(i.xAxisID,np(t,"x")),c=e.yAxisID=jt(i.yAxisID,np(t,"y")),u=e.rAxisID=jt(i.rAxisID,np(t,"r")),f=e.indexAxis,g=e.iAxisID=r(f,o,c,u),_=e.vAxisID=r(f,c,o,u);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(c),e.rScale=this.getScaleForId(u),e.iScale=this.getScaleForId(g),e.vScale=this.getScaleForId(_)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&IT(this._data,this),t._stacked&&Tc(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(Ft(e)){const r=this._cachedMeta;this._data=GP(e,r)}else if(i!==e){if(i){IT(i,this);const r=this._cachedMeta;Tc(r),r._parsed=[]}e&&Object.isExtensible(e)&&$N(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const o=e._stacked;e._stacked=ep(e.vScale,e),e.stack!==i.stack&&(r=!0,Tc(e),e.stack=i.stack),this._resyncElements(t),(r||o!==e._stacked)&&(HT(this,e._parsed),e._stacked=ep(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:r}=this,{iScale:o,_stacked:c}=i,u=o.axis;let f=t===0&&e===r.length?!0:i._sorted,g=t>0&&i._parsed[t-1],_,y,b;if(this._parsing===!1)i._parsed=r,i._sorted=!0,b=r;else{Le(r[t])?b=this.parseArrayData(i,r,t,e):Ft(r[t])?b=this.parseObjectData(i,r,t,e):b=this.parsePrimitiveData(i,r,t,e);const S=()=>y[u]===null||g&&y[u]<g[u];for(_=0;_<e;++_)i._parsed[_+t]=y=b[_],f&&(S()&&(f=!1),g=y);i._sorted=f}c&&HT(this,b)}parsePrimitiveData(t,e,i,r){const{iScale:o,vScale:c}=t,u=o.axis,f=c.axis,g=o.getLabels(),_=o===c,y=new Array(r);let b,S,R;for(b=0,S=r;b<S;++b)R=b+i,y[b]={[u]:_||o.parse(g[R],R),[f]:c.parse(e[R],R)};return y}parseArrayData(t,e,i,r){const{xScale:o,yScale:c}=t,u=new Array(r);let f,g,_,y;for(f=0,g=r;f<g;++f)_=f+i,y=e[_],u[f]={x:o.parse(y[0],_),y:c.parse(y[1],_)};return u}parseObjectData(t,e,i,r){const{xScale:o,yScale:c}=t,{xAxisKey:u="x",yAxisKey:f="y"}=this._parsing,g=new Array(r);let _,y,b,S;for(_=0,y=r;_<y;++_)b=_+i,S=e[b],g[_]={x:o.parse(ka(S,u),b),y:c.parse(ka(S,f),b)};return g}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const r=this.chart,o=this._cachedMeta,c=e[t.axis],u={keys:kA(r,!0),values:e._stacks[t.axis]._visualValues};return jT(u,c,o.index,{mode:i})}updateRangeFromParsed(t,e,i,r){const o=i[e.axis];let c=o===null?NaN:o;const u=r&&i._stacks[e.axis];r&&u&&(r.values=u,c=jT(r,o,this._cachedMeta.index)),t.min=Math.min(t.min,c),t.max=Math.max(t.max,c)}getMinMax(t,e){const i=this._cachedMeta,r=i._parsed,o=i._sorted&&t===i.iScale,c=r.length,u=this._getOtherScale(t),f=$P(e,i,this.chart),g={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:_,max:y}=KP(u);let b,S;function R(){S=r[b];const M=S[u.axis];return!Jn(S[t.axis])||_>M||y<M}for(b=0;b<c&&!(!R()&&(this.updateRangeFromParsed(g,t,S,f),o));++b);if(o){for(b=c-1;b>=0;--b)if(!R()){this.updateRangeFromParsed(g,t,S,f);break}}return g}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let r,o,c;for(r=0,o=e.length;r<o;++r)c=e[r][t.axis],Jn(c)&&i.push(c);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,r=e.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:r?""+r.getLabelForValue(o[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=qP(jt(this.options.clip,HP(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,r=i.data||[],o=e.chartArea,c=[],u=this._drawStart||0,f=this._drawCount||r.length-u,g=this.options.drawActiveElementsOnTop;let _;for(i.dataset&&i.dataset.draw(t,o,u,f),_=u;_<u+f;++_){const y=r[_];y.hidden||(y.active&&g?c.push(y):y.draw(t,o))}for(_=0;_<c.length;++_)c[_].draw(t,o)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const r=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const c=this._cachedMeta.data[t];o=c.$context||(c.$context=XP(this.getContext(),t,c)),o.parsed=this.getParsed(t),o.raw=r.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=QP(this.chart.getContext(),this.index)),o.dataset=r,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const r=e==="active",o=this._cachedDataOpts,c=t+"-"+e,u=o[c],f=this.enableOptionSharing&&au(i);if(u)return qT(u,f);const g=this.chart.config,_=g.datasetElementScopeKeys(this._type,t),y=r?[`${t}Hover`,"hover",t,""]:[t,""],b=g.getOptionScopes(this.getDataset(),_),S=Object.keys(ye.elements[t]),R=()=>this.getContext(i,r,e),M=g.resolveNamedOptions(b,S,R,y);return M.$shared&&(M.$shared=f,o[c]=Object.freeze(qT(M,f))),M}_resolveAnimations(t,e,i){const r=this.chart,o=this._cachedDataOpts,c=`animation-${e}`,u=o[c];if(u)return u;let f;if(r.options.animation!==!1){const _=this.chart.config,y=_.datasetAnimationScopeKeys(this._type,e),b=_.getOptionScopes(this.getDataset(),y);f=_.createResolver(b,this.getContext(t,i,e))}const g=new OA(r,f&&f.animations);return f&&f._cacheable&&(o[c]=Object.freeze(g)),g}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||ip(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),r=this._sharedOptions,o=this.getSharedOptions(i),c=this.includeOptions(e,o)||o!==r;return this.updateSharedOptions(o,e,i),{sharedOptions:o,includeOptions:c}}updateElement(t,e,i,r){ip(r)?Object.assign(t,i):this._resolveAnimations(e,r).update(t,i)}updateSharedOptions(t,e,i){t&&!ip(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,r){t.active=r;const o=this.getStyle(e,r);this._resolveAnimations(e,i,r).update(t,{options:!r&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[u,f,g]of this._syncList)this[u](f,g);this._syncList=[];const r=i.length,o=e.length,c=Math.min(o,r);c&&this.parse(0,c),o>r?this._insertElements(r,o-r,t):o<r&&this._removeElements(o,r-o)}_insertElements(t,e,i=!0){const r=this._cachedMeta,o=r.data,c=t+e;let u;const f=g=>{for(g.length+=e,u=g.length-1;u>=c;u--)g[u]=g[u-e]};for(f(o),u=t;u<c;++u)o[u]=new this.dataElementType;this._parsing&&f(r._parsed),this.parse(t,e),i&&this.updateElements(o,t,e,"reset")}updateElements(t,e,i,r){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(t,e);i._stacked&&Tc(i,r)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,r]=t;this[e](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function ZP(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let i=[];for(let r=0,o=e.length;r<o;r++)i=i.concat(e[r].controller.getAllParsedValues(n));n._cache.$bar=yA(i.sort((r,o)=>r-o))}return n._cache.$bar}function JP(n){const t=n.iScale,e=ZP(t,n.type);let i=t._length,r,o,c,u;const f=()=>{c===32767||c===-32768||(au(u)&&(i=Math.min(i,Math.abs(c-u)||i)),u=c)};for(r=0,o=e.length;r<o;++r)c=t.getPixelForValue(e[r]),f();for(u=void 0,r=0,o=t.ticks.length;r<o;++r)c=t.getPixelForTick(r),f();return i}function tV(n,t,e,i){const r=e.barThickness;let o,c;return qt(r)?(o=t.min*e.categoryPercentage,c=e.barPercentage):(o=r*i,c=1),{chunk:o/i,ratio:c,start:t.pixels[n]-o/2}}function eV(n,t,e,i){const r=t.pixels,o=r[n];let c=n>0?r[n-1]:null,u=n<r.length-1?r[n+1]:null;const f=e.categoryPercentage;c===null&&(c=o-(u===null?t.end-t.start:u-o)),u===null&&(u=o+o-c);const g=o-(o-Math.min(c,u))/2*f;return{chunk:Math.abs(u-c)/2*f/i,ratio:e.barPercentage,start:g}}function nV(n,t,e,i){const r=e.parse(n[0],i),o=e.parse(n[1],i),c=Math.min(r,o),u=Math.max(r,o);let f=c,g=u;Math.abs(c)>Math.abs(u)&&(f=u,g=c),t[e.axis]=g,t._custom={barStart:f,barEnd:g,start:r,end:o,min:c,max:u}}function NA(n,t,e,i){return Le(n)?nV(n,t,e,i):t[e.axis]=e.parse(n,i),t}function GT(n,t,e,i){const r=n.iScale,o=n.vScale,c=r.getLabels(),u=r===o,f=[];let g,_,y,b;for(g=e,_=e+i;g<_;++g)b=t[g],y={},y[r.axis]=u||r.parse(c[g],g),f.push(NA(b,y,o,g));return f}function sp(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function iV(n,t,e){return n!==0?Tr(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function sV(n){let t,e,i,r,o;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(r="end",o="start"):(r="start",o="end"),{start:e,end:i,reverse:t,top:r,bottom:o}}function rV(n,t,e,i){let r=t.borderSkipped;const o={};if(!r){n.borderSkipped=o;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:c,end:u,reverse:f,top:g,bottom:_}=sV(n);r==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?r=g:(e._bottom||0)===i?r=_:(o[YT(_,c,u,f)]=!0,r=g)),o[YT(r,c,u,f)]=!0,n.borderSkipped=o}function YT(n,t,e,i){return i?(n=aV(n,t,e),n=KT(n,e,t)):n=KT(n,t,e),n}function aV(n,t,e){return n===t?e:n===e?t:n}function KT(n,t,e){return n==="start"?t:n==="end"?e:n}function oV(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class lV extends cy{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,i,r){return GT(t,e,i,r)}parseArrayData(t,e,i,r){return GT(t,e,i,r)}parseObjectData(t,e,i,r){const{iScale:o,vScale:c}=t,{xAxisKey:u="x",yAxisKey:f="y"}=this._parsing,g=o.axis==="x"?u:f,_=c.axis==="x"?u:f,y=[];let b,S,R,M;for(b=i,S=i+r;b<S;++b)M=e[b],R={},R[o.axis]=o.parse(ka(M,g),b),y.push(NA(ka(M,_),R,c,b));return y}updateRangeFromParsed(t,e,i,r){super.updateRangeFromParsed(t,e,i,r);const o=i._custom;o&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:r}=e,o=this.getParsed(t),c=o._custom,u=sp(c)?"["+c.start+", "+c.end+"]":""+r.getLabelForValue(o[r.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:u}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,r){const o=r==="reset",{index:c,_cachedMeta:{vScale:u}}=this,f=u.getBasePixel(),g=u.isHorizontal(),_=this._getRuler(),{sharedOptions:y,includeOptions:b}=this._getSharedOptions(e,r);for(let S=e;S<e+i;S++){const R=this.getParsed(S),M=o||qt(R[u.axis])?{base:f,head:f}:this._calculateBarValuePixels(S),C=this._calculateBarIndexPixels(S,_),z=(R._stacks||{})[u.axis],F={horizontal:g,base:M.base,enableBorderRadius:!z||sp(R._custom)||c===z._top||c===z._bottom,x:g?M.head:C.center,y:g?C.center:M.head,height:g?C.size:Math.abs(M.size),width:g?Math.abs(M.size):C.size};b&&(F.options=y||this.resolveDataElementOptions(S,t[S].active?"active":r));const X=F.options||t[S].options;rV(F,X,z,c),oV(F,X,_.ratio),this.updateElement(t[S],S,F,r)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(_=>_.controller.options.grouped),o=i.options.stacked,c=[],u=this._cachedMeta.controller.getParsed(e),f=u&&u[i.axis],g=_=>{const y=_._parsed.find(S=>S[i.axis]===f),b=y&&y[_.vScale.axis];if(qt(b)||isNaN(b))return!0};for(const _ of r)if(!(e!==void 0&&g(_))&&((o===!1||c.indexOf(_.stack)===-1||o===void 0&&_.stack===void 0)&&c.push(_.stack),_.index===t))break;return c.length||c.push(void 0),c}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)t[jt(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,i){const r=this._getStacks(t,i),o=e!==void 0?r.indexOf(e):-1;return o===-1?r.length-1:o}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,r=[];let o,c;for(o=0,c=e.data.length;o<c;++o)r.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));const u=t.barThickness;return{min:u||JP(e),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:u?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i,index:r},options:{base:o,minBarLength:c}}=this,u=o||0,f=this.getParsed(t),g=f._custom,_=sp(g);let y=f[e.axis],b=0,S=i?this.applyStack(e,f,i):y,R,M;S!==y&&(b=S-y,S=y),_&&(y=g.barStart,S=g.barEnd-g.barStart,y!==0&&Tr(y)!==Tr(g.barEnd)&&(b=0),b+=y);const C=!qt(o)&&!_?o:b;let z=e.getPixelForValue(C);if(this.chart.getDataVisibility(t)?R=e.getPixelForValue(b+S):R=z,M=R-z,Math.abs(M)<c){M=iV(M,e,u)*c,y===u&&(z-=M/2);const F=e.getPixelForDecimal(0),X=e.getPixelForDecimal(1),$=Math.min(F,X),W=Math.max(F,X);z=Math.max(Math.min(z,W),$),R=z+M,i&&!_&&(f._stacks[e.axis]._visualValues[r]=e.getValueForPixel(R)-e.getValueForPixel(z))}if(z===e.getPixelForValue(u)){const F=Tr(M)*e.getLineWidthForValue(u)/2;z+=F,M-=F}return{size:M,base:z,head:R,center:R+M/2}}_calculateBarIndexPixels(t,e){const i=e.scale,r=this.options,o=r.skipNull,c=jt(r.maxBarThickness,1/0);let u,f;const g=this._getAxisCount();if(e.grouped){const _=o?this._getStackCount(t):e.stackCount,y=r.barThickness==="flex"?eV(t,e,r,_*g):tV(t,e,r,_*g),b=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,S=this._getAxis().indexOf(jt(b,this.getFirstScaleIdForIndexAxis())),R=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0)+S;u=y.start+y.chunk*R+y.chunk/2,f=Math.min(c,y.chunk*y.ratio)}else u=i.getPixelForValue(this.getParsed(t)[i.axis],t),f=Math.min(c,e.min*e.ratio);return{base:u-f/2,head:u+f/2,center:u,size:f}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,r=i.length;let o=0;for(;o<r;++o)this.getParsed(o)[e.axis]!==null&&!i[o].hidden&&i[o].draw(this._ctx)}}function cV(n,t,e){let i=1,r=1,o=0,c=0;if(t<De){const u=n,f=u+t,g=Math.cos(u),_=Math.sin(u),y=Math.cos(f),b=Math.sin(f),S=(X,$,W)=>td(X,u,f,!0)?1:Math.max($,$*e,W,W*e),R=(X,$,W)=>td(X,u,f,!0)?-1:Math.min($,$*e,W,W*e),M=S(0,g,y),C=S(Ue,_,b),z=R(ce,g,y),F=R(ce+Ue,_,b);i=(M-z)/2,r=(C-F)/2,o=-(M+z)/2,c=-(C+F)/2}return{ratioX:i,ratioY:r,offsetX:o,offsetY:c}}class uV extends cy{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:r}}=t.legend.options;return e.labels.map((o,c)=>{const f=t.getDatasetMeta(0).controller.getStyle(c);return{text:o,fillStyle:f.backgroundColor,strokeStyle:f.borderColor,fontColor:r,lineWidth:f.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(c),index:c}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let o=f=>+i[f];if(Ft(i[t])){const{key:f="value"}=this._parsing;o=g=>+ka(i[g],f)}let c,u;for(c=t,u=t+e;c<u;++c)r._parsed[c]=o(c)}}_getRotation(){return bs(this.options.rotation-90)}_getCircumference(){return bs(this.options.circumference)}_getRotationExtents(){let t=De,e=-De;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,o=r._getRotation(),c=r._getCircumference();t=Math.min(t,o),e=Math.max(e,o+c)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,r=this._cachedMeta,o=r.data,c=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,u=Math.max((Math.min(i.width,i.height)-c)/2,0),f=Math.min(PN(this.options.cutout,u),1),g=this._getRingWeight(this.index),{circumference:_,rotation:y}=this._getRotationExtents(),{ratioX:b,ratioY:S,offsetX:R,offsetY:M}=cV(y,_,f),C=(i.width-c)/b,z=(i.height-c)/S,F=Math.max(Math.min(C,z)/2,0),X=dA(this.options.radius,F),$=Math.max(X*f,0),W=(X-$)/this._getVisibleDatasetWeightTotal();this.offsetX=R*X,this.offsetY=M*X,r.total=this.calculateTotal(),this.outerRadius=X-W*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-W*g,0),this.updateElements(o,0,o.length,t)}_circumference(t,e){const i=this.options,r=this._cachedMeta,o=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*o/De)}updateElements(t,e,i,r){const o=r==="reset",c=this.chart,u=c.chartArea,g=c.options.animation,_=(u.left+u.right)/2,y=(u.top+u.bottom)/2,b=o&&g.animateScale,S=b?0:this.innerRadius,R=b?0:this.outerRadius,{sharedOptions:M,includeOptions:C}=this._getSharedOptions(e,r);let z=this._getRotation(),F;for(F=0;F<e;++F)z+=this._circumference(F,o);for(F=e;F<e+i;++F){const X=this._circumference(F,o),$=t[F],W={x:_+this.offsetX,y:y+this.offsetY,startAngle:z,endAngle:z+X,circumference:X,outerRadius:R,innerRadius:S};C&&(W.options=M||this.resolveDataElementOptions(F,$.active?"active":r)),z+=X,this.updateElement($,F,W,r)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i=0,r;for(r=0;r<e.length;r++){const o=t._parsed[r];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(r)&&!e[r].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?De*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,r=i.data.labels||[],o=J_(e._parsed[t],i.options.locale);return{label:r[t]||"",value:o}}getMaxBorderWidth(t){let e=0;const i=this.chart;let r,o,c,u,f;if(!t){for(r=0,o=i.data.datasets.length;r<o;++r)if(i.isDatasetVisible(r)){c=i.getDatasetMeta(r),t=c.data,u=c.controller;break}}if(!t)return 0;for(r=0,o=t.length;r<o;++r)f=u.resolveDataElementOptions(r),f.borderAlign!=="inner"&&(e=Math.max(e,f.borderWidth||0,f.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,r=t.length;i<r;++i){const o=this.resolveDataElementOptions(i);e=Math.max(e,o.offset||0,o.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(jt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class hV extends uV{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function ba(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class uy{static override(t){Object.assign(uy.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return ba()}parse(){return ba()}format(){return ba()}add(){return ba()}diff(){return ba()}startOf(){return ba()}endOf(){return ba()}}var fV={_date:uy};function dV(n,t,e,i){const{controller:r,data:o,_sorted:c}=n,u=r._cachedMeta.iScale,f=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(u&&t===u.axis&&t!=="r"&&c&&o.length){const g=u._reversePixels?QN:Fp;if(i){if(r._sharedOptions){const _=o[0],y=typeof _.getRange=="function"&&_.getRange(t);if(y){const b=g(o,t,e-y),S=g(o,t,e+y);return{lo:b.lo,hi:S.hi}}}}else{const _=g(o,t,e);if(f){const{vScale:y}=r._cachedMeta,{_parsed:b}=n,S=b.slice(0,_.lo+1).reverse().findIndex(M=>!qt(M[y.axis]));_.lo-=Math.max(0,S);const R=b.slice(_.hi).findIndex(M=>!qt(M[y.axis]));_.hi+=Math.max(0,R)}return _}}return{lo:0,hi:o.length-1}}function Od(n,t,e,i,r){const o=n.getSortedVisibleDatasetMetas(),c=e[t];for(let u=0,f=o.length;u<f;++u){const{index:g,data:_}=o[u],{lo:y,hi:b}=dV(o[u],t,c,r);for(let S=y;S<=b;++S){const R=_[S];R.skip||i(R,g,S)}}}function gV(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,r){const o=t?Math.abs(i.x-r.x):0,c=e?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(c,2))}}function rp(n,t,e,i,r){const o=[];return!r&&!n.isPointInArea(t)||Od(n,e,t,function(u,f,g){!r&&!ty(u,n.chartArea,0)||u.inRange(t.x,t.y,i)&&o.push({element:u,datasetIndex:f,index:g})},!0),o}function mV(n,t,e,i){let r=[];function o(c,u,f){const{startAngle:g,endAngle:_}=c.getProps(["startAngle","endAngle"],i),{angle:y}=pA(c,{x:t.x,y:t.y});td(y,g,_)&&r.push({element:c,datasetIndex:u,index:f})}return Od(n,e,t,o),r}function pV(n,t,e,i,r,o){let c=[];const u=gV(e);let f=Number.POSITIVE_INFINITY;function g(_,y,b){const S=_.inRange(t.x,t.y,r);if(i&&!S)return;const R=_.getCenterPoint(r);if(!(!!o||n.isPointInArea(R))&&!S)return;const C=u(t,R);C<f?(c=[{element:_,datasetIndex:y,index:b}],f=C):C===f&&c.push({element:_,datasetIndex:y,index:b})}return Od(n,e,t,g),c}function ap(n,t,e,i,r,o){return!o&&!n.isPointInArea(t)?[]:e==="r"&&!i?mV(n,t,e,r):pV(n,t,e,i,r,o)}function WT(n,t,e,i,r){const o=[],c=e==="x"?"inXRange":"inYRange";let u=!1;return Od(n,e,t,(f,g,_)=>{f[c]&&f[c](t[e],r)&&(o.push({element:f,datasetIndex:g,index:_}),u=u||f.inRange(t.x,t.y,r))}),i&&!u?[]:o}var _V={modes:{index(n,t,e,i){const r=Ta(t,n),o=e.axis||"x",c=e.includeInvisible||!1,u=e.intersect?rp(n,r,o,i,c):ap(n,r,o,!1,i,c),f=[];return u.length?(n.getSortedVisibleDatasetMetas().forEach(g=>{const _=u[0].index,y=g.data[_];y&&!y.skip&&f.push({element:y,datasetIndex:g.index,index:_})}),f):[]},dataset(n,t,e,i){const r=Ta(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;let u=e.intersect?rp(n,r,o,i,c):ap(n,r,o,!1,i,c);if(u.length>0){const f=u[0].datasetIndex,g=n.getDatasetMeta(f).data;u=[];for(let _=0;_<g.length;++_)u.push({element:g[_],datasetIndex:f,index:_})}return u},point(n,t,e,i){const r=Ta(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;return rp(n,r,o,i,c)},nearest(n,t,e,i){const r=Ta(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;return ap(n,r,o,e.intersect,i,c)},x(n,t,e,i){const r=Ta(t,n);return WT(n,r,"x",e.intersect,i)},y(n,t,e,i){const r=Ta(t,n);return WT(n,r,"y",e.intersect,i)}}};const PA=["left","top","right","bottom"];function Sc(n,t){return n.filter(e=>e.pos===t)}function QT(n,t){return n.filter(e=>PA.indexOf(e.pos)===-1&&e.box.axis===t)}function wc(n,t){return n.sort((e,i)=>{const r=t?i:e,o=t?e:i;return r.weight===o.weight?r.index-o.index:r.weight-o.weight})}function yV(n){const t=[];let e,i,r,o,c,u;for(e=0,i=(n||[]).length;e<i;++e)r=n[e],{position:o,options:{stack:c,stackWeight:u=1}}=r,t.push({index:e,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:c&&o+c,stackWeight:u});return t}function vV(n){const t={};for(const e of n){const{stack:i,pos:r,stackWeight:o}=e;if(!i||!PA.includes(r))continue;const c=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=o}return t}function bV(n,t){const e=vV(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let o,c,u;for(o=0,c=n.length;o<c;++o){u=n[o];const{fullSize:f}=u.box,g=e[u.stack],_=g&&u.stackWeight/g.weight;u.horizontal?(u.width=_?_*i:f&&t.availableWidth,u.height=r):(u.width=i,u.height=_?_*r:f&&t.availableHeight)}return e}function EV(n){const t=yV(n),e=wc(t.filter(g=>g.box.fullSize),!0),i=wc(Sc(t,"left"),!0),r=wc(Sc(t,"right")),o=wc(Sc(t,"top"),!0),c=wc(Sc(t,"bottom")),u=QT(t,"x"),f=QT(t,"y");return{fullSize:e,leftAndTop:i.concat(o),rightAndBottom:r.concat(f).concat(c).concat(u),chartArea:Sc(t,"chartArea"),vertical:i.concat(r).concat(f),horizontal:o.concat(c).concat(u)}}function XT(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function VA(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function TV(n,t,e,i){const{pos:r,box:o}=e,c=n.maxPadding;if(!Ft(r)){e.size&&(n[r]-=e.size);const y=i[e.stack]||{size:0,count:1};y.size=Math.max(y.size,e.horizontal?o.height:o.width),e.size=y.size/y.count,n[r]+=e.size}o.getPadding&&VA(c,o.getPadding());const u=Math.max(0,t.outerWidth-XT(c,n,"left","right")),f=Math.max(0,t.outerHeight-XT(c,n,"top","bottom")),g=u!==n.w,_=f!==n.h;return n.w=u,n.h=f,e.horizontal?{same:g,other:_}:{same:_,other:g}}function SV(n){const t=n.maxPadding;function e(i){const r=Math.max(t[i]-n[i],0);return n[i]+=r,r}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function wV(n,t){const e=t.maxPadding;function i(r){const o={left:0,top:0,right:0,bottom:0};return r.forEach(c=>{o[c]=Math.max(t[c],e[c])}),o}return i(n?["left","right"]:["top","bottom"])}function Pc(n,t,e,i){const r=[];let o,c,u,f,g,_;for(o=0,c=n.length,g=0;o<c;++o){u=n[o],f=u.box,f.update(u.width||t.w,u.height||t.h,wV(u.horizontal,t));const{same:y,other:b}=TV(t,e,u,i);g|=y&&r.length,_=_||b,f.fullSize||r.push(u)}return g&&Pc(r,t,e,i)||_}function nf(n,t,e,i,r){n.top=e,n.left=t,n.right=t+i,n.bottom=e+r,n.width=i,n.height=r}function $T(n,t,e,i){const r=e.padding;let{x:o,y:c}=t;for(const u of n){const f=u.box,g=i[u.stack]||{placed:0,weight:1},_=u.stackWeight/g.weight||1;if(u.horizontal){const y=t.w*_,b=g.size||f.height;au(g.start)&&(c=g.start),f.fullSize?nf(f,r.left,c,e.outerWidth-r.right-r.left,b):nf(f,t.left+g.placed,c,y,b),g.start=c,g.placed+=y,c=f.bottom}else{const y=t.h*_,b=g.size||f.width;au(g.start)&&(o=g.start),f.fullSize?nf(f,o,r.top,b,e.outerHeight-r.bottom-r.top):nf(f,o,t.top+g.placed,b,y),g.start=o,g.placed+=y,o=f.right}}t.x=o,t.y=c}var fr={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const r=ti(n.options.layout.padding),o=Math.max(t-r.width,0),c=Math.max(e-r.height,0),u=EV(n.boxes),f=u.vertical,g=u.horizontal;Wt(n.boxes,M=>{typeof M.beforeLayout=="function"&&M.beforeLayout()});const _=f.reduce((M,C)=>C.box.options&&C.box.options.display===!1?M:M+1,0)||1,y=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:o,availableHeight:c,vBoxMaxWidth:o/2/_,hBoxMaxHeight:c/2}),b=Object.assign({},r);VA(b,ti(i));const S=Object.assign({maxPadding:b,w:o,h:c,x:r.left,y:r.top},r),R=bV(f.concat(g),y);Pc(u.fullSize,S,y,R),Pc(f,S,y,R),Pc(g,S,y,R)&&Pc(f,S,y,R),SV(S),$T(u.leftAndTop,S,y,R),S.x+=S.w,S.y+=S.h,$T(u.rightAndBottom,S,y,R),n.chartArea={left:S.left,top:S.top,right:S.left+S.w,bottom:S.top+S.h,height:S.h,width:S.w},Wt(u.chartArea,M=>{const C=M.box;Object.assign(C,n.chartArea),C.update(S.w,S.h,{left:0,top:0,right:0,bottom:0})})}};class LA{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}}class AV extends LA{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const wf="$chartjs",xV={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ZT=n=>n===null||n==="";function RV(n,t){const e=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[wf]={initial:{height:i,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",ZT(r)){const o=UT(n,"width");o!==void 0&&(n.width=o)}if(ZT(i))if(n.style.height==="")n.height=n.width/(t||2);else{const o=UT(n,"height");o!==void 0&&(n.height=o)}return n}const UA=kP?{passive:!0}:!1;function IV(n,t,e){n&&n.addEventListener(t,e,UA)}function CV(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,UA)}function MV(n,t){const e=xV[n.type]||n.type,{x:i,y:r}=Ta(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function sd(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function DV(n,t,e){const i=n.canvas,r=new MutationObserver(o=>{let c=!1;for(const u of o)c=c||sd(u.addedNodes,i),c=c&&!sd(u.removedNodes,i);c&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function OV(n,t,e){const i=n.canvas,r=new MutationObserver(o=>{let c=!1;for(const u of o)c=c||sd(u.removedNodes,i),c=c&&!sd(u.addedNodes,i);c&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const ou=new Map;let JT=0;function zA(){const n=window.devicePixelRatio;n!==JT&&(JT=n,ou.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function kV(n,t){ou.size||window.addEventListener("resize",zA),ou.set(n,t)}function NV(n){ou.delete(n),ou.size||window.removeEventListener("resize",zA)}function PV(n,t,e){const i=n.canvas,r=i&&ly(i);if(!r)return;const o=bA((u,f)=>{const g=r.clientWidth;e(u,f),g<r.clientWidth&&e()},window),c=new ResizeObserver(u=>{const f=u[0],g=f.contentRect.width,_=f.contentRect.height;g===0&&_===0||o(g,_)});return c.observe(r),kV(n,o),c}function op(n,t,e){e&&e.disconnect(),t==="resize"&&NV(n)}function VV(n,t,e){const i=n.canvas,r=bA(o=>{n.ctx!==null&&e(MV(o,n))},n);return IV(i,t,r),r}class LV extends LA{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(RV(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[wf])return!1;const i=e[wf].initial;["height","width"].forEach(o=>{const c=i[o];qt(c)?e.removeAttribute(o):e.setAttribute(o,c)});const r=i.style||{};return Object.keys(r).forEach(o=>{e.style[o]=r[o]}),e.width=e.width,delete e[wf],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),c={attach:DV,detach:OV,resize:PV}[e]||VV;r[e]=c(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),r=i[e];if(!r)return;({attach:op,detach:op,resize:op}[e]||CV)(t,e,r),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return OP(t,e,i,r)}isAttached(t){const e=t&&ly(t);return!!(e&&e.isConnected)}}function UV(n){return!oy()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?AV:LV}class Ua{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Jf(this.x)&&Jf(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const r={};return t.forEach(o=>{r[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),r}}function zV(n,t){const e=n.options.ticks,i=BV(n),r=Math.min(e.maxTicksLimit||i,i),o=e.major.enabled?FV(t):[],c=o.length,u=o[0],f=o[c-1],g=[];if(c>r)return HV(t,g,o,c/r),g;const _=jV(o,t,r);if(c>0){let y,b;const S=c>1?Math.round((f-u)/(c-1)):null;for(sf(t,g,_,qt(S)?0:u-S,u),y=0,b=c-1;y<b;y++)sf(t,g,_,o[y],o[y+1]);return sf(t,g,_,f,qt(S)?t.length:f+S),g}return sf(t,g,_),g}function BV(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),r=n._maxLength/e;return Math.floor(Math.min(i,r))}function jV(n,t,e){const i=qV(n),r=t.length/e;if(!i)return Math.max(r,1);const o=FN(i);for(let c=0,u=o.length-1;c<u;c++){const f=o[c];if(f>r)return f}return Math.max(r,1)}function FV(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function HV(n,t,e,i){let r=0,o=e[0],c;for(i=Math.ceil(i),c=0;c<n.length;c++)c===o&&(t.push(n[c]),r++,o=e[r*i])}function sf(n,t,e,i,r){const o=jt(i,0),c=Math.min(jt(r,n.length),n.length);let u=0,f,g,_;for(e=Math.ceil(e),r&&(f=r-i,e=f/Math.floor(f/e)),_=o;_<0;)u++,_=Math.round(o+u*e);for(g=Math.max(o,0);g<c;g++)g===_&&(t.push(n[g]),u++,_=Math.round(o+u*e))}function qV(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const GV=n=>n==="left"?"right":n==="right"?"left":n,tS=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,eS=(n,t)=>Math.min(t||n,n);function nS(n,t){const e=[],i=n.length/t,r=n.length;let o=0;for(;o<r;o+=i)e.push(n[Math.floor(o)]);return e}function YV(n,t,e){const i=n.ticks.length,r=Math.min(t,i-1),o=n._startPixel,c=n._endPixel,u=1e-6;let f=n.getPixelForTick(r),g;if(!(e&&(i===1?g=Math.max(f-o,c-f):t===0?g=(n.getPixelForTick(1)-f)/2:g=(f-n.getPixelForTick(r-1))/2,f+=r<t?g:-g,f<o-u||f>c+u)))return f}function KV(n,t){Wt(n,e=>{const i=e.gc,r=i.length/2;let o;if(r>t){for(o=0;o<r;++o)delete e.data[i[o]];i.splice(0,r)}})}function Ac(n){return n.drawTicks?n.tickLength:0}function iS(n,t){if(!n.display)return 0;const e=gn(n.font,t),i=ti(n.padding);return(Le(n.text)?n.text.length:1)*e.lineHeight+i.height}function WV(n,t){return cl(n,{scale:t,type:"scale"})}function QV(n,t,e){return cl(n,{tick:e,index:t,type:"tick"})}function XV(n,t,e){let i=EA(n);return(e&&t!=="right"||!e&&t==="right")&&(i=GV(i)),i}function $V(n,t,e,i){const{top:r,left:o,bottom:c,right:u,chart:f}=n,{chartArea:g,scales:_}=f;let y=0,b,S,R;const M=c-r,C=u-o;if(n.isHorizontal()){if(S=kn(i,o,u),Ft(e)){const z=Object.keys(e)[0],F=e[z];R=_[z].getPixelForValue(F)+M-t}else e==="center"?R=(g.bottom+g.top)/2+M-t:R=tS(n,e,t);b=u-o}else{if(Ft(e)){const z=Object.keys(e)[0],F=e[z];S=_[z].getPixelForValue(F)-C+t}else e==="center"?S=(g.left+g.right)/2-C+t:S=tS(n,e,t);R=kn(i,c,r),y=e==="left"?-Ue:Ue}return{titleX:S,titleY:R,maxWidth:b,rotation:y}}class ul extends Ua{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=Ci(t,Number.POSITIVE_INFINITY),e=Ci(e,Number.NEGATIVE_INFINITY),i=Ci(i,Number.POSITIVE_INFINITY),r=Ci(r,Number.NEGATIVE_INFINITY),{min:Ci(t,i),max:Ci(e,r),minDefined:Jn(t),maxDefined:Jn(e)}}getMinMax(t){let{min:e,max:i,minDefined:r,maxDefined:o}=this.getUserBounds(),c;if(r&&o)return{min:e,max:i};const u=this.getMatchingVisibleMetas();for(let f=0,g=u.length;f<g;++f)c=u[f].controller.getMinMax(this,t),r||(e=Math.min(e,c.min)),o||(i=Math.max(i,c.max));return e=o&&e>i?i:e,i=r&&e>i?e:i,{min:Ci(e,Ci(i,e)),max:Ci(i,Ci(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){se(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:r,grace:o,ticks:c}=this.options,u=c.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=_P(this,o,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const f=u<this.ticks.length;this._convertTicksToLabels(f?nS(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=zV(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),f&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){se(this.options.afterUpdate,[this])}beforeSetDimensions(){se(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){se(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),se(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){se(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,r,o;for(i=0,r=t.length;i<r;i++)o=t[i],o.label=se(e.callback,[o.value,i,t],this)}afterTickToLabelConversion(){se(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){se(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=eS(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,o=e.maxRotation;let c=r,u,f,g;if(!this._isVisible()||!e.display||r>=o||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const _=this._getLabelSizes(),y=_.widest.width,b=_.highest.height,S=Sn(this.chart.width-y,0,this.maxWidth);u=t.offset?this.maxWidth/i:S/(i-1),y+6>u&&(u=S/(i-(t.offset?.5:1)),f=this.maxHeight-Ac(t.grid)-e.padding-iS(t.title,this.chart.options.font),g=Math.sqrt(y*y+b*b),c=YN(Math.min(Math.asin(Sn((_.highest.height+6)/u,-1,1)),Math.asin(Sn(f/g,-1,1))-Math.asin(Sn(b/g,-1,1)))),c=Math.max(r,Math.min(o,c))),this.labelRotation=c}afterCalculateLabelRotation(){se(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){se(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:o}}=this,c=this._isVisible(),u=this.isHorizontal();if(c){const f=iS(r,e.options.font);if(u?(t.width=this.maxWidth,t.height=Ac(o)+f):(t.height=this.maxHeight,t.width=Ac(o)+f),i.display&&this.ticks.length){const{first:g,last:_,widest:y,highest:b}=this._getLabelSizes(),S=i.padding*2,R=bs(this.labelRotation),M=Math.cos(R),C=Math.sin(R);if(u){const z=i.mirror?0:C*y.width+M*b.height;t.height=Math.min(this.maxHeight,t.height+z+S)}else{const z=i.mirror?0:M*y.width+C*b.height;t.width=Math.min(this.maxWidth,t.width+z+S)}this._calculatePadding(g,_,C,M)}}this._handleMargins(),u?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){const{ticks:{align:o,padding:c},position:u}=this.options,f=this.labelRotation!==0,g=u!=="top"&&this.axis==="x";if(this.isHorizontal()){const _=this.getPixelForTick(0)-this.left,y=this.right-this.getPixelForTick(this.ticks.length-1);let b=0,S=0;f?g?(b=r*t.width,S=i*e.height):(b=i*t.height,S=r*e.width):o==="start"?S=e.width:o==="end"?b=t.width:o!=="inner"&&(b=t.width/2,S=e.width/2),this.paddingLeft=Math.max((b-_+c)*this.width/(this.width-_),0),this.paddingRight=Math.max((S-y+c)*this.width/(this.width-y),0)}else{let _=e.height/2,y=t.height/2;o==="start"?(_=0,y=t.height):o==="end"&&(_=e.height,y=0),this.paddingTop=_+c,this.paddingBottom=y+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){se(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)qt(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=nS(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:r,_longestTextCache:o}=this,c=[],u=[],f=Math.floor(e/eS(e,i));let g=0,_=0,y,b,S,R,M,C,z,F,X,$,W;for(y=0;y<e;y+=f){if(R=t[y].label,M=this._resolveTickFontOptions(y),r.font=C=M.string,z=o[C]=o[C]||{data:{},gc:[]},F=M.lineHeight,X=$=0,!qt(R)&&!Le(R))X=kT(r,z.data,z.gc,X,R),$=F;else if(Le(R))for(b=0,S=R.length;b<S;++b)W=R[b],!qt(W)&&!Le(W)&&(X=kT(r,z.data,z.gc,X,W),$+=F);c.push(X),u.push($),g=Math.max(X,g),_=Math.max($,_)}KV(o,e);const ot=c.indexOf(g),D=u.indexOf(_),x=I=>({width:c[I]||0,height:u[I]||0});return{first:x(0),last:x(e-1),widest:x(ot),highest:x(D),widths:c,heights:u}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return WN(this._alignToPixels?va(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=QV(this.getContext(),t,i))}return this.$context||(this.$context=WV(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=bs(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),o=this._getLabelSizes(),c=t.autoSkipPadding||0,u=o?o.widest.width+c:0,f=o?o.highest.height+c:0;return this.isHorizontal()?f*i>u*r?u/i:f/r:f*r<u*i?f/i:u/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,r=this.options,{grid:o,position:c,border:u}=r,f=o.offset,g=this.isHorizontal(),y=this.ticks.length+(f?1:0),b=Ac(o),S=[],R=u.setContext(this.getContext()),M=R.display?R.width:0,C=M/2,z=function(K){return va(i,K,M)};let F,X,$,W,ot,D,x,I,N,P,L,O;if(c==="top")F=z(this.bottom),D=this.bottom-b,I=F-C,P=z(t.top)+C,O=t.bottom;else if(c==="bottom")F=z(this.top),P=t.top,O=z(t.bottom)-C,D=F+C,I=this.top+b;else if(c==="left")F=z(this.right),ot=this.right-b,x=F-C,N=z(t.left)+C,L=t.right;else if(c==="right")F=z(this.left),N=t.left,L=z(t.right)-C,ot=F+C,x=this.left+b;else if(e==="x"){if(c==="center")F=z((t.top+t.bottom)/2+.5);else if(Ft(c)){const K=Object.keys(c)[0],rt=c[K];F=z(this.chart.scales[K].getPixelForValue(rt))}P=t.top,O=t.bottom,D=F+C,I=D+b}else if(e==="y"){if(c==="center")F=z((t.left+t.right)/2);else if(Ft(c)){const K=Object.keys(c)[0],rt=c[K];F=z(this.chart.scales[K].getPixelForValue(rt))}ot=F-C,x=ot-b,N=t.left,L=t.right}const Gt=jt(r.ticks.maxTicksLimit,y),yt=Math.max(1,Math.ceil(y/Gt));for(X=0;X<y;X+=yt){const K=this.getContext(X),rt=o.setContext(K),ft=u.setContext(K),St=rt.lineWidth,V=rt.color,st=ft.dash||[],ct=ft.dashOffset,at=rt.tickWidth,gt=rt.tickColor,Rt=rt.tickBorderDash||[],_t=rt.tickBorderDashOffset;$=YV(this,X,f),$!==void 0&&(W=va(i,$,St),g?ot=x=N=L=W:D=I=P=O=W,S.push({tx1:ot,ty1:D,tx2:x,ty2:I,x1:N,y1:P,x2:L,y2:O,width:St,color:V,borderDash:st,borderDashOffset:ct,tickWidth:at,tickColor:gt,tickBorderDash:Rt,tickBorderDashOffset:_t}))}return this._ticksLength=y,this._borderValue=F,S}_computeLabelItems(t){const e=this.axis,i=this.options,{position:r,ticks:o}=i,c=this.isHorizontal(),u=this.ticks,{align:f,crossAlign:g,padding:_,mirror:y}=o,b=Ac(i.grid),S=b+_,R=y?-_:S,M=-bs(this.labelRotation),C=[];let z,F,X,$,W,ot,D,x,I,N,P,L,O="middle";if(r==="top")ot=this.bottom-R,D=this._getXAxisLabelAlignment();else if(r==="bottom")ot=this.top+R,D=this._getXAxisLabelAlignment();else if(r==="left"){const yt=this._getYAxisLabelAlignment(b);D=yt.textAlign,W=yt.x}else if(r==="right"){const yt=this._getYAxisLabelAlignment(b);D=yt.textAlign,W=yt.x}else if(e==="x"){if(r==="center")ot=(t.top+t.bottom)/2+S;else if(Ft(r)){const yt=Object.keys(r)[0],K=r[yt];ot=this.chart.scales[yt].getPixelForValue(K)+S}D=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")W=(t.left+t.right)/2-S;else if(Ft(r)){const yt=Object.keys(r)[0],K=r[yt];W=this.chart.scales[yt].getPixelForValue(K)}D=this._getYAxisLabelAlignment(b).textAlign}e==="y"&&(f==="start"?O="top":f==="end"&&(O="bottom"));const Gt=this._getLabelSizes();for(z=0,F=u.length;z<F;++z){X=u[z],$=X.label;const yt=o.setContext(this.getContext(z));x=this.getPixelForTick(z)+o.labelOffset,I=this._resolveTickFontOptions(z),N=I.lineHeight,P=Le($)?$.length:1;const K=P/2,rt=yt.color,ft=yt.textStrokeColor,St=yt.textStrokeWidth;let V=D;c?(W=x,D==="inner"&&(z===F-1?V=this.options.reverse?"left":"right":z===0?V=this.options.reverse?"right":"left":V="center"),r==="top"?g==="near"||M!==0?L=-P*N+N/2:g==="center"?L=-Gt.highest.height/2-K*N+N:L=-Gt.highest.height+N/2:g==="near"||M!==0?L=N/2:g==="center"?L=Gt.highest.height/2-K*N:L=Gt.highest.height-P*N,y&&(L*=-1),M!==0&&!yt.showLabelBackdrop&&(W+=N/2*Math.sin(M))):(ot=x,L=(1-P)*N/2);let st;if(yt.showLabelBackdrop){const ct=ti(yt.backdropPadding),at=Gt.heights[z],gt=Gt.widths[z];let Rt=L-ct.top,_t=0-ct.left;switch(O){case"middle":Rt-=at/2;break;case"bottom":Rt-=at;break}switch(D){case"center":_t-=gt/2;break;case"right":_t-=gt;break;case"inner":z===F-1?_t-=gt:z>0&&(_t-=gt/2);break}st={left:_t,top:Rt,width:gt+ct.width,height:at+ct.height,color:yt.backdropColor}}C.push({label:$,font:I,textOffset:L,options:{rotation:M,color:rt,strokeColor:ft,strokeWidth:St,textAlign:V,textBaseline:O,translation:[W,ot],backdrop:st}})}return C}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-bs(this.labelRotation))return t==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:r,padding:o}}=this.options,c=this._getLabelSizes(),u=t+o,f=c.widest.width;let g,_;return e==="left"?r?(_=this.right+o,i==="near"?g="left":i==="center"?(g="center",_+=f/2):(g="right",_+=f)):(_=this.right-u,i==="near"?g="right":i==="center"?(g="center",_-=f/2):(g="left",_=this.left)):e==="right"?r?(_=this.left+o,i==="near"?g="right":i==="center"?(g="center",_-=f/2):(g="left",_-=f)):(_=this.left+u,i==="near"?g="left":i==="center"?(g="center",_+=f/2):(g="right",_=this.right)):g="right",{textAlign:g,x:_}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:r,width:o,height:c}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,o,c),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(o=>o.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,c;const u=(f,g,_)=>{!_.width||!_.color||(i.save(),i.lineWidth=_.width,i.strokeStyle=_.color,i.setLineDash(_.borderDash||[]),i.lineDashOffset=_.borderDashOffset,i.beginPath(),i.moveTo(f.x,f.y),i.lineTo(g.x,g.y),i.stroke(),i.restore())};if(e.display)for(o=0,c=r.length;o<c;++o){const f=r[o];e.drawOnChartArea&&u({x:f.x1,y:f.y1},{x:f.x2,y:f.y2},f),e.drawTicks&&u({x:f.tx1,y:f.ty1},{x:f.tx2,y:f.ty2},{color:f.tickColor,width:f.tickWidth,borderDash:f.tickBorderDash,borderDashOffset:f.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:r}}=this,o=i.setContext(this.getContext()),c=i.display?o.width:0;if(!c)return;const u=r.setContext(this.getContext(0)).lineWidth,f=this._borderValue;let g,_,y,b;this.isHorizontal()?(g=va(t,this.left,c)-c/2,_=va(t,this.right,u)+u/2,y=b=f):(y=va(t,this.top,c)-c/2,b=va(t,this.bottom,u)+u/2,g=_=f),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(g,y),e.lineTo(_,b),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&ey(i,r);const o=this.getLabelItems(t);for(const c of o){const u=c.options,f=c.font,g=c.label,_=c.textOffset;ed(i,g,0,_,f,u)}r&&ny(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:r}}=this;if(!i.display)return;const o=gn(i.font),c=ti(i.padding),u=i.align;let f=o.lineHeight/2;e==="bottom"||e==="center"||Ft(e)?(f+=c.bottom,Le(i.text)&&(f+=o.lineHeight*(i.text.length-1))):f+=c.top;const{titleX:g,titleY:_,maxWidth:y,rotation:b}=$V(this,f,e,u);ed(t,i.text,0,0,o,{color:i.color,maxWidth:y,rotation:b,textAlign:XV(u,e,r),textBaseline:"middle",translation:[g,_]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=jt(t.grid&&t.grid.z,-1),r=jt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==ul.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let o,c;for(o=0,c=e.length;o<c;++o){const u=e[o];u[i]===this.id&&(!t||u.type===t)&&r.push(u)}return r}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return gn(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class rf{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;t4(e)&&(i=this.register(e));const r=this.items,o=t.id,c=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in r||(r[o]=t,ZV(t,c,i),this.override&&ye.override(t.id,t.overrides)),c}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in ye[r]&&(delete ye[r][i],this.override&&delete Na[i])}}function ZV(n,t,e){const i=ji(Object.create(null),[e?ye.get(e):{},ye.get(t),n.defaults]);ye.set(t,i),n.defaultRoutes&&JV(t,n.defaultRoutes),n.descriptors&&ye.describe(t,n.descriptors)}function JV(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),r=i.pop(),o=[n].concat(i).join("."),c=t[e].split("."),u=c.pop(),f=c.join(".");ye.route(o,r,f,u)})}function t4(n){return"id"in n&&"defaults"in n}class e4{constructor(){this.controllers=new rf(cy,"datasets",!0),this.elements=new rf(Ua,"elements"),this.plugins=new rf(Object,"plugins"),this.scales=new rf(ul,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(r=>{const o=i||this._getRegistryForType(r);i||o.isForType(r)||o===this.plugins&&r.id?this._exec(t,o,r):Wt(r,c=>{const u=i||this._getRegistryForType(c);this._exec(t,u,c)})})}_exec(t,e,i){const r=$_(t);se(i["before"+r],[],i),e[t](i),se(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const r=e.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var Di=new e4;class n4{constructor(){this._init=[]}notify(t,e,i,r){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=r?this._descriptors(t).filter(r):this._descriptors(t),c=this._notify(o,t,e,i);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),c}_notify(t,e,i,r){r=r||{};for(const o of t){const c=o.plugin,u=c[i],f=[e,r,o.options];if(se(u,f,c)===!1&&r.cancelable)return!1}return!0}invalidate(){qt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,r=jt(i.options&&i.options.plugins,{}),o=i4(i);return r===!1&&!e?[]:r4(t,o,r,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,r=(o,c)=>o.filter(u=>!c.some(f=>u.plugin.id===f.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}}function i4(n){const t={},e=[],i=Object.keys(Di.plugins.items);for(let o=0;o<i.length;o++)e.push(Di.getPlugin(i[o]));const r=n.plugins||[];for(let o=0;o<r.length;o++){const c=r[o];e.indexOf(c)===-1&&(e.push(c),t[c.id]=!0)}return{plugins:e,localIds:t}}function s4(n,t){return!t&&n===!1?null:n===!0?{}:n}function r4(n,{plugins:t,localIds:e},i,r){const o=[],c=n.getContext();for(const u of t){const f=u.id,g=s4(i[f],r);g!==null&&o.push({plugin:u,options:a4(n.config,{plugin:u,local:e[f]},g,c)})}return o}function a4(n,{plugin:t,local:e},i,r){const o=n.pluginScopeKeys(t),c=n.getOptionScopes(i,o);return e&&t.defaults&&c.push(t.defaults),n.createResolver(c,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Gp(n,t){const e=ye.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function o4(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function l4(n,t){return n===t?"_index_":"_value_"}function sS(n){if(n==="x"||n==="y"||n==="r")return n}function c4(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Yp(n,...t){if(sS(n))return n;for(const e of t){const i=e.axis||c4(e.position)||n.length>1&&sS(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function rS(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function u4(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return rS(n,"x",e[0])||rS(n,"y",e[0])}return{}}function h4(n,t){const e=Na[n.type]||{scales:{}},i=t.scales||{},r=Gp(n.type,t),o=Object.create(null);return Object.keys(i).forEach(c=>{const u=i[c];if(!Ft(u))return console.error(`Invalid scale configuration for scale: ${c}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);const f=Yp(c,u,u4(c,n),ye.scales[u.type]),g=l4(f,r),_=e.scales||{};o[c]=Hc(Object.create(null),[{axis:f},u,_[f],_[g]])}),n.data.datasets.forEach(c=>{const u=c.type||n.type,f=c.indexAxis||Gp(u,t),_=(Na[u]||{}).scales||{};Object.keys(_).forEach(y=>{const b=o4(y,f),S=c[b+"AxisID"]||b;o[S]=o[S]||Object.create(null),Hc(o[S],[{axis:b},i[S],_[y]])})}),Object.keys(o).forEach(c=>{const u=o[c];Hc(u,[ye.scales[u.type],ye.scale])}),o}function BA(n){const t=n.options||(n.options={});t.plugins=jt(t.plugins,{}),t.scales=h4(n,t)}function jA(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function f4(n){return n=n||{},n.data=jA(n.data),BA(n),n}const aS=new Map,FA=new Set;function af(n,t){let e=aS.get(n);return e||(e=t(),aS.set(n,e),FA.add(e)),e}const xc=(n,t,e)=>{const i=ka(t,e);i!==void 0&&n.add(i)};class d4{constructor(t){this._config=f4(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=jA(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),BA(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return af(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return af(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return af(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return af(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){const{options:r,type:o}=this,c=this._cachedScopes(t,i),u=c.get(e);if(u)return u;const f=new Set;e.forEach(_=>{t&&(f.add(t),_.forEach(y=>xc(f,t,y))),_.forEach(y=>xc(f,r,y)),_.forEach(y=>xc(f,Na[o]||{},y)),_.forEach(y=>xc(f,ye,y)),_.forEach(y=>xc(f,Hp,y))});const g=Array.from(f);return g.length===0&&g.push(Object.create(null)),FA.has(e)&&c.set(e,g),g}chartOptionScopes(){const{options:t,type:e}=this;return[t,Na[e]||{},ye.datasets[e]||{},{type:e},ye,Hp]}resolveNamedOptions(t,e,i,r=[""]){const o={$shared:!0},{resolver:c,subPrefixes:u}=oS(this._resolverCache,t,r);let f=c;if(m4(c,e)){o.$shared=!1,i=Dr(i)?i():i;const g=this.createResolver(t,i,u);f=Jo(c,i,g)}for(const g of e)o[g]=f[g];return o}createResolver(t,e,i=[""],r){const{resolver:o}=oS(this._resolverCache,t,i);return Ft(e)?Jo(o,e,void 0,r):o}}function oS(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const r=e.join();let o=i.get(r);return o||(o={resolver:sy(t,e),subPrefixes:e.filter(u=>!u.toLowerCase().includes("hover"))},i.set(r,o)),o}const g4=n=>Ft(n)&&Object.getOwnPropertyNames(n).some(t=>Dr(n[t]));function m4(n,t){const{isScriptable:e,isIndexable:i}=xA(n);for(const r of t){const o=e(r),c=i(r),u=(c||o)&&n[r];if(o&&(Dr(u)||g4(u))||c&&Le(u))return!0}return!1}var p4="4.5.0";const _4=["top","bottom","left","right","chartArea"];function lS(n,t){return n==="top"||n==="bottom"||_4.indexOf(n)===-1&&t==="x"}function cS(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function uS(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),se(e&&e.onComplete,[n],t)}function y4(n){const t=n.chart,e=t.options.animation;se(e&&e.onProgress,[n],t)}function HA(n){return oy()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Af={},hS=n=>{const t=HA(n);return Object.values(Af).filter(e=>e.canvas===t).pop()};function v4(n,t,e){const i=Object.keys(n);for(const r of i){const o=+r;if(o>=t){const c=n[r];delete n[r],(e>0||o>t)&&(n[o+e]=c)}}}function b4(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}let hl=class{static defaults=ye;static instances=Af;static overrides=Na;static registry=Di;static version=p4;static getChart=hS;static register(...t){Di.add(...t),fS()}static unregister(...t){Di.remove(...t),fS()}constructor(t,e){const i=this.config=new d4(e),r=HA(t),o=hS(r);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const c=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||UV(r)),this.platform.updateConfig(i);const u=this.platform.acquireContext(r,c.aspectRatio),f=u&&u.canvas,g=f&&f.height,_=f&&f.width;if(this.id=NN(),this.ctx=u,this.canvas=f,this.width=_,this.height=g,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new n4,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=ZN(y=>this.update(y),c.resizeDelay||0),this._dataChanges=[],Af[this.id]=this,!u||!f){console.error("Failed to create chart: can't acquire context from the given item");return}ms.listen(this,"complete",uS),ms.listen(this,"progress",y4),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:r,_aspectRatio:o}=this;return qt(t)?e&&o?o:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Di}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():LT(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return NT(this.canvas,this.ctx),this}stop(){return ms.stop(this),this}resize(t,e){ms.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,r=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(r,t,e,o),u=i.devicePixelRatio||this.platform.getDevicePixelRatio(),f=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,LT(this,u,!0)&&(this.notifyPlugins("resize",{size:c}),se(i.onResize,[this,c],this),this.attached&&this._doResize(f)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};Wt(e,(i,r)=>{i.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,r=Object.keys(i).reduce((c,u)=>(c[u]=!1,c),{});let o=[];e&&(o=o.concat(Object.keys(e).map(c=>{const u=e[c],f=Yp(c,u),g=f==="r",_=f==="x";return{options:u,dposition:g?"chartArea":_?"bottom":"left",dtype:g?"radialLinear":_?"category":"linear"}}))),Wt(o,c=>{const u=c.options,f=u.id,g=Yp(f,u),_=jt(u.type,c.dtype);(u.position===void 0||lS(u.position,g)!==lS(c.dposition))&&(u.position=c.dposition),r[f]=!0;let y=null;if(f in i&&i[f].type===_)y=i[f];else{const b=Di.getScale(_);y=new b({id:f,type:_,ctx:this.ctx,chart:this}),i[y.id]=y}y.init(u,t)}),Wt(r,(c,u)=>{c||delete i[u]}),Wt(i,c=>{fr.configure(this,c,c.options),fr.addBox(this,c)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((r,o)=>r.index-o.index),i>e){for(let r=e;r<i;++r)this._destroyDatasetMeta(r);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(cS("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,r)=>{e.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=e.length;i<r;i++){const o=e[i];let c=this.getDatasetMeta(i);const u=o.type||this.config.type;if(c.type&&c.type!==u&&(this._destroyDatasetMeta(i),c=this.getDatasetMeta(i)),c.type=u,c.indexAxis=o.indexAxis||Gp(u,this.options),c.order=o.order||0,c.index=i,c.label=""+o.label,c.visible=this.isDatasetVisible(i),c.controller)c.controller.updateIndex(i),c.controller.linkScales();else{const f=Di.getController(u),{datasetElementType:g,dataElementType:_}=ye.datasets[u];Object.assign(f,{dataElementType:Di.getElement(_),datasetElementType:g&&Di.getElement(g)}),c.controller=new f(this,i),t.push(c.controller)}}return this._updateMetasets(),t}_resetElements(){Wt(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let g=0,_=this.data.datasets.length;g<_;g++){const{controller:y}=this.getDatasetMeta(g),b=!r&&o.indexOf(y)===-1;y.buildOrUpdateElements(b),c=Math.max(+y.getMaxOverflow(),c)}c=this._minPadding=i.layout.autoPadding?c:0,this._updateLayout(c),r||Wt(o,g=>{g.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(cS("z","_idx"));const{_active:u,_lastEvent:f}=this;f?this._eventHandler(f,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){Wt(this.scales,t=>{fr.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!wT(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:o}of e){const c=i==="_removeElements"?-o:o;v4(t,r,c)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=o=>new Set(t.filter(c=>c[0]===o).map((c,u)=>u+","+c.splice(1).join(","))),r=i(0);for(let o=1;o<e;o++)if(!wT(r,i(o)))return;return Array.from(r).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;fr.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],Wt(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,o)=>{r._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,Dr(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),r={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ms.has(this)?this.attached&&!ms.running(this)&&ms.start(this):(this.draw(),uS({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let r,o;for(r=0,o=e.length;r<o;++r){const c=e[r];(!t||c.visible)&&i.push(c)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},r=LP(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&ey(e,r),t.controller.draw(),r&&ny(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return ty(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,r){const o=_V.modes[e];return typeof o=="function"?o(this,t,i,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let r=i.filter(o=>o&&o._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=cl(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const r=i?"show":"hide",o=this.getDatasetMeta(t),c=o.controller._resolveAnimations(void 0,r);au(e)?(o.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),c.update(o,{visible:i}),this.update(u=>u.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),ms.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),NT(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Af[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(o,c)=>{e.addEventListener(this,o,c),t[o]=c},r=(o,c,u)=>{o.offsetX=c,o.offsetY=u,this._eventHandler(o)};Wt(this.options.events,o=>i(o,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(f,g)=>{e.addEventListener(this,f,g),t[f]=g},r=(f,g)=>{t[f]&&(e.removeEventListener(this,f,g),delete t[f])},o=(f,g)=>{this.canvas&&this.resize(f,g)};let c;const u=()=>{r("attach",u),this.attached=!0,this.resize(),i("resize",o),i("detach",c)};c=()=>{this.attached=!1,r("resize",o),this._stop(),this._resize(0,0),i("attach",u)},e.isAttached(this.canvas)?u():c()}unbindEvents(){Wt(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Wt(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const r=i?"set":"remove";let o,c,u,f;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+r+"DatasetHoverStyle"]()),u=0,f=t.length;u<f;++u){c=t[u];const g=c&&this.getDatasetMeta(c.datasetIndex).controller;g&&g[r+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:o,index:c})=>{const u=this.getDatasetMeta(o);if(!u)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:u.data[c],index:c}});!Xf(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const r=this.options.hover,o=(f,g)=>f.filter(_=>!g.some(y=>_.datasetIndex===y.datasetIndex&&_.index===y.index)),c=o(e,t),u=i?t:o(t,e);c.length&&this.updateHoverStyle(c,r.mode,!1),u.length&&r.mode&&this.updateHoverStyle(u,r.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=c=>(c.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const o=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(o||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:r=[],options:o}=this,c=e,u=this._getActiveElements(t,r,i,c),f=BN(t),g=b4(t,this._lastEvent,i,f);i&&(this._lastEvent=null,se(o.onHover,[t,u,this],this),f&&se(o.onClick,[t,u,this],this));const _=!Xf(u,r);return(_||e)&&(this._active=u,this._updateHoverStyles(u,r,e)),this._lastEvent=g,_}_getActiveElements(t,e,i,r){if(t.type==="mouseout")return[];if(!i)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,r)}};function fS(){return Wt(hl.instances,n=>n._plugins.invalidate())}function E4(n,t,e){const{startAngle:i,x:r,y:o,outerRadius:c,innerRadius:u,options:f}=t,{borderWidth:g,borderJoinStyle:_}=f,y=Math.min(g/c,ki(i-e));if(n.beginPath(),n.arc(r,o,c-g/2,i+y/2,e-y/2),u>0){const b=Math.min(g/u,ki(i-e));n.arc(r,o,u+g/2,e-b/2,i+b/2,!0)}else{const b=Math.min(g/2,c*ki(i-e));if(_==="round")n.arc(r,o,b,e-ce/2,i+ce/2,!0);else if(_==="bevel"){const S=2*b*b,R=-S*Math.cos(e+ce/2)+r,M=-S*Math.sin(e+ce/2)+o,C=S*Math.cos(i+ce/2)+r,z=S*Math.sin(i+ce/2)+o;n.lineTo(R,M),n.lineTo(C,z)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function T4(n,t,e){const{startAngle:i,pixelMargin:r,x:o,y:c,outerRadius:u,innerRadius:f}=t;let g=r/u;n.beginPath(),n.arc(o,c,u,i-g,e+g),f>r?(g=r/f,n.arc(o,c,f,e+g,i-g,!0)):n.arc(o,c,r,e+Ue,i-Ue),n.closePath(),n.clip()}function S4(n){return iy(n,["outerStart","outerEnd","innerStart","innerEnd"])}function w4(n,t,e,i){const r=S4(n.options.borderRadius),o=(e-t)/2,c=Math.min(o,i*t/2),u=f=>{const g=(e-Math.min(o,f))*i/2;return Sn(f,0,Math.min(o,g))};return{outerStart:u(r.outerStart),outerEnd:u(r.outerEnd),innerStart:Sn(r.innerStart,0,c),innerEnd:Sn(r.innerEnd,0,c)}}function ko(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function rd(n,t,e,i,r,o){const{x:c,y:u,startAngle:f,pixelMargin:g,innerRadius:_}=t,y=Math.max(t.outerRadius+i+e-g,0),b=_>0?_+i+e+g:0;let S=0;const R=r-f;if(i){const yt=_>0?_-i:0,K=y>0?y-i:0,rt=(yt+K)/2,ft=rt!==0?R*rt/(rt+i):R;S=(R-ft)/2}const M=Math.max(.001,R*y-e/ce)/y,C=(R-M)/2,z=f+C+S,F=r-C-S,{outerStart:X,outerEnd:$,innerStart:W,innerEnd:ot}=w4(t,b,y,F-z),D=y-X,x=y-$,I=z+X/D,N=F-$/x,P=b+W,L=b+ot,O=z+W/P,Gt=F-ot/L;if(n.beginPath(),o){const yt=(I+N)/2;if(n.arc(c,u,y,I,yt),n.arc(c,u,y,yt,N),$>0){const St=ko(x,N,c,u);n.arc(St.x,St.y,$,N,F+Ue)}const K=ko(L,F,c,u);if(n.lineTo(K.x,K.y),ot>0){const St=ko(L,Gt,c,u);n.arc(St.x,St.y,ot,F+Ue,Gt+Math.PI)}const rt=(F-ot/b+(z+W/b))/2;if(n.arc(c,u,b,F-ot/b,rt,!0),n.arc(c,u,b,rt,z+W/b,!0),W>0){const St=ko(P,O,c,u);n.arc(St.x,St.y,W,O+Math.PI,z-Ue)}const ft=ko(D,z,c,u);if(n.lineTo(ft.x,ft.y),X>0){const St=ko(D,I,c,u);n.arc(St.x,St.y,X,z-Ue,I)}}else{n.moveTo(c,u);const yt=Math.cos(I)*y+c,K=Math.sin(I)*y+u;n.lineTo(yt,K);const rt=Math.cos(N)*y+c,ft=Math.sin(N)*y+u;n.lineTo(rt,ft)}n.closePath()}function A4(n,t,e,i,r){const{fullCircles:o,startAngle:c,circumference:u}=t;let f=t.endAngle;if(o){rd(n,t,e,i,f,r);for(let g=0;g<o;++g)n.fill();isNaN(u)||(f=c+(u%De||De))}return rd(n,t,e,i,f,r),n.fill(),f}function x4(n,t,e,i,r){const{fullCircles:o,startAngle:c,circumference:u,options:f}=t,{borderWidth:g,borderJoinStyle:_,borderDash:y,borderDashOffset:b,borderRadius:S}=f,R=f.borderAlign==="inner";if(!g)return;n.setLineDash(y||[]),n.lineDashOffset=b,R?(n.lineWidth=g*2,n.lineJoin=_||"round"):(n.lineWidth=g,n.lineJoin=_||"bevel");let M=t.endAngle;if(o){rd(n,t,e,i,M,r);for(let C=0;C<o;++C)n.stroke();isNaN(u)||(M=c+(u%De||De))}R&&T4(n,t,M),f.selfJoin&&M-c>=ce&&S===0&&_!=="miter"&&E4(n,t,M),o||(rd(n,t,e,i,M,r),n.stroke())}class qA extends Ua{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){const r=this.getProps(["x","y"],i),{angle:o,distance:c}=pA(r,{x:t,y:e}),{startAngle:u,endAngle:f,innerRadius:g,outerRadius:_,circumference:y}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),b=(this.options.spacing+this.options.borderWidth)/2,S=jt(y,f-u),R=td(o,u,f)&&u!==f,M=S>=De||R,C=wa(c,g+b,_+b);return M&&C}getCenterPoint(t){const{x:e,y:i,startAngle:r,endAngle:o,innerRadius:c,outerRadius:u}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:f,spacing:g}=this.options,_=(r+o)/2,y=(c+u+g+f)/2;return{x:e+Math.cos(_)*y,y:i+Math.sin(_)*y}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:i}=this,r=(e.offset||0)/4,o=(e.spacing||0)/2,c=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=i>De?Math.floor(i/De):0,i===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const u=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(u)*r,Math.sin(u)*r);const f=1-Math.sin(Math.min(ce,i||0)),g=r*f;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,A4(t,this,g,o,c),x4(t,this,g,o,c),t.restore()}}function dS(n,t,e,i){const r=n.options,{[e]:o}=n.getProps([e],i);return Math.abs(t-o)<r.radius+r.hitRadius}class R4 extends Ua{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){const r=this.options,{x:o,y:c}=this.getProps(["x","y"],i);return Math.pow(t-o,2)+Math.pow(e-c,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,e){return dS(this,t,"x",e)}inYRange(t,e){return dS(this,t,"y",e)}getCenterPoint(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){t=t||this.options||{};let e=t.radius||0;e=Math.max(e,e&&t.hoverRadius||0);const i=e&&t.borderWidth||0;return(e+i)*2}draw(t,e){const i=this.options;this.skip||i.radius<.1||!ty(this,e,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,qp(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function GA(n,t){const{x:e,y:i,base:r,width:o,height:c}=n.getProps(["x","y","base","width","height"],t);let u,f,g,_,y;return n.horizontal?(y=c/2,u=Math.min(e,r),f=Math.max(e,r),g=i-y,_=i+y):(y=o/2,u=e-y,f=e+y,g=Math.min(i,r),_=Math.max(i,r)),{left:u,top:g,right:f,bottom:_}}function dr(n,t,e,i){return n?0:Sn(t,e,i)}function I4(n,t,e){const i=n.options.borderWidth,r=n.borderSkipped,o=AA(i);return{t:dr(r.top,o.top,0,e),r:dr(r.right,o.right,0,t),b:dr(r.bottom,o.bottom,0,e),l:dr(r.left,o.left,0,t)}}function C4(n,t,e){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,o=qo(r),c=Math.min(t,e),u=n.borderSkipped,f=i||Ft(r);return{topLeft:dr(!f||u.top||u.left,o.topLeft,0,c),topRight:dr(!f||u.top||u.right,o.topRight,0,c),bottomLeft:dr(!f||u.bottom||u.left,o.bottomLeft,0,c),bottomRight:dr(!f||u.bottom||u.right,o.bottomRight,0,c)}}function M4(n){const t=GA(n),e=t.right-t.left,i=t.bottom-t.top,r=I4(n,e/2,i/2),o=C4(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:o},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,o.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(r.b,r.r))}}}}function lp(n,t,e,i){const r=t===null,o=e===null,u=n&&!(r&&o)&&GA(n,i);return u&&(r||wa(t,u.left,u.right))&&(o||wa(e,u.top,u.bottom))}function D4(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function O4(n,t){n.rect(t.x,t.y,t.w,t.h)}function cp(n,t,e={}){const i=n.x!==e.x?-t:0,r=n.y!==e.y?-t:0,o=(n.x+n.w!==e.x+e.w?t:0)-i,c=(n.y+n.h!==e.y+e.h?t:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+o,h:n.h+c,radius:n.radius}}class hy extends Ua{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:r}}=this,{inner:o,outer:c}=M4(this),u=D4(c.radius)?nd:O4;t.save(),(c.w!==o.w||c.h!==o.h)&&(t.beginPath(),u(t,cp(c,e,o)),t.clip(),u(t,cp(o,-e,c)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),u(t,cp(o,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,i){return lp(this,t,e,i)}inXRange(t,e){return lp(this,t,null,e)}inYRange(t,e){return lp(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:r,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(e+r)/2:e,y:o?i:(i+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}const gS=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},k4=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class mS extends Ua{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=se(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,r=gn(i.font),o=r.size,c=this._computeTitleHeight(),{boxWidth:u,itemHeight:f}=gS(i,o);let g,_;e.font=r.string,this.isHorizontal()?(g=this.maxWidth,_=this._fitRows(c,o,u,f)+10):(_=this.maxHeight,g=this._fitCols(c,r,u,f)+10),this.width=Math.min(g,t.maxWidth||this.maxWidth),this.height=Math.min(_,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,r){const{ctx:o,maxWidth:c,options:{labels:{padding:u}}}=this,f=this.legendHitBoxes=[],g=this.lineWidths=[0],_=r+u;let y=t;o.textAlign="left",o.textBaseline="middle";let b=-1,S=-_;return this.legendItems.forEach((R,M)=>{const C=i+e/2+o.measureText(R.text).width;(M===0||g[g.length-1]+C+2*u>c)&&(y+=_,g[g.length-(M>0?0:1)]=0,S+=_,b++),f[M]={left:0,top:S,row:b,width:C,height:r},g[g.length-1]+=C+u}),y}_fitCols(t,e,i,r){const{ctx:o,maxHeight:c,options:{labels:{padding:u}}}=this,f=this.legendHitBoxes=[],g=this.columnSizes=[],_=c-t;let y=u,b=0,S=0,R=0,M=0;return this.legendItems.forEach((C,z)=>{const{itemWidth:F,itemHeight:X}=N4(i,e,o,C,r);z>0&&S+X+2*u>_&&(y+=b+u,g.push({width:b,height:S}),R+=b+u,M++,b=S=0),f[z]={left:R,top:S,col:M,width:F,height:X},b=Math.max(b,F),S+=X+u}),y+=b,g.push({width:b,height:S}),y}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:o}}=this,c=Go(o,this.left,this.width);if(this.isHorizontal()){let u=0,f=kn(i,this.left+r,this.right-this.lineWidths[u]);for(const g of e)u!==g.row&&(u=g.row,f=kn(i,this.left+r,this.right-this.lineWidths[u])),g.top+=this.top+t+r,g.left=c.leftForLtr(c.x(f),g.width),f+=g.width+r}else{let u=0,f=kn(i,this.top+t+r,this.bottom-this.columnSizes[u].height);for(const g of e)g.col!==u&&(u=g.col,f=kn(i,this.top+t+r,this.bottom-this.columnSizes[u].height)),g.top=f,g.left+=this.left+r,g.left=c.leftForLtr(c.x(g.left),g.width),f+=g.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;ey(t,this),this._draw(),ny(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:r}=this,{align:o,labels:c}=t,u=ye.color,f=Go(t.rtl,this.left,this.width),g=gn(c.font),{padding:_}=c,y=g.size,b=y/2;let S;this.drawTitle(),r.textAlign=f.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=g.string;const{boxWidth:R,boxHeight:M,itemHeight:C}=gS(c,y),z=function(ot,D,x){if(isNaN(R)||R<=0||isNaN(M)||M<0)return;r.save();const I=jt(x.lineWidth,1);if(r.fillStyle=jt(x.fillStyle,u),r.lineCap=jt(x.lineCap,"butt"),r.lineDashOffset=jt(x.lineDashOffset,0),r.lineJoin=jt(x.lineJoin,"miter"),r.lineWidth=I,r.strokeStyle=jt(x.strokeStyle,u),r.setLineDash(jt(x.lineDash,[])),c.usePointStyle){const N={radius:M*Math.SQRT2/2,pointStyle:x.pointStyle,rotation:x.rotation,borderWidth:I},P=f.xPlus(ot,R/2),L=D+b;wA(r,N,P,L,c.pointStyleWidth&&R)}else{const N=D+Math.max((y-M)/2,0),P=f.leftForLtr(ot,R),L=qo(x.borderRadius);r.beginPath(),Object.values(L).some(O=>O!==0)?nd(r,{x:P,y:N,w:R,h:M,radius:L}):r.rect(P,N,R,M),r.fill(),I!==0&&r.stroke()}r.restore()},F=function(ot,D,x){ed(r,x.text,ot,D+C/2,g,{strikethrough:x.hidden,textAlign:f.textAlign(x.textAlign)})},X=this.isHorizontal(),$=this._computeTitleHeight();X?S={x:kn(o,this.left+_,this.right-i[0]),y:this.top+_+$,line:0}:S={x:this.left+_,y:kn(o,this.top+$+_,this.bottom-e[0].height),line:0},MA(this.ctx,t.textDirection);const W=C+_;this.legendItems.forEach((ot,D)=>{r.strokeStyle=ot.fontColor,r.fillStyle=ot.fontColor;const x=r.measureText(ot.text).width,I=f.textAlign(ot.textAlign||(ot.textAlign=c.textAlign)),N=R+b+x;let P=S.x,L=S.y;f.setWidth(this.width),X?D>0&&P+N+_>this.right&&(L=S.y+=W,S.line++,P=S.x=kn(o,this.left+_,this.right-i[S.line])):D>0&&L+W>this.bottom&&(P=S.x=P+e[S.line].width+_,S.line++,L=S.y=kn(o,this.top+$+_,this.bottom-e[S.line].height));const O=f.x(P);if(z(O,L,ot),P=JN(I,P+R+b,X?P+N:this.right,t.rtl),F(f.x(P),L,ot),X)S.x+=N+_;else if(typeof ot.text!="string"){const Gt=g.lineHeight;S.y+=YA(ot,Gt)+_}else S.y+=W}),DA(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=gn(e.font),r=ti(e.padding);if(!e.display)return;const o=Go(t.rtl,this.left,this.width),c=this.ctx,u=e.position,f=i.size/2,g=r.top+f;let _,y=this.left,b=this.width;if(this.isHorizontal())b=Math.max(...this.lineWidths),_=this.top+g,y=kn(t.align,y,this.right-b);else{const R=this.columnSizes.reduce((M,C)=>Math.max(M,C.height),0);_=g+kn(t.align,this.top,this.bottom-R-t.labels.padding-this._computeTitleHeight())}const S=kn(u,y,y+b);c.textAlign=o.textAlign(EA(u)),c.textBaseline="middle",c.strokeStyle=e.color,c.fillStyle=e.color,c.font=i.string,ed(c,e.text,S,_,i)}_computeTitleHeight(){const t=this.options.title,e=gn(t.font),i=ti(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,o;if(wa(t,this.left,this.right)&&wa(e,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(r=o[i],wa(t,r.left,r.left+r.width)&&wa(e,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!L4(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,o=k4(r,i);r&&!o&&se(e.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!o&&se(e.onHover,[t,i,this],this)}else i&&se(e.onClick,[t,i,this],this)}}function N4(n,t,e,i,r){const o=P4(i,n,t,e),c=V4(r,i,t.lineHeight);return{itemWidth:o,itemHeight:c}}function P4(n,t,e,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((o,c)=>o.length>c.length?o:c)),t+e.size/2+i.measureText(r).width}function V4(n,t,e){let i=n;return typeof t.text!="string"&&(i=YA(t,e)),i}function YA(n,t){const e=n.text?n.text.length:0;return t*e}function L4(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var fy={id:"legend",_element:mS,start(n,t,e){const i=n.legend=new mS({ctx:n.ctx,options:e,chart:n});fr.configure(n,i,e),fr.addBox(n,i)},stop(n){fr.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;fr.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,r=e.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:r,color:o,useBorderRadius:c,borderRadius:u}}=n.legend.options;return n._getSortedDatasetMetas().map(f=>{const g=f.controller.getStyle(e?0:void 0),_=ti(g.borderWidth);return{text:t[f.index].label,fillStyle:g.backgroundColor,fontColor:o,hidden:!f.visible,lineCap:g.borderCapStyle,lineDash:g.borderDash,lineDashOffset:g.borderDashOffset,lineJoin:g.borderJoinStyle,lineWidth:(_.width+_.height)/4,strokeStyle:g.borderColor,pointStyle:i||g.pointStyle,rotation:g.rotation,textAlign:r||g.textAlign,borderRadius:c&&(u||g.borderRadius),datasetIndex:f.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};const Vc={average(n){if(!n.length)return!1;let t,e,i=new Set,r=0,o=0;for(t=0,e=n.length;t<e;++t){const u=n[t].element;if(u&&u.hasValue()){const f=u.tooltipPosition();i.add(f.x),r+=f.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((u,f)=>u+f)/i.size,y:r/o}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,r=Number.POSITIVE_INFINITY,o,c,u;for(o=0,c=n.length;o<c;++o){const f=n[o].element;if(f&&f.hasValue()){const g=f.getCenterPoint(),_=KN(t,g);_<r&&(r=_,u=f)}}if(u){const f=u.tooltipPosition();e=f.x,i=f.y}return{x:e,y:i}}};function Mi(n,t){return t&&(Le(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function ps(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function U4(n,t){const{element:e,datasetIndex:i,index:r}=t,o=n.getDatasetMeta(i).controller,{label:c,value:u}=o.getLabelAndValue(r);return{chart:n,label:c,parsed:o.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:u,dataset:o.getDataset(),dataIndex:r,datasetIndex:i,element:e}}function pS(n,t){const e=n.chart.ctx,{body:i,footer:r,title:o}=n,{boxWidth:c,boxHeight:u}=t,f=gn(t.bodyFont),g=gn(t.titleFont),_=gn(t.footerFont),y=o.length,b=r.length,S=i.length,R=ti(t.padding);let M=R.height,C=0,z=i.reduce(($,W)=>$+W.before.length+W.lines.length+W.after.length,0);if(z+=n.beforeBody.length+n.afterBody.length,y&&(M+=y*g.lineHeight+(y-1)*t.titleSpacing+t.titleMarginBottom),z){const $=t.displayColors?Math.max(u,f.lineHeight):f.lineHeight;M+=S*$+(z-S)*f.lineHeight+(z-1)*t.bodySpacing}b&&(M+=t.footerMarginTop+b*_.lineHeight+(b-1)*t.footerSpacing);let F=0;const X=function($){C=Math.max(C,e.measureText($).width+F)};return e.save(),e.font=g.string,Wt(n.title,X),e.font=f.string,Wt(n.beforeBody.concat(n.afterBody),X),F=t.displayColors?c+2+t.boxPadding:0,Wt(i,$=>{Wt($.before,X),Wt($.lines,X),Wt($.after,X)}),F=0,e.font=_.string,Wt(n.footer,X),e.restore(),C+=R.width,{width:C,height:M}}function z4(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function B4(n,t,e,i){const{x:r,width:o}=i,c=e.caretSize+e.caretPadding;if(n==="left"&&r+o+c>t.width||n==="right"&&r-o-c<0)return!0}function j4(n,t,e,i){const{x:r,width:o}=e,{width:c,chartArea:{left:u,right:f}}=n;let g="center";return i==="center"?g=r<=(u+f)/2?"left":"right":r<=o/2?g="left":r>=c-o/2&&(g="right"),B4(g,n,t,e)&&(g="center"),g}function _S(n,t,e){const i=e.yAlign||t.yAlign||z4(n,e);return{xAlign:e.xAlign||t.xAlign||j4(n,t,e,i),yAlign:i}}function F4(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function H4(n,t,e){let{y:i,height:r}=n;return t==="top"?i+=e:t==="bottom"?i-=r+e:i-=r/2,i}function yS(n,t,e,i){const{caretSize:r,caretPadding:o,cornerRadius:c}=n,{xAlign:u,yAlign:f}=e,g=r+o,{topLeft:_,topRight:y,bottomLeft:b,bottomRight:S}=qo(c);let R=F4(t,u);const M=H4(t,f,g);return f==="center"?u==="left"?R+=g:u==="right"&&(R-=g):u==="left"?R-=Math.max(_,b)+r:u==="right"&&(R+=Math.max(y,S)+r),{x:Sn(R,0,i.width-t.width),y:Sn(M,0,i.height-t.height)}}function of(n,t,e){const i=ti(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function vS(n){return Mi([],ps(n))}function q4(n,t,e){return cl(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function bS(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const KA={beforeTitle:gs,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:gs,beforeBody:gs,beforeLabel:gs,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return qt(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:gs,afterBody:gs,beforeFooter:gs,footer:gs,afterFooter:gs};function yn(n,t,e,i){const r=n[t].call(e,i);return typeof r>"u"?KA[t].call(e,i):r}class ES extends Ua{static positioners=Vc;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&e.options.animation&&i.animations,o=new OA(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=q4(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,r=yn(i,"beforeTitle",this,t),o=yn(i,"title",this,t),c=yn(i,"afterTitle",this,t);let u=[];return u=Mi(u,ps(r)),u=Mi(u,ps(o)),u=Mi(u,ps(c)),u}getBeforeBody(t,e){return vS(yn(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,r=[];return Wt(t,o=>{const c={before:[],lines:[],after:[]},u=bS(i,o);Mi(c.before,ps(yn(u,"beforeLabel",this,o))),Mi(c.lines,yn(u,"label",this,o)),Mi(c.after,ps(yn(u,"afterLabel",this,o))),r.push(c)}),r}getAfterBody(t,e){return vS(yn(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,r=yn(i,"beforeFooter",this,t),o=yn(i,"footer",this,t),c=yn(i,"afterFooter",this,t);let u=[];return u=Mi(u,ps(r)),u=Mi(u,ps(o)),u=Mi(u,ps(c)),u}_createItems(t){const e=this._active,i=this.chart.data,r=[],o=[],c=[];let u=[],f,g;for(f=0,g=e.length;f<g;++f)u.push(U4(this.chart,e[f]));return t.filter&&(u=u.filter((_,y,b)=>t.filter(_,y,b,i))),t.itemSort&&(u=u.sort((_,y)=>t.itemSort(_,y,i))),Wt(u,_=>{const y=bS(t.callbacks,_);r.push(yn(y,"labelColor",this,_)),o.push(yn(y,"labelPointStyle",this,_)),c.push(yn(y,"labelTextColor",this,_))}),this.labelColors=r,this.labelPointStyles=o,this.labelTextColors=c,this.dataPoints=u,u}update(t,e){const i=this.options.setContext(this.getContext()),r=this._active;let o,c=[];if(!r.length)this.opacity!==0&&(o={opacity:0});else{const u=Vc[i.position].call(this,r,this._eventPosition);c=this._createItems(i),this.title=this.getTitle(c,i),this.beforeBody=this.getBeforeBody(c,i),this.body=this.getBody(c,i),this.afterBody=this.getAfterBody(c,i),this.footer=this.getFooter(c,i);const f=this._size=pS(this,i),g=Object.assign({},u,f),_=_S(this.chart,i,g),y=yS(i,g,_,this.chart);this.xAlign=_.xAlign,this.yAlign=_.yAlign,o={opacity:1,x:y.x,y:y.y,width:f.width,height:f.height,caretX:u.x,caretY:u.y}}this._tooltipItems=c,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,r){const o=this.getCaretPosition(t,i,r);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,i){const{xAlign:r,yAlign:o}=this,{caretSize:c,cornerRadius:u}=i,{topLeft:f,topRight:g,bottomLeft:_,bottomRight:y}=qo(u),{x:b,y:S}=t,{width:R,height:M}=e;let C,z,F,X,$,W;return o==="center"?($=S+M/2,r==="left"?(C=b,z=C-c,X=$+c,W=$-c):(C=b+R,z=C+c,X=$-c,W=$+c),F=C):(r==="left"?z=b+Math.max(f,_)+c:r==="right"?z=b+R-Math.max(g,y)-c:z=this.caretX,o==="top"?(X=S,$=X-c,C=z-c,F=z+c):(X=S+M,$=X+c,C=z+c,F=z-c),W=X),{x1:C,x2:z,x3:F,y1:X,y2:$,y3:W}}drawTitle(t,e,i){const r=this.title,o=r.length;let c,u,f;if(o){const g=Go(i.rtl,this.x,this.width);for(t.x=of(this,i.titleAlign,i),e.textAlign=g.textAlign(i.titleAlign),e.textBaseline="middle",c=gn(i.titleFont),u=i.titleSpacing,e.fillStyle=i.titleColor,e.font=c.string,f=0;f<o;++f)e.fillText(r[f],g.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+u,f+1===o&&(t.y+=i.titleMarginBottom-u)}}_drawColorBox(t,e,i,r,o){const c=this.labelColors[i],u=this.labelPointStyles[i],{boxHeight:f,boxWidth:g}=o,_=gn(o.bodyFont),y=of(this,"left",o),b=r.x(y),S=f<_.lineHeight?(_.lineHeight-f)/2:0,R=e.y+S;if(o.usePointStyle){const M={radius:Math.min(g,f)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},C=r.leftForLtr(b,g)+g/2,z=R+f/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,qp(t,M,C,z),t.strokeStyle=c.borderColor,t.fillStyle=c.backgroundColor,qp(t,M,C,z)}else{t.lineWidth=Ft(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,t.strokeStyle=c.borderColor,t.setLineDash(c.borderDash||[]),t.lineDashOffset=c.borderDashOffset||0;const M=r.leftForLtr(b,g),C=r.leftForLtr(r.xPlus(b,1),g-2),z=qo(c.borderRadius);Object.values(z).some(F=>F!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,nd(t,{x:M,y:R,w:g,h:f,radius:z}),t.fill(),t.stroke(),t.fillStyle=c.backgroundColor,t.beginPath(),nd(t,{x:C,y:R+1,w:g-2,h:f-2,radius:z}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(M,R,g,f),t.strokeRect(M,R,g,f),t.fillStyle=c.backgroundColor,t.fillRect(C,R+1,g-2,f-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:r}=this,{bodySpacing:o,bodyAlign:c,displayColors:u,boxHeight:f,boxWidth:g,boxPadding:_}=i,y=gn(i.bodyFont);let b=y.lineHeight,S=0;const R=Go(i.rtl,this.x,this.width),M=function(x){e.fillText(x,R.x(t.x+S),t.y+b/2),t.y+=b+o},C=R.textAlign(c);let z,F,X,$,W,ot,D;for(e.textAlign=c,e.textBaseline="middle",e.font=y.string,t.x=of(this,C,i),e.fillStyle=i.bodyColor,Wt(this.beforeBody,M),S=u&&C!=="right"?c==="center"?g/2+_:g+2+_:0,$=0,ot=r.length;$<ot;++$){for(z=r[$],F=this.labelTextColors[$],e.fillStyle=F,Wt(z.before,M),X=z.lines,u&&X.length&&(this._drawColorBox(e,t,$,R,i),b=Math.max(y.lineHeight,f)),W=0,D=X.length;W<D;++W)M(X[W]),b=y.lineHeight;Wt(z.after,M)}S=0,b=y.lineHeight,Wt(this.afterBody,M),t.y-=o}drawFooter(t,e,i){const r=this.footer,o=r.length;let c,u;if(o){const f=Go(i.rtl,this.x,this.width);for(t.x=of(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=f.textAlign(i.footerAlign),e.textBaseline="middle",c=gn(i.footerFont),e.fillStyle=i.footerColor,e.font=c.string,u=0;u<o;++u)e.fillText(r[u],f.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+i.footerSpacing}}drawBackground(t,e,i,r){const{xAlign:o,yAlign:c}=this,{x:u,y:f}=t,{width:g,height:_}=i,{topLeft:y,topRight:b,bottomLeft:S,bottomRight:R}=qo(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(u+y,f),c==="top"&&this.drawCaret(t,e,i,r),e.lineTo(u+g-b,f),e.quadraticCurveTo(u+g,f,u+g,f+b),c==="center"&&o==="right"&&this.drawCaret(t,e,i,r),e.lineTo(u+g,f+_-R),e.quadraticCurveTo(u+g,f+_,u+g-R,f+_),c==="bottom"&&this.drawCaret(t,e,i,r),e.lineTo(u+S,f+_),e.quadraticCurveTo(u,f+_,u,f+_-S),c==="center"&&o==="left"&&this.drawCaret(t,e,i,r),e.lineTo(u,f+y),e.quadraticCurveTo(u,f,u+y,f),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,r=i&&i.x,o=i&&i.y;if(r||o){const c=Vc[t.position].call(this,this._active,this._eventPosition);if(!c)return;const u=this._size=pS(this,t),f=Object.assign({},c,this._size),g=_S(e,t,f),_=yS(t,f,g,e);(r._to!==_.x||o._to!==_.y)&&(this.xAlign=g.xAlign,this.yAlign=g.yAlign,this.width=u.width,this.height=u.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,_))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const c=ti(e.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&u&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,r,e),MA(t,e.textDirection),o.y+=c.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),DA(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,r=t.map(({datasetIndex:u,index:f})=>{const g=this.chart.getDatasetMeta(u);if(!g)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:g.data[f],index:f}}),o=!Xf(i,r),c=this._positionChanged(r,e);(o||c)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,o=this._active||[],c=this._getActiveElements(t,o,e,i),u=this._positionChanged(c,t),f=e||!Xf(c,o)||u;return f&&(this._active=c,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),f}_getActiveElements(t,e,i,r){const o=this.options;if(t.type==="mouseout")return[];if(!r)return e.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);const c=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&c.reverse(),c}_positionChanged(t,e){const{caretX:i,caretY:r,options:o}=this,c=Vc[o.position].call(this,t,e);return c!==!1&&(i!==c.x||r!==c.y)}}var dy={id:"tooltip",_element:ES,positioners:Vc,afterInit(n,t,e){e&&(n.tooltip=new ES({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:KA},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const G4=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function Y4(n,t,e,i){const r=n.indexOf(t);if(r===-1)return G4(n,t,e,i);const o=n.lastIndexOf(t);return r!==o?e:r}const K4=(n,t)=>n===null?null:Sn(Math.round(n),0,t);function TS(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class WA extends ul{static id="category";static defaults={ticks:{callback:TS}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:r,label:o}of e)i[r]===o&&i.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(qt(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:Y4(i,t,jt(e,t),this._addedLabels),K4(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,r=[];let o=this.getLabels();o=t===0&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let c=t;c<=e;c++)r.push({value:c});return r}getLabelForValue(t){return TS.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function W4(n,t){const e=[],{bounds:r,step:o,min:c,max:u,precision:f,count:g,maxTicks:_,maxDigits:y,includeBounds:b}=n,S=o||1,R=_-1,{min:M,max:C}=t,z=!qt(c),F=!qt(u),X=!qt(g),$=(C-M)/(y+1);let W=xT((C-M)/R/S)*S,ot,D,x,I;if(W<1e-14&&!z&&!F)return[{value:M},{value:C}];I=Math.ceil(C/W)-Math.floor(M/W),I>R&&(W=xT(I*W/R/S)*S),qt(f)||(ot=Math.pow(10,f),W=Math.ceil(W*ot)/ot),r==="ticks"?(D=Math.floor(M/W)*W,x=Math.ceil(C/W)*W):(D=M,x=C),z&&F&&o&&qN((u-c)/o,W/1e3)?(I=Math.round(Math.min((u-c)/W,_)),W=(u-c)/I,D=c,x=u):X?(D=z?c:D,x=F?u:x,I=g-1,W=(x-D)/I):(I=(x-D)/W,Sf(I,Math.round(I),W/1e3)?I=Math.round(I):I=Math.ceil(I));const N=Math.max(RT(W),RT(D));ot=Math.pow(10,qt(f)?N:f),D=Math.round(D*ot)/ot,x=Math.round(x*ot)/ot;let P=0;for(z&&(b&&D!==c?(e.push({value:c}),D<c&&P++,Sf(Math.round((D+P*W)*ot)/ot,c,SS(c,$,n))&&P++):D<c&&P++);P<I;++P){const L=Math.round((D+P*W)*ot)/ot;if(F&&L>u)break;e.push({value:L})}return F&&b&&x!==u?e.length&&Sf(e[e.length-1].value,u,SS(u,$,n))?e[e.length-1].value=u:e.push({value:u}):(!F||x===u)&&e.push({value:x}),e}function SS(n,t,{horizontal:e,minRotation:i}){const r=bs(i),o=(e?Math.sin(r):Math.cos(r))||.001,c=.75*t*(""+n).length;return Math.min(t/o,c)}class Q4 extends ul{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return qt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:r,max:o}=this;const c=f=>r=e?r:f,u=f=>o=i?o:f;if(t){const f=Tr(r),g=Tr(o);f<0&&g<0?u(0):f>0&&g>0&&c(0)}if(r===o){let f=o===0?1:Math.abs(o*.05);u(o+f),t||c(r-f)}this.min=r,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},o=this._range||this,c=W4(r,o);return t.bounds==="ticks"&&GN(c,this,"value"),t.reverse?(c.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),c}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const r=(i-e)/Math.max(t.length-1,1)/2;e-=r,i+=r}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return J_(t,this.chart.options.locale,this.options.ticks.format)}}class QA extends Q4{static id="linear";static defaults={ticks:{callback:SA.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Jn(t)?t:0,this.max=Jn(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=bs(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const kd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Tn=Object.keys(kd);function wS(n,t){return n-t}function AS(n,t){if(qt(t))return null;const e=n._adapter,{parser:i,round:r,isoWeekday:o}=n._parseOpts;let c=t;return typeof i=="function"&&(c=i(c)),Jn(c)||(c=typeof i=="string"?e.parse(c,i):e.parse(c)),c===null?null:(r&&(c=r==="week"&&(Jf(o)||o===!0)?e.startOf(c,"isoWeek",o):e.startOf(c,r)),+c)}function xS(n,t,e,i){const r=Tn.length;for(let o=Tn.indexOf(n);o<r-1;++o){const c=kd[Tn[o]],u=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((e-t)/(u*c.size))<=i)return Tn[o]}return Tn[r-1]}function X4(n,t,e,i,r){for(let o=Tn.length-1;o>=Tn.indexOf(e);o--){const c=Tn[o];if(kd[c].common&&n._adapter.diff(r,i,c)>=t-1)return c}return Tn[e?Tn.indexOf(e):0]}function $4(n){for(let t=Tn.indexOf(n)+1,e=Tn.length;t<e;++t)if(kd[Tn[t]].common)return Tn[t]}function RS(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:r}=Z_(e,t),o=e[i]>=t?e[i]:e[r];n[o]=!0}}function Z4(n,t,e,i){const r=n._adapter,o=+r.startOf(t[0].value,i),c=t[t.length-1].value;let u,f;for(u=o;u<=c;u=+r.add(u,1,i))f=e[u],f>=0&&(t[f].major=!0);return t}function IS(n,t,e){const i=[],r={},o=t.length;let c,u;for(c=0;c<o;++c)u=t[c],r[u]=c,i.push({value:u,major:!1});return o===0||!e?i:Z4(n,i,r,e)}class CS extends ul{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),r=this._adapter=new fV._date(t.adapters.date);r.init(e),Hc(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:AS(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:r,max:o,minDefined:c,maxDefined:u}=this.getUserBounds();function f(g){!c&&!isNaN(g.min)&&(r=Math.min(r,g.min)),!u&&!isNaN(g.max)&&(o=Math.max(o,g.max))}(!c||!u)&&(f(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&f(this.getMinMax(!1))),r=Jn(r)&&!isNaN(r)?r:+e.startOf(Date.now(),i),o=Jn(o)&&!isNaN(o)?o:+e.endOf(Date.now(),i)+1,this.min=Math.min(r,o-1),this.max=Math.max(r+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const o=this.min,c=this.max,u=XN(r,o,c);return this._unit=e.unit||(i.autoSkip?xS(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):X4(this,u.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:$4(this._unit),this.initOffsets(r),t.reverse&&u.reverse(),IS(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,r,o;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?e=1-r:e=(this.getDecimalForValue(t[1])-r)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?i=o:i=(o-this.getDecimalForValue(t[t.length-2]))/2);const c=t.length<3?.5:.25;e=Sn(e,0,c),i=Sn(i,0,c),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,r=this.options,o=r.time,c=o.unit||xS(o.minUnit,e,i,this._getLabelCapacity(e)),u=jt(r.ticks.stepSize,1),f=c==="week"?o.isoWeekday:!1,g=Jf(f)||f===!0,_={};let y=e,b,S;if(g&&(y=+t.startOf(y,"isoWeek",f)),y=+t.startOf(y,g?"day":c),t.diff(i,e,c)>1e5*u)throw new Error(e+" and "+i+" are too far apart with stepSize of "+u+" "+c);const R=r.ticks.source==="data"&&this.getDataTimestamps();for(b=y,S=0;b<i;b=+t.add(b,u,c),S++)RS(_,b,R);return(b===i||r.bounds==="ticks"||S===1)&&RS(_,b,R),Object.keys(_).sort(wS).map(M=>+M)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const r=this.options.time.displayFormats,o=this._unit,c=e||r[o];return this._adapter.format(t,c)}_tickFormatFunction(t,e,i,r){const o=this.options,c=o.ticks.callback;if(c)return se(c,[t,e,i],this);const u=o.time.displayFormats,f=this._unit,g=this._majorUnit,_=f&&u[f],y=g&&u[g],b=i[e],S=g&&y&&b&&b.major;return this._adapter.format(t,r||(S?y:_))}generateTickLabels(t){let e,i,r;for(e=0,i=t.length;e<i;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,r=bs(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(r),c=Math.sin(r),u=this._resolveTickFontOptions(0).size;return{w:i*o+u*c,h:i*c+u*o}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,r=i[e.unit]||i.millisecond,o=this._tickFormatFunction(t,0,IS(this,[t],this._majorUnit),r),c=this._getLabelSize(o),u=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return u>0?u:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,i=r.length;e<i;++e)t=t.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const r=this.getLabels();for(e=0,i=r.length;e<i;++e)t.push(AS(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return yA(t.sort(wS))}}function lf(n,t,e){let i=0,r=n.length-1,o,c,u,f;e?(t>=n[i].pos&&t<=n[r].pos&&({lo:i,hi:r}=Fp(n,"pos",t)),{pos:o,time:u}=n[i],{pos:c,time:f}=n[r]):(t>=n[i].time&&t<=n[r].time&&({lo:i,hi:r}=Fp(n,"time",t)),{time:o,pos:u}=n[i],{time:c,pos:f}=n[r]);const g=c-o;return g?u+(f-u)*(t-o)/g:u}class n6 extends CS{static id="timeseries";static defaults=CS.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=lf(e,this.min),this._tableRange=lf(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,r=[],o=[];let c,u,f,g,_;for(c=0,u=t.length;c<u;++c)g=t[c],g>=e&&g<=i&&r.push(g);if(r.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(c=0,u=r.length;c<u;++c)_=r[c+1],f=r[c-1],g=r[c],Math.round((_+f)/2)!==g&&o.push({time:g,pos:c/(u-1)});return o}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((r,o)=>r-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(lf(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return lf(this._table,i*this._tableRange+this._minPos,!0)}}const XA="label";function MS(n,t){typeof n=="function"?n(t):n&&(n.current=t)}function J4(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function $A(n,t){n.labels=t}function ZA(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:XA;const i=[];n.datasets=t.map(r=>{const o=n.datasets.find(c=>c[e]===r[e]);return!o||!r.data||i.includes(o)?{...r}:(i.push(o),Object.assign(o,r),o)})}function tL(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:XA;const e={labels:[],datasets:[]};return $A(e,n.labels),ZA(e,n.datasets,t),e}function eL(n,t){const{height:e=150,width:i=300,redraw:r=!1,datasetIdKey:o,type:c,data:u,options:f,plugins:g=[],fallbackContent:_,updateMode:y,...b}=n,S=xt.useRef(null),R=xt.useRef(null),M=()=>{S.current&&(R.current=new hl(S.current,{type:c,data:tL(u,o),options:f&&{...f},plugins:g}),MS(t,R.current))},C=()=>{MS(t,null),R.current&&(R.current.destroy(),R.current=null)};return xt.useEffect(()=>{!r&&R.current&&f&&J4(R.current,f)},[r,f]),xt.useEffect(()=>{!r&&R.current&&$A(R.current.config.data,u.labels)},[r,u.labels]),xt.useEffect(()=>{!r&&R.current&&u.datasets&&ZA(R.current.config.data,u.datasets,o)},[r,u.datasets]),xt.useEffect(()=>{R.current&&(r?(C(),setTimeout(M)):R.current.update(y))},[r,f,u.labels,u.datasets,y]),xt.useEffect(()=>{R.current&&(C(),setTimeout(M))},[c]),xt.useEffect(()=>(M(),()=>C()),[]),Vn.createElement("canvas",{ref:S,role:"img",height:e,width:i,...b},_)}const nL=xt.forwardRef(eL);function JA(n,t){return hl.register(t),xt.forwardRef((e,i)=>Vn.createElement(nL,{...e,ref:i,type:n}))}const ad=JA("bar",lV),iL=JA("pie",hV);hl.register(hy,WA,QA,dy,fy);function sL({bebidas:n}){if(!n.length)return J.jsx("p",{className:"text-sm italic",children:"Sin datos."});const t=n.reduce((c,u)=>(c[u.tipo]=(c[u.tipo]||0)+1,c),{}),e=Object.keys(t),i=Object.values(t),r={labels:e,datasets:[{label:"Cantidad",data:i,backgroundColor:"rgba(59, 130, 246, 0.6)",borderRadius:4}]},o={indexAxis:"y",scales:{x:{beginAtZero:!0,ticks:{stepSize:1}}},plugins:{legend:{display:!1}}};return J.jsx("div",{className:"bg-white rounded p-2 mt-2",children:J.jsx(ad,{data:r,options:o})})}function rL({bebidas:n,usuarios:t}){const e=new Date,i=24;return J.jsxs("div",{className:"mt-6",children:[J.jsx("h2",{className:"text-center text-lg font-bold mb-2",children:" Estadsticas Globales"}),t.map(r=>{const o=r.email,c=n.filter(y=>y.email===o),u=c.filter(y=>{const b=new Date(y.timestamp);return(e-b)/(1e3*60*60)<i}),f=c[0],g=u.reduce((y,b)=>(y[b.tipo]=(y[b.tipo]||0)+1,y),{}),_=Object.entries(g).map(([y,b])=>`${b} ${y}${b>1?"s":""}`).join(", ");return J.jsxs("div",{className:"mb-4 border-b pb-2",children:[J.jsx("p",{className:"font-semibold text-xl",children:J.jsx(cA,{email:o})}),f?J.jsxs(J.Fragment,{children:[J.jsxs("p",{className:"text-sm text-gray-600",children:["ltima bebida: ",f.tipo,"  ",new Date(f.timestamp).toLocaleTimeString()]}),J.jsx("p",{className:"text-sm mt-1",children:u.length>0?`ltimas ${i}h: ${_}`:J.jsx("span",{className:"italic text-gray-500",children:"Sin datos recientes"})}),J.jsx(sL,{bebidas:u})]}):J.jsx("p",{className:"text-sm italic text-gray-500",children:"Este usuario an no ha registrado bebidas."})]},o)})]})}hl.register(hy,WA,QA,dy,fy);function aL({bebidas:n}){if(!n.length)return J.jsx("p",{className:"text-center mt-4 text-sm",children:"No has aadido bebidas an."});const t=new Date,e=6,i=24,r=n[0],c=n.filter($=>{const W=new Date($.timestamp);return(t-W)/(1e3*60*60)<e}).reduce(($,W)=>($[W.tipo]=($[W.tipo]||0)+1,$),{}),f=n.filter($=>{const W=new Date($.timestamp);return(t-W)/(1e3*60*60)<i}).reduce(($,W)=>($[W.tipo]=($[W.tipo]||0)+1,$),{}),g=Object.keys(f),_=Object.values(f),y={labels:g,datasets:[{label:"Cantidad",data:_,backgroundColor:"rgba(59, 130, 246, 0.6)",borderRadius:4}]},b={indexAxis:"y",scales:{x:{beginAtZero:!0,ticks:{stepSize:1}}},plugins:{legend:{display:!1}}},S=new Date,R=new Date(S);R.setMinutes(0,0,0),R.setHours(R.getHours()+1);const M=Array.from({length:24},($,W)=>{const ot=new Date(R.getTime()-W*60*60*1e3);return{tInicio:new Date(ot.getTime()-60*60*1e3),tFin:ot}}).reverse(),C=M.map(({tInicio:$,tFin:W})=>n.filter(ot=>{const D=new Date(ot.timestamp);return D>=$&&D<W}).length),F={labels:M.map(({tInicio:$})=>`${$.getHours()}:00`),datasets:[{label:"Bebidas por hora",data:C,backgroundColor:"rgba(59, 130, 246, 0.6)",borderRadius:4}]},X={scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}};return J.jsxs("div",{className:"mt-6",children:[J.jsx("h2",{className:" text-center text-lg font-bold mb-2",children:" Tus estadsticas"}),J.jsxs("p",{children:["ltima bebida: ",r.tipo,"  ",new Date(r.timestamp).toLocaleTimeString()]}),J.jsxs("p",{children:["Bebidas en las ltimas ",e,"h:"]}),J.jsx("ul",{className:"list-disc pl-4 text-sm text-gray-700 mb-2",children:Object.entries(c).map(([$,W])=>J.jsxs("li",{children:[$,"s: ",W]},$))}),J.jsx("p",{className:"text-center text-sm mt-4 font-semibold",children:"Bebidas en las ltimas 24h (por tipo):"}),J.jsx("div",{className:"bg-white rounded p-2 mt-2",children:J.jsx(ad,{data:y,options:b})}),J.jsx("p",{className:"text-center text-sm mt-4 font-semibold",children:"Bebidas en las ltimas 24h (por hora):"}),J.jsx("div",{className:"bg-white rounded p-2 mt-2",children:J.jsx(ad,{data:F,options:X})})]})}/*!
 * chartjs-plugin-datalabels v2.2.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */var DS=function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var n=window.screen;if(n)return(n.deviceXDPI||1)/(n.logicalXDPI||1)}return 1}(),Yc={toTextLines:function(n){var t=[],e;for(n=[].concat(n);n.length;)e=n.pop(),typeof e=="string"?t.unshift.apply(t,e.split(`
`)):Array.isArray(e)?n.push.apply(n,e):qt(n)||t.unshift(""+e);return t},textSize:function(n,t,e){var i=[].concat(t),r=i.length,o=n.font,c=0,u;for(n.font=e.string,u=0;u<r;++u)c=Math.max(n.measureText(i[u]).width,c);return n.font=o,{height:r*e.lineHeight,width:c}},bound:function(n,t,e){return Math.max(n,Math.min(t,e))},arrayDiff:function(n,t){var e=n.slice(),i=[],r,o,c,u;for(r=0,c=t.length;r<c;++r)u=t[r],o=e.indexOf(u),o===-1?i.push([u,1]):e.splice(o,1);for(r=0,c=e.length;r<c;++r)i.push([e[r],-1]);return i},rasterize:function(n){return Math.round(n*DS)/DS}};function up(n,t){var e=t.x,i=t.y;if(e===null)return{x:0,y:-1};if(i===null)return{x:1,y:0};var r=n.x-e,o=n.y-i,c=Math.sqrt(r*r+o*o);return{x:c?r/c:0,y:c?o/c:-1}}function oL(n,t,e,i,r){switch(r){case"center":e=i=0;break;case"bottom":e=0,i=1;break;case"right":e=1,i=0;break;case"left":e=-1,i=0;break;case"top":e=0,i=-1;break;case"start":e=-e,i=-i;break;case"end":break;default:r*=Math.PI/180,e=Math.cos(r),i=Math.sin(r);break}return{x:n,y:t,vx:e,vy:i}}var lL=0,tx=1,ex=2,nx=4,ix=8;function cf(n,t,e){var i=lL;return n<e.left?i|=tx:n>e.right&&(i|=ex),t<e.top?i|=ix:t>e.bottom&&(i|=nx),i}function cL(n,t){for(var e=n.x0,i=n.y0,r=n.x1,o=n.y1,c=cf(e,i,t),u=cf(r,o,t),f,g,_;!(!(c|u)||c&u);)f=c||u,f&ix?(g=e+(r-e)*(t.top-i)/(o-i),_=t.top):f&nx?(g=e+(r-e)*(t.bottom-i)/(o-i),_=t.bottom):f&ex?(_=i+(o-i)*(t.right-e)/(r-e),g=t.right):f&tx&&(_=i+(o-i)*(t.left-e)/(r-e),g=t.left),f===c?(e=g,i=_,c=cf(e,i,t)):(r=g,o=_,u=cf(r,o,t));return{x0:e,x1:r,y0:i,y1:o}}function uf(n,t){var e=t.anchor,i=n,r,o;return t.clamp&&(i=cL(i,t.area)),e==="start"?(r=i.x0,o=i.y0):e==="end"?(r=i.x1,o=i.y1):(r=(i.x0+i.x1)/2,o=(i.y0+i.y1)/2),oL(r,o,n.vx,n.vy,t.align)}var hf={arc:function(n,t){var e=(n.startAngle+n.endAngle)/2,i=Math.cos(e),r=Math.sin(e),o=n.innerRadius,c=n.outerRadius;return uf({x0:n.x+i*o,y0:n.y+r*o,x1:n.x+i*c,y1:n.y+r*c,vx:i,vy:r},t)},point:function(n,t){var e=up(n,t.origin),i=e.x*n.options.radius,r=e.y*n.options.radius;return uf({x0:n.x-i,y0:n.y-r,x1:n.x+i,y1:n.y+r,vx:e.x,vy:e.y},t)},bar:function(n,t){var e=up(n,t.origin),i=n.x,r=n.y,o=0,c=0;return n.horizontal?(i=Math.min(n.x,n.base),o=Math.abs(n.base-n.x)):(r=Math.min(n.y,n.base),c=Math.abs(n.base-n.y)),uf({x0:i,y0:r+c,x1:i+o,y1:r,vx:e.x,vy:e.y},t)},fallback:function(n,t){var e=up(n,t.origin);return uf({x0:n.x,y0:n.y,x1:n.x+(n.width||0),y1:n.y+(n.height||0),vx:e.x,vy:e.y},t)}},Es=Yc.rasterize;function uL(n){var t=n.borderWidth||0,e=n.padding,i=n.size.height,r=n.size.width,o=-r/2,c=-i/2;return{frame:{x:o-e.left-t,y:c-e.top-t,w:r+e.width+t*2,h:i+e.height+t*2},text:{x:o,y:c,w:r,h:i}}}function hL(n,t){var e=t.chart.getDatasetMeta(t.datasetIndex).vScale;if(!e)return null;if(e.xCenter!==void 0&&e.yCenter!==void 0)return{x:e.xCenter,y:e.yCenter};var i=e.getBasePixel();return n.horizontal?{x:i,y:null}:{x:null,y:i}}function fL(n){return n instanceof qA?hf.arc:n instanceof R4?hf.point:n instanceof hy?hf.bar:hf.fallback}function dL(n,t,e,i,r,o){var c=Math.PI/2;if(o){var u=Math.min(o,r/2,i/2),f=t+u,g=e+u,_=t+i-u,y=e+r-u;n.moveTo(t,g),f<_&&g<y?(n.arc(f,g,u,-Math.PI,-c),n.arc(_,g,u,-c,0),n.arc(_,y,u,0,c),n.arc(f,y,u,c,Math.PI)):f<_?(n.moveTo(f,e),n.arc(_,g,u,-c,c),n.arc(f,g,u,c,Math.PI+c)):g<y?(n.arc(f,g,u,-Math.PI,0),n.arc(f,y,u,0,Math.PI)):n.arc(f,g,u,-Math.PI,Math.PI),n.closePath(),n.moveTo(t,e)}else n.rect(t,e,i,r)}function gL(n,t,e){var i=e.backgroundColor,r=e.borderColor,o=e.borderWidth;!i&&(!r||!o)||(n.beginPath(),dL(n,Es(t.x)+o/2,Es(t.y)+o/2,Es(t.w)-o,Es(t.h)-o,e.borderRadius),n.closePath(),i&&(n.fillStyle=i,n.fill()),r&&o&&(n.strokeStyle=r,n.lineWidth=o,n.lineJoin="miter",n.stroke()))}function mL(n,t,e){var i=e.lineHeight,r=n.w,o=n.x,c=n.y+i/2;return t==="center"?o+=r/2:(t==="end"||t==="right")&&(o+=r),{h:i,w:r,x:o,y:c}}function pL(n,t,e){var i=n.shadowBlur,r=e.stroked,o=Es(e.x),c=Es(e.y),u=Es(e.w);r&&n.strokeText(t,o,c,u),e.filled&&(i&&r&&(n.shadowBlur=0),n.fillText(t,o,c,u),i&&r&&(n.shadowBlur=i))}function _L(n,t,e,i){var r=i.textAlign,o=i.color,c=!!o,u=i.font,f=t.length,g=i.textStrokeColor,_=i.textStrokeWidth,y=g&&_,b;if(!(!f||!c&&!y))for(e=mL(e,r,u),n.font=u.string,n.textAlign=r,n.textBaseline="middle",n.shadowBlur=i.textShadowBlur,n.shadowColor=i.textShadowColor,c&&(n.fillStyle=o),y&&(n.lineJoin="round",n.lineWidth=_,n.strokeStyle=g),b=0,f=t.length;b<f;++b)pL(n,t[b],{stroked:y,filled:c,w:e.w,x:e.x,y:e.y+e.h*b})}var sx=function(n,t,e,i){var r=this;r._config=n,r._index=i,r._model=null,r._rects=null,r._ctx=t,r._el=e};ji(sx.prototype,{_modelize:function(n,t,e,i){var r=this,o=r._index,c=gn(fe([e.font,{}],i,o)),u=fe([e.color,ye.color],i,o);return{align:fe([e.align,"center"],i,o),anchor:fe([e.anchor,"center"],i,o),area:i.chart.chartArea,backgroundColor:fe([e.backgroundColor,null],i,o),borderColor:fe([e.borderColor,null],i,o),borderRadius:fe([e.borderRadius,0],i,o),borderWidth:fe([e.borderWidth,0],i,o),clamp:fe([e.clamp,!1],i,o),clip:fe([e.clip,!1],i,o),color:u,display:n,font:c,lines:t,offset:fe([e.offset,4],i,o),opacity:fe([e.opacity,1],i,o),origin:hL(r._el,i),padding:ti(fe([e.padding,4],i,o)),positioner:fL(r._el),rotation:fe([e.rotation,0],i,o)*(Math.PI/180),size:Yc.textSize(r._ctx,t,c),textAlign:fe([e.textAlign,"start"],i,o),textShadowBlur:fe([e.textShadowBlur,0],i,o),textShadowColor:fe([e.textShadowColor,u],i,o),textStrokeColor:fe([e.textStrokeColor,u],i,o),textStrokeWidth:fe([e.textStrokeWidth,0],i,o)}},update:function(n){var t=this,e=null,i=null,r=t._index,o=t._config,c,u,f,g=fe([o.display,!0],n,r);g&&(c=n.dataset.data[r],u=jt(se(o.formatter,[c,n]),c),f=qt(u)?[]:Yc.toTextLines(u),f.length&&(e=t._modelize(g,f,o,n),i=uL(e))),t._model=e,t._rects=i},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(n,t){var e=this,i=n.ctx,r=e._model,o=e._rects,c;this.visible()&&(i.save(),r.clip&&(c=r.area,i.beginPath(),i.rect(c.left,c.top,c.right-c.left,c.bottom-c.top),i.clip()),i.globalAlpha=Yc.bound(0,r.opacity,1),i.translate(Es(t.x),Es(t.y)),i.rotate(r.rotation),gL(i,o.frame,r),_L(i,r.lines,o.text,r),i.restore())}});var yL=Number.MIN_SAFE_INTEGER||-9007199254740991,vL=Number.MAX_SAFE_INTEGER||9007199254740991;function Rc(n,t,e){var i=Math.cos(e),r=Math.sin(e),o=t.x,c=t.y;return{x:o+i*(n.x-o)-r*(n.y-c),y:c+r*(n.x-o)+i*(n.y-c)}}function OS(n,t){var e=vL,i=yL,r=t.origin,o,c,u,f,g;for(o=0;o<n.length;++o)c=n[o],u=c.x-r.x,f=c.y-r.y,g=t.vx*u+t.vy*f,e=Math.min(e,g),i=Math.max(i,g);return{min:e,max:i}}function ff(n,t){var e=t.x-n.x,i=t.y-n.y,r=Math.sqrt(e*e+i*i);return{vx:(t.x-n.x)/r,vy:(t.y-n.y)/r,origin:n,ln:r}}var rx=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};ji(rx.prototype,{center:function(){var n=this._rect;return{x:n.x+n.w/2,y:n.y+n.h/2}},update:function(n,t,e){this._rotation=e,this._rect={x:t.x+n.x,y:t.y+n.y,w:t.w,h:t.h}},contains:function(n){var t=this,e=1,i=t._rect;return n=Rc(n,t.center(),-t._rotation),!(n.x<i.x-e||n.y<i.y-e||n.x>i.x+i.w+e*2||n.y>i.y+i.h+e*2)},intersects:function(n){var t=this._points(),e=n._points(),i=[ff(t[0],t[1]),ff(t[0],t[3])],r,o,c;for(this._rotation!==n._rotation&&i.push(ff(e[0],e[1]),ff(e[0],e[3])),r=0;r<i.length;++r)if(o=OS(t,i[r]),c=OS(e,i[r]),o.max<c.min||c.max<o.min)return!1;return!0},_points:function(){var n=this,t=n._rect,e=n._rotation,i=n.center();return[Rc({x:t.x,y:t.y},i,e),Rc({x:t.x+t.w,y:t.y},i,e),Rc({x:t.x+t.w,y:t.y+t.h},i,e),Rc({x:t.x,y:t.y+t.h},i,e)]}});function ax(n,t,e){var i=t.positioner(n,t),r=i.vx,o=i.vy;if(!r&&!o)return{x:i.x,y:i.y};var c=e.w,u=e.h,f=t.rotation,g=Math.abs(c/2*Math.cos(f))+Math.abs(u/2*Math.sin(f)),_=Math.abs(c/2*Math.sin(f))+Math.abs(u/2*Math.cos(f)),y=1/Math.max(Math.abs(r),Math.abs(o));return g*=r*y,_*=o*y,g+=t.offset*r,_+=t.offset*o,{x:i.x+g,y:i.y+_}}function bL(n,t){var e,i,r,o;for(e=n.length-1;e>=0;--e)for(r=n[e].$layout,i=e-1;i>=0&&r._visible;--i)o=n[i].$layout,o._visible&&r._box.intersects(o._box)&&t(r,o);return n}function EL(n){var t,e,i,r,o,c,u;for(t=0,e=n.length;t<e;++t)i=n[t],r=i.$layout,r._visible&&(u=new Proxy(i._el,{get:(f,g)=>f.getProps([g],!0)[g]}),o=i.geometry(),c=ax(u,i.model(),o),r._box.update(c,o,i.rotation()));return bL(n,function(f,g){var _=f._hidable,y=g._hidable;_&&y||y?g._visible=!1:_&&(f._visible=!1)})}var Kc={prepare:function(n){var t=[],e,i,r,o,c;for(e=0,r=n.length;e<r;++e)for(i=0,o=n[e].length;i<o;++i)c=n[e][i],t.push(c),c.$layout={_box:new rx,_hidable:!1,_visible:!0,_set:e,_idx:c._index};return t.sort(function(u,f){var g=u.$layout,_=f.$layout;return g._idx===_._idx?_._set-g._set:_._idx-g._idx}),this.update(t),t},update:function(n){var t=!1,e,i,r,o,c;for(e=0,i=n.length;e<i;++e)r=n[e],o=r.model(),c=r.$layout,c._hidable=o&&o.display==="auto",c._visible=r.visible(),t|=c._hidable;t&&EL(n)},lookup:function(n,t){var e,i;for(e=n.length-1;e>=0;--e)if(i=n[e].$layout,i&&i._visible&&i._box.contains(t))return n[e];return null},draw:function(n,t){var e,i,r,o,c,u;for(e=0,i=t.length;e<i;++e)r=t[e],o=r.$layout,o._visible&&(c=r.geometry(),u=ax(r._el,r.model(),c),o._box.update(u,c,r.rotation()),r.draw(n,u))}},TL=function(n){if(qt(n))return null;var t=n,e,i,r;if(Ft(n))if(!qt(n.label))t=n.label;else if(!qt(n.r))t=n.r;else for(t="",e=Object.keys(n),r=0,i=e.length;r<i;++r)t+=(r!==0?", ":"")+e[r]+": "+n[e[r]];return""+t},SL={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:TL,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},vn="$datalabels",ox="$default";function wL(n,t){var e=n.datalabels,i={},r=[],o,c;return e===!1?null:(e===!0&&(e={}),t=ji({},[t,e]),o=t.labels||{},c=Object.keys(o),delete t.labels,c.length?c.forEach(function(u){o[u]&&r.push(ji({},[t,o[u],{_key:u}]))}):r.push(t),i=r.reduce(function(u,f){return Wt(f.listeners||{},function(g,_){u[_]=u[_]||{},u[_][f._key||ox]=g}),delete f.listeners,u},{}),{labels:r,listeners:i})}function Kp(n,t,e,i){if(t){var r=e.$context,o=e.$groups,c;t[o._set]&&(c=t[o._set][o._key],c&&se(c,[r,i])===!0&&(n[vn]._dirty=!0,e.update(r)))}}function AL(n,t,e,i,r){var o,c;!e&&!i||(e?i?e!==i&&(c=o=!0):c=!0:o=!0,c&&Kp(n,t.leave,e,r),o&&Kp(n,t.enter,i,r))}function xL(n,t){var e=n[vn],i=e._listeners,r,o;if(!(!i.enter&&!i.leave)){if(t.type==="mousemove")o=Kc.lookup(e._labels,t);else if(t.type!=="mouseout")return;r=e._hovered,e._hovered=o,AL(n,i,r,o,t)}}function RL(n,t){var e=n[vn],i=e._listeners.click,r=i&&Kc.lookup(e._labels,t);r&&Kp(n,i,r,t)}var IL={id:"datalabels",defaults:SL,beforeInit:function(n){n[vn]={_actives:[]}},beforeUpdate:function(n){var t=n[vn];t._listened=!1,t._listeners={},t._datasets=[],t._labels=[]},afterDatasetUpdate:function(n,t,e){var i=t.index,r=n[vn],o=r._datasets[i]=[],c=n.isDatasetVisible(i),u=n.data.datasets[i],f=wL(u,e),g=t.meta.data||[],_=n.ctx,y,b,S,R,M,C,z,F;for(_.save(),y=0,S=g.length;y<S;++y)if(z=g[y],z[vn]=[],c&&z&&n.getDataVisibility(y)&&!z.skip)for(b=0,R=f.labels.length;b<R;++b)M=f.labels[b],C=M._key,F=new sx(M,_,z,y),F.$groups={_set:i,_key:C||ox},F.$context={active:!1,chart:n,dataIndex:y,dataset:u,datasetIndex:i},F.update(F.$context),z[vn].push(F),o.push(F);_.restore(),ji(r._listeners,f.listeners,{merger:function(X,$,W){$[X]=$[X]||{},$[X][t.index]=W[X],r._listened=!0}})},afterUpdate:function(n){n[vn]._labels=Kc.prepare(n[vn]._datasets)},afterDatasetsDraw:function(n){Kc.draw(n,n[vn]._labels)},beforeEvent:function(n,t){if(n[vn]._listened){var e=t.event;switch(e.type){case"mousemove":case"mouseout":xL(n,e);break;case"click":RL(n,e);break}}},afterEvent:function(n){var t=n[vn],e=t._actives,i=t._actives=n.getActiveElements(),r=Yc.arrayDiff(e,i),o,c,u,f,g,_,y;for(o=0,c=r.length;o<c;++o)if(g=r[o],g[1])for(y=g[0].element[vn]||[],u=0,f=y.length;u<f;++u)_=y[u],_.$context.active=g[1]===1,_.update(_.$context);(t._dirty||r.length)&&(Kc.update(t._labels),n.render()),delete t._dirty}};function CL({resumenUsuarios:n}){const t=[...n].sort((i,r)=>r.total-i.total).slice(0,3),e=["","",""];return J.jsxs("div",{className:"mt-6",children:[J.jsx("h2",{className:"text-xl font-bold mb-4",children:" Top 3 Borrachos (24h)"}),J.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:t.map((i,r)=>J.jsxs("div",{className:`p-4 rounded shadow text-center ${r===0?"bg-yellow-200":r===1?"bg-gray-300":"bg-orange-300"}`,children:[J.jsx("div",{className:"text-3xl",children:e[r]}),J.jsx("div",{className:"text-lg font-semibold mt-2",children:i.Nombre}),J.jsxs("div",{className:"text-sm text-gray-700 mt-1",children:[i.total," bebidas"]})]},i.uid))})]})}function ML({usuarios:n,bebidas:t}){const e=["cerveza","litrona"],i=n.map(c=>{const u=t.filter(f=>f.uid===c.id&&e.includes(f.tipo));return{Nombre:c.Nombre,total:u.length}}).filter(c=>c.total>0).sort((c,u)=>u.total-c.total).slice(0,10),r={labels:i.map(c=>c.Nombre),datasets:[{label:"Cervezas y Litronas consumidas",data:i.map(c=>c.total),backgroundColor:"#f1c40f",borderRadius:4}]},o={indexAxis:"y",scales:{x:{beginAtZero:!0,precision:0}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:c=>`${c.parsed.x} bebidas`}}},responsive:!0,maintainAspectRatio:!1};return J.jsxs("div",{className:"mt-8 max-w-md mx-auto",style:{height:300},children:[J.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Top Cerveceros "}),J.jsx(ad,{data:r,options:o})]})}hl.register(qA,dy,fy,IL);function DL(n){return n.split("@")[0]}function OL({usuarios:n,bebidas:t}){const e=new Date,i=new Date(e.getTime()-24*60*60*1e3),r=xt.useMemo(()=>n.map(u=>{const f=t.filter(g=>g.uid===u.id&&new Date(g.timestamp)>i);return{uid:u.id,Nombre:u.Nombre,total:f.length}}).filter(u=>u.total>0),[n,t,i]),o={labels:r.map(u=>u.Nombre),datasets:[{label:"Bebidas (ltimas 24h)",data:r.map(u=>u.total),backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#C9CBCF","#8A8D91","#FF5A5F","#00A699"],borderWidth:1}]},c={plugins:{legend:{display:!1},tooltip:{callbacks:{label:u=>`${DL(u.label)}: ${u.parsed} bebidas`}}}};return J.jsxs("div",{className:"text-center mt-6 text-gray-700",children:[J.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Ranking"}),r.length===0?J.jsx("p",{className:"text-lg italic",children:"Sin datos recientes "}):J.jsxs(J.Fragment,{children:[J.jsx(CL,{resumenUsuarios:r}),J.jsxs("div",{className:"max-w-md mx-auto mt-8",children:[J.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Proporcin de bebidas"}),J.jsx("div",{style:{width:200,height:200,margin:"auto",marginTop:24},children:J.jsx(iL,{data:o,options:c,width:150,height:150})})]}),J.jsx(ML,{usuarios:n,bebidas:t})]})]})}function kL({bebidas:n,uid:t,email:e}){const i=new Date,r=new Date(i.getTime()-24*60*60*1e3),o=n.filter(_=>{const y=new Date(_.timestamp);return _.uid===t&&y>r}),c=o.reduce((_,y)=>(_[y.tipo]=_[y.tipo]?[..._[y.tipo],y]:[y],_),{}),u=["chupito","cerveza","ron-cola","ron-naranja","kalimotxo","ron-blanco-limon","ron-energetica","litrona"],f=async _=>{try{await iA(Ho(br,"bebidas"),{uid:t,tipo:_,email:e,timestamp:new Date().toISOString()})}catch(y){console.error("Error aadiendo bebida:",y)}},g=async _=>{try{const y=zp(Ho(br,"bebidas"),fT("uid","==",t),fT("tipo","==",_),tA("timestamp","desc"),Kk(1)),b=await nA(y);if(!b.empty){const S=b.docs[0];await Zk(Yf(br,"bebidas",S.id))}}catch(y){console.error("Error eliminando bebida:",y)}};return J.jsxs("div",{className:"mt-6",children:[J.jsx("h2",{className:"text-lg font-bold mb-2",children:" Editar Mis Bebidas (ltimas 24h)"}),u.map(_=>{const y=c[_]?.length||0;return J.jsxs("div",{className:"flex items-center justify-between border rounded p-2 my-1",children:[J.jsxs("span",{className:"font-semibold",children:[_,"s"]}),J.jsxs("div",{className:"flex items-center space-x-3",children:[J.jsx("button",{onClick:()=>g(_),className:"bg-red-500 text-white px-3 py-1 rounded disabled:opacity-50",disabled:y===0,"aria-label":`Eliminar una bebida de tipo ${_}`,children:"-"}),J.jsx("span",{className:"w-6 text-center",children:y}),J.jsx("button",{onClick:()=>f(_),className:"bg-green-500 text-white px-3 py-1 rounded","aria-label":`Aadir una bebida de tipo ${_}`,children:"+"})]})]},_)}),o.length===0&&J.jsx("p",{className:"text-center text-sm text-gray-600 mt-4",children:"No tienes bebidas registradas."})]})}function NL({bebidas:n}){const[t,e]=xt.useState([]),[i,r]=xt.useState("");return xt.useEffect(()=>{async function o(){const c=Y1(),u=await nA(Ho(c,"usuarios")),f=[];u.forEach(g=>{const _=g.data();f.push({uid:g.id,email:_.email,Nombre:_.Nombre||"Annimo"})}),e(f)}o()},[]),J.jsxs("div",{className:"mt-6",children:[J.jsx("h2",{className:"text-center text-lg font-bold mb-4",children:" Editar Bebidas (ltimas 24h)"}),J.jsxs("div",{className:"mb-4",children:[J.jsx("label",{className:"block text-sm font-medium mb-1",children:"Seleccionar usuario:"}),J.jsxs("select",{className:"border p-2 rounded w-full",onChange:o=>r(o.target.value),value:i,children:[J.jsx("option",{value:"",disabled:!0,children:"-- Selecciona un usuario --"}),t.map(({uid:o,Nombre:c,email:u})=>J.jsx("option",{value:o,children:`${c}`},o))]})]}),i&&J.jsx("div",{className:"mt-4 border-t pt-4",children:J.jsx(kL,{bebidas:n,uid:i,email:t.find(o=>o.uid===i)?.email||"Annimo"})})]})}function PL({bebidasUsuario:n}){const[t,e]=xt.useState("");return xt.useEffect(()=>{if(!n||n.length===0){e("");return}const i=new Date(n[0].timestamp),o=(new Date-i)/(1e3*60*60);o>12?e("Ya llevas ms de 12 horas sobrio! Te dormiste? "):o>6?e("Ms de 6 horas sin beber, todo un logro! "):o>3?e("Llevas ms de 3 horas sin beber. Una copita? "):e("")},[n]),t?J.jsx("div",{className:"p-3 rounded text-gray-800 mb-4 text-center font-semibold",children:t}):null}var hp,kS;function VL(){if(kS)return hp;kS=1;var n={linear:function(t,e,i,r){var o=i-e;return o*t/r+e},easeInQuad:function(t,e,i,r){var o=i-e;return o*(t/=r)*t+e},easeOutQuad:function(t,e,i,r){var o=i-e;return-o*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,i,r){var o=i-e;return(t/=r/2)<1?o/2*t*t+e:-o/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,r){var o=i-e;return o*(t/=r)*t*t+e},easeOutCubic:function(t,e,i,r){var o=i-e;return o*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,i,r){var o=i-e;return(t/=r/2)<1?o/2*t*t*t+e:o/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,i,r){var o=i-e;return o*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,i,r){var o=i-e;return-o*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,i,r){var o=i-e;return(t/=r/2)<1?o/2*t*t*t*t+e:-o/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,i,r){var o=i-e;return o*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,i,r){var o=i-e;return o*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,i,r){var o=i-e;return(t/=r/2)<1?o/2*t*t*t*t*t+e:o/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,i,r){var o=i-e;return-o*Math.cos(t/r*(Math.PI/2))+o+e},easeOutSine:function(t,e,i,r){var o=i-e;return o*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,i,r){var o=i-e;return-o/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,i,r){var o=i-e;return t==0?e:o*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,i,r){var o=i-e;return t==r?e+o:o*(-Math.pow(2,-10*t/r)+1)+e},easeInOutExpo:function(t,e,i,r){var o=i-e;return t===0?e:t===r?e+o:(t/=r/2)<1?o/2*Math.pow(2,10*(t-1))+e:o/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,i,r){var o=i-e;return-o*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,i,r){var o=i-e;return o*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,i,r){var o=i-e;return(t/=r/2)<1?-o/2*(Math.sqrt(1-t*t)-1)+e:o/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,i,r){var o=i-e,c,u,f;return f=1.70158,u=0,c=o,t===0?e:(t/=r)===1?e+o:(u||(u=r*.3),c<Math.abs(o)?(c=o,f=u/4):f=u/(2*Math.PI)*Math.asin(o/c),-(c*Math.pow(2,10*(t-=1))*Math.sin((t*r-f)*(2*Math.PI)/u))+e)},easeOutElastic:function(t,e,i,r){var o=i-e,c,u,f;return f=1.70158,u=0,c=o,t===0?e:(t/=r)===1?e+o:(u||(u=r*.3),c<Math.abs(o)?(c=o,f=u/4):f=u/(2*Math.PI)*Math.asin(o/c),c*Math.pow(2,-10*t)*Math.sin((t*r-f)*(2*Math.PI)/u)+o+e)},easeInOutElastic:function(t,e,i,r){var o=i-e,c,u,f;return f=1.70158,u=0,c=o,t===0?e:(t/=r/2)===2?e+o:(u||(u=r*(.3*1.5)),c<Math.abs(o)?(c=o,f=u/4):f=u/(2*Math.PI)*Math.asin(o/c),t<1?-.5*(c*Math.pow(2,10*(t-=1))*Math.sin((t*r-f)*(2*Math.PI)/u))+e:c*Math.pow(2,-10*(t-=1))*Math.sin((t*r-f)*(2*Math.PI)/u)*.5+o+e)},easeInBack:function(t,e,i,r,o){var c=i-e;return o===void 0&&(o=1.70158),c*(t/=r)*t*((o+1)*t-o)+e},easeOutBack:function(t,e,i,r,o){var c=i-e;return o===void 0&&(o=1.70158),c*((t=t/r-1)*t*((o+1)*t+o)+1)+e},easeInOutBack:function(t,e,i,r,o){var c=i-e;return o===void 0&&(o=1.70158),(t/=r/2)<1?c/2*(t*t*(((o*=1.525)+1)*t-o))+e:c/2*((t-=2)*t*(((o*=1.525)+1)*t+o)+2)+e},easeInBounce:function(t,e,i,r){var o=i-e,c;return c=n.easeOutBounce(r-t,0,o,r),o-c+e},easeOutBounce:function(t,e,i,r){var o=i-e;return(t/=r)<1/2.75?o*(7.5625*t*t)+e:t<2/2.75?o*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?o*(7.5625*(t-=2.25/2.75)*t+.9375)+e:o*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,i,r){var o=i-e,c;return t<r/2?(c=n.easeInBounce(t*2,0,o,r),c*.5+e):(c=n.easeOutBounce(t*2-r,0,o,r),c*.5+o*.5+e)}};return hp=n,hp}var LL=VL();function UL(n){return n*Math.PI/180}function Nn(n,t){return n+Math.random()*(t-n)}function zL(n,t){return Math.floor(n+Math.random()*(t-n+1))}var Wc;(function(n){n[n.Circle=0]="Circle",n[n.Square=1]="Square",n[n.Strip=2]="Strip"})(Wc||(Wc={}));var rr;(function(n){n[n.Positive=1]="Positive",n[n.Negative=-1]="Negative"})(rr||(rr={}));const BL=1e3/60;class jL{constructor(t,e,i,r){this.getOptions=e;const{colors:o,initialVelocityX:c,initialVelocityY:u}=this.getOptions();this.context=t,this.x=i,this.y=r,this.w=Nn(5,20),this.h=Nn(5,20),this.radius=Nn(5,10),this.vx=typeof c=="number"?Nn(-c,c):Nn(c.min,c.max),this.vy=typeof u=="number"?Nn(-u,0):Nn(u.min,u.max),this.shape=zL(0,2),this.angle=UL(Nn(0,360)),this.angularSpin=Nn(-.2,.2),this.color=o[Math.floor(Math.random()*o.length)],this.rotateY=Nn(0,1),this.rotationDirection=Nn(0,1)?rr.Positive:rr.Negative}update(t){const{gravity:e,wind:i,friction:r,opacity:o,drawShape:c}=this.getOptions(),u=t/BL;this.x+=this.vx*u,this.y+=this.vy*u,this.vy+=e*u,this.vx+=i*u,this.vx*=r**u,this.vy*=r**u,this.rotateY>=1&&this.rotationDirection===rr.Positive?this.rotationDirection=rr.Negative:this.rotateY<=-1&&this.rotationDirection===rr.Negative&&(this.rotationDirection=rr.Positive);const f=.1*this.rotationDirection*u;if(this.rotateY+=f,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=o,this.context.lineCap="round",this.context.lineWidth=2,c&&typeof c=="function")c.call(this,this.context);else switch(this.shape){case Wc.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case Wc.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case Wc.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class FL{constructor(t,e){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=r=>{this.particles.splice(r,1)},this.getParticle=()=>{const r=Nn(this.x,this.w+this.x),o=Nn(this.y,this.h+this.y);return new jL(this.context,this.getOptions,r,o)},this.animate=r=>{const{canvas:o,context:c,particlesGenerated:u,lastNumberOfPieces:f}=this,{run:g,recycle:_,numberOfPieces:y,debug:b,tweenFunction:S,tweenDuration:R}=this.getOptions();if(!g)return!1;const M=this.particles.length,C=_?M:u;if(C<y){f!==y&&(this.tweenProgress=0,this.tweenFrom=C,this.lastNumberOfPieces=y),this.tweenProgress=Math.min(R,Math.max(0,this.tweenProgress+r));const z=S(this.tweenProgress,this.tweenFrom,y,R),F=Math.round(z-C);for(let X=0;X<F;X++)this.particles.push(this.getParticle());this.particlesGenerated+=F}b&&(c.font="12px sans-serif",c.fillStyle="#333",c.textAlign="right",c.fillText(`Particles: ${M}`,o.width-10,o.height-20));for(let z=this.particles.length-1;z>=0;z--){const F=this.particles[z];F.update(r),(F.y>o.height||F.y<-100||F.x>o.width+100||F.x<-100)&&(_&&C<=y?this.particles[z]=this.getParticle():this.removeParticleAt(z))}return M>0||C<y},this.canvas=t;const i=this.canvas.getContext("2d");if(!i)throw new Error("Could not get canvas context");this.context=i,this.getOptions=e}}const gy={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:LL.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class HL{constructor(t,e){this.lastFrameTime=0,this.setOptionsWithDefaults=r=>{const o={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...o,...gy,...r},Object.assign(this,r.confettiSource)},this.update=(r=0)=>{const{options:{run:o,onConfettiComplete:c,frameRate:u},canvas:f,context:g}=this,_=Math.min(r-this.lastFrameTime,50);if(u&&_<1e3/u){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=r-(u?_%u:0),o&&(g.fillStyle="white",g.clearRect(0,0,f.width,f.height)),this.generator.animate(_)?this.rafId=requestAnimationFrame(this.update):(c&&typeof c=="function"&&this.generator.particlesGenerated>0&&c.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=t;const i=this.canvas.getContext("2d");if(!i)throw new Error("Could not get canvas context");this.context=i,this.generator=new FL(this.canvas,()=>this.options),this.options=e,this.update()}get options(){return this._options}set options(t){const e=this._options?.run,i=this._options?.recycle;this.setOptionsWithDefaults(t),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof t.recycle=="boolean"&&t.recycle&&i===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof t.run=="boolean"&&t.run&&e===!1&&this.update()}}const qL=Vn.createRef();class my extends Vn.Component{constructor(t){super(t),this.canvas=Vn.createRef(),this.canvas=t.canvasRef||qL}componentDidMount(){if(this.canvas.current){const t=fp(this.props)[0];this.confetti=new HL(this.canvas.current,t)}}componentDidUpdate(){const t=fp(this.props)[0];this.confetti&&(this.confetti.options=t)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[t,e]=fp(this.props),i={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...e.style};return J.jsx("canvas",{width:t.width,height:t.height,ref:this.canvas,...e,style:i})}}my.defaultProps={...gy};my.displayName="ReactConfetti";function fp(n){const t={},e={},i={},r=[...Object.keys(gy),"confettiSource","drawShape","onConfettiComplete","frameRate"],o=["canvasRef"];for(const c in n){const u=n[c];r.includes(c)?t[c]=u:o.includes(c)?o[c]=u:i[c]=u}return[t,i,e]}const lx=Vn.forwardRef((n,t)=>J.jsx(my,{canvasRef:t,...n}));function GL(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];n&&n.addEventListener&&n.addEventListener.apply(n,t)}function YL(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];n&&n.removeEventListener&&n.removeEventListener.apply(n,t)}var dp=typeof window<"u",KL=function(n){xt.useEffect(n,[])},WL=function(n){var t=xt.useRef(n);t.current=n,KL(function(){return function(){return t.current()}})},QL=function(n){var t=xt.useRef(0),e=xt.useState(n),i=e[0],r=e[1],o=xt.useCallback(function(c){cancelAnimationFrame(t.current),t.current=requestAnimationFrame(function(){r(c)})},[]);return WL(function(){cancelAnimationFrame(t.current)}),[i,o]},XL=function(n){var t={},e=t.initialWidth,i=e===void 0?1/0:e,r=t.initialHeight,o=r===void 0?1/0:r,c=t.onChange,u=QL({width:dp?window.innerWidth:i,height:dp?window.innerHeight:o}),f=u[0],g=u[1];return xt.useEffect(function(){if(dp){var _=function(){var y=window.innerWidth,b=window.innerHeight;g({width:y,height:b}),c&&c(y,b)};return GL(window,"resize",_),function(){YL(window,"resize",_)}}},[]),f};function $L({totalBebidas:n}){const{width:t,height:e}=XL(),[i,r]=xt.useState(!1);return xt.useEffect(()=>{if(n%5===0&&n>0){r(!0);const o=setTimeout(()=>r(!1),5e3);return()=>clearTimeout(o)}},[n]),i?J.jsx(lx,{width:t,height:e}):null}const ZL=({bebidasUsuario:n})=>{const[t,e]=xt.useState(!1),[i,r]=xt.useState(!1);return xt.useEffect(()=>{if(i||n.length<3)return;const o=new Date,c=new Date(o.getTime()-2*60*60*1e3);n.filter(f=>new Date(f.timestamp)>c).length>=3&&(e(!0),r(!0))},[n,i]),t?J.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center",children:[J.jsx(lx,{}),J.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-sm text-center shadow-2xl animate-pulse",children:[J.jsx("h2",{className:"text-4xl font-extrabold text-yellow-500 mb-2",children:" Hat Trick!"}),J.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"3 bebidas en menos de 2 horas!"}),J.jsx("div",{className:"text-6xl animate-bounce mb-4",children:""}),J.jsx("button",{onClick:()=>e(!1),className:"mt-4 px-5 py-2 bg-yellow-500 text-white font-semibold rounded hover:bg-yellow-600 transition",children:"Vamos!"})]})]}):null};function JL(){const[n,t]=xt.useState(null),[e,i]=xt.useState([]),[r,o]=xt.useState("inicio"),[c,u]=xt.useState([]);xt.useEffect(()=>{const _=zp(Ho(br,"usuarios")),y=pT(_,b=>{const S=b.docs.map(R=>({id:R.id,...R.data()}));u(S)});return()=>y()},[]),xt.useEffect(()=>{const _=RC(Bp,y=>{t(y)});return()=>_()},[]),xt.useEffect(()=>{const _=zp(Ho(br,"bebidas"),tA("timestamp","desc")),y=pT(_,b=>{const S=b.docs.map(R=>({id:R.id,...R.data()}));i(S)});return()=>y()},[]);const f=async _=>{const y={tipo:_,timestamp:new Date().toISOString(),uid:n.uid,email:n.email};await iA(Ho(br,"bebidas"),y)};if(!n)return J.jsx(tN,{onLogin:()=>{}});const g=e.filter(_=>_.uid===n.uid);return J.jsxs("div",{className:`max-w-md w-full mx-auto mt-6 p-4 border rounded shadow
                md:max-w-md md:p-4`,children:[J.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-4 gap-2",children:[J.jsx("h1",{className:"text-xl font-bold text-center md:text-left",children:" Contador de Bebidas"}),J.jsx("button",{onClick:()=>IC(Bp),className:"text-sm text-red-600 underline md:self-center",children:"Cerrar sesin"})]}),J.jsxs("div",{className:"flex flex-wrap justify-center gap-2 mb-4",children:[J.jsx("button",{onClick:()=>o("inicio"),className:`px-3 py-1 rounded min-w-[80px] text-center ${r==="inicio"?"bg-blue-500 text-white":"bg-gray-200"}`,children:"Inicio"}),J.jsx("button",{onClick:()=>o("global"),className:`px-3 py-1 rounded min-w-[80px] text-center ${r==="global"?"bg-blue-500 text-white":"bg-gray-200"}`,children:"Global"}),J.jsx("button",{onClick:()=>o("editar"),className:`px-3 py-1 rounded min-w-[80px] text-center ${r==="editar"?"bg-blue-500 text-white":"bg-gray-200"}`,children:"Editar Bebidas"}),J.jsx("button",{onClick:()=>o("ranking"),className:`px-3 py-1 rounded min-w-[80px] text-center ${r==="ranking"?"bg-blue-500 text-white":"bg-gray-200"}`,children:"Ranking"})]}),r==="inicio"&&J.jsxs(J.Fragment,{children:[J.jsxs("p",{className:"text-sm text-gray-600 mb-2 text-center",children:["Bienvenido: ",J.jsx(cA,{email:n.email})]}),J.jsx(uN,{onAdd:f,uid:n.uid}),J.jsx($L,{totalBebidas:g.length}),J.jsx(ZL,{bebidasUsuario:g}),J.jsx(PL,{bebidasUsuario:g}),J.jsx(aL,{bebidas:g})]}),r==="global"&&J.jsx(rL,{bebidas:e,usuarios:c}),r==="editar"&&J.jsx(NL,{bebidas:e}),r==="ranking"&&J.jsx(OL,{usuarios:c,bebidas:e})]})}HR.createRoot(document.getElementById("root")).render(J.jsx(xt.StrictMode,{children:J.jsx(JL,{})}));

(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();function NR(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var lm={exports:{}},uc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P0;function PR(){if(P0)return uc;P0=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,r,o){var c=null;if(o!==void 0&&(c=""+o),r.key!==void 0&&(c=""+r.key),"key"in r){o={};for(var h in r)h!=="key"&&(o[h]=r[h])}else o=r;return r=o.ref,{$$typeof:n,type:i,key:c,ref:r!==void 0?r:null,props:o}}return uc.Fragment=t,uc.jsx=e,uc.jsxs=e,uc}var V0;function VR(){return V0||(V0=1,lm.exports=PR()),lm.exports}var rt=VR(),cm={exports:{}},xt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L0;function LR(){if(L0)return xt;L0=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),v=Symbol.iterator;function T(V){return V===null||typeof V!="object"?null:(V=v&&V[v]||V["@@iterator"],typeof V=="function"?V:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,k={};function M(V,nt,ct){this.props=V,this.context=nt,this.refs=k,this.updater=ct||A}M.prototype.isReactComponent={},M.prototype.setState=function(V,nt){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,nt,"setState")},M.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function G(){}G.prototype=M.prototype;function X(V,nt,ct){this.props=V,this.context=nt,this.refs=k,this.updater=ct||A}var et=X.prototype=new G;et.constructor=X,I(et,M.prototype),et.isPureReactComponent=!0;var it=Array.isArray,W={H:null,A:null,T:null,S:null,V:null},ot=Object.prototype.hasOwnProperty;function C(V,nt,ct,st,dt,wt){return ct=wt.ref,{$$typeof:n,type:V,key:nt,ref:ct!==void 0?ct:null,props:wt}}function R(V,nt){return C(V.type,nt,void 0,void 0,void 0,V.props)}function x(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function N(V){var nt={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ct){return nt[ct]})}var P=/\/+/g;function L(V,nt){return typeof V=="object"&&V!==null&&V.key!=null?N(""+V.key):nt.toString(36)}function D(){}function Wt(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(D,D):(V.status="pending",V.then(function(nt){V.status==="pending"&&(V.status="fulfilled",V.value=nt)},function(nt){V.status==="pending"&&(V.status="rejected",V.reason=nt)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function At(V,nt,ct,st,dt){var wt=typeof V;(wt==="undefined"||wt==="boolean")&&(V=null);var _t=!1;if(V===null)_t=!0;else switch(wt){case"bigint":case"string":case"number":_t=!0;break;case"object":switch(V.$$typeof){case n:case t:_t=!0;break;case _:return _t=V._init,At(_t(V._payload),nt,ct,st,dt)}}if(_t)return dt=dt(V),_t=st===""?"."+L(V,0):st,it(dt)?(ct="",_t!=null&&(ct=_t.replace(P,"$&/")+"/"),At(dt,nt,ct,"",function(ri){return ri})):dt!=null&&(x(dt)&&(dt=R(dt,ct+(dt.key==null||V&&V.key===dt.key?"":(""+dt.key).replace(P,"$&/")+"/")+_t)),nt.push(dt)),1;_t=0;var Pe=st===""?".":st+":";if(it(V))for(var ie=0;ie<V.length;ie++)st=V[ie],wt=Pe+L(st,ie),_t+=At(st,nt,ct,wt,dt);else if(ie=T(V),typeof ie=="function")for(V=ie.call(V),ie=0;!(st=V.next()).done;)st=st.value,wt=Pe+L(st,ie++),_t+=At(st,nt,ct,wt,dt);else if(wt==="object"){if(typeof V.then=="function")return At(Wt(V),nt,ct,st,dt);throw nt=String(V),Error("Objects are not valid as a React child (found: "+(nt==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":nt)+"). If you meant to render a collection of children, use an array instead.")}return _t}function Y(V,nt,ct){if(V==null)return V;var st=[],dt=0;return At(V,st,"","",function(wt){return nt.call(ct,wt,dt++)}),st}function at(V){if(V._status===-1){var nt=V._result;nt=nt(),nt.then(function(ct){(V._status===0||V._status===-1)&&(V._status=1,V._result=ct)},function(ct){(V._status===0||V._status===-1)&&(V._status=2,V._result=ct)}),V._status===-1&&(V._status=0,V._result=nt)}if(V._status===1)return V._result.default;throw V._result}var gt=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var nt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(nt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function kt(){}return xt.Children={map:Y,forEach:function(V,nt,ct){Y(V,function(){nt.apply(this,arguments)},ct)},count:function(V){var nt=0;return Y(V,function(){nt++}),nt},toArray:function(V){return Y(V,function(nt){return nt})||[]},only:function(V){if(!x(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},xt.Component=M,xt.Fragment=e,xt.Profiler=r,xt.PureComponent=X,xt.StrictMode=i,xt.Suspense=d,xt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,xt.__COMPILER_RUNTIME={__proto__:null,c:function(V){return W.H.useMemoCache(V)}},xt.cache=function(V){return function(){return V.apply(null,arguments)}},xt.cloneElement=function(V,nt,ct){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var st=I({},V.props),dt=V.key,wt=void 0;if(nt!=null)for(_t in nt.ref!==void 0&&(wt=void 0),nt.key!==void 0&&(dt=""+nt.key),nt)!ot.call(nt,_t)||_t==="key"||_t==="__self"||_t==="__source"||_t==="ref"&&nt.ref===void 0||(st[_t]=nt[_t]);var _t=arguments.length-2;if(_t===1)st.children=ct;else if(1<_t){for(var Pe=Array(_t),ie=0;ie<_t;ie++)Pe[ie]=arguments[ie+2];st.children=Pe}return C(V.type,dt,void 0,void 0,wt,st)},xt.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:o,_context:V},V},xt.createElement=function(V,nt,ct){var st,dt={},wt=null;if(nt!=null)for(st in nt.key!==void 0&&(wt=""+nt.key),nt)ot.call(nt,st)&&st!=="key"&&st!=="__self"&&st!=="__source"&&(dt[st]=nt[st]);var _t=arguments.length-2;if(_t===1)dt.children=ct;else if(1<_t){for(var Pe=Array(_t),ie=0;ie<_t;ie++)Pe[ie]=arguments[ie+2];dt.children=Pe}if(V&&V.defaultProps)for(st in _t=V.defaultProps,_t)dt[st]===void 0&&(dt[st]=_t[st]);return C(V,wt,void 0,void 0,null,dt)},xt.createRef=function(){return{current:null}},xt.forwardRef=function(V){return{$$typeof:h,render:V}},xt.isValidElement=x,xt.lazy=function(V){return{$$typeof:_,_payload:{_status:-1,_result:V},_init:at}},xt.memo=function(V,nt){return{$$typeof:m,type:V,compare:nt===void 0?null:nt}},xt.startTransition=function(V){var nt=W.T,ct={};W.T=ct;try{var st=V(),dt=W.S;dt!==null&&dt(ct,st),typeof st=="object"&&st!==null&&typeof st.then=="function"&&st.then(kt,gt)}catch(wt){gt(wt)}finally{W.T=nt}},xt.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},xt.use=function(V){return W.H.use(V)},xt.useActionState=function(V,nt,ct){return W.H.useActionState(V,nt,ct)},xt.useCallback=function(V,nt){return W.H.useCallback(V,nt)},xt.useContext=function(V){return W.H.useContext(V)},xt.useDebugValue=function(){},xt.useDeferredValue=function(V,nt){return W.H.useDeferredValue(V,nt)},xt.useEffect=function(V,nt,ct){var st=W.H;if(typeof ct=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return st.useEffect(V,nt)},xt.useId=function(){return W.H.useId()},xt.useImperativeHandle=function(V,nt,ct){return W.H.useImperativeHandle(V,nt,ct)},xt.useInsertionEffect=function(V,nt){return W.H.useInsertionEffect(V,nt)},xt.useLayoutEffect=function(V,nt){return W.H.useLayoutEffect(V,nt)},xt.useMemo=function(V,nt){return W.H.useMemo(V,nt)},xt.useOptimistic=function(V,nt){return W.H.useOptimistic(V,nt)},xt.useReducer=function(V,nt,ct){return W.H.useReducer(V,nt,ct)},xt.useRef=function(V){return W.H.useRef(V)},xt.useState=function(V){return W.H.useState(V)},xt.useSyncExternalStore=function(V,nt,ct){return W.H.useSyncExternalStore(V,nt,ct)},xt.useTransition=function(){return W.H.useTransition()},xt.version="19.1.0",xt}var U0;function pp(){return U0||(U0=1,cm.exports=LR()),cm.exports}var re=pp();const LT=NR(re);var um={exports:{}},hc={},hm={exports:{}},fm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z0;function UR(){return z0||(z0=1,function(n){function t(Y,at){var gt=Y.length;Y.push(at);t:for(;0<gt;){var kt=gt-1>>>1,V=Y[kt];if(0<r(V,at))Y[kt]=at,Y[gt]=V,gt=kt;else break t}}function e(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var at=Y[0],gt=Y.pop();if(gt!==at){Y[0]=gt;t:for(var kt=0,V=Y.length,nt=V>>>1;kt<nt;){var ct=2*(kt+1)-1,st=Y[ct],dt=ct+1,wt=Y[dt];if(0>r(st,gt))dt<V&&0>r(wt,st)?(Y[kt]=wt,Y[dt]=gt,kt=dt):(Y[kt]=st,Y[ct]=gt,kt=ct);else if(dt<V&&0>r(wt,gt))Y[kt]=wt,Y[dt]=gt,kt=dt;else break t}}return at}function r(Y,at){var gt=Y.sortIndex-at.sortIndex;return gt!==0?gt:Y.id-at.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var d=[],m=[],_=1,v=null,T=3,A=!1,I=!1,k=!1,M=!1,G=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,et=typeof setImmediate<"u"?setImmediate:null;function it(Y){for(var at=e(m);at!==null;){if(at.callback===null)i(m);else if(at.startTime<=Y)i(m),at.sortIndex=at.expirationTime,t(d,at);else break;at=e(m)}}function W(Y){if(k=!1,it(Y),!I)if(e(d)!==null)I=!0,ot||(ot=!0,L());else{var at=e(m);at!==null&&At(W,at.startTime-Y)}}var ot=!1,C=-1,R=5,x=-1;function N(){return M?!0:!(n.unstable_now()-x<R)}function P(){if(M=!1,ot){var Y=n.unstable_now();x=Y;var at=!0;try{t:{I=!1,k&&(k=!1,X(C),C=-1),A=!0;var gt=T;try{e:{for(it(Y),v=e(d);v!==null&&!(v.expirationTime>Y&&N());){var kt=v.callback;if(typeof kt=="function"){v.callback=null,T=v.priorityLevel;var V=kt(v.expirationTime<=Y);if(Y=n.unstable_now(),typeof V=="function"){v.callback=V,it(Y),at=!0;break e}v===e(d)&&i(d),it(Y)}else i(d);v=e(d)}if(v!==null)at=!0;else{var nt=e(m);nt!==null&&At(W,nt.startTime-Y),at=!1}}break t}finally{v=null,T=gt,A=!1}at=void 0}}finally{at?L():ot=!1}}}var L;if(typeof et=="function")L=function(){et(P)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Wt=D.port2;D.port1.onmessage=P,L=function(){Wt.postMessage(null)}}else L=function(){G(P,0)};function At(Y,at){C=G(function(){Y(n.unstable_now())},at)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(Y){switch(T){case 1:case 2:case 3:var at=3;break;default:at=T}var gt=T;T=at;try{return Y()}finally{T=gt}},n.unstable_requestPaint=function(){M=!0},n.unstable_runWithPriority=function(Y,at){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var gt=T;T=Y;try{return at()}finally{T=gt}},n.unstable_scheduleCallback=function(Y,at,gt){var kt=n.unstable_now();switch(typeof gt=="object"&&gt!==null?(gt=gt.delay,gt=typeof gt=="number"&&0<gt?kt+gt:kt):gt=kt,Y){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=gt+V,Y={id:_++,callback:at,priorityLevel:Y,startTime:gt,expirationTime:V,sortIndex:-1},gt>kt?(Y.sortIndex=gt,t(m,Y),e(d)===null&&Y===e(m)&&(k?(X(C),C=-1):k=!0,At(W,gt-kt))):(Y.sortIndex=V,t(d,Y),I||A||(I=!0,ot||(ot=!0,L()))),Y},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(Y){var at=T;return function(){var gt=T;T=at;try{return Y.apply(this,arguments)}finally{T=gt}}}}(fm)),fm}var B0;function zR(){return B0||(B0=1,hm.exports=UR()),hm.exports}var dm={exports:{}},Je={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j0;function BR(){if(j0)return Je;j0=1;var n=pp();function t(d){var m="https://react.dev/errors/"+d;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)m+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(d,m,_){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:d,containerInfo:m,implementation:_}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,m){if(d==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Je.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Je.createPortal=function(d,m){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return o(d,m,null,_)},Je.flushSync=function(d){var m=c.T,_=i.p;try{if(c.T=null,i.p=2,d)return d()}finally{c.T=m,i.p=_,i.d.f()}},Je.preconnect=function(d,m){typeof d=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(d,m))},Je.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},Je.preinit=function(d,m){if(typeof d=="string"&&m&&typeof m.as=="string"){var _=m.as,v=h(_,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,A=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;_==="style"?i.d.S(d,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:T,fetchPriority:A}):_==="script"&&i.d.X(d,{crossOrigin:v,integrity:T,fetchPriority:A,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Je.preinitModule=function(d,m){if(typeof d=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var _=h(m.as,m.crossOrigin);i.d.M(d,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(d)},Je.preload=function(d,m){if(typeof d=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var _=m.as,v=h(_,m.crossOrigin);i.d.L(d,_,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Je.preloadModule=function(d,m){if(typeof d=="string")if(m){var _=h(m.as,m.crossOrigin);i.d.m(d,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(d)},Je.requestFormReset=function(d){i.d.r(d)},Je.unstable_batchedUpdates=function(d,m){return d(m)},Je.useFormState=function(d,m,_){return c.H.useFormState(d,m,_)},Je.useFormStatus=function(){return c.H.useHostTransitionStatus()},Je.version="19.1.0",Je}var H0;function jR(){if(H0)return dm.exports;H0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),dm.exports=BR(),dm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0;function HR(){if(F0)return hc;F0=1;var n=zR(),t=pp(),e=jR();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,l=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(l=a.return),s=a.return;while(s)}return a.tag===3?l:null}function c(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function h(s){if(o(s)!==s)throw Error(i(188))}function d(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(i(188));return a!==s?null:s}for(var l=s,u=a;;){var g=l.return;if(g===null)break;var p=g.alternate;if(p===null){if(u=g.return,u!==null){l=u;continue}break}if(g.child===p.child){for(p=g.child;p;){if(p===l)return h(g),s;if(p===u)return h(g),a;p=p.sibling}throw Error(i(188))}if(l.return!==u.return)l=g,u=p;else{for(var E=!1,S=g.child;S;){if(S===l){E=!0,l=g,u=p;break}if(S===u){E=!0,u=g,l=p;break}S=S.sibling}if(!E){for(S=p.child;S;){if(S===l){E=!0,l=p,u=g;break}if(S===u){E=!0,u=p,l=g;break}S=S.sibling}if(!E)throw Error(i(189))}}if(l.alternate!==u)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:a}function m(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=m(s),a!==null)return a;s=s.sibling}return null}var _=Object.assign,v=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),G=Symbol.for("react.provider"),X=Symbol.for("react.consumer"),et=Symbol.for("react.context"),it=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),ot=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function L(s){return s===null||typeof s!="object"?null:(s=P&&s[P]||s["@@iterator"],typeof s=="function"?s:null)}var D=Symbol.for("react.client.reference");function Wt(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===D?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case I:return"Fragment";case M:return"Profiler";case k:return"StrictMode";case W:return"Suspense";case ot:return"SuspenseList";case x:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case A:return"Portal";case et:return(s.displayName||"Context")+".Provider";case X:return(s._context.displayName||"Context")+".Consumer";case it:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case C:return a=s.displayName||null,a!==null?a:Wt(s.type)||"Memo";case R:a=s._payload,s=s._init;try{return Wt(s(a))}catch{}}return null}var At=Array.isArray,Y=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,gt={pending:!1,data:null,method:null,action:null},kt=[],V=-1;function nt(s){return{current:s}}function ct(s){0>V||(s.current=kt[V],kt[V]=null,V--)}function st(s,a){V++,kt[V]=s.current,s.current=a}var dt=nt(null),wt=nt(null),_t=nt(null),Pe=nt(null);function ie(s,a){switch(st(_t,a),st(wt,s),st(dt,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?c0(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=c0(a),s=u0(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ct(dt),st(dt,s)}function ri(){ct(dt),ct(wt),ct(_t)}function ys(s){s.memoizedState!==null&&st(Pe,s);var a=dt.current,l=u0(a,s.type);a!==l&&(st(wt,s),st(dt,l))}function Ni(s){wt.current===s&&(ct(dt),ct(wt)),Pe.current===s&&(ct(Pe),rc._currentValue=gt)}var Tr=Object.prototype.hasOwnProperty,Sr=n.unstable_scheduleCallback,Ar=n.unstable_cancelCallback,nl=n.unstable_shouldYield,lu=n.unstable_requestPaint,In=n.unstable_now,ld=n.unstable_getCurrentPriorityLevel,il=n.unstable_ImmediatePriority,xa=n.unstable_UserBlockingPriority,wr=n.unstable_NormalPriority,cd=n.unstable_LowPriority,Ia=n.unstable_IdlePriority,sl=n.log,cu=n.unstable_setDisableYieldValue,de=null,Yt=null;function yn(s){if(typeof sl=="function"&&cu(s),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(de,s)}catch{}}var $e=Math.clz32?Math.clz32:Rr,uu=Math.log,ud=Math.LN2;function Rr(s){return s>>>=0,s===0?32:31-(uu(s)/ud|0)|0}var xr=256,Ir=4194304;function Gn(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ca(s,a,l){var u=s.pendingLanes;if(u===0)return 0;var g=0,p=s.suspendedLanes,E=s.pingedLanes;s=s.warmLanes;var S=u&134217727;return S!==0?(u=S&~p,u!==0?g=Gn(u):(E&=S,E!==0?g=Gn(E):l||(l=S&~s,l!==0&&(g=Gn(l))))):(S=u&~p,S!==0?g=Gn(S):E!==0?g=Gn(E):l||(l=u&~s,l!==0&&(g=Gn(l)))),g===0?0:a!==0&&a!==g&&(a&p)===0&&(p=g&-g,l=a&-a,p>=l||p===32&&(l&4194048)!==0)?a:g}function Cr(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function rl(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function al(){var s=xr;return xr<<=1,(xr&4194048)===0&&(xr=256),s}function ol(){var s=Ir;return Ir<<=1,(Ir&62914560)===0&&(Ir=4194304),s}function Pi(s){for(var a=[],l=0;31>l;l++)a.push(s);return a}function Vi(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ll(s,a,l,u,g,p){var E=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var S=s.entanglements,O=s.expirationTimes,H=s.hiddenUpdates;for(l=E&~l;0<l;){var Q=31-$e(l),J=1<<Q;S[Q]=0,O[Q]=-1;var F=H[Q];if(F!==null)for(H[Q]=null,Q=0;Q<F.length;Q++){var q=F[Q];q!==null&&(q.lane&=-536870913)}l&=~J}u!==0&&ai(s,u,0),p!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=p&~(E&~a))}function ai(s,a,l){s.pendingLanes|=a,s.suspendedLanes&=~a;var u=31-$e(a);s.entangledLanes|=a,s.entanglements[u]=s.entanglements[u]|1073741824|l&4194090}function cl(s,a){var l=s.entangledLanes|=a;for(s=s.entanglements;l;){var u=31-$e(l),g=1<<u;g&a|s[u]&a&&(s[u]|=a),l&=~g}}function vs(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Da(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function bs(){var s=at.p;return s!==0?s:(s=window.event,s===void 0?32:C0(s.type))}function hu(s,a){var l=at.p;try{return at.p=s,a()}finally{at.p=l}}var ce=Math.random().toString(36).slice(2),Ie="__reactFiber$"+ce,Ee="__reactProps$"+ce,Cn="__reactContainer$"+ce,ul="__reactEvents$"+ce,hd="__reactListeners$"+ce,Es="__reactHandles$"+ce,fu="__reactResources$"+ce,Dr="__reactMarker$"+ce;function Ts(s){delete s[Ie],delete s[Ee],delete s[ul],delete s[hd],delete s[Es]}function Li(s){var a=s[Ie];if(a)return a;for(var l=s.parentNode;l;){if(a=l[Cn]||l[Ie]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(s=g0(s);s!==null;){if(l=s[Ie])return l;s=g0(s)}return a}s=l,l=s.parentNode}return null}function oi(s){if(s=s[Ie]||s[Cn]){var a=s.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return s}return null}function li(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function an(s){var a=s[fu];return a||(a=s[fu]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function pe(s){s[Dr]=!0}var hl=new Set,Oa={};function Yn(s,a){Ui(s,a),Ui(s+"Capture",a)}function Ui(s,a){for(Oa[s]=a,s=0;s<a.length;s++)hl.add(a[s])}var du=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gu={},Or={};function mu(s){return Tr.call(Or,s)?!0:Tr.call(gu,s)?!1:du.test(s)?Or[s]=!0:(gu[s]=!0,!1)}function Ss(s,a,l){if(mu(a))if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+l)}}function ci(s,a,l){if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+l)}}function Fe(s,a,l,u){if(u===null)s.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(a,l,""+u)}}var Mr,pu;function zi(s){if(Mr===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Mr=a&&a[1]||"",pu=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Mr+s+pu}var Ma=!1;function ka(s,a){if(!s||Ma)return"";Ma=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(q){var F=q}Reflect.construct(s,[],J)}else{try{J.call()}catch(q){F=q}s.call(J.prototype)}}else{try{throw Error()}catch(q){F=q}(J=s())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(q){if(q&&F&&typeof q.stack=="string")return[q.stack,F.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),E=p[0],S=p[1];if(E&&S){var O=E.split(`
`),H=S.split(`
`);for(g=u=0;u<O.length&&!O[u].includes("DetermineComponentFrameRoot");)u++;for(;g<H.length&&!H[g].includes("DetermineComponentFrameRoot");)g++;if(u===O.length||g===H.length)for(u=O.length-1,g=H.length-1;1<=u&&0<=g&&O[u]!==H[g];)g--;for(;1<=u&&0<=g;u--,g--)if(O[u]!==H[g]){if(u!==1||g!==1)do if(u--,g--,0>g||O[u]!==H[g]){var Q=`
`+O[u].replace(" at new "," at ");return s.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",s.displayName)),Q}while(1<=u&&0<=g);break}}}finally{Ma=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?zi(l):""}function fl(s){switch(s.tag){case 26:case 27:case 5:return zi(s.type);case 16:return zi("Lazy");case 13:return zi("Suspense");case 19:return zi("SuspenseList");case 0:case 15:return ka(s.type,!1);case 11:return ka(s.type.render,!1);case 1:return ka(s.type,!0);case 31:return zi("Activity");default:return""}}function Na(s){try{var a="";do a+=fl(s),s=s.return;while(s);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function on(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function dl(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function fd(s){var a=dl(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),u=""+s[a];if(!s.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,p=l.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return g.call(this)},set:function(E){u=""+E,p.call(this,E)}}),Object.defineProperty(s,a,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Pa(s){s._valueTracker||(s._valueTracker=fd(s))}function gl(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var l=a.getValue(),u="";return s&&(u=dl(s)?s.checked?"true":"false":s.value),s=u,s!==l?(a.setValue(s),!0):!1}function kr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var dd=/[\n"\\]/g;function Te(s){return s.replace(dd,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function vn(s,a,l,u,g,p,E,S){s.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?s.type=E:s.removeAttribute("type"),a!=null?E==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+on(a)):s.value!==""+on(a)&&(s.value=""+on(a)):E!=="submit"&&E!=="reset"||s.removeAttribute("value"),a!=null?As(s,E,on(a)):l!=null?As(s,E,on(l)):u!=null&&s.removeAttribute("value"),g==null&&p!=null&&(s.defaultChecked=!!p),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?s.name=""+on(S):s.removeAttribute("name")}function Nr(s,a,l,u,g,p,E,S){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(s.type=p),a!=null||l!=null){if(!(p!=="submit"&&p!=="reset"||a!=null))return;l=l!=null?""+on(l):"",a=a!=null?""+on(a):l,S||a===s.value||(s.value=a),s.defaultValue=a}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=S?s.checked:!!u,s.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.name=E)}function As(s,a,l){a==="number"&&kr(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Bi(s,a,l,u){if(s=s.options,a){a={};for(var g=0;g<l.length;g++)a["$"+l[g]]=!0;for(l=0;l<s.length;l++)g=a.hasOwnProperty("$"+s[l].value),s[l].selected!==g&&(s[l].selected=g),g&&u&&(s[l].defaultSelected=!0)}else{for(l=""+on(l),a=null,g=0;g<s.length;g++){if(s[g].value===l){s[g].selected=!0,u&&(s[g].defaultSelected=!0);return}a!==null||s[g].disabled||(a=s[g])}a!==null&&(a.selected=!0)}}function $t(s,a,l){if(a!=null&&(a=""+on(a),a!==s.value&&(s.value=a),l==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=l!=null?""+on(l):""}function Pr(s,a,l,u){if(a==null){if(u!=null){if(l!=null)throw Error(i(92));if(At(u)){if(1<u.length)throw Error(i(93));u=u[0]}l=u}l==null&&(l=""),a=l}l=on(a),s.defaultValue=l,u=s.textContent,u===l&&u!==""&&u!==null&&(s.value=u)}function Dn(s,a){if(a){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=a;return}}s.textContent=a}var Vr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _u(s,a,l){var u=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":u?s.setProperty(a,l):typeof l!="number"||l===0||Vr.has(a)?a==="float"?s.cssFloat=l:s[a]=(""+l).trim():s[a]=l+"px"}function ml(s,a,l){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var g in a)u=a[g],a.hasOwnProperty(g)&&l[g]!==u&&_u(s,g,u)}else for(var p in a)a.hasOwnProperty(p)&&_u(s,p,a[p])}function pl(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),md=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Va(s){return md.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var ji=null;function On(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Hi=null,Fi=null;function _l(s){var a=oi(s);if(a&&(s=a.stateNode)){var l=s[Ee]||null;t:switch(s=a.stateNode,a.type){case"input":if(vn(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Te(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var u=l[a];if(u!==s&&u.form===s.form){var g=u[Ee]||null;if(!g)throw Error(i(90));vn(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<l.length;a++)u=l[a],u.form===s.form&&gl(u)}break t;case"textarea":$t(s,l.value,l.defaultValue);break t;case"select":a=l.value,a!=null&&Bi(s,!!l.multiple,a,!1)}}}var ui=!1;function yu(s,a,l){if(ui)return s(a,l);ui=!0;try{var u=s(a);return u}finally{if(ui=!1,(Hi!==null||Fi!==null)&&(hh(),Hi&&(a=Hi,s=Fi,Fi=Hi=null,_l(a),s)))for(a=0;a<s.length;a++)_l(s[a])}}function Lr(s,a){var l=s.stateNode;if(l===null)return null;var u=l[Ee]||null;if(u===null)return null;l=u[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break t;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,a,typeof l));return l}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mn=!1;if(Kn)try{var Ur={};Object.defineProperty(Ur,"passive",{get:function(){Mn=!0}}),window.addEventListener("test",Ur,Ur),window.removeEventListener("test",Ur,Ur)}catch{Mn=!1}var hi=null,ws=null,qi=null;function yl(){if(qi)return qi;var s,a=ws,l=a.length,u,g="value"in hi?hi.value:hi.textContent,p=g.length;for(s=0;s<l&&a[s]===g[s];s++);var E=l-s;for(u=1;u<=E&&a[l-u]===g[p-u];u++);return qi=g.slice(s,1<u?1-u:void 0)}function fi(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function di(){return!0}function vl(){return!1}function Ve(s){function a(l,u,g,p,E){this._reactName=l,this._targetInst=g,this.type=u,this.nativeEvent=p,this.target=E,this.currentTarget=null;for(var S in s)s.hasOwnProperty(S)&&(l=s[S],this[S]=l?l(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?di:vl,this.isPropagationStopped=vl,this}return _(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=di)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=di)},persist:function(){},isPersistent:di}),a}var qt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},La=Ve(qt),zr=_({},qt,{view:0,detail:0}),vu=Ve(zr),Ua,za,gi,Br=_({},zr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==gi&&(gi&&s.type==="mousemove"?(Ua=s.screenX-gi.screenX,za=s.screenY-gi.screenY):za=Ua=0,gi=s),Ua)},movementY:function(s){return"movementY"in s?s.movementY:za}}),kn=Ve(Br),bu=_({},Br,{dataTransfer:0}),pd=Ve(bu),jr=_({},zr,{relatedTarget:0}),Ba=Ve(jr),bl=_({},qt,{animationName:0,elapsedTime:0,pseudoElement:0}),ja=Ve(bl),Eu=_({},qt,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Ha=Ve(Eu),_d=_({},qt,{data:0}),El=Ve(_d),Hr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Su={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tl(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Su[s])?!!a[s]:!1}function Fr(){return Tl}var Au=_({},zr,{key:function(s){if(s.key){var a=Hr[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=fi(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Tu[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fr,charCode:function(s){return s.type==="keypress"?fi(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?fi(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Fa=Ve(Au),wu=_({},Br,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sl=Ve(wu),Gi=_({},zr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fr}),Ru=Ve(Gi),xu=_({},qt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Iu=Ve(xu),Cu=_({},Br,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),qa=Ve(Cu),ln=_({},qt,{newState:0,oldState:0}),Du=Ve(ln),Ou=[9,13,27,32],mi=Kn&&"CompositionEvent"in window,f=null;Kn&&"documentMode"in document&&(f=document.documentMode);var y=Kn&&"TextEvent"in window&&!f,b=Kn&&(!mi||f&&8<f&&11>=f),w=" ",B=!1;function K(s,a){switch(s){case"keyup":return Ou.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lt(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Vt=!1;function Ce(s,a){switch(s){case"compositionend":return lt(a);case"keypress":return a.which!==32?null:(B=!0,w);case"textInput":return s=a.data,s===w&&B?null:s;default:return null}}function Lt(s,a){if(Vt)return s==="compositionend"||!mi&&K(s,a)?(s=yl(),qi=ws=hi=null,Vt=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return b&&a.locale!=="ko"?null:a.data;default:return null}}var Le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function De(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!Le[s.type]:a==="textarea"}function Yi(s,a,l,u){Hi?Fi?Fi.push(u):Fi=[u]:Hi=u,a=_h(a,"onChange"),0<a.length&&(l=new La("onChange","change",null,l,u),s.push({event:l,listeners:a}))}var qe=null,pi=null;function Al(s){s0(s,0)}function Mu(s){var a=li(s);if(gl(a))return s}function w_(s,a){if(s==="change")return a}var R_=!1;if(Kn){var yd;if(Kn){var vd="oninput"in document;if(!vd){var x_=document.createElement("div");x_.setAttribute("oninput","return;"),vd=typeof x_.oninput=="function"}yd=vd}else yd=!1;R_=yd&&(!document.documentMode||9<document.documentMode)}function I_(){qe&&(qe.detachEvent("onpropertychange",C_),pi=qe=null)}function C_(s){if(s.propertyName==="value"&&Mu(pi)){var a=[];Yi(a,pi,s,On(s)),yu(Al,a)}}function u1(s,a,l){s==="focusin"?(I_(),qe=a,pi=l,qe.attachEvent("onpropertychange",C_)):s==="focusout"&&I_()}function h1(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Mu(pi)}function f1(s,a){if(s==="click")return Mu(a)}function d1(s,a){if(s==="input"||s==="change")return Mu(a)}function g1(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var bn=typeof Object.is=="function"?Object.is:g1;function wl(s,a){if(bn(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var l=Object.keys(s),u=Object.keys(a);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var g=l[u];if(!Tr.call(a,g)||!bn(s[g],a[g]))return!1}return!0}function D_(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function O_(s,a){var l=D_(s);s=0;for(var u;l;){if(l.nodeType===3){if(u=s+l.textContent.length,s<=a&&u>=a)return{node:l,offset:a-s};s=u}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=D_(l)}}function M_(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?M_(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function k_(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=kr(s.document);a instanceof s.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)s=a.contentWindow;else break;a=kr(s.document)}return a}function bd(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var m1=Kn&&"documentMode"in document&&11>=document.documentMode,Ga=null,Ed=null,Rl=null,Td=!1;function N_(s,a,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Td||Ga==null||Ga!==kr(u)||(u=Ga,"selectionStart"in u&&bd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Rl&&wl(Rl,u)||(Rl=u,u=_h(Ed,"onSelect"),0<u.length&&(a=new La("onSelect","select",null,a,l),s.push({event:a,listeners:u}),a.target=Ga)))}function qr(s,a){var l={};return l[s.toLowerCase()]=a.toLowerCase(),l["Webkit"+s]="webkit"+a,l["Moz"+s]="moz"+a,l}var Ya={animationend:qr("Animation","AnimationEnd"),animationiteration:qr("Animation","AnimationIteration"),animationstart:qr("Animation","AnimationStart"),transitionrun:qr("Transition","TransitionRun"),transitionstart:qr("Transition","TransitionStart"),transitioncancel:qr("Transition","TransitionCancel"),transitionend:qr("Transition","TransitionEnd")},Sd={},P_={};Kn&&(P_=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function Gr(s){if(Sd[s])return Sd[s];if(!Ya[s])return s;var a=Ya[s],l;for(l in a)if(a.hasOwnProperty(l)&&l in P_)return Sd[s]=a[l];return s}var V_=Gr("animationend"),L_=Gr("animationiteration"),U_=Gr("animationstart"),p1=Gr("transitionrun"),_1=Gr("transitionstart"),y1=Gr("transitioncancel"),z_=Gr("transitionend"),B_=new Map,Ad="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ad.push("scrollEnd");function Qn(s,a){B_.set(s,a),Yn(a,[s])}var j_=new WeakMap;function Nn(s,a){if(typeof s=="object"&&s!==null){var l=j_.get(s);return l!==void 0?l:(a={value:s,source:a,stack:Na(a)},j_.set(s,a),a)}return{value:s,source:a,stack:Na(a)}}var Pn=[],Ka=0,wd=0;function ku(){for(var s=Ka,a=wd=Ka=0;a<s;){var l=Pn[a];Pn[a++]=null;var u=Pn[a];Pn[a++]=null;var g=Pn[a];Pn[a++]=null;var p=Pn[a];if(Pn[a++]=null,u!==null&&g!==null){var E=u.pending;E===null?g.next=g:(g.next=E.next,E.next=g),u.pending=g}p!==0&&H_(l,g,p)}}function Nu(s,a,l,u){Pn[Ka++]=s,Pn[Ka++]=a,Pn[Ka++]=l,Pn[Ka++]=u,wd|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function Rd(s,a,l,u){return Nu(s,a,l,u),Pu(s)}function Qa(s,a){return Nu(s,null,null,a),Pu(s)}function H_(s,a,l){s.lanes|=l;var u=s.alternate;u!==null&&(u.lanes|=l);for(var g=!1,p=s.return;p!==null;)p.childLanes|=l,u=p.alternate,u!==null&&(u.childLanes|=l),p.tag===22&&(s=p.stateNode,s===null||s._visibility&1||(g=!0)),s=p,p=p.return;return s.tag===3?(p=s.stateNode,g&&a!==null&&(g=31-$e(l),s=p.hiddenUpdates,u=s[g],u===null?s[g]=[a]:u.push(a),a.lane=l|536870912),p):null}function Pu(s){if(50<$l)throw $l=0,Mg=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var Xa={};function v1(s,a,l,u){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(s,a,l,u){return new v1(s,a,l,u)}function xd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ki(s,a){var l=s.alternate;return l===null?(l=En(s.tag,a,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=a,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,a=s.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function F_(s,a){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,a=l.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function Vu(s,a,l,u,g,p){var E=0;if(u=s,typeof s=="function")xd(s)&&(E=1);else if(typeof s=="string")E=ER(s,l,dt.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case x:return s=En(31,l,a,g),s.elementType=x,s.lanes=p,s;case I:return Yr(l.children,g,p,a);case k:E=8,g|=24;break;case M:return s=En(12,l,a,g|2),s.elementType=M,s.lanes=p,s;case W:return s=En(13,l,a,g),s.elementType=W,s.lanes=p,s;case ot:return s=En(19,l,a,g),s.elementType=ot,s.lanes=p,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case G:case et:E=10;break t;case X:E=9;break t;case it:E=11;break t;case C:E=14;break t;case R:E=16,u=null;break t}E=29,l=Error(i(130,s===null?"null":typeof s,"")),u=null}return a=En(E,l,a,g),a.elementType=s,a.type=u,a.lanes=p,a}function Yr(s,a,l,u){return s=En(7,s,u,a),s.lanes=l,s}function Id(s,a,l){return s=En(6,s,null,a),s.lanes=l,s}function Cd(s,a,l){return a=En(4,s.children!==null?s.children:[],s.key,a),a.lanes=l,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var Wa=[],$a=0,Lu=null,Uu=0,Vn=[],Ln=0,Kr=null,Qi=1,Xi="";function Qr(s,a){Wa[$a++]=Uu,Wa[$a++]=Lu,Lu=s,Uu=a}function q_(s,a,l){Vn[Ln++]=Qi,Vn[Ln++]=Xi,Vn[Ln++]=Kr,Kr=s;var u=Qi;s=Xi;var g=32-$e(u)-1;u&=~(1<<g),l+=1;var p=32-$e(a)+g;if(30<p){var E=g-g%5;p=(u&(1<<E)-1).toString(32),u>>=E,g-=E,Qi=1<<32-$e(a)+g|l<<g|u,Xi=p+s}else Qi=1<<p|l<<g|u,Xi=s}function Dd(s){s.return!==null&&(Qr(s,1),q_(s,1,0))}function Od(s){for(;s===Lu;)Lu=Wa[--$a],Wa[$a]=null,Uu=Wa[--$a],Wa[$a]=null;for(;s===Kr;)Kr=Vn[--Ln],Vn[Ln]=null,Xi=Vn[--Ln],Vn[Ln]=null,Qi=Vn[--Ln],Vn[Ln]=null}var cn=null,ge=null,Ht=!1,Xr=null,_i=!1,Md=Error(i(519));function Wr(s){var a=Error(i(418,""));throw Cl(Nn(a,s)),Md}function G_(s){var a=s.stateNode,l=s.type,u=s.memoizedProps;switch(a[Ie]=s,a[Ee]=u,l){case"dialog":Mt("cancel",a),Mt("close",a);break;case"iframe":case"object":case"embed":Mt("load",a);break;case"video":case"audio":for(l=0;l<Jl.length;l++)Mt(Jl[l],a);break;case"source":Mt("error",a);break;case"img":case"image":case"link":Mt("error",a),Mt("load",a);break;case"details":Mt("toggle",a);break;case"input":Mt("invalid",a),Nr(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Pa(a);break;case"select":Mt("invalid",a);break;case"textarea":Mt("invalid",a),Pr(a,u.value,u.defaultValue,u.children),Pa(a)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||u.suppressHydrationWarning===!0||l0(a.textContent,l)?(u.popover!=null&&(Mt("beforetoggle",a),Mt("toggle",a)),u.onScroll!=null&&Mt("scroll",a),u.onScrollEnd!=null&&Mt("scrollend",a),u.onClick!=null&&(a.onclick=yh),a=!0):a=!1,a||Wr(s)}function Y_(s){for(cn=s.return;cn;)switch(cn.tag){case 5:case 13:_i=!1;return;case 27:case 3:_i=!0;return;default:cn=cn.return}}function xl(s){if(s!==cn)return!1;if(!Ht)return Y_(s),Ht=!0,!1;var a=s.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||Qg(s.type,s.memoizedProps)),l=!l),l&&ge&&Wr(s),Y_(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));t:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8)if(l=s.data,l==="/$"){if(a===0){ge=Wn(s.nextSibling);break t}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;s=s.nextSibling}ge=null}}else a===27?(a=ge,js(s.type)?(s=Zg,Zg=null,ge=s):ge=a):ge=cn?Wn(s.stateNode.nextSibling):null;return!0}function Il(){ge=cn=null,Ht=!1}function K_(){var s=Xr;return s!==null&&(fn===null?fn=s:fn.push.apply(fn,s),Xr=null),s}function Cl(s){Xr===null?Xr=[s]:Xr.push(s)}var kd=nt(null),$r=null,Wi=null;function Rs(s,a,l){st(kd,a._currentValue),a._currentValue=l}function $i(s){s._currentValue=kd.current,ct(kd)}function Nd(s,a,l){for(;s!==null;){var u=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),s===l)break;s=s.return}}function Pd(s,a,l,u){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var p=g.dependencies;if(p!==null){var E=g.child;p=p.firstContext;t:for(;p!==null;){var S=p;p=g;for(var O=0;O<a.length;O++)if(S.context===a[O]){p.lanes|=l,S=p.alternate,S!==null&&(S.lanes|=l),Nd(p.return,l,s),u||(E=null);break t}p=S.next}}else if(g.tag===18){if(E=g.return,E===null)throw Error(i(341));E.lanes|=l,p=E.alternate,p!==null&&(p.lanes|=l),Nd(E,l,s),E=null}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===s){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}}function Dl(s,a,l,u){s=null;for(var g=a,p=!1;g!==null;){if(!p){if((g.flags&524288)!==0)p=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var E=g.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var S=g.type;bn(g.pendingProps.value,E.value)||(s!==null?s.push(S):s=[S])}}else if(g===Pe.current){if(E=g.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(rc):s=[rc])}g=g.return}s!==null&&Pd(a,s,l,u),a.flags|=262144}function zu(s){for(s=s.firstContext;s!==null;){if(!bn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Zr(s){$r=s,Wi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Ze(s){return Q_($r,s)}function Bu(s,a){return $r===null&&Zr(s),Q_(s,a)}function Q_(s,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Wi===null){if(s===null)throw Error(i(308));Wi=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else Wi=Wi.next=a;return l}var b1=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(l,u){s.push(u)}};this.abort=function(){a.aborted=!0,s.forEach(function(l){return l()})}},E1=n.unstable_scheduleCallback,T1=n.unstable_NormalPriority,Oe={$$typeof:et,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vd(){return{controller:new b1,data:new Map,refCount:0}}function Ol(s){s.refCount--,s.refCount===0&&E1(T1,function(){s.controller.abort()})}var Ml=null,Ld=0,Za=0,Ja=null;function S1(s,a){if(Ml===null){var l=Ml=[];Ld=0,Za=zg(),Ja={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Ld++,a.then(X_,X_),a}function X_(){if(--Ld===0&&Ml!==null){Ja!==null&&(Ja.status="fulfilled");var s=Ml;Ml=null,Za=0,Ja=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function A1(s,a){var l=[],u={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return s.then(function(){u.status="fulfilled",u.value=a;for(var g=0;g<l.length;g++)(0,l[g])(a)},function(g){for(u.status="rejected",u.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),u}var W_=Y.S;Y.S=function(s,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&S1(s,a),W_!==null&&W_(s,a)};var Jr=nt(null);function Ud(){var s=Jr.current;return s!==null?s:se.pooledCache}function ju(s,a){a===null?st(Jr,Jr.current):st(Jr,a.pool)}function $_(){var s=Ud();return s===null?null:{parent:Oe._currentValue,pool:s}}var kl=Error(i(460)),Z_=Error(i(474)),Hu=Error(i(542)),zd={then:function(){}};function J_(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Fu(){}function ty(s,a,l){switch(l=s[l],l===void 0?s.push(a):l!==a&&(a.then(Fu,Fu),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,ny(s),s;default:if(typeof a.status=="string")a.then(Fu,Fu);else{if(s=se,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(u){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=u}},function(u){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,ny(s),s}throw Nl=a,kl}}var Nl=null;function ey(){if(Nl===null)throw Error(i(459));var s=Nl;return Nl=null,s}function ny(s){if(s===kl||s===Hu)throw Error(i(483))}var xs=!1;function Bd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jd(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Is(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Cs(s,a,l){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(Kt&2)!==0){var g=u.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),u.pending=a,a=Pu(s),H_(s,null,l),a}return Nu(s,u,a,l),Pu(s)}function Pl(s,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var u=a.lanes;u&=s.pendingLanes,l|=u,a.lanes=l,cl(s,l)}}function Hd(s,a){var l=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var g=null,p=null;if(l=l.firstBaseUpdate,l!==null){do{var E={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};p===null?g=p=E:p=p.next=E,l=l.next}while(l!==null);p===null?g=p=a:p=p.next=a}else g=p=a;l={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=a:s.next=a,l.lastBaseUpdate=a}var Fd=!1;function Vl(){if(Fd){var s=Ja;if(s!==null)throw s}}function Ll(s,a,l,u){Fd=!1;var g=s.updateQueue;xs=!1;var p=g.firstBaseUpdate,E=g.lastBaseUpdate,S=g.shared.pending;if(S!==null){g.shared.pending=null;var O=S,H=O.next;O.next=null,E===null?p=H:E.next=H,E=O;var Q=s.alternate;Q!==null&&(Q=Q.updateQueue,S=Q.lastBaseUpdate,S!==E&&(S===null?Q.firstBaseUpdate=H:S.next=H,Q.lastBaseUpdate=O))}if(p!==null){var J=g.baseState;E=0,Q=H=O=null,S=p;do{var F=S.lane&-536870913,q=F!==S.lane;if(q?(Ut&F)===F:(u&F)===F){F!==0&&F===Za&&(Fd=!0),Q!==null&&(Q=Q.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});t:{var Tt=s,yt=S;F=a;var te=l;switch(yt.tag){case 1:if(Tt=yt.payload,typeof Tt=="function"){J=Tt.call(te,J,F);break t}J=Tt;break t;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=yt.payload,F=typeof Tt=="function"?Tt.call(te,J,F):Tt,F==null)break t;J=_({},J,F);break t;case 2:xs=!0}}F=S.callback,F!==null&&(s.flags|=64,q&&(s.flags|=8192),q=g.callbacks,q===null?g.callbacks=[F]:q.push(F))}else q={lane:F,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Q===null?(H=Q=q,O=J):Q=Q.next=q,E|=F;if(S=S.next,S===null){if(S=g.shared.pending,S===null)break;q=S,S=q.next,q.next=null,g.lastBaseUpdate=q,g.shared.pending=null}}while(!0);Q===null&&(O=J),g.baseState=O,g.firstBaseUpdate=H,g.lastBaseUpdate=Q,p===null&&(g.shared.lanes=0),Ls|=E,s.lanes=E,s.memoizedState=J}}function iy(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function sy(s,a){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)iy(l[s],a)}var to=nt(null),qu=nt(0);function ry(s,a){s=ss,st(qu,s),st(to,a),ss=s|a.baseLanes}function qd(){st(qu,ss),st(to,to.current)}function Gd(){ss=qu.current,ct(to),ct(qu)}var Ds=0,It=null,Zt=null,Se=null,Gu=!1,eo=!1,ta=!1,Yu=0,Ul=0,no=null,w1=0;function _e(){throw Error(i(321))}function Yd(s,a){if(a===null)return!1;for(var l=0;l<a.length&&l<s.length;l++)if(!bn(s[l],a[l]))return!1;return!0}function Kd(s,a,l,u,g,p){return Ds=p,It=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Y.H=s===null||s.memoizedState===null?Hy:Fy,ta=!1,p=l(u,g),ta=!1,eo&&(p=oy(a,l,u,g)),ay(s),p}function ay(s){Y.H=Zu;var a=Zt!==null&&Zt.next!==null;if(Ds=0,Se=Zt=It=null,Gu=!1,Ul=0,no=null,a)throw Error(i(300));s===null||Ue||(s=s.dependencies,s!==null&&zu(s)&&(Ue=!0))}function oy(s,a,l,u){It=s;var g=0;do{if(eo&&(no=null),Ul=0,eo=!1,25<=g)throw Error(i(301));if(g+=1,Se=Zt=null,s.updateQueue!=null){var p=s.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}Y.H=M1,p=a(l,u)}while(eo);return p}function R1(){var s=Y.H,a=s.useState()[0];return a=typeof a.then=="function"?zl(a):a,s=s.useState()[0],(Zt!==null?Zt.memoizedState:null)!==s&&(It.flags|=1024),a}function Qd(){var s=Yu!==0;return Yu=0,s}function Xd(s,a,l){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~l}function Wd(s){if(Gu){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Gu=!1}Ds=0,Se=Zt=It=null,eo=!1,Ul=Yu=0,no=null}function un(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Se===null?It.memoizedState=Se=s:Se=Se.next=s,Se}function Ae(){if(Zt===null){var s=It.alternate;s=s!==null?s.memoizedState:null}else s=Zt.next;var a=Se===null?It.memoizedState:Se.next;if(a!==null)Se=a,Zt=s;else{if(s===null)throw It.alternate===null?Error(i(467)):Error(i(310));Zt=s,s={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},Se===null?It.memoizedState=Se=s:Se=Se.next=s}return Se}function $d(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zl(s){var a=Ul;return Ul+=1,no===null&&(no=[]),s=ty(no,s,a),a=It,(Se===null?a.memoizedState:Se.next)===null&&(a=a.alternate,Y.H=a===null||a.memoizedState===null?Hy:Fy),s}function Ku(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return zl(s);if(s.$$typeof===et)return Ze(s)}throw Error(i(438,String(s)))}function Zd(s){var a=null,l=It.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var u=It.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=$d(),It.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(s),u=0;u<s;u++)l[u]=N;return a.index++,l}function Zi(s,a){return typeof a=="function"?a(s):a}function Qu(s){var a=Ae();return Jd(a,Zt,s)}function Jd(s,a,l){var u=s.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=l;var g=s.baseQueue,p=u.pending;if(p!==null){if(g!==null){var E=g.next;g.next=p.next,p.next=E}a.baseQueue=g=p,u.pending=null}if(p=s.baseState,g===null)s.memoizedState=p;else{a=g.next;var S=E=null,O=null,H=a,Q=!1;do{var J=H.lane&-536870913;if(J!==H.lane?(Ut&J)===J:(Ds&J)===J){var F=H.revertLane;if(F===0)O!==null&&(O=O.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),J===Za&&(Q=!0);else if((Ds&F)===F){H=H.next,F===Za&&(Q=!0);continue}else J={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(S=O=J,E=p):O=O.next=J,It.lanes|=F,Ls|=F;J=H.action,ta&&l(p,J),p=H.hasEagerState?H.eagerState:l(p,J)}else F={lane:J,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(S=O=F,E=p):O=O.next=F,It.lanes|=J,Ls|=J;H=H.next}while(H!==null&&H!==a);if(O===null?E=p:O.next=S,!bn(p,s.memoizedState)&&(Ue=!0,Q&&(l=Ja,l!==null)))throw l;s.memoizedState=p,s.baseState=E,s.baseQueue=O,u.lastRenderedState=p}return g===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function tg(s){var a=Ae(),l=a.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var u=l.dispatch,g=l.pending,p=a.memoizedState;if(g!==null){l.pending=null;var E=g=g.next;do p=s(p,E.action),E=E.next;while(E!==g);bn(p,a.memoizedState)||(Ue=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),l.lastRenderedState=p}return[p,u]}function ly(s,a,l){var u=It,g=Ae(),p=Ht;if(p){if(l===void 0)throw Error(i(407));l=l()}else l=a();var E=!bn((Zt||g).memoizedState,l);E&&(g.memoizedState=l,Ue=!0),g=g.queue;var S=hy.bind(null,u,g,s);if(Bl(2048,8,S,[s]),g.getSnapshot!==a||E||Se!==null&&Se.memoizedState.tag&1){if(u.flags|=2048,io(9,Xu(),uy.bind(null,u,g,l,a),null),se===null)throw Error(i(349));p||(Ds&124)!==0||cy(u,a,l)}return l}function cy(s,a,l){s.flags|=16384,s={getSnapshot:a,value:l},a=It.updateQueue,a===null?(a=$d(),It.updateQueue=a,a.stores=[s]):(l=a.stores,l===null?a.stores=[s]:l.push(s))}function uy(s,a,l,u){a.value=l,a.getSnapshot=u,fy(a)&&dy(s)}function hy(s,a,l){return l(function(){fy(a)&&dy(s)})}function fy(s){var a=s.getSnapshot;s=s.value;try{var l=a();return!bn(s,l)}catch{return!0}}function dy(s){var a=Qa(s,2);a!==null&&Rn(a,s,2)}function eg(s){var a=un();if(typeof s=="function"){var l=s;if(s=l(),ta){yn(!0);try{l()}finally{yn(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:s},a}function gy(s,a,l,u){return s.baseState=l,Jd(s,Zt,typeof u=="function"?u:Zi)}function x1(s,a,l,u,g){if($u(s))throw Error(i(485));if(s=a.action,s!==null){var p={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){p.listeners.push(E)}};Y.T!==null?l(!0):p.isTransition=!1,u(p),l=a.pending,l===null?(p.next=a.pending=p,my(a,p)):(p.next=l.next,a.pending=l.next=p)}}function my(s,a){var l=a.action,u=a.payload,g=s.state;if(a.isTransition){var p=Y.T,E={};Y.T=E;try{var S=l(g,u),O=Y.S;O!==null&&O(E,S),py(s,a,S)}catch(H){ng(s,a,H)}finally{Y.T=p}}else try{p=l(g,u),py(s,a,p)}catch(H){ng(s,a,H)}}function py(s,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){_y(s,a,u)},function(u){return ng(s,a,u)}):_y(s,a,l)}function _y(s,a,l){a.status="fulfilled",a.value=l,yy(a),s.state=l,a=s.pending,a!==null&&(l=a.next,l===a?s.pending=null:(l=l.next,a.next=l,my(s,l)))}function ng(s,a,l){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=l,yy(a),a=a.next;while(a!==u)}s.action=null}function yy(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function vy(s,a){return a}function by(s,a){if(Ht){var l=se.formState;if(l!==null){t:{var u=It;if(Ht){if(ge){e:{for(var g=ge,p=_i;g.nodeType!==8;){if(!p){g=null;break e}if(g=Wn(g.nextSibling),g===null){g=null;break e}}p=g.data,g=p==="F!"||p==="F"?g:null}if(g){ge=Wn(g.nextSibling),u=g.data==="F!";break t}}Wr(u)}u=!1}u&&(a=l[0])}}return l=un(),l.memoizedState=l.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vy,lastRenderedState:a},l.queue=u,l=zy.bind(null,It,u),u.dispatch=l,u=eg(!1),p=og.bind(null,It,!1,u.queue),u=un(),g={state:a,dispatch:null,action:s,pending:null},u.queue=g,l=x1.bind(null,It,g,p,l),g.dispatch=l,u.memoizedState=s,[a,l,!1]}function Ey(s){var a=Ae();return Ty(a,Zt,s)}function Ty(s,a,l){if(a=Jd(s,a,vy)[0],s=Qu(Zi)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=zl(a)}catch(E){throw E===kl?Hu:E}else u=a;a=Ae();var g=a.queue,p=g.dispatch;return l!==a.memoizedState&&(It.flags|=2048,io(9,Xu(),I1.bind(null,g,l),null)),[u,p,s]}function I1(s,a){s.action=a}function Sy(s){var a=Ae(),l=Zt;if(l!==null)return Ty(a,l,s);Ae(),a=a.memoizedState,l=Ae();var u=l.queue.dispatch;return l.memoizedState=s,[a,u,!1]}function io(s,a,l,u){return s={tag:s,create:l,deps:u,inst:a,next:null},a=It.updateQueue,a===null&&(a=$d(),It.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=s.next=s:(u=l.next,l.next=s,s.next=u,a.lastEffect=s),s}function Xu(){return{destroy:void 0,resource:void 0}}function Ay(){return Ae().memoizedState}function Wu(s,a,l,u){var g=un();u=u===void 0?null:u,It.flags|=s,g.memoizedState=io(1|a,Xu(),l,u)}function Bl(s,a,l,u){var g=Ae();u=u===void 0?null:u;var p=g.memoizedState.inst;Zt!==null&&u!==null&&Yd(u,Zt.memoizedState.deps)?g.memoizedState=io(a,p,l,u):(It.flags|=s,g.memoizedState=io(1|a,p,l,u))}function wy(s,a){Wu(8390656,8,s,a)}function Ry(s,a){Bl(2048,8,s,a)}function xy(s,a){return Bl(4,2,s,a)}function Iy(s,a){return Bl(4,4,s,a)}function Cy(s,a){if(typeof a=="function"){s=s();var l=a(s);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function Dy(s,a,l){l=l!=null?l.concat([s]):null,Bl(4,4,Cy.bind(null,a,s),l)}function ig(){}function Oy(s,a){var l=Ae();a=a===void 0?null:a;var u=l.memoizedState;return a!==null&&Yd(a,u[1])?u[0]:(l.memoizedState=[s,a],s)}function My(s,a){var l=Ae();a=a===void 0?null:a;var u=l.memoizedState;if(a!==null&&Yd(a,u[1]))return u[0];if(u=s(),ta){yn(!0);try{s()}finally{yn(!1)}}return l.memoizedState=[u,a],u}function sg(s,a,l){return l===void 0||(Ds&1073741824)!==0?s.memoizedState=a:(s.memoizedState=l,s=Pv(),It.lanes|=s,Ls|=s,l)}function ky(s,a,l,u){return bn(l,a)?l:to.current!==null?(s=sg(s,l,u),bn(s,a)||(Ue=!0),s):(Ds&42)===0?(Ue=!0,s.memoizedState=l):(s=Pv(),It.lanes|=s,Ls|=s,a)}function Ny(s,a,l,u,g){var p=at.p;at.p=p!==0&&8>p?p:8;var E=Y.T,S={};Y.T=S,og(s,!1,a,l);try{var O=g(),H=Y.S;if(H!==null&&H(S,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var Q=A1(O,u);jl(s,a,Q,wn(s))}else jl(s,a,u,wn(s))}catch(J){jl(s,a,{then:function(){},status:"rejected",reason:J},wn())}finally{at.p=p,Y.T=E}}function C1(){}function rg(s,a,l,u){if(s.tag!==5)throw Error(i(476));var g=Py(s).queue;Ny(s,g,a,gt,l===null?C1:function(){return Vy(s),l(u)})}function Py(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:gt,baseState:gt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:gt},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:l},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function Vy(s){var a=Py(s).next.queue;jl(s,a,{},wn())}function ag(){return Ze(rc)}function Ly(){return Ae().memoizedState}function Uy(){return Ae().memoizedState}function D1(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var l=wn();s=Is(l);var u=Cs(a,s,l);u!==null&&(Rn(u,a,l),Pl(u,a,l)),a={cache:Vd()},s.payload=a;return}a=a.return}}function O1(s,a,l){var u=wn();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},$u(s)?By(a,l):(l=Rd(s,a,l,u),l!==null&&(Rn(l,s,u),jy(l,a,u)))}function zy(s,a,l){var u=wn();jl(s,a,l,u)}function jl(s,a,l,u){var g={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if($u(s))By(a,g);else{var p=s.alternate;if(s.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var E=a.lastRenderedState,S=p(E,l);if(g.hasEagerState=!0,g.eagerState=S,bn(S,E))return Nu(s,a,g,0),se===null&&ku(),!1}catch{}finally{}if(l=Rd(s,a,g,u),l!==null)return Rn(l,s,u),jy(l,a,u),!0}return!1}function og(s,a,l,u){if(u={lane:2,revertLane:zg(),action:u,hasEagerState:!1,eagerState:null,next:null},$u(s)){if(a)throw Error(i(479))}else a=Rd(s,l,u,2),a!==null&&Rn(a,s,2)}function $u(s){var a=s.alternate;return s===It||a!==null&&a===It}function By(s,a){eo=Gu=!0;var l=s.pending;l===null?a.next=a:(a.next=l.next,l.next=a),s.pending=a}function jy(s,a,l){if((l&4194048)!==0){var u=a.lanes;u&=s.pendingLanes,l|=u,a.lanes=l,cl(s,l)}}var Zu={readContext:Ze,use:Ku,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useLayoutEffect:_e,useInsertionEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useSyncExternalStore:_e,useId:_e,useHostTransitionStatus:_e,useFormState:_e,useActionState:_e,useOptimistic:_e,useMemoCache:_e,useCacheRefresh:_e},Hy={readContext:Ze,use:Ku,useCallback:function(s,a){return un().memoizedState=[s,a===void 0?null:a],s},useContext:Ze,useEffect:wy,useImperativeHandle:function(s,a,l){l=l!=null?l.concat([s]):null,Wu(4194308,4,Cy.bind(null,a,s),l)},useLayoutEffect:function(s,a){return Wu(4194308,4,s,a)},useInsertionEffect:function(s,a){Wu(4,2,s,a)},useMemo:function(s,a){var l=un();a=a===void 0?null:a;var u=s();if(ta){yn(!0);try{s()}finally{yn(!1)}}return l.memoizedState=[u,a],u},useReducer:function(s,a,l){var u=un();if(l!==void 0){var g=l(a);if(ta){yn(!0);try{l(a)}finally{yn(!1)}}}else g=a;return u.memoizedState=u.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},u.queue=s,s=s.dispatch=O1.bind(null,It,s),[u.memoizedState,s]},useRef:function(s){var a=un();return s={current:s},a.memoizedState=s},useState:function(s){s=eg(s);var a=s.queue,l=zy.bind(null,It,a);return a.dispatch=l,[s.memoizedState,l]},useDebugValue:ig,useDeferredValue:function(s,a){var l=un();return sg(l,s,a)},useTransition:function(){var s=eg(!1);return s=Ny.bind(null,It,s.queue,!0,!1),un().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,l){var u=It,g=un();if(Ht){if(l===void 0)throw Error(i(407));l=l()}else{if(l=a(),se===null)throw Error(i(349));(Ut&124)!==0||cy(u,a,l)}g.memoizedState=l;var p={value:l,getSnapshot:a};return g.queue=p,wy(hy.bind(null,u,p,s),[s]),u.flags|=2048,io(9,Xu(),uy.bind(null,u,p,l,a),null),l},useId:function(){var s=un(),a=se.identifierPrefix;if(Ht){var l=Xi,u=Qi;l=(u&~(1<<32-$e(u)-1)).toString(32)+l,a=""+a+"R"+l,l=Yu++,0<l&&(a+="H"+l.toString(32)),a+=""}else l=w1++,a=""+a+"r"+l.toString(32)+"";return s.memoizedState=a},useHostTransitionStatus:ag,useFormState:by,useActionState:by,useOptimistic:function(s){var a=un();a.memoizedState=a.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=og.bind(null,It,!0,l),l.dispatch=a,[s,a]},useMemoCache:Zd,useCacheRefresh:function(){return un().memoizedState=D1.bind(null,It)}},Fy={readContext:Ze,use:Ku,useCallback:Oy,useContext:Ze,useEffect:Ry,useImperativeHandle:Dy,useInsertionEffect:xy,useLayoutEffect:Iy,useMemo:My,useReducer:Qu,useRef:Ay,useState:function(){return Qu(Zi)},useDebugValue:ig,useDeferredValue:function(s,a){var l=Ae();return ky(l,Zt.memoizedState,s,a)},useTransition:function(){var s=Qu(Zi)[0],a=Ae().memoizedState;return[typeof s=="boolean"?s:zl(s),a]},useSyncExternalStore:ly,useId:Ly,useHostTransitionStatus:ag,useFormState:Ey,useActionState:Ey,useOptimistic:function(s,a){var l=Ae();return gy(l,Zt,s,a)},useMemoCache:Zd,useCacheRefresh:Uy},M1={readContext:Ze,use:Ku,useCallback:Oy,useContext:Ze,useEffect:Ry,useImperativeHandle:Dy,useInsertionEffect:xy,useLayoutEffect:Iy,useMemo:My,useReducer:tg,useRef:Ay,useState:function(){return tg(Zi)},useDebugValue:ig,useDeferredValue:function(s,a){var l=Ae();return Zt===null?sg(l,s,a):ky(l,Zt.memoizedState,s,a)},useTransition:function(){var s=tg(Zi)[0],a=Ae().memoizedState;return[typeof s=="boolean"?s:zl(s),a]},useSyncExternalStore:ly,useId:Ly,useHostTransitionStatus:ag,useFormState:Sy,useActionState:Sy,useOptimistic:function(s,a){var l=Ae();return Zt!==null?gy(l,Zt,s,a):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:Zd,useCacheRefresh:Uy},so=null,Hl=0;function Ju(s){var a=Hl;return Hl+=1,so===null&&(so=[]),ty(so,s,a)}function Fl(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function th(s,a){throw a.$$typeof===v?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function qy(s){var a=s._init;return a(s._payload)}function Gy(s){function a(z,U){if(s){var j=z.deletions;j===null?(z.deletions=[U],z.flags|=16):j.push(U)}}function l(z,U){if(!s)return null;for(;U!==null;)a(z,U),U=U.sibling;return null}function u(z){for(var U=new Map;z!==null;)z.key!==null?U.set(z.key,z):U.set(z.index,z),z=z.sibling;return U}function g(z,U){return z=Ki(z,U),z.index=0,z.sibling=null,z}function p(z,U,j){return z.index=j,s?(j=z.alternate,j!==null?(j=j.index,j<U?(z.flags|=67108866,U):j):(z.flags|=67108866,U)):(z.flags|=1048576,U)}function E(z){return s&&z.alternate===null&&(z.flags|=67108866),z}function S(z,U,j,$){return U===null||U.tag!==6?(U=Id(j,z.mode,$),U.return=z,U):(U=g(U,j),U.return=z,U)}function O(z,U,j,$){var ft=j.type;return ft===I?Q(z,U,j.props.children,$,j.key):U!==null&&(U.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===R&&qy(ft)===U.type)?(U=g(U,j.props),Fl(U,j),U.return=z,U):(U=Vu(j.type,j.key,j.props,null,z.mode,$),Fl(U,j),U.return=z,U)}function H(z,U,j,$){return U===null||U.tag!==4||U.stateNode.containerInfo!==j.containerInfo||U.stateNode.implementation!==j.implementation?(U=Cd(j,z.mode,$),U.return=z,U):(U=g(U,j.children||[]),U.return=z,U)}function Q(z,U,j,$,ft){return U===null||U.tag!==7?(U=Yr(j,z.mode,$,ft),U.return=z,U):(U=g(U,j),U.return=z,U)}function J(z,U,j){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Id(""+U,z.mode,j),U.return=z,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case T:return j=Vu(U.type,U.key,U.props,null,z.mode,j),Fl(j,U),j.return=z,j;case A:return U=Cd(U,z.mode,j),U.return=z,U;case R:var $=U._init;return U=$(U._payload),J(z,U,j)}if(At(U)||L(U))return U=Yr(U,z.mode,j,null),U.return=z,U;if(typeof U.then=="function")return J(z,Ju(U),j);if(U.$$typeof===et)return J(z,Bu(z,U),j);th(z,U)}return null}function F(z,U,j,$){var ft=U!==null?U.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return ft!==null?null:S(z,U,""+j,$);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case T:return j.key===ft?O(z,U,j,$):null;case A:return j.key===ft?H(z,U,j,$):null;case R:return ft=j._init,j=ft(j._payload),F(z,U,j,$)}if(At(j)||L(j))return ft!==null?null:Q(z,U,j,$,null);if(typeof j.then=="function")return F(z,U,Ju(j),$);if(j.$$typeof===et)return F(z,U,Bu(z,j),$);th(z,j)}return null}function q(z,U,j,$,ft){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return z=z.get(j)||null,S(U,z,""+$,ft);if(typeof $=="object"&&$!==null){switch($.$$typeof){case T:return z=z.get($.key===null?j:$.key)||null,O(U,z,$,ft);case A:return z=z.get($.key===null?j:$.key)||null,H(U,z,$,ft);case R:var Dt=$._init;return $=Dt($._payload),q(z,U,j,$,ft)}if(At($)||L($))return z=z.get(j)||null,Q(U,z,$,ft,null);if(typeof $.then=="function")return q(z,U,j,Ju($),ft);if($.$$typeof===et)return q(z,U,j,Bu(U,$),ft);th(U,$)}return null}function Tt(z,U,j,$){for(var ft=null,Dt=null,mt=U,vt=U=0,Be=null;mt!==null&&vt<j.length;vt++){mt.index>vt?(Be=mt,mt=null):Be=mt.sibling;var Bt=F(z,mt,j[vt],$);if(Bt===null){mt===null&&(mt=Be);break}s&&mt&&Bt.alternate===null&&a(z,mt),U=p(Bt,U,vt),Dt===null?ft=Bt:Dt.sibling=Bt,Dt=Bt,mt=Be}if(vt===j.length)return l(z,mt),Ht&&Qr(z,vt),ft;if(mt===null){for(;vt<j.length;vt++)mt=J(z,j[vt],$),mt!==null&&(U=p(mt,U,vt),Dt===null?ft=mt:Dt.sibling=mt,Dt=mt);return Ht&&Qr(z,vt),ft}for(mt=u(mt);vt<j.length;vt++)Be=q(mt,z,vt,j[vt],$),Be!==null&&(s&&Be.alternate!==null&&mt.delete(Be.key===null?vt:Be.key),U=p(Be,U,vt),Dt===null?ft=Be:Dt.sibling=Be,Dt=Be);return s&&mt.forEach(function(Ys){return a(z,Ys)}),Ht&&Qr(z,vt),ft}function yt(z,U,j,$){if(j==null)throw Error(i(151));for(var ft=null,Dt=null,mt=U,vt=U=0,Be=null,Bt=j.next();mt!==null&&!Bt.done;vt++,Bt=j.next()){mt.index>vt?(Be=mt,mt=null):Be=mt.sibling;var Ys=F(z,mt,Bt.value,$);if(Ys===null){mt===null&&(mt=Be);break}s&&mt&&Ys.alternate===null&&a(z,mt),U=p(Ys,U,vt),Dt===null?ft=Ys:Dt.sibling=Ys,Dt=Ys,mt=Be}if(Bt.done)return l(z,mt),Ht&&Qr(z,vt),ft;if(mt===null){for(;!Bt.done;vt++,Bt=j.next())Bt=J(z,Bt.value,$),Bt!==null&&(U=p(Bt,U,vt),Dt===null?ft=Bt:Dt.sibling=Bt,Dt=Bt);return Ht&&Qr(z,vt),ft}for(mt=u(mt);!Bt.done;vt++,Bt=j.next())Bt=q(mt,z,vt,Bt.value,$),Bt!==null&&(s&&Bt.alternate!==null&&mt.delete(Bt.key===null?vt:Bt.key),U=p(Bt,U,vt),Dt===null?ft=Bt:Dt.sibling=Bt,Dt=Bt);return s&&mt.forEach(function(kR){return a(z,kR)}),Ht&&Qr(z,vt),ft}function te(z,U,j,$){if(typeof j=="object"&&j!==null&&j.type===I&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case T:t:{for(var ft=j.key;U!==null;){if(U.key===ft){if(ft=j.type,ft===I){if(U.tag===7){l(z,U.sibling),$=g(U,j.props.children),$.return=z,z=$;break t}}else if(U.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===R&&qy(ft)===U.type){l(z,U.sibling),$=g(U,j.props),Fl($,j),$.return=z,z=$;break t}l(z,U);break}else a(z,U);U=U.sibling}j.type===I?($=Yr(j.props.children,z.mode,$,j.key),$.return=z,z=$):($=Vu(j.type,j.key,j.props,null,z.mode,$),Fl($,j),$.return=z,z=$)}return E(z);case A:t:{for(ft=j.key;U!==null;){if(U.key===ft)if(U.tag===4&&U.stateNode.containerInfo===j.containerInfo&&U.stateNode.implementation===j.implementation){l(z,U.sibling),$=g(U,j.children||[]),$.return=z,z=$;break t}else{l(z,U);break}else a(z,U);U=U.sibling}$=Cd(j,z.mode,$),$.return=z,z=$}return E(z);case R:return ft=j._init,j=ft(j._payload),te(z,U,j,$)}if(At(j))return Tt(z,U,j,$);if(L(j)){if(ft=L(j),typeof ft!="function")throw Error(i(150));return j=ft.call(j),yt(z,U,j,$)}if(typeof j.then=="function")return te(z,U,Ju(j),$);if(j.$$typeof===et)return te(z,U,Bu(z,j),$);th(z,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,U!==null&&U.tag===6?(l(z,U.sibling),$=g(U,j),$.return=z,z=$):(l(z,U),$=Id(j,z.mode,$),$.return=z,z=$),E(z)):l(z,U)}return function(z,U,j,$){try{Hl=0;var ft=te(z,U,j,$);return so=null,ft}catch(mt){if(mt===kl||mt===Hu)throw mt;var Dt=En(29,mt,null,z.mode);return Dt.lanes=$,Dt.return=z,Dt}finally{}}}var ro=Gy(!0),Yy=Gy(!1),Un=nt(null),yi=null;function Os(s){var a=s.alternate;st(Me,Me.current&1),st(Un,s),yi===null&&(a===null||to.current!==null||a.memoizedState!==null)&&(yi=s)}function Ky(s){if(s.tag===22){if(st(Me,Me.current),st(Un,s),yi===null){var a=s.alternate;a!==null&&a.memoizedState!==null&&(yi=s)}}else Ms()}function Ms(){st(Me,Me.current),st(Un,Un.current)}function Ji(s){ct(Un),yi===s&&(yi=null),ct(Me)}var Me=nt(0);function eh(s){for(var a=s;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||$g(l)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function lg(s,a,l,u){a=s.memoizedState,l=l(u,a),l=l==null?a:_({},a,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var cg={enqueueSetState:function(s,a,l){s=s._reactInternals;var u=wn(),g=Is(u);g.payload=a,l!=null&&(g.callback=l),a=Cs(s,g,u),a!==null&&(Rn(a,s,u),Pl(a,s,u))},enqueueReplaceState:function(s,a,l){s=s._reactInternals;var u=wn(),g=Is(u);g.tag=1,g.payload=a,l!=null&&(g.callback=l),a=Cs(s,g,u),a!==null&&(Rn(a,s,u),Pl(a,s,u))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var l=wn(),u=Is(l);u.tag=2,a!=null&&(u.callback=a),a=Cs(s,u,l),a!==null&&(Rn(a,s,l),Pl(a,s,l))}};function Qy(s,a,l,u,g,p,E){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,p,E):a.prototype&&a.prototype.isPureReactComponent?!wl(l,u)||!wl(g,p):!0}function Xy(s,a,l,u){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,u),a.state!==s&&cg.enqueueReplaceState(a,a.state,null)}function ea(s,a){var l=a;if("ref"in a){l={};for(var u in a)u!=="ref"&&(l[u]=a[u])}if(s=s.defaultProps){l===a&&(l=_({},l));for(var g in s)l[g]===void 0&&(l[g]=s[g])}return l}var nh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function Wy(s){nh(s)}function $y(s){console.error(s)}function Zy(s){nh(s)}function ih(s,a){try{var l=s.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function Jy(s,a,l){try{var u=s.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function ug(s,a,l){return l=Is(l),l.tag=3,l.payload={element:null},l.callback=function(){ih(s,a)},l}function tv(s){return s=Is(s),s.tag=3,s}function ev(s,a,l,u){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var p=u.value;s.payload=function(){return g(p)},s.callback=function(){Jy(a,l,u)}}var E=l.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(s.callback=function(){Jy(a,l,u),typeof g!="function"&&(Us===null?Us=new Set([this]):Us.add(this));var S=u.stack;this.componentDidCatch(u.value,{componentStack:S!==null?S:""})})}function k1(s,a,l,u,g){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=l.alternate,a!==null&&Dl(a,l,g,!0),l=Un.current,l!==null){switch(l.tag){case 13:return yi===null?Ng():l.alternate===null&&me===0&&(me=3),l.flags&=-257,l.flags|=65536,l.lanes=g,u===zd?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([u]):a.add(u),Vg(s,u,g)),!1;case 22:return l.flags|=65536,u===zd?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([u]):l.add(u)),Vg(s,u,g)),!1}throw Error(i(435,l.tag))}return Vg(s,u,g),Ng(),!1}if(Ht)return a=Un.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,u!==Md&&(s=Error(i(422),{cause:u}),Cl(Nn(s,l)))):(u!==Md&&(a=Error(i(423),{cause:u}),Cl(Nn(a,l))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,u=Nn(u,l),g=ug(s.stateNode,u,g),Hd(s,g),me!==4&&(me=2)),!1;var p=Error(i(520),{cause:u});if(p=Nn(p,l),Wl===null?Wl=[p]:Wl.push(p),me!==4&&(me=2),a===null)return!0;u=Nn(u,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,s=g&-g,l.lanes|=s,s=ug(l.stateNode,u,s),Hd(l,s),!1;case 1:if(a=l.type,p=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Us===null||!Us.has(p))))return l.flags|=65536,g&=-g,l.lanes|=g,g=tv(g),ev(g,s,l,u),Hd(l,g),!1}l=l.return}while(l!==null);return!1}var nv=Error(i(461)),Ue=!1;function Ge(s,a,l,u){a.child=s===null?Yy(a,null,l,u):ro(a,s.child,l,u)}function iv(s,a,l,u,g){l=l.render;var p=a.ref;if("ref"in u){var E={};for(var S in u)S!=="ref"&&(E[S]=u[S])}else E=u;return Zr(a),u=Kd(s,a,l,E,p,g),S=Qd(),s!==null&&!Ue?(Xd(s,a,g),ts(s,a,g)):(Ht&&S&&Dd(a),a.flags|=1,Ge(s,a,u,g),a.child)}function sv(s,a,l,u,g){if(s===null){var p=l.type;return typeof p=="function"&&!xd(p)&&p.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=p,rv(s,a,p,u,g)):(s=Vu(l.type,null,u,a,a.mode,g),s.ref=a.ref,s.return=a,a.child=s)}if(p=s.child,!yg(s,g)){var E=p.memoizedProps;if(l=l.compare,l=l!==null?l:wl,l(E,u)&&s.ref===a.ref)return ts(s,a,g)}return a.flags|=1,s=Ki(p,u),s.ref=a.ref,s.return=a,a.child=s}function rv(s,a,l,u,g){if(s!==null){var p=s.memoizedProps;if(wl(p,u)&&s.ref===a.ref)if(Ue=!1,a.pendingProps=u=p,yg(s,g))(s.flags&131072)!==0&&(Ue=!0);else return a.lanes=s.lanes,ts(s,a,g)}return hg(s,a,l,u,g)}function av(s,a,l){var u=a.pendingProps,g=u.children,p=s!==null?s.memoizedState:null;if(u.mode==="hidden"){if((a.flags&128)!==0){if(u=p!==null?p.baseLanes|l:l,s!==null){for(g=a.child=s.child,p=0;g!==null;)p=p|g.lanes|g.childLanes,g=g.sibling;a.childLanes=p&~u}else a.childLanes=0,a.child=null;return ov(s,a,u,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&ju(a,p!==null?p.cachePool:null),p!==null?ry(a,p):qd(),Ky(a);else return a.lanes=a.childLanes=536870912,ov(s,a,p!==null?p.baseLanes|l:l,l)}else p!==null?(ju(a,p.cachePool),ry(a,p),Ms(),a.memoizedState=null):(s!==null&&ju(a,null),qd(),Ms());return Ge(s,a,g,l),a.child}function ov(s,a,l,u){var g=Ud();return g=g===null?null:{parent:Oe._currentValue,pool:g},a.memoizedState={baseLanes:l,cachePool:g},s!==null&&ju(a,null),qd(),Ky(a),s!==null&&Dl(s,a,u,!0),null}function sh(s,a){var l=a.ref;if(l===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(a.flags|=4194816)}}function hg(s,a,l,u,g){return Zr(a),l=Kd(s,a,l,u,void 0,g),u=Qd(),s!==null&&!Ue?(Xd(s,a,g),ts(s,a,g)):(Ht&&u&&Dd(a),a.flags|=1,Ge(s,a,l,g),a.child)}function lv(s,a,l,u,g,p){return Zr(a),a.updateQueue=null,l=oy(a,u,l,g),ay(s),u=Qd(),s!==null&&!Ue?(Xd(s,a,p),ts(s,a,p)):(Ht&&u&&Dd(a),a.flags|=1,Ge(s,a,l,p),a.child)}function cv(s,a,l,u,g){if(Zr(a),a.stateNode===null){var p=Xa,E=l.contextType;typeof E=="object"&&E!==null&&(p=Ze(E)),p=new l(u,p),a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=cg,a.stateNode=p,p._reactInternals=a,p=a.stateNode,p.props=u,p.state=a.memoizedState,p.refs={},Bd(a),E=l.contextType,p.context=typeof E=="object"&&E!==null?Ze(E):Xa,p.state=a.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(lg(a,l,E,u),p.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(E=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),E!==p.state&&cg.enqueueReplaceState(p,p.state,null),Ll(a,u,p,g),Vl(),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(s===null){p=a.stateNode;var S=a.memoizedProps,O=ea(l,S);p.props=O;var H=p.context,Q=l.contextType;E=Xa,typeof Q=="object"&&Q!==null&&(E=Ze(Q));var J=l.getDerivedStateFromProps;Q=typeof J=="function"||typeof p.getSnapshotBeforeUpdate=="function",S=a.pendingProps!==S,Q||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(S||H!==E)&&Xy(a,p,u,E),xs=!1;var F=a.memoizedState;p.state=F,Ll(a,u,p,g),Vl(),H=a.memoizedState,S||F!==H||xs?(typeof J=="function"&&(lg(a,l,J,u),H=a.memoizedState),(O=xs||Qy(a,l,O,u,F,H,E))?(Q||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(a.flags|=4194308)):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=H),p.props=u,p.state=H,p.context=E,u=O):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{p=a.stateNode,jd(s,a),E=a.memoizedProps,Q=ea(l,E),p.props=Q,J=a.pendingProps,F=p.context,H=l.contextType,O=Xa,typeof H=="object"&&H!==null&&(O=Ze(H)),S=l.getDerivedStateFromProps,(H=typeof S=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E!==J||F!==O)&&Xy(a,p,u,O),xs=!1,F=a.memoizedState,p.state=F,Ll(a,u,p,g),Vl();var q=a.memoizedState;E!==J||F!==q||xs||s!==null&&s.dependencies!==null&&zu(s.dependencies)?(typeof S=="function"&&(lg(a,l,S,u),q=a.memoizedState),(Q=xs||Qy(a,l,Q,u,F,q,O)||s!==null&&s.dependencies!==null&&zu(s.dependencies))?(H||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,q,O),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,q,O)),typeof p.componentDidUpdate=="function"&&(a.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof p.componentDidUpdate!="function"||E===s.memoizedProps&&F===s.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&F===s.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=q),p.props=u,p.state=q,p.context=O,u=Q):(typeof p.componentDidUpdate!="function"||E===s.memoizedProps&&F===s.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&F===s.memoizedState||(a.flags|=1024),u=!1)}return p=u,sh(s,a),u=(a.flags&128)!==0,p||u?(p=a.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:p.render(),a.flags|=1,s!==null&&u?(a.child=ro(a,s.child,null,g),a.child=ro(a,null,l,g)):Ge(s,a,l,g),a.memoizedState=p.state,s=a.child):s=ts(s,a,g),s}function uv(s,a,l,u){return Il(),a.flags|=256,Ge(s,a,l,u),a.child}var fg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dg(s){return{baseLanes:s,cachePool:$_()}}function gg(s,a,l){return s=s!==null?s.childLanes&~l:0,a&&(s|=zn),s}function hv(s,a,l){var u=a.pendingProps,g=!1,p=(a.flags&128)!==0,E;if((E=p)||(E=s!==null&&s.memoizedState===null?!1:(Me.current&2)!==0),E&&(g=!0,a.flags&=-129),E=(a.flags&32)!==0,a.flags&=-33,s===null){if(Ht){if(g?Os(a):Ms(),Ht){var S=ge,O;if(O=S){t:{for(O=S,S=_i;O.nodeType!==8;){if(!S){S=null;break t}if(O=Wn(O.nextSibling),O===null){S=null;break t}}S=O}S!==null?(a.memoizedState={dehydrated:S,treeContext:Kr!==null?{id:Qi,overflow:Xi}:null,retryLane:536870912,hydrationErrors:null},O=En(18,null,null,0),O.stateNode=S,O.return=a,a.child=O,cn=a,ge=null,O=!0):O=!1}O||Wr(a)}if(S=a.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return $g(S)?a.lanes=32:a.lanes=536870912,null;Ji(a)}return S=u.children,u=u.fallback,g?(Ms(),g=a.mode,S=rh({mode:"hidden",children:S},g),u=Yr(u,g,l,null),S.return=a,u.return=a,S.sibling=u,a.child=S,g=a.child,g.memoizedState=dg(l),g.childLanes=gg(s,E,l),a.memoizedState=fg,u):(Os(a),mg(a,S))}if(O=s.memoizedState,O!==null&&(S=O.dehydrated,S!==null)){if(p)a.flags&256?(Os(a),a.flags&=-257,a=pg(s,a,l)):a.memoizedState!==null?(Ms(),a.child=s.child,a.flags|=128,a=null):(Ms(),g=u.fallback,S=a.mode,u=rh({mode:"visible",children:u.children},S),g=Yr(g,S,l,null),g.flags|=2,u.return=a,g.return=a,u.sibling=g,a.child=u,ro(a,s.child,null,l),u=a.child,u.memoizedState=dg(l),u.childLanes=gg(s,E,l),a.memoizedState=fg,a=g);else if(Os(a),$g(S)){if(E=S.nextSibling&&S.nextSibling.dataset,E)var H=E.dgst;E=H,u=Error(i(419)),u.stack="",u.digest=E,Cl({value:u,source:null,stack:null}),a=pg(s,a,l)}else if(Ue||Dl(s,a,l,!1),E=(l&s.childLanes)!==0,Ue||E){if(E=se,E!==null&&(u=l&-l,u=(u&42)!==0?1:vs(u),u=(u&(E.suspendedLanes|l))!==0?0:u,u!==0&&u!==O.retryLane))throw O.retryLane=u,Qa(s,u),Rn(E,s,u),nv;S.data==="$?"||Ng(),a=pg(s,a,l)}else S.data==="$?"?(a.flags|=192,a.child=s.child,a=null):(s=O.treeContext,ge=Wn(S.nextSibling),cn=a,Ht=!0,Xr=null,_i=!1,s!==null&&(Vn[Ln++]=Qi,Vn[Ln++]=Xi,Vn[Ln++]=Kr,Qi=s.id,Xi=s.overflow,Kr=a),a=mg(a,u.children),a.flags|=4096);return a}return g?(Ms(),g=u.fallback,S=a.mode,O=s.child,H=O.sibling,u=Ki(O,{mode:"hidden",children:u.children}),u.subtreeFlags=O.subtreeFlags&65011712,H!==null?g=Ki(H,g):(g=Yr(g,S,l,null),g.flags|=2),g.return=a,u.return=a,u.sibling=g,a.child=u,u=g,g=a.child,S=s.child.memoizedState,S===null?S=dg(l):(O=S.cachePool,O!==null?(H=Oe._currentValue,O=O.parent!==H?{parent:H,pool:H}:O):O=$_(),S={baseLanes:S.baseLanes|l,cachePool:O}),g.memoizedState=S,g.childLanes=gg(s,E,l),a.memoizedState=fg,u):(Os(a),l=s.child,s=l.sibling,l=Ki(l,{mode:"visible",children:u.children}),l.return=a,l.sibling=null,s!==null&&(E=a.deletions,E===null?(a.deletions=[s],a.flags|=16):E.push(s)),a.child=l,a.memoizedState=null,l)}function mg(s,a){return a=rh({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function rh(s,a){return s=En(22,s,null,a),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function pg(s,a,l){return ro(a,s.child,null,l),s=mg(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function fv(s,a,l){s.lanes|=a;var u=s.alternate;u!==null&&(u.lanes|=a),Nd(s.return,a,l)}function _g(s,a,l,u,g){var p=s.memoizedState;p===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:g}:(p.isBackwards=a,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=l,p.tailMode=g)}function dv(s,a,l){var u=a.pendingProps,g=u.revealOrder,p=u.tail;if(Ge(s,a,u.children,l),u=Me.current,(u&2)!==0)u=u&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&fv(s,l,a);else if(s.tag===19)fv(s,l,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break t;for(;s.sibling===null;){if(s.return===null||s.return===a)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}u&=1}switch(st(Me,u),g){case"forwards":for(l=a.child,g=null;l!==null;)s=l.alternate,s!==null&&eh(s)===null&&(g=l),l=l.sibling;l=g,l===null?(g=a.child,a.child=null):(g=l.sibling,l.sibling=null),_g(a,!1,g,l,p);break;case"backwards":for(l=null,g=a.child,a.child=null;g!==null;){if(s=g.alternate,s!==null&&eh(s)===null){a.child=g;break}s=g.sibling,g.sibling=l,l=g,g=s}_g(a,!0,l,null,p);break;case"together":_g(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function ts(s,a,l){if(s!==null&&(a.dependencies=s.dependencies),Ls|=a.lanes,(l&a.childLanes)===0)if(s!==null){if(Dl(s,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,l=Ki(s,s.pendingProps),a.child=l,l.return=a;s.sibling!==null;)s=s.sibling,l=l.sibling=Ki(s,s.pendingProps),l.return=a;l.sibling=null}return a.child}function yg(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&zu(s)))}function N1(s,a,l){switch(a.tag){case 3:ie(a,a.stateNode.containerInfo),Rs(a,Oe,s.memoizedState.cache),Il();break;case 27:case 5:ys(a);break;case 4:ie(a,a.stateNode.containerInfo);break;case 10:Rs(a,a.type,a.memoizedProps.value);break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(Os(a),a.flags|=128,null):(l&a.child.childLanes)!==0?hv(s,a,l):(Os(a),s=ts(s,a,l),s!==null?s.sibling:null);Os(a);break;case 19:var g=(s.flags&128)!==0;if(u=(l&a.childLanes)!==0,u||(Dl(s,a,l,!1),u=(l&a.childLanes)!==0),g){if(u)return dv(s,a,l);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),st(Me,Me.current),u)break;return null;case 22:case 23:return a.lanes=0,av(s,a,l);case 24:Rs(a,Oe,s.memoizedState.cache)}return ts(s,a,l)}function gv(s,a,l){if(s!==null)if(s.memoizedProps!==a.pendingProps)Ue=!0;else{if(!yg(s,l)&&(a.flags&128)===0)return Ue=!1,N1(s,a,l);Ue=(s.flags&131072)!==0}else Ue=!1,Ht&&(a.flags&1048576)!==0&&q_(a,Uu,a.index);switch(a.lanes=0,a.tag){case 16:t:{s=a.pendingProps;var u=a.elementType,g=u._init;if(u=g(u._payload),a.type=u,typeof u=="function")xd(u)?(s=ea(u,s),a.tag=1,a=cv(null,a,u,s,l)):(a.tag=0,a=hg(null,a,u,s,l));else{if(u!=null){if(g=u.$$typeof,g===it){a.tag=11,a=iv(null,a,u,s,l);break t}else if(g===C){a.tag=14,a=sv(null,a,u,s,l);break t}}throw a=Wt(u)||u,Error(i(306,a,""))}}return a;case 0:return hg(s,a,a.type,a.pendingProps,l);case 1:return u=a.type,g=ea(u,a.pendingProps),cv(s,a,u,g,l);case 3:t:{if(ie(a,a.stateNode.containerInfo),s===null)throw Error(i(387));u=a.pendingProps;var p=a.memoizedState;g=p.element,jd(s,a),Ll(a,u,null,l);var E=a.memoizedState;if(u=E.cache,Rs(a,Oe,u),u!==p.cache&&Pd(a,[Oe],l,!0),Vl(),u=E.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:E.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=uv(s,a,u,l);break t}else if(u!==g){g=Nn(Error(i(424)),a),Cl(g),a=uv(s,a,u,l);break t}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ge=Wn(s.firstChild),cn=a,Ht=!0,Xr=null,_i=!0,l=Yy(a,null,u,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Il(),u===g){a=ts(s,a,l);break t}Ge(s,a,u,l)}a=a.child}return a;case 26:return sh(s,a),s===null?(l=y0(a.type,null,a.pendingProps,null))?a.memoizedState=l:Ht||(l=a.type,s=a.pendingProps,u=vh(_t.current).createElement(l),u[Ie]=a,u[Ee]=s,Ke(u,l,s),pe(u),a.stateNode=u):a.memoizedState=y0(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return ys(a),s===null&&Ht&&(u=a.stateNode=m0(a.type,a.pendingProps,_t.current),cn=a,_i=!0,g=ge,js(a.type)?(Zg=g,ge=Wn(u.firstChild)):ge=g),Ge(s,a,a.pendingProps.children,l),sh(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&Ht&&((g=u=ge)&&(u=lR(u,a.type,a.pendingProps,_i),u!==null?(a.stateNode=u,cn=a,ge=Wn(u.firstChild),_i=!1,g=!0):g=!1),g||Wr(a)),ys(a),g=a.type,p=a.pendingProps,E=s!==null?s.memoizedProps:null,u=p.children,Qg(g,p)?u=null:E!==null&&Qg(g,E)&&(a.flags|=32),a.memoizedState!==null&&(g=Kd(s,a,R1,null,null,l),rc._currentValue=g),sh(s,a),Ge(s,a,u,l),a.child;case 6:return s===null&&Ht&&((s=l=ge)&&(l=cR(l,a.pendingProps,_i),l!==null?(a.stateNode=l,cn=a,ge=null,s=!0):s=!1),s||Wr(a)),null;case 13:return hv(s,a,l);case 4:return ie(a,a.stateNode.containerInfo),u=a.pendingProps,s===null?a.child=ro(a,null,u,l):Ge(s,a,u,l),a.child;case 11:return iv(s,a,a.type,a.pendingProps,l);case 7:return Ge(s,a,a.pendingProps,l),a.child;case 8:return Ge(s,a,a.pendingProps.children,l),a.child;case 12:return Ge(s,a,a.pendingProps.children,l),a.child;case 10:return u=a.pendingProps,Rs(a,a.type,u.value),Ge(s,a,u.children,l),a.child;case 9:return g=a.type._context,u=a.pendingProps.children,Zr(a),g=Ze(g),u=u(g),a.flags|=1,Ge(s,a,u,l),a.child;case 14:return sv(s,a,a.type,a.pendingProps,l);case 15:return rv(s,a,a.type,a.pendingProps,l);case 19:return dv(s,a,l);case 31:return u=a.pendingProps,l=a.mode,u={mode:u.mode,children:u.children},s===null?(l=rh(u,l),l.ref=a.ref,a.child=l,l.return=a,a=l):(l=Ki(s.child,u),l.ref=a.ref,a.child=l,l.return=a,a=l),a;case 22:return av(s,a,l);case 24:return Zr(a),u=Ze(Oe),s===null?(g=Ud(),g===null&&(g=se,p=Vd(),g.pooledCache=p,p.refCount++,p!==null&&(g.pooledCacheLanes|=l),g=p),a.memoizedState={parent:u,cache:g},Bd(a),Rs(a,Oe,g)):((s.lanes&l)!==0&&(jd(s,a),Ll(a,null,null,l),Vl()),g=s.memoizedState,p=a.memoizedState,g.parent!==u?(g={parent:u,cache:u},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),Rs(a,Oe,u)):(u=p.cache,Rs(a,Oe,u),u!==g.cache&&Pd(a,[Oe],l,!0))),Ge(s,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function es(s){s.flags|=4}function mv(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!S0(a)){if(a=Un.current,a!==null&&((Ut&4194048)===Ut?yi!==null:(Ut&62914560)!==Ut&&(Ut&536870912)===0||a!==yi))throw Nl=zd,Z_;s.flags|=8192}}function ah(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?ol():536870912,s.lanes|=a,co|=a)}function ql(s,a){if(!Ht)switch(s.tailMode){case"hidden":a=s.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function he(s){var a=s.alternate!==null&&s.alternate.child===s.child,l=0,u=0;if(a)for(var g=s.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=u,s.childLanes=l,a}function P1(s,a,l){var u=a.pendingProps;switch(Od(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return he(a),null;case 1:return he(a),null;case 3:return l=a.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),$i(Oe),ri(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(xl(a)?es(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,K_())),he(a),null;case 26:return l=a.memoizedState,s===null?(es(a),l!==null?(he(a),mv(a,l)):(he(a),a.flags&=-16777217)):l?l!==s.memoizedState?(es(a),he(a),mv(a,l)):(he(a),a.flags&=-16777217):(s.memoizedProps!==u&&es(a),he(a),a.flags&=-16777217),null;case 27:Ni(a),l=_t.current;var g=a.type;if(s!==null&&a.stateNode!=null)s.memoizedProps!==u&&es(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return he(a),null}s=dt.current,xl(a)?G_(a):(s=m0(g,u,l),a.stateNode=s,es(a))}return he(a),null;case 5:if(Ni(a),l=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==u&&es(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return he(a),null}if(s=dt.current,xl(a))G_(a);else{switch(g=vh(_t.current),s){case 1:s=g.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:s=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":s=g.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":s=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":s=g.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof u.is=="string"?g.createElement("select",{is:u.is}):g.createElement("select"),u.multiple?s.multiple=!0:u.size&&(s.size=u.size);break;default:s=typeof u.is=="string"?g.createElement(l,{is:u.is}):g.createElement(l)}}s[Ie]=a,s[Ee]=u;t:for(g=a.child;g!==null;){if(g.tag===5||g.tag===6)s.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===a)break t;for(;g.sibling===null;){if(g.return===null||g.return===a)break t;g=g.return}g.sibling.return=g.return,g=g.sibling}a.stateNode=s;t:switch(Ke(s,l,u),l){case"button":case"input":case"select":case"textarea":s=!!u.autoFocus;break t;case"img":s=!0;break t;default:s=!1}s&&es(a)}}return he(a),a.flags&=-16777217,null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==u&&es(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(i(166));if(s=_t.current,xl(a)){if(s=a.stateNode,l=a.memoizedProps,u=null,g=cn,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}s[Ie]=a,s=!!(s.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||l0(s.nodeValue,l)),s||Wr(a)}else s=vh(s).createTextNode(u),s[Ie]=a,a.stateNode=s}return he(a),null;case 13:if(u=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=xl(a),u!==null&&u.dehydrated!==null){if(s===null){if(!g)throw Error(i(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Ie]=a}else Il(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;he(a),g=!1}else g=K_(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(Ji(a),a):(Ji(a),null)}if(Ji(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=u!==null,s=s!==null&&s.memoizedState!==null,l){u=a.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==g&&(u.flags|=2048)}return l!==s&&l&&(a.child.flags|=8192),ah(a,a.updateQueue),he(a),null;case 4:return ri(),s===null&&Fg(a.stateNode.containerInfo),he(a),null;case 10:return $i(a.type),he(a),null;case 19:if(ct(Me),g=a.memoizedState,g===null)return he(a),null;if(u=(a.flags&128)!==0,p=g.rendering,p===null)if(u)ql(g,!1);else{if(me!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(p=eh(s),p!==null){for(a.flags|=128,ql(g,!1),s=p.updateQueue,a.updateQueue=s,ah(a,s),a.subtreeFlags=0,s=l,l=a.child;l!==null;)F_(l,s),l=l.sibling;return st(Me,Me.current&1|2),a.child}s=s.sibling}g.tail!==null&&In()>ch&&(a.flags|=128,u=!0,ql(g,!1),a.lanes=4194304)}else{if(!u)if(s=eh(p),s!==null){if(a.flags|=128,u=!0,s=s.updateQueue,a.updateQueue=s,ah(a,s),ql(g,!0),g.tail===null&&g.tailMode==="hidden"&&!p.alternate&&!Ht)return he(a),null}else 2*In()-g.renderingStartTime>ch&&l!==536870912&&(a.flags|=128,u=!0,ql(g,!1),a.lanes=4194304);g.isBackwards?(p.sibling=a.child,a.child=p):(s=g.last,s!==null?s.sibling=p:a.child=p,g.last=p)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=In(),a.sibling=null,s=Me.current,st(Me,u?s&1|2:s&1),a):(he(a),null);case 22:case 23:return Ji(a),Gd(),u=a.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(l&536870912)!==0&&(a.flags&128)===0&&(he(a),a.subtreeFlags&6&&(a.flags|=8192)):he(a),l=a.updateQueue,l!==null&&ah(a,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==l&&(a.flags|=2048),s!==null&&ct(Jr),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),$i(Oe),he(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function V1(s,a){switch(Od(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return $i(Oe),ri(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return Ni(a),null;case 13:if(Ji(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Il()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return ct(Me),null;case 4:return ri(),null;case 10:return $i(a.type),null;case 22:case 23:return Ji(a),Gd(),s!==null&&ct(Jr),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return $i(Oe),null;case 25:return null;default:return null}}function pv(s,a){switch(Od(a),a.tag){case 3:$i(Oe),ri();break;case 26:case 27:case 5:Ni(a);break;case 4:ri();break;case 13:Ji(a);break;case 19:ct(Me);break;case 10:$i(a.type);break;case 22:case 23:Ji(a),Gd(),s!==null&&ct(Jr);break;case 24:$i(Oe)}}function Gl(s,a){try{var l=a.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var g=u.next;l=g;do{if((l.tag&s)===s){u=void 0;var p=l.create,E=l.inst;u=p(),E.destroy=u}l=l.next}while(l!==g)}}catch(S){ee(a,a.return,S)}}function ks(s,a,l){try{var u=a.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var p=g.next;u=p;do{if((u.tag&s)===s){var E=u.inst,S=E.destroy;if(S!==void 0){E.destroy=void 0,g=a;var O=l,H=S;try{H()}catch(Q){ee(g,O,Q)}}}u=u.next}while(u!==p)}}catch(Q){ee(a,a.return,Q)}}function _v(s){var a=s.updateQueue;if(a!==null){var l=s.stateNode;try{sy(a,l)}catch(u){ee(s,s.return,u)}}}function yv(s,a,l){l.props=ea(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(u){ee(s,a,u)}}function Yl(s,a){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof l=="function"?s.refCleanup=l(u):l.current=u}}catch(g){ee(s,a,g)}}function vi(s,a){var l=s.ref,u=s.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(g){ee(s,a,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){ee(s,a,g)}else l.current=null}function vv(s){var a=s.type,l=s.memoizedProps,u=s.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break t;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(g){ee(s,s.return,g)}}function vg(s,a,l){try{var u=s.stateNode;iR(u,s.type,l,a),u[Ee]=a}catch(g){ee(s,s.return,g)}}function bv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&js(s.type)||s.tag===4}function bg(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||bv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&js(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Eg(s,a,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(s),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=yh));else if(u!==4&&(u===27&&js(s.type)&&(l=s.stateNode,a=null),s=s.child,s!==null))for(Eg(s,a,l),s=s.sibling;s!==null;)Eg(s,a,l),s=s.sibling}function oh(s,a,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,a?l.insertBefore(s,a):l.appendChild(s);else if(u!==4&&(u===27&&js(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(oh(s,a,l),s=s.sibling;s!==null;)oh(s,a,l),s=s.sibling}function Ev(s){var a=s.stateNode,l=s.memoizedProps;try{for(var u=s.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);Ke(a,u,l),a[Ie]=s,a[Ee]=l}catch(p){ee(s,s.return,p)}}var ns=!1,ye=!1,Tg=!1,Tv=typeof WeakSet=="function"?WeakSet:Set,ze=null;function L1(s,a){if(s=s.containerInfo,Yg=wh,s=k_(s),bd(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else t:{l=(l=s.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var g=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{l.nodeType,p.nodeType}catch{l=null;break t}var E=0,S=-1,O=-1,H=0,Q=0,J=s,F=null;e:for(;;){for(var q;J!==l||g!==0&&J.nodeType!==3||(S=E+g),J!==p||u!==0&&J.nodeType!==3||(O=E+u),J.nodeType===3&&(E+=J.nodeValue.length),(q=J.firstChild)!==null;)F=J,J=q;for(;;){if(J===s)break e;if(F===l&&++H===g&&(S=E),F===p&&++Q===u&&(O=E),(q=J.nextSibling)!==null)break;J=F,F=J.parentNode}J=q}l=S===-1||O===-1?null:{start:S,end:O}}else l=null}l=l||{start:0,end:0}}else l=null;for(Kg={focusedElem:s,selectionRange:l},wh=!1,ze=a;ze!==null;)if(a=ze,s=a.child,(a.subtreeFlags&1024)!==0&&s!==null)s.return=a,ze=s;else for(;ze!==null;){switch(a=ze,p=a.alternate,s=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&p!==null){s=void 0,l=a,g=p.memoizedProps,p=p.memoizedState,u=l.stateNode;try{var Tt=ea(l.type,g,l.elementType===l.type);s=u.getSnapshotBeforeUpdate(Tt,p),u.__reactInternalSnapshotBeforeUpdate=s}catch(yt){ee(l,l.return,yt)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,l=s.nodeType,l===9)Wg(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Wg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,ze=s;break}ze=a.return}}function Sv(s,a,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:Ns(s,l),u&4&&Gl(5,l);break;case 1:if(Ns(s,l),u&4)if(s=l.stateNode,a===null)try{s.componentDidMount()}catch(E){ee(l,l.return,E)}else{var g=ea(l.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(g,a,s.__reactInternalSnapshotBeforeUpdate)}catch(E){ee(l,l.return,E)}}u&64&&_v(l),u&512&&Yl(l,l.return);break;case 3:if(Ns(s,l),u&64&&(s=l.updateQueue,s!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{sy(s,a)}catch(E){ee(l,l.return,E)}}break;case 27:a===null&&u&4&&Ev(l);case 26:case 5:Ns(s,l),a===null&&u&4&&vv(l),u&512&&Yl(l,l.return);break;case 12:Ns(s,l);break;case 13:Ns(s,l),u&4&&Rv(s,l),u&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=Y1.bind(null,l),uR(s,l))));break;case 22:if(u=l.memoizedState!==null||ns,!u){a=a!==null&&a.memoizedState!==null||ye,g=ns;var p=ye;ns=u,(ye=a)&&!p?Ps(s,l,(l.subtreeFlags&8772)!==0):Ns(s,l),ns=g,ye=p}break;case 30:break;default:Ns(s,l)}}function Av(s){var a=s.alternate;a!==null&&(s.alternate=null,Av(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&Ts(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var ue=null,hn=!1;function is(s,a,l){for(l=l.child;l!==null;)wv(s,a,l),l=l.sibling}function wv(s,a,l){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(de,l)}catch{}switch(l.tag){case 26:ye||vi(l,a),is(s,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:ye||vi(l,a);var u=ue,g=hn;js(l.type)&&(ue=l.stateNode,hn=!1),is(s,a,l),ec(l.stateNode),ue=u,hn=g;break;case 5:ye||vi(l,a);case 6:if(u=ue,g=hn,ue=null,is(s,a,l),ue=u,hn=g,ue!==null)if(hn)try{(ue.nodeType===9?ue.body:ue.nodeName==="HTML"?ue.ownerDocument.body:ue).removeChild(l.stateNode)}catch(p){ee(l,a,p)}else try{ue.removeChild(l.stateNode)}catch(p){ee(l,a,p)}break;case 18:ue!==null&&(hn?(s=ue,d0(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),cc(s)):d0(ue,l.stateNode));break;case 4:u=ue,g=hn,ue=l.stateNode.containerInfo,hn=!0,is(s,a,l),ue=u,hn=g;break;case 0:case 11:case 14:case 15:ye||ks(2,l,a),ye||ks(4,l,a),is(s,a,l);break;case 1:ye||(vi(l,a),u=l.stateNode,typeof u.componentWillUnmount=="function"&&yv(l,a,u)),is(s,a,l);break;case 21:is(s,a,l);break;case 22:ye=(u=ye)||l.memoizedState!==null,is(s,a,l),ye=u;break;default:is(s,a,l)}}function Rv(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{cc(s)}catch(l){ee(a,a.return,l)}}function U1(s){switch(s.tag){case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new Tv),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new Tv),a;default:throw Error(i(435,s.tag))}}function Sg(s,a){var l=U1(s);a.forEach(function(u){var g=K1.bind(null,s,u);l.has(u)||(l.add(u),u.then(g,g))})}function Tn(s,a){var l=a.deletions;if(l!==null)for(var u=0;u<l.length;u++){var g=l[u],p=s,E=a,S=E;t:for(;S!==null;){switch(S.tag){case 27:if(js(S.type)){ue=S.stateNode,hn=!1;break t}break;case 5:ue=S.stateNode,hn=!1;break t;case 3:case 4:ue=S.stateNode.containerInfo,hn=!0;break t}S=S.return}if(ue===null)throw Error(i(160));wv(p,E,g),ue=null,hn=!1,p=g.alternate,p!==null&&(p.return=null),g.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)xv(a,s),a=a.sibling}var Xn=null;function xv(s,a){var l=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Tn(a,s),Sn(s),u&4&&(ks(3,s,s.return),Gl(3,s),ks(5,s,s.return));break;case 1:Tn(a,s),Sn(s),u&512&&(ye||l===null||vi(l,l.return)),u&64&&ns&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var g=Xn;if(Tn(a,s),Sn(s),u&512&&(ye||l===null||vi(l,l.return)),u&4){var p=l!==null?l.memoizedState:null;if(u=s.memoizedState,l===null)if(u===null)if(s.stateNode===null){t:{u=s.type,l=s.memoizedProps,g=g.ownerDocument||g;e:switch(u){case"title":p=g.getElementsByTagName("title")[0],(!p||p[Dr]||p[Ie]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=g.createElement(u),g.head.insertBefore(p,g.querySelector("head > title"))),Ke(p,u,l),p[Ie]=s,pe(p),u=p;break t;case"link":var E=E0("link","href",g).get(u+(l.href||""));if(E){for(var S=0;S<E.length;S++)if(p=E[S],p.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&p.getAttribute("rel")===(l.rel==null?null:l.rel)&&p.getAttribute("title")===(l.title==null?null:l.title)&&p.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){E.splice(S,1);break e}}p=g.createElement(u),Ke(p,u,l),g.head.appendChild(p);break;case"meta":if(E=E0("meta","content",g).get(u+(l.content||""))){for(S=0;S<E.length;S++)if(p=E[S],p.getAttribute("content")===(l.content==null?null:""+l.content)&&p.getAttribute("name")===(l.name==null?null:l.name)&&p.getAttribute("property")===(l.property==null?null:l.property)&&p.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&p.getAttribute("charset")===(l.charSet==null?null:l.charSet)){E.splice(S,1);break e}}p=g.createElement(u),Ke(p,u,l),g.head.appendChild(p);break;default:throw Error(i(468,u))}p[Ie]=s,pe(p),u=p}s.stateNode=u}else T0(g,s.type,s.stateNode);else s.stateNode=b0(g,u,s.memoizedProps);else p!==u?(p===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):p.count--,u===null?T0(g,s.type,s.stateNode):b0(g,u,s.memoizedProps)):u===null&&s.stateNode!==null&&vg(s,s.memoizedProps,l.memoizedProps)}break;case 27:Tn(a,s),Sn(s),u&512&&(ye||l===null||vi(l,l.return)),l!==null&&u&4&&vg(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Tn(a,s),Sn(s),u&512&&(ye||l===null||vi(l,l.return)),s.flags&32){g=s.stateNode;try{Dn(g,"")}catch(q){ee(s,s.return,q)}}u&4&&s.stateNode!=null&&(g=s.memoizedProps,vg(s,g,l!==null?l.memoizedProps:g)),u&1024&&(Tg=!0);break;case 6:if(Tn(a,s),Sn(s),u&4){if(s.stateNode===null)throw Error(i(162));u=s.memoizedProps,l=s.stateNode;try{l.nodeValue=u}catch(q){ee(s,s.return,q)}}break;case 3:if(Th=null,g=Xn,Xn=bh(a.containerInfo),Tn(a,s),Xn=g,Sn(s),u&4&&l!==null&&l.memoizedState.isDehydrated)try{cc(a.containerInfo)}catch(q){ee(s,s.return,q)}Tg&&(Tg=!1,Iv(s));break;case 4:u=Xn,Xn=bh(s.stateNode.containerInfo),Tn(a,s),Sn(s),Xn=u;break;case 12:Tn(a,s),Sn(s);break;case 13:Tn(a,s),Sn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Cg=In()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Sg(s,u)));break;case 22:g=s.memoizedState!==null;var O=l!==null&&l.memoizedState!==null,H=ns,Q=ye;if(ns=H||g,ye=Q||O,Tn(a,s),ye=Q,ns=H,Sn(s),u&8192)t:for(a=s.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(l===null||O||ns||ye||na(s)),l=null,a=s;;){if(a.tag===5||a.tag===26){if(l===null){O=l=a;try{if(p=O.stateNode,g)E=p.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{S=O.stateNode;var J=O.memoizedProps.style,F=J!=null&&J.hasOwnProperty("display")?J.display:null;S.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(q){ee(O,O.return,q)}}}else if(a.tag===6){if(l===null){O=a;try{O.stateNode.nodeValue=g?"":O.memoizedProps}catch(q){ee(O,O.return,q)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break t;for(;a.sibling===null;){if(a.return===null||a.return===s)break t;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=s.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Sg(s,l))));break;case 19:Tn(a,s),Sn(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Sg(s,u)));break;case 30:break;case 21:break;default:Tn(a,s),Sn(s)}}function Sn(s){var a=s.flags;if(a&2){try{for(var l,u=s.return;u!==null;){if(bv(u)){l=u;break}u=u.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var g=l.stateNode,p=bg(s);oh(s,p,g);break;case 5:var E=l.stateNode;l.flags&32&&(Dn(E,""),l.flags&=-33);var S=bg(s);oh(s,S,E);break;case 3:case 4:var O=l.stateNode.containerInfo,H=bg(s);Eg(s,H,O);break;default:throw Error(i(161))}}catch(Q){ee(s,s.return,Q)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function Iv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;Iv(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function Ns(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Sv(s,a.alternate,a),a=a.sibling}function na(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:ks(4,a,a.return),na(a);break;case 1:vi(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&yv(a,a.return,l),na(a);break;case 27:ec(a.stateNode);case 26:case 5:vi(a,a.return),na(a);break;case 22:a.memoizedState===null&&na(a);break;case 30:na(a);break;default:na(a)}s=s.sibling}}function Ps(s,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,g=s,p=a,E=p.flags;switch(p.tag){case 0:case 11:case 15:Ps(g,p,l),Gl(4,p);break;case 1:if(Ps(g,p,l),u=p,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(H){ee(u,u.return,H)}if(u=p,g=u.updateQueue,g!==null){var S=u.stateNode;try{var O=g.shared.hiddenCallbacks;if(O!==null)for(g.shared.hiddenCallbacks=null,g=0;g<O.length;g++)iy(O[g],S)}catch(H){ee(u,u.return,H)}}l&&E&64&&_v(p),Yl(p,p.return);break;case 27:Ev(p);case 26:case 5:Ps(g,p,l),l&&u===null&&E&4&&vv(p),Yl(p,p.return);break;case 12:Ps(g,p,l);break;case 13:Ps(g,p,l),l&&E&4&&Rv(g,p);break;case 22:p.memoizedState===null&&Ps(g,p,l),Yl(p,p.return);break;case 30:break;default:Ps(g,p,l)}a=a.sibling}}function Ag(s,a){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Ol(l))}function wg(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Ol(s))}function bi(s,a,l,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Cv(s,a,l,u),a=a.sibling}function Cv(s,a,l,u){var g=a.flags;switch(a.tag){case 0:case 11:case 15:bi(s,a,l,u),g&2048&&Gl(9,a);break;case 1:bi(s,a,l,u);break;case 3:bi(s,a,l,u),g&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Ol(s)));break;case 12:if(g&2048){bi(s,a,l,u),s=a.stateNode;try{var p=a.memoizedProps,E=p.id,S=p.onPostCommit;typeof S=="function"&&S(E,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(O){ee(a,a.return,O)}}else bi(s,a,l,u);break;case 13:bi(s,a,l,u);break;case 23:break;case 22:p=a.stateNode,E=a.alternate,a.memoizedState!==null?p._visibility&2?bi(s,a,l,u):Kl(s,a):p._visibility&2?bi(s,a,l,u):(p._visibility|=2,ao(s,a,l,u,(a.subtreeFlags&10256)!==0)),g&2048&&Ag(E,a);break;case 24:bi(s,a,l,u),g&2048&&wg(a.alternate,a);break;default:bi(s,a,l,u)}}function ao(s,a,l,u,g){for(g=g&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var p=s,E=a,S=l,O=u,H=E.flags;switch(E.tag){case 0:case 11:case 15:ao(p,E,S,O,g),Gl(8,E);break;case 23:break;case 22:var Q=E.stateNode;E.memoizedState!==null?Q._visibility&2?ao(p,E,S,O,g):Kl(p,E):(Q._visibility|=2,ao(p,E,S,O,g)),g&&H&2048&&Ag(E.alternate,E);break;case 24:ao(p,E,S,O,g),g&&H&2048&&wg(E.alternate,E);break;default:ao(p,E,S,O,g)}a=a.sibling}}function Kl(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=s,u=a,g=u.flags;switch(u.tag){case 22:Kl(l,u),g&2048&&Ag(u.alternate,u);break;case 24:Kl(l,u),g&2048&&wg(u.alternate,u);break;default:Kl(l,u)}a=a.sibling}}var Ql=8192;function oo(s){if(s.subtreeFlags&Ql)for(s=s.child;s!==null;)Dv(s),s=s.sibling}function Dv(s){switch(s.tag){case 26:oo(s),s.flags&Ql&&s.memoizedState!==null&&SR(Xn,s.memoizedState,s.memoizedProps);break;case 5:oo(s);break;case 3:case 4:var a=Xn;Xn=bh(s.stateNode.containerInfo),oo(s),Xn=a;break;case 22:s.memoizedState===null&&(a=s.alternate,a!==null&&a.memoizedState!==null?(a=Ql,Ql=16777216,oo(s),Ql=a):oo(s));break;default:oo(s)}}function Ov(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function Xl(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];ze=u,kv(u,s)}Ov(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Mv(s),s=s.sibling}function Mv(s){switch(s.tag){case 0:case 11:case 15:Xl(s),s.flags&2048&&ks(9,s,s.return);break;case 3:Xl(s);break;case 12:Xl(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,lh(s)):Xl(s);break;default:Xl(s)}}function lh(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];ze=u,kv(u,s)}Ov(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:ks(8,a,a.return),lh(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,lh(a));break;default:lh(a)}s=s.sibling}}function kv(s,a){for(;ze!==null;){var l=ze;switch(l.tag){case 0:case 11:case 15:ks(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ol(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,ze=u;else t:for(l=s;ze!==null;){u=ze;var g=u.sibling,p=u.return;if(Av(u),u===l){ze=null;break t}if(g!==null){g.return=p,ze=g;break t}ze=p}}}var z1={getCacheForType:function(s){var a=Ze(Oe),l=a.data.get(s);return l===void 0&&(l=s(),a.data.set(s,l)),l}},B1=typeof WeakMap=="function"?WeakMap:Map,Kt=0,se=null,Ot=null,Ut=0,Qt=0,An=null,Vs=!1,lo=!1,Rg=!1,ss=0,me=0,Ls=0,ia=0,xg=0,zn=0,co=0,Wl=null,fn=null,Ig=!1,Cg=0,ch=1/0,uh=null,Us=null,Ye=0,zs=null,uo=null,ho=0,Dg=0,Og=null,Nv=null,$l=0,Mg=null;function wn(){if((Kt&2)!==0&&Ut!==0)return Ut&-Ut;if(Y.T!==null){var s=Za;return s!==0?s:zg()}return bs()}function Pv(){zn===0&&(zn=(Ut&536870912)===0||Ht?al():536870912);var s=Un.current;return s!==null&&(s.flags|=32),zn}function Rn(s,a,l){(s===se&&(Qt===2||Qt===9)||s.cancelPendingCommit!==null)&&(fo(s,0),Bs(s,Ut,zn,!1)),Vi(s,l),((Kt&2)===0||s!==se)&&(s===se&&((Kt&2)===0&&(ia|=l),me===4&&Bs(s,Ut,zn,!1)),Ei(s))}function Vv(s,a,l){if((Kt&6)!==0)throw Error(i(327));var u=!l&&(a&124)===0&&(a&s.expiredLanes)===0||Cr(s,a),g=u?F1(s,a):Pg(s,a,!0),p=u;do{if(g===0){lo&&!u&&Bs(s,a,0,!1);break}else{if(l=s.current.alternate,p&&!j1(l)){g=Pg(s,a,!1),p=!1;continue}if(g===2){if(p=a,s.errorRecoveryDisabledLanes&p)var E=0;else E=s.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){a=E;t:{var S=s;g=Wl;var O=S.current.memoizedState.isDehydrated;if(O&&(fo(S,E).flags|=256),E=Pg(S,E,!1),E!==2){if(Rg&&!O){S.errorRecoveryDisabledLanes|=p,ia|=p,g=4;break t}p=fn,fn=g,p!==null&&(fn===null?fn=p:fn.push.apply(fn,p))}g=E}if(p=!1,g!==2)continue}}if(g===1){fo(s,0),Bs(s,a,0,!0);break}t:{switch(u=s,p=g,p){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Bs(u,a,zn,!Vs);break t;case 2:fn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(g=Cg+300-In(),10<g)){if(Bs(u,a,zn,!Vs),Ca(u,0,!0)!==0)break t;u.timeoutHandle=h0(Lv.bind(null,u,l,fn,uh,Ig,a,zn,ia,co,Vs,p,2,-0,0),g);break t}Lv(u,l,fn,uh,Ig,a,zn,ia,co,Vs,p,0,-0,0)}}break}while(!0);Ei(s)}function Lv(s,a,l,u,g,p,E,S,O,H,Q,J,F,q){if(s.timeoutHandle=-1,J=a.subtreeFlags,(J&8192||(J&16785408)===16785408)&&(sc={stylesheets:null,count:0,unsuspend:TR},Dv(a),J=AR(),J!==null)){s.cancelPendingCommit=J(qv.bind(null,s,a,p,l,u,g,E,S,O,Q,1,F,q)),Bs(s,p,E,!H);return}qv(s,a,p,l,u,g,E,S,O)}function j1(s){for(var a=s;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var g=l[u],p=g.getSnapshot;g=g.value;try{if(!bn(p(),g))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Bs(s,a,l,u){a&=~xg,a&=~ia,s.suspendedLanes|=a,s.pingedLanes&=~a,u&&(s.warmLanes|=a),u=s.expirationTimes;for(var g=a;0<g;){var p=31-$e(g),E=1<<p;u[p]=-1,g&=~E}l!==0&&ai(s,l,a)}function hh(){return(Kt&6)===0?(Zl(0),!1):!0}function kg(){if(Ot!==null){if(Qt===0)var s=Ot.return;else s=Ot,Wi=$r=null,Wd(s),so=null,Hl=0,s=Ot;for(;s!==null;)pv(s.alternate,s),s=s.return;Ot=null}}function fo(s,a){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,rR(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),kg(),se=s,Ot=l=Ki(s.current,null),Ut=a,Qt=0,An=null,Vs=!1,lo=Cr(s,a),Rg=!1,co=zn=xg=ia=Ls=me=0,fn=Wl=null,Ig=!1,(a&8)!==0&&(a|=a&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=a;0<u;){var g=31-$e(u),p=1<<g;a|=s[g],u&=~p}return ss=a,ku(),l}function Uv(s,a){It=null,Y.H=Zu,a===kl||a===Hu?(a=ey(),Qt=3):a===Z_?(a=ey(),Qt=4):Qt=a===nv?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,An=a,Ot===null&&(me=1,ih(s,Nn(a,s.current)))}function zv(){var s=Y.H;return Y.H=Zu,s===null?Zu:s}function Bv(){var s=Y.A;return Y.A=z1,s}function Ng(){me=4,Vs||(Ut&4194048)!==Ut&&Un.current!==null||(lo=!0),(Ls&134217727)===0&&(ia&134217727)===0||se===null||Bs(se,Ut,zn,!1)}function Pg(s,a,l){var u=Kt;Kt|=2;var g=zv(),p=Bv();(se!==s||Ut!==a)&&(uh=null,fo(s,a)),a=!1;var E=me;t:do try{if(Qt!==0&&Ot!==null){var S=Ot,O=An;switch(Qt){case 8:kg(),E=6;break t;case 3:case 2:case 9:case 6:Un.current===null&&(a=!0);var H=Qt;if(Qt=0,An=null,go(s,S,O,H),l&&lo){E=0;break t}break;default:H=Qt,Qt=0,An=null,go(s,S,O,H)}}H1(),E=me;break}catch(Q){Uv(s,Q)}while(!0);return a&&s.shellSuspendCounter++,Wi=$r=null,Kt=u,Y.H=g,Y.A=p,Ot===null&&(se=null,Ut=0,ku()),E}function H1(){for(;Ot!==null;)jv(Ot)}function F1(s,a){var l=Kt;Kt|=2;var u=zv(),g=Bv();se!==s||Ut!==a?(uh=null,ch=In()+500,fo(s,a)):lo=Cr(s,a);t:do try{if(Qt!==0&&Ot!==null){a=Ot;var p=An;e:switch(Qt){case 1:Qt=0,An=null,go(s,a,p,1);break;case 2:case 9:if(J_(p)){Qt=0,An=null,Hv(a);break}a=function(){Qt!==2&&Qt!==9||se!==s||(Qt=7),Ei(s)},p.then(a,a);break t;case 3:Qt=7;break t;case 4:Qt=5;break t;case 7:J_(p)?(Qt=0,An=null,Hv(a)):(Qt=0,An=null,go(s,a,p,7));break;case 5:var E=null;switch(Ot.tag){case 26:E=Ot.memoizedState;case 5:case 27:var S=Ot;if(!E||S0(E)){Qt=0,An=null;var O=S.sibling;if(O!==null)Ot=O;else{var H=S.return;H!==null?(Ot=H,fh(H)):Ot=null}break e}}Qt=0,An=null,go(s,a,p,5);break;case 6:Qt=0,An=null,go(s,a,p,6);break;case 8:kg(),me=6;break t;default:throw Error(i(462))}}q1();break}catch(Q){Uv(s,Q)}while(!0);return Wi=$r=null,Y.H=u,Y.A=g,Kt=l,Ot!==null?0:(se=null,Ut=0,ku(),me)}function q1(){for(;Ot!==null&&!nl();)jv(Ot)}function jv(s){var a=gv(s.alternate,s,ss);s.memoizedProps=s.pendingProps,a===null?fh(s):Ot=a}function Hv(s){var a=s,l=a.alternate;switch(a.tag){case 15:case 0:a=lv(l,a,a.pendingProps,a.type,void 0,Ut);break;case 11:a=lv(l,a,a.pendingProps,a.type.render,a.ref,Ut);break;case 5:Wd(a);default:pv(l,a),a=Ot=F_(a,ss),a=gv(l,a,ss)}s.memoizedProps=s.pendingProps,a===null?fh(s):Ot=a}function go(s,a,l,u){Wi=$r=null,Wd(a),so=null,Hl=0;var g=a.return;try{if(k1(s,g,a,l,Ut)){me=1,ih(s,Nn(l,s.current)),Ot=null;return}}catch(p){if(g!==null)throw Ot=g,p;me=1,ih(s,Nn(l,s.current)),Ot=null;return}a.flags&32768?(Ht||u===1?s=!0:lo||(Ut&536870912)!==0?s=!1:(Vs=s=!0,(u===2||u===9||u===3||u===6)&&(u=Un.current,u!==null&&u.tag===13&&(u.flags|=16384))),Fv(a,s)):fh(a)}function fh(s){var a=s;do{if((a.flags&32768)!==0){Fv(a,Vs);return}s=a.return;var l=P1(a.alternate,a,ss);if(l!==null){Ot=l;return}if(a=a.sibling,a!==null){Ot=a;return}Ot=a=s}while(a!==null);me===0&&(me=5)}function Fv(s,a){do{var l=V1(s.alternate,s);if(l!==null){l.flags&=32767,Ot=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(s=s.sibling,s!==null)){Ot=s;return}Ot=s=l}while(s!==null);me=6,Ot=null}function qv(s,a,l,u,g,p,E,S,O){s.cancelPendingCommit=null;do dh();while(Ye!==0);if((Kt&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(p=a.lanes|a.childLanes,p|=wd,ll(s,l,p,E,S,O),s===se&&(Ot=se=null,Ut=0),uo=a,zs=s,ho=l,Dg=p,Og=g,Nv=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Q1(wr,function(){return Xv(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=Y.T,Y.T=null,g=at.p,at.p=2,E=Kt,Kt|=4;try{L1(s,a,l)}finally{Kt=E,at.p=g,Y.T=u}}Ye=1,Gv(),Yv(),Kv()}}function Gv(){if(Ye===1){Ye=0;var s=zs,a=uo,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null;var u=at.p;at.p=2;var g=Kt;Kt|=4;try{xv(a,s);var p=Kg,E=k_(s.containerInfo),S=p.focusedElem,O=p.selectionRange;if(E!==S&&S&&S.ownerDocument&&M_(S.ownerDocument.documentElement,S)){if(O!==null&&bd(S)){var H=O.start,Q=O.end;if(Q===void 0&&(Q=H),"selectionStart"in S)S.selectionStart=H,S.selectionEnd=Math.min(Q,S.value.length);else{var J=S.ownerDocument||document,F=J&&J.defaultView||window;if(F.getSelection){var q=F.getSelection(),Tt=S.textContent.length,yt=Math.min(O.start,Tt),te=O.end===void 0?yt:Math.min(O.end,Tt);!q.extend&&yt>te&&(E=te,te=yt,yt=E);var z=O_(S,yt),U=O_(S,te);if(z&&U&&(q.rangeCount!==1||q.anchorNode!==z.node||q.anchorOffset!==z.offset||q.focusNode!==U.node||q.focusOffset!==U.offset)){var j=J.createRange();j.setStart(z.node,z.offset),q.removeAllRanges(),yt>te?(q.addRange(j),q.extend(U.node,U.offset)):(j.setEnd(U.node,U.offset),q.addRange(j))}}}}for(J=[],q=S;q=q.parentNode;)q.nodeType===1&&J.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<J.length;S++){var $=J[S];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}wh=!!Yg,Kg=Yg=null}finally{Kt=g,at.p=u,Y.T=l}}s.current=a,Ye=2}}function Yv(){if(Ye===2){Ye=0;var s=zs,a=uo,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=Y.T,Y.T=null;var u=at.p;at.p=2;var g=Kt;Kt|=4;try{Sv(s,a.alternate,a)}finally{Kt=g,at.p=u,Y.T=l}}Ye=3}}function Kv(){if(Ye===4||Ye===3){Ye=0,lu();var s=zs,a=uo,l=ho,u=Nv;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Ye=5:(Ye=0,uo=zs=null,Qv(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(Us=null),Da(l),a=a.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(de,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=Y.T,g=at.p,at.p=2,Y.T=null;try{for(var p=s.onRecoverableError,E=0;E<u.length;E++){var S=u[E];p(S.value,{componentStack:S.stack})}}finally{Y.T=a,at.p=g}}(ho&3)!==0&&dh(),Ei(s),g=s.pendingLanes,(l&4194090)!==0&&(g&42)!==0?s===Mg?$l++:($l=0,Mg=s):$l=0,Zl(0)}}function Qv(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,Ol(a)))}function dh(s){return Gv(),Yv(),Kv(),Xv()}function Xv(){if(Ye!==5)return!1;var s=zs,a=Dg;Dg=0;var l=Da(ho),u=Y.T,g=at.p;try{at.p=32>l?32:l,Y.T=null,l=Og,Og=null;var p=zs,E=ho;if(Ye=0,uo=zs=null,ho=0,(Kt&6)!==0)throw Error(i(331));var S=Kt;if(Kt|=4,Mv(p.current),Cv(p,p.current,E,l),Kt=S,Zl(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(de,p)}catch{}return!0}finally{at.p=g,Y.T=u,Qv(s,a)}}function Wv(s,a,l){a=Nn(l,a),a=ug(s.stateNode,a,2),s=Cs(s,a,2),s!==null&&(Vi(s,2),Ei(s))}function ee(s,a,l){if(s.tag===3)Wv(s,s,l);else for(;a!==null;){if(a.tag===3){Wv(a,s,l);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Us===null||!Us.has(u))){s=Nn(l,s),l=tv(2),u=Cs(a,l,2),u!==null&&(ev(l,u,a,s),Vi(u,2),Ei(u));break}}a=a.return}}function Vg(s,a,l){var u=s.pingCache;if(u===null){u=s.pingCache=new B1;var g=new Set;u.set(a,g)}else g=u.get(a),g===void 0&&(g=new Set,u.set(a,g));g.has(l)||(Rg=!0,g.add(l),s=G1.bind(null,s,a,l),a.then(s,s))}function G1(s,a,l){var u=s.pingCache;u!==null&&u.delete(a),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,se===s&&(Ut&l)===l&&(me===4||me===3&&(Ut&62914560)===Ut&&300>In()-Cg?(Kt&2)===0&&fo(s,0):xg|=l,co===Ut&&(co=0)),Ei(s)}function $v(s,a){a===0&&(a=ol()),s=Qa(s,a),s!==null&&(Vi(s,a),Ei(s))}function Y1(s){var a=s.memoizedState,l=0;a!==null&&(l=a.retryLane),$v(s,l)}function K1(s,a){var l=0;switch(s.tag){case 13:var u=s.stateNode,g=s.memoizedState;g!==null&&(l=g.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(a),$v(s,l)}function Q1(s,a){return Sr(s,a)}var gh=null,mo=null,Lg=!1,mh=!1,Ug=!1,sa=0;function Ei(s){s!==mo&&s.next===null&&(mo===null?gh=mo=s:mo=mo.next=s),mh=!0,Lg||(Lg=!0,W1())}function Zl(s,a){if(!Ug&&mh){Ug=!0;do for(var l=!1,u=gh;u!==null;){if(s!==0){var g=u.pendingLanes;if(g===0)var p=0;else{var E=u.suspendedLanes,S=u.pingedLanes;p=(1<<31-$e(42|s)+1)-1,p&=g&~(E&~S),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(l=!0,e0(u,p))}else p=Ut,p=Ca(u,u===se?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Cr(u,p)||(l=!0,e0(u,p));u=u.next}while(l);Ug=!1}}function X1(){Zv()}function Zv(){mh=Lg=!1;var s=0;sa!==0&&(sR()&&(s=sa),sa=0);for(var a=In(),l=null,u=gh;u!==null;){var g=u.next,p=Jv(u,a);p===0?(u.next=null,l===null?gh=g:l.next=g,g===null&&(mo=l)):(l=u,(s!==0||(p&3)!==0)&&(mh=!0)),u=g}Zl(s)}function Jv(s,a){for(var l=s.suspendedLanes,u=s.pingedLanes,g=s.expirationTimes,p=s.pendingLanes&-62914561;0<p;){var E=31-$e(p),S=1<<E,O=g[E];O===-1?((S&l)===0||(S&u)!==0)&&(g[E]=rl(S,a)):O<=a&&(s.expiredLanes|=S),p&=~S}if(a=se,l=Ut,l=Ca(s,s===a?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,l===0||s===a&&(Qt===2||Qt===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&Ar(u),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Cr(s,l)){if(a=l&-l,a===s.callbackPriority)return a;switch(u!==null&&Ar(u),Da(l)){case 2:case 8:l=xa;break;case 32:l=wr;break;case 268435456:l=Ia;break;default:l=wr}return u=t0.bind(null,s),l=Sr(l,u),s.callbackPriority=a,s.callbackNode=l,a}return u!==null&&u!==null&&Ar(u),s.callbackPriority=2,s.callbackNode=null,2}function t0(s,a){if(Ye!==0&&Ye!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(dh()&&s.callbackNode!==l)return null;var u=Ut;return u=Ca(s,s===se?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(Vv(s,u,a),Jv(s,In()),s.callbackNode!=null&&s.callbackNode===l?t0.bind(null,s):null)}function e0(s,a){if(dh())return null;Vv(s,a,!0)}function W1(){aR(function(){(Kt&6)!==0?Sr(il,X1):Zv()})}function zg(){return sa===0&&(sa=al()),sa}function n0(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Va(""+s)}function i0(s,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,s.id&&l.setAttribute("form",s.id),a.parentNode.insertBefore(l,a),s=new FormData(s),l.parentNode.removeChild(l),s}function $1(s,a,l,u,g){if(a==="submit"&&l&&l.stateNode===g){var p=n0((g[Ee]||null).action),E=u.submitter;E&&(a=(a=E[Ee]||null)?n0(a.formAction):E.getAttribute("formAction"),a!==null&&(p=a,E=null));var S=new La("action","action",null,u,g);s.push({event:S,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(sa!==0){var O=E?i0(g,E):new FormData(g);rg(l,{pending:!0,data:O,method:g.method,action:p},null,O)}}else typeof p=="function"&&(S.preventDefault(),O=E?i0(g,E):new FormData(g),rg(l,{pending:!0,data:O,method:g.method,action:p},p,O))},currentTarget:g}]})}}for(var Bg=0;Bg<Ad.length;Bg++){var jg=Ad[Bg],Z1=jg.toLowerCase(),J1=jg[0].toUpperCase()+jg.slice(1);Qn(Z1,"on"+J1)}Qn(V_,"onAnimationEnd"),Qn(L_,"onAnimationIteration"),Qn(U_,"onAnimationStart"),Qn("dblclick","onDoubleClick"),Qn("focusin","onFocus"),Qn("focusout","onBlur"),Qn(p1,"onTransitionRun"),Qn(_1,"onTransitionStart"),Qn(y1,"onTransitionCancel"),Qn(z_,"onTransitionEnd"),Ui("onMouseEnter",["mouseout","mouseover"]),Ui("onMouseLeave",["mouseout","mouseover"]),Ui("onPointerEnter",["pointerout","pointerover"]),Ui("onPointerLeave",["pointerout","pointerover"]),Yn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Jl));function s0(s,a){a=(a&4)!==0;for(var l=0;l<s.length;l++){var u=s[l],g=u.event;u=u.listeners;t:{var p=void 0;if(a)for(var E=u.length-1;0<=E;E--){var S=u[E],O=S.instance,H=S.currentTarget;if(S=S.listener,O!==p&&g.isPropagationStopped())break t;p=S,g.currentTarget=H;try{p(g)}catch(Q){nh(Q)}g.currentTarget=null,p=O}else for(E=0;E<u.length;E++){if(S=u[E],O=S.instance,H=S.currentTarget,S=S.listener,O!==p&&g.isPropagationStopped())break t;p=S,g.currentTarget=H;try{p(g)}catch(Q){nh(Q)}g.currentTarget=null,p=O}}}}function Mt(s,a){var l=a[ul];l===void 0&&(l=a[ul]=new Set);var u=s+"__bubble";l.has(u)||(r0(a,s,2,!1),l.add(u))}function Hg(s,a,l){var u=0;a&&(u|=4),r0(l,s,u,a)}var ph="_reactListening"+Math.random().toString(36).slice(2);function Fg(s){if(!s[ph]){s[ph]=!0,hl.forEach(function(l){l!=="selectionchange"&&(tR.has(l)||Hg(l,!1,s),Hg(l,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[ph]||(a[ph]=!0,Hg("selectionchange",!1,a))}}function r0(s,a,l,u){switch(C0(a)){case 2:var g=xR;break;case 8:g=IR;break;default:g=im}l=g.bind(null,a,l,s),g=void 0,!Mn||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),u?g!==void 0?s.addEventListener(a,l,{capture:!0,passive:g}):s.addEventListener(a,l,!0):g!==void 0?s.addEventListener(a,l,{passive:g}):s.addEventListener(a,l,!1)}function qg(s,a,l,u,g){var p=u;if((a&1)===0&&(a&2)===0&&u!==null)t:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var S=u.stateNode.containerInfo;if(S===g)break;if(E===4)for(E=u.return;E!==null;){var O=E.tag;if((O===3||O===4)&&E.stateNode.containerInfo===g)return;E=E.return}for(;S!==null;){if(E=Li(S),E===null)return;if(O=E.tag,O===5||O===6||O===26||O===27){u=p=E;continue t}S=S.parentNode}}u=u.return}yu(function(){var H=p,Q=On(l),J=[];t:{var F=B_.get(s);if(F!==void 0){var q=La,Tt=s;switch(s){case"keypress":if(fi(l)===0)break t;case"keydown":case"keyup":q=Fa;break;case"focusin":Tt="focus",q=Ba;break;case"focusout":Tt="blur",q=Ba;break;case"beforeblur":case"afterblur":q=Ba;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=kn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=pd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=Ru;break;case V_:case L_:case U_:q=ja;break;case z_:q=Iu;break;case"scroll":case"scrollend":q=vu;break;case"wheel":q=qa;break;case"copy":case"cut":case"paste":q=Ha;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=Sl;break;case"toggle":case"beforetoggle":q=Du}var yt=(a&4)!==0,te=!yt&&(s==="scroll"||s==="scrollend"),z=yt?F!==null?F+"Capture":null:F;yt=[];for(var U=H,j;U!==null;){var $=U;if(j=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||j===null||z===null||($=Lr(U,z),$!=null&&yt.push(tc(U,$,j))),te)break;U=U.return}0<yt.length&&(F=new q(F,Tt,null,l,Q),J.push({event:F,listeners:yt}))}}if((a&7)===0){t:{if(F=s==="mouseover"||s==="pointerover",q=s==="mouseout"||s==="pointerout",F&&l!==ji&&(Tt=l.relatedTarget||l.fromElement)&&(Li(Tt)||Tt[Cn]))break t;if((q||F)&&(F=Q.window===Q?Q:(F=Q.ownerDocument)?F.defaultView||F.parentWindow:window,q?(Tt=l.relatedTarget||l.toElement,q=H,Tt=Tt?Li(Tt):null,Tt!==null&&(te=o(Tt),yt=Tt.tag,Tt!==te||yt!==5&&yt!==27&&yt!==6)&&(Tt=null)):(q=null,Tt=H),q!==Tt)){if(yt=kn,$="onMouseLeave",z="onMouseEnter",U="mouse",(s==="pointerout"||s==="pointerover")&&(yt=Sl,$="onPointerLeave",z="onPointerEnter",U="pointer"),te=q==null?F:li(q),j=Tt==null?F:li(Tt),F=new yt($,U+"leave",q,l,Q),F.target=te,F.relatedTarget=j,$=null,Li(Q)===H&&(yt=new yt(z,U+"enter",Tt,l,Q),yt.target=j,yt.relatedTarget=te,$=yt),te=$,q&&Tt)e:{for(yt=q,z=Tt,U=0,j=yt;j;j=po(j))U++;for(j=0,$=z;$;$=po($))j++;for(;0<U-j;)yt=po(yt),U--;for(;0<j-U;)z=po(z),j--;for(;U--;){if(yt===z||z!==null&&yt===z.alternate)break e;yt=po(yt),z=po(z)}yt=null}else yt=null;q!==null&&a0(J,F,q,yt,!1),Tt!==null&&te!==null&&a0(J,te,Tt,yt,!0)}}t:{if(F=H?li(H):window,q=F.nodeName&&F.nodeName.toLowerCase(),q==="select"||q==="input"&&F.type==="file")var ft=w_;else if(De(F))if(R_)ft=d1;else{ft=h1;var Dt=u1}else q=F.nodeName,!q||q.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?H&&pl(H.elementType)&&(ft=w_):ft=f1;if(ft&&(ft=ft(s,H))){Yi(J,ft,l,Q);break t}Dt&&Dt(s,F,H),s==="focusout"&&H&&F.type==="number"&&H.memoizedProps.value!=null&&As(F,"number",F.value)}switch(Dt=H?li(H):window,s){case"focusin":(De(Dt)||Dt.contentEditable==="true")&&(Ga=Dt,Ed=H,Rl=null);break;case"focusout":Rl=Ed=Ga=null;break;case"mousedown":Td=!0;break;case"contextmenu":case"mouseup":case"dragend":Td=!1,N_(J,l,Q);break;case"selectionchange":if(m1)break;case"keydown":case"keyup":N_(J,l,Q)}var mt;if(mi)t:{switch(s){case"compositionstart":var vt="onCompositionStart";break t;case"compositionend":vt="onCompositionEnd";break t;case"compositionupdate":vt="onCompositionUpdate";break t}vt=void 0}else Vt?K(s,l)&&(vt="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(vt="onCompositionStart");vt&&(b&&l.locale!=="ko"&&(Vt||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&Vt&&(mt=yl()):(hi=Q,ws="value"in hi?hi.value:hi.textContent,Vt=!0)),Dt=_h(H,vt),0<Dt.length&&(vt=new El(vt,s,null,l,Q),J.push({event:vt,listeners:Dt}),mt?vt.data=mt:(mt=lt(l),mt!==null&&(vt.data=mt)))),(mt=y?Ce(s,l):Lt(s,l))&&(vt=_h(H,"onBeforeInput"),0<vt.length&&(Dt=new El("onBeforeInput","beforeinput",null,l,Q),J.push({event:Dt,listeners:vt}),Dt.data=mt)),$1(J,s,H,l,Q)}s0(J,a)})}function tc(s,a,l){return{instance:s,listener:a,currentTarget:l}}function _h(s,a){for(var l=a+"Capture",u=[];s!==null;){var g=s,p=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||p===null||(g=Lr(s,l),g!=null&&u.unshift(tc(s,g,p)),g=Lr(s,a),g!=null&&u.push(tc(s,g,p))),s.tag===3)return u;s=s.return}return[]}function po(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function a0(s,a,l,u,g){for(var p=a._reactName,E=[];l!==null&&l!==u;){var S=l,O=S.alternate,H=S.stateNode;if(S=S.tag,O!==null&&O===u)break;S!==5&&S!==26&&S!==27||H===null||(O=H,g?(H=Lr(l,p),H!=null&&E.unshift(tc(l,H,O))):g||(H=Lr(l,p),H!=null&&E.push(tc(l,H,O)))),l=l.return}E.length!==0&&s.push({event:a,listeners:E})}var eR=/\r\n?/g,nR=/\u0000|\uFFFD/g;function o0(s){return(typeof s=="string"?s:""+s).replace(eR,`
`).replace(nR,"")}function l0(s,a){return a=o0(a),o0(s)===a}function yh(){}function Jt(s,a,l,u,g,p){switch(l){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||Dn(s,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&Dn(s,""+u);break;case"className":ci(s,"class",u);break;case"tabIndex":ci(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ci(s,l,u);break;case"style":ml(s,u,p);break;case"data":if(a!=="object"){ci(s,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||l!=="href")){s.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=Va(""+u),s.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(l==="formAction"?(a!=="input"&&Jt(s,a,"name",g.name,g,null),Jt(s,a,"formEncType",g.formEncType,g,null),Jt(s,a,"formMethod",g.formMethod,g,null),Jt(s,a,"formTarget",g.formTarget,g,null)):(Jt(s,a,"encType",g.encType,g,null),Jt(s,a,"method",g.method,g,null),Jt(s,a,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=Va(""+u),s.setAttribute(l,u);break;case"onClick":u!=null&&(s.onclick=yh);break;case"onScroll":u!=null&&Mt("scroll",s);break;case"onScrollEnd":u!=null&&Mt("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}l=Va(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""+u):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":u===!0?s.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,u):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(l,u):s.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(l):s.setAttribute(l,u);break;case"popover":Mt("beforetoggle",s),Mt("toggle",s),Ss(s,"popover",u);break;case"xlinkActuate":Fe(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Fe(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Fe(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Fe(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Fe(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Fe(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Fe(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Fe(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Fe(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ss(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=gd.get(l)||l,Ss(s,l,u))}}function Gg(s,a,l,u,g,p){switch(l){case"style":ml(s,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof u=="string"?Dn(s,u):(typeof u=="number"||typeof u=="bigint")&&Dn(s,""+u);break;case"onScroll":u!=null&&Mt("scroll",s);break;case"onScrollEnd":u!=null&&Mt("scrollend",s);break;case"onClick":u!=null&&(s.onclick=yh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Oa.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),a=l.slice(2,g?l.length-7:void 0),p=s[Ee]||null,p=p!=null?p[l]:null,typeof p=="function"&&s.removeEventListener(a,p,g),typeof u=="function")){typeof p!="function"&&p!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(a,u,g);break t}l in s?s[l]=u:u===!0?s.setAttribute(l,""):Ss(s,l,u)}}}function Ke(s,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mt("error",s),Mt("load",s);var u=!1,g=!1,p;for(p in l)if(l.hasOwnProperty(p)){var E=l[p];if(E!=null)switch(p){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Jt(s,a,p,E,l,null)}}g&&Jt(s,a,"srcSet",l.srcSet,l,null),u&&Jt(s,a,"src",l.src,l,null);return;case"input":Mt("invalid",s);var S=p=E=g=null,O=null,H=null;for(u in l)if(l.hasOwnProperty(u)){var Q=l[u];if(Q!=null)switch(u){case"name":g=Q;break;case"type":E=Q;break;case"checked":O=Q;break;case"defaultChecked":H=Q;break;case"value":p=Q;break;case"defaultValue":S=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,a));break;default:Jt(s,a,u,Q,l,null)}}Nr(s,p,S,O,H,E,g,!1),Pa(s);return;case"select":Mt("invalid",s),u=E=p=null;for(g in l)if(l.hasOwnProperty(g)&&(S=l[g],S!=null))switch(g){case"value":p=S;break;case"defaultValue":E=S;break;case"multiple":u=S;default:Jt(s,a,g,S,l,null)}a=p,l=E,s.multiple=!!u,a!=null?Bi(s,!!u,a,!1):l!=null&&Bi(s,!!u,l,!0);return;case"textarea":Mt("invalid",s),p=g=u=null;for(E in l)if(l.hasOwnProperty(E)&&(S=l[E],S!=null))switch(E){case"value":u=S;break;case"defaultValue":g=S;break;case"children":p=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:Jt(s,a,E,S,l,null)}Pr(s,u,g,p),Pa(s);return;case"option":for(O in l)if(l.hasOwnProperty(O)&&(u=l[O],u!=null))switch(O){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Jt(s,a,O,u,l,null)}return;case"dialog":Mt("beforetoggle",s),Mt("toggle",s),Mt("cancel",s),Mt("close",s);break;case"iframe":case"object":Mt("load",s);break;case"video":case"audio":for(u=0;u<Jl.length;u++)Mt(Jl[u],s);break;case"image":Mt("error",s),Mt("load",s);break;case"details":Mt("toggle",s);break;case"embed":case"source":case"link":Mt("error",s),Mt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in l)if(l.hasOwnProperty(H)&&(u=l[H],u!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Jt(s,a,H,u,l,null)}return;default:if(pl(a)){for(Q in l)l.hasOwnProperty(Q)&&(u=l[Q],u!==void 0&&Gg(s,a,Q,u,l,void 0));return}}for(S in l)l.hasOwnProperty(S)&&(u=l[S],u!=null&&Jt(s,a,S,u,l,null))}function iR(s,a,l,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,p=null,E=null,S=null,O=null,H=null,Q=null;for(q in l){var J=l[q];if(l.hasOwnProperty(q)&&J!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":O=J;default:u.hasOwnProperty(q)||Jt(s,a,q,null,u,J)}}for(var F in u){var q=u[F];if(J=l[F],u.hasOwnProperty(F)&&(q!=null||J!=null))switch(F){case"type":p=q;break;case"name":g=q;break;case"checked":H=q;break;case"defaultChecked":Q=q;break;case"value":E=q;break;case"defaultValue":S=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(i(137,a));break;default:q!==J&&Jt(s,a,F,q,u,J)}}vn(s,E,S,O,H,Q,p,g);return;case"select":q=E=S=F=null;for(p in l)if(O=l[p],l.hasOwnProperty(p)&&O!=null)switch(p){case"value":break;case"multiple":q=O;default:u.hasOwnProperty(p)||Jt(s,a,p,null,u,O)}for(g in u)if(p=u[g],O=l[g],u.hasOwnProperty(g)&&(p!=null||O!=null))switch(g){case"value":F=p;break;case"defaultValue":S=p;break;case"multiple":E=p;default:p!==O&&Jt(s,a,g,p,u,O)}a=S,l=E,u=q,F!=null?Bi(s,!!l,F,!1):!!u!=!!l&&(a!=null?Bi(s,!!l,a,!0):Bi(s,!!l,l?[]:"",!1));return;case"textarea":q=F=null;for(S in l)if(g=l[S],l.hasOwnProperty(S)&&g!=null&&!u.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Jt(s,a,S,null,u,g)}for(E in u)if(g=u[E],p=l[E],u.hasOwnProperty(E)&&(g!=null||p!=null))switch(E){case"value":F=g;break;case"defaultValue":q=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==p&&Jt(s,a,E,g,u,p)}$t(s,F,q);return;case"option":for(var Tt in l)if(F=l[Tt],l.hasOwnProperty(Tt)&&F!=null&&!u.hasOwnProperty(Tt))switch(Tt){case"selected":s.selected=!1;break;default:Jt(s,a,Tt,null,u,F)}for(O in u)if(F=u[O],q=l[O],u.hasOwnProperty(O)&&F!==q&&(F!=null||q!=null))switch(O){case"selected":s.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:Jt(s,a,O,F,u,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yt in l)F=l[yt],l.hasOwnProperty(yt)&&F!=null&&!u.hasOwnProperty(yt)&&Jt(s,a,yt,null,u,F);for(H in u)if(F=u[H],q=l[H],u.hasOwnProperty(H)&&F!==q&&(F!=null||q!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(i(137,a));break;default:Jt(s,a,H,F,u,q)}return;default:if(pl(a)){for(var te in l)F=l[te],l.hasOwnProperty(te)&&F!==void 0&&!u.hasOwnProperty(te)&&Gg(s,a,te,void 0,u,F);for(Q in u)F=u[Q],q=l[Q],!u.hasOwnProperty(Q)||F===q||F===void 0&&q===void 0||Gg(s,a,Q,F,u,q);return}}for(var z in l)F=l[z],l.hasOwnProperty(z)&&F!=null&&!u.hasOwnProperty(z)&&Jt(s,a,z,null,u,F);for(J in u)F=u[J],q=l[J],!u.hasOwnProperty(J)||F===q||F==null&&q==null||Jt(s,a,J,F,u,q)}var Yg=null,Kg=null;function vh(s){return s.nodeType===9?s:s.ownerDocument}function c0(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function u0(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function Qg(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Xg=null;function sR(){var s=window.event;return s&&s.type==="popstate"?s===Xg?!1:(Xg=s,!0):(Xg=null,!1)}var h0=typeof setTimeout=="function"?setTimeout:void 0,rR=typeof clearTimeout=="function"?clearTimeout:void 0,f0=typeof Promise=="function"?Promise:void 0,aR=typeof queueMicrotask=="function"?queueMicrotask:typeof f0<"u"?function(s){return f0.resolve(null).then(s).catch(oR)}:h0;function oR(s){setTimeout(function(){throw s})}function js(s){return s==="head"}function d0(s,a){var l=a,u=0,g=0;do{var p=l.nextSibling;if(s.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(0<u&&8>u){l=u;var E=s.ownerDocument;if(l&1&&ec(E.documentElement),l&2&&ec(E.body),l&4)for(l=E.head,ec(l),E=l.firstChild;E;){var S=E.nextSibling,O=E.nodeName;E[Dr]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&E.rel.toLowerCase()==="stylesheet"||l.removeChild(E),E=S}}if(g===0){s.removeChild(p),cc(a);return}g--}else l==="$"||l==="$?"||l==="$!"?g++:u=l.charCodeAt(0)-48;else u=0;l=p}while(l);cc(a)}function Wg(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Wg(l),Ts(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function lR(s,a,l,u){for(;s.nodeType===1;){var g=l;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[Dr])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(p=s.getAttribute("rel"),p==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(p!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(p=s.getAttribute("src"),(p!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&p&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var p=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===p)return s}else return s;if(s=Wn(s.nextSibling),s===null)break}return null}function cR(s,a,l){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Wn(s.nextSibling),s===null))return null;return s}function $g(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function uR(s,a){var l=s.ownerDocument;if(s.data!=="$?"||l.readyState==="complete")a();else{var u=function(){a(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function Wn(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return s}var Zg=null;function g0(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return s;a--}else l==="/$"&&a++}s=s.previousSibling}return null}function m0(s,a,l){switch(a=vh(l),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function ec(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);Ts(s)}var Bn=new Map,p0=new Set;function bh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var rs=at.d;at.d={f:hR,r:fR,D:dR,C:gR,L:mR,m:pR,X:yR,S:_R,M:vR};function hR(){var s=rs.f(),a=hh();return s||a}function fR(s){var a=oi(s);a!==null&&a.tag===5&&a.type==="form"?Vy(a):rs.r(s)}var _o=typeof document>"u"?null:document;function _0(s,a,l){var u=_o;if(u&&typeof a=="string"&&a){var g=Te(a);g='link[rel="'+s+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),p0.has(g)||(p0.add(g),s={rel:s,crossOrigin:l,href:a},u.querySelector(g)===null&&(a=u.createElement("link"),Ke(a,"link",s),pe(a),u.head.appendChild(a)))}}function dR(s){rs.D(s),_0("dns-prefetch",s,null)}function gR(s,a){rs.C(s,a),_0("preconnect",s,a)}function mR(s,a,l){rs.L(s,a,l);var u=_o;if(u&&s&&a){var g='link[rel="preload"][as="'+Te(a)+'"]';a==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+Te(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+Te(l.imageSizes)+'"]')):g+='[href="'+Te(s)+'"]';var p=g;switch(a){case"style":p=yo(s);break;case"script":p=vo(s)}Bn.has(p)||(s=_({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:s,as:a},l),Bn.set(p,s),u.querySelector(g)!==null||a==="style"&&u.querySelector(nc(p))||a==="script"&&u.querySelector(ic(p))||(a=u.createElement("link"),Ke(a,"link",s),pe(a),u.head.appendChild(a)))}}function pR(s,a){rs.m(s,a);var l=_o;if(l&&s){var u=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+Te(u)+'"][href="'+Te(s)+'"]',p=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=vo(s)}if(!Bn.has(p)&&(s=_({rel:"modulepreload",href:s},a),Bn.set(p,s),l.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(ic(p)))return}u=l.createElement("link"),Ke(u,"link",s),pe(u),l.head.appendChild(u)}}}function _R(s,a,l){rs.S(s,a,l);var u=_o;if(u&&s){var g=an(u).hoistableStyles,p=yo(s);a=a||"default";var E=g.get(p);if(!E){var S={loading:0,preload:null};if(E=u.querySelector(nc(p)))S.loading=5;else{s=_({rel:"stylesheet",href:s,"data-precedence":a},l),(l=Bn.get(p))&&Jg(s,l);var O=E=u.createElement("link");pe(O),Ke(O,"link",s),O._p=new Promise(function(H,Q){O.onload=H,O.onerror=Q}),O.addEventListener("load",function(){S.loading|=1}),O.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Eh(E,a,u)}E={type:"stylesheet",instance:E,count:1,state:S},g.set(p,E)}}}function yR(s,a){rs.X(s,a);var l=_o;if(l&&s){var u=an(l).hoistableScripts,g=vo(s),p=u.get(g);p||(p=l.querySelector(ic(g)),p||(s=_({src:s,async:!0},a),(a=Bn.get(g))&&tm(s,a),p=l.createElement("script"),pe(p),Ke(p,"link",s),l.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(g,p))}}function vR(s,a){rs.M(s,a);var l=_o;if(l&&s){var u=an(l).hoistableScripts,g=vo(s),p=u.get(g);p||(p=l.querySelector(ic(g)),p||(s=_({src:s,async:!0,type:"module"},a),(a=Bn.get(g))&&tm(s,a),p=l.createElement("script"),pe(p),Ke(p,"link",s),l.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(g,p))}}function y0(s,a,l,u){var g=(g=_t.current)?bh(g):null;if(!g)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=yo(l.href),l=an(g).hoistableStyles,u=l.get(a),u||(u={type:"style",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=yo(l.href);var p=an(g).hoistableStyles,E=p.get(s);if(E||(g=g.ownerDocument||g,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(s,E),(p=g.querySelector(nc(s)))&&!p._p&&(E.instance=p,E.state.loading=5),Bn.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Bn.set(s,l),p||bR(g,s,l,E.state))),a&&u===null)throw Error(i(528,""));return E}if(a&&u!==null)throw Error(i(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=vo(l),l=an(g).hoistableScripts,u=l.get(a),u||(u={type:"script",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function yo(s){return'href="'+Te(s)+'"'}function nc(s){return'link[rel="stylesheet"]['+s+"]"}function v0(s){return _({},s,{"data-precedence":s.precedence,precedence:null})}function bR(s,a,l,u){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=s.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),Ke(a,"link",l),pe(a),s.head.appendChild(a))}function vo(s){return'[src="'+Te(s)+'"]'}function ic(s){return"script[async]"+s}function b0(s,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var u=s.querySelector('style[data-href~="'+Te(l.href)+'"]');if(u)return a.instance=u,pe(u),u;var g=_({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),pe(u),Ke(u,"style",g),Eh(u,l.precedence,s),a.instance=u;case"stylesheet":g=yo(l.href);var p=s.querySelector(nc(g));if(p)return a.state.loading|=4,a.instance=p,pe(p),p;u=v0(l),(g=Bn.get(g))&&Jg(u,g),p=(s.ownerDocument||s).createElement("link"),pe(p);var E=p;return E._p=new Promise(function(S,O){E.onload=S,E.onerror=O}),Ke(p,"link",u),a.state.loading|=4,Eh(p,l.precedence,s),a.instance=p;case"script":return p=vo(l.src),(g=s.querySelector(ic(p)))?(a.instance=g,pe(g),g):(u=l,(g=Bn.get(p))&&(u=_({},l),tm(u,g)),s=s.ownerDocument||s,g=s.createElement("script"),pe(g),Ke(g,"link",u),s.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,Eh(u,l.precedence,s));return a.instance}function Eh(s,a,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,p=g,E=0;E<u.length;E++){var S=u[E];if(S.dataset.precedence===a)p=S;else if(p!==g)break}p?p.parentNode.insertBefore(s,p.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(s,a.firstChild))}function Jg(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function tm(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Th=null;function E0(s,a,l){if(Th===null){var u=new Map,g=Th=new Map;g.set(l,u)}else g=Th,u=g.get(l),u||(u=new Map,g.set(l,u));if(u.has(s))return u;for(u.set(s,null),l=l.getElementsByTagName(s),g=0;g<l.length;g++){var p=l[g];if(!(p[Dr]||p[Ie]||s==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var E=p.getAttribute(a)||"";E=s+E;var S=u.get(E);S?S.push(p):u.set(E,[p])}}return u}function T0(s,a,l){s=s.ownerDocument||s,s.head.insertBefore(l,a==="title"?s.querySelector("head > title"):null)}function ER(s,a,l){if(l===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function S0(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var sc=null;function TR(){}function SR(s,a,l){if(sc===null)throw Error(i(475));var u=sc;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=yo(l.href),p=s.querySelector(nc(g));if(p){s=p._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(u.count++,u=Sh.bind(u),s.then(u,u)),a.state.loading|=4,a.instance=p,pe(p);return}p=s.ownerDocument||s,l=v0(l),(g=Bn.get(g))&&Jg(l,g),p=p.createElement("link"),pe(p);var E=p;E._p=new Promise(function(S,O){E.onload=S,E.onerror=O}),Ke(p,"link",l),a.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(u.count++,a=Sh.bind(u),s.addEventListener("load",a),s.addEventListener("error",a))}}function AR(){if(sc===null)throw Error(i(475));var s=sc;return s.stylesheets&&s.count===0&&em(s,s.stylesheets),0<s.count?function(a){var l=setTimeout(function(){if(s.stylesheets&&em(s,s.stylesheets),s.unsuspend){var u=s.unsuspend;s.unsuspend=null,u()}},6e4);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(l)}}:null}function Sh(){if(this.count--,this.count===0){if(this.stylesheets)em(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Ah=null;function em(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Ah=new Map,a.forEach(wR,s),Ah=null,Sh.call(s))}function wR(s,a){if(!(a.state.loading&4)){var l=Ah.get(s);if(l)var u=l.get(null);else{l=new Map,Ah.set(s,l);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<g.length;p++){var E=g[p];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(l.set(E.dataset.precedence,E),u=E)}u&&l.set(null,u)}g=a.instance,E=g.getAttribute("data-precedence"),p=l.get(E)||u,p===u&&l.set(null,g),l.set(E,g),this.count++,u=Sh.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),p?p.parentNode.insertBefore(g,p.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),a.state.loading|=4}}var rc={$$typeof:et,Provider:null,Consumer:null,_currentValue:gt,_currentValue2:gt,_threadCount:0};function RR(s,a,l,u,g,p,E,S){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pi(0),this.hiddenUpdates=Pi(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=p,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function A0(s,a,l,u,g,p,E,S,O,H,Q,J){return s=new RR(s,a,l,E,S,O,H,J),a=1,p===!0&&(a|=24),p=En(3,null,null,a),s.current=p,p.stateNode=s,a=Vd(),a.refCount++,s.pooledCache=a,a.refCount++,p.memoizedState={element:u,isDehydrated:l,cache:a},Bd(p),s}function w0(s){return s?(s=Xa,s):Xa}function R0(s,a,l,u,g,p){g=w0(g),u.context===null?u.context=g:u.pendingContext=g,u=Is(a),u.payload={element:l},p=p===void 0?null:p,p!==null&&(u.callback=p),l=Cs(s,u,a),l!==null&&(Rn(l,s,a),Pl(l,s,a))}function x0(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<a?l:a}}function nm(s,a){x0(s,a),(s=s.alternate)&&x0(s,a)}function I0(s){if(s.tag===13){var a=Qa(s,67108864);a!==null&&Rn(a,s,67108864),nm(s,67108864)}}var wh=!0;function xR(s,a,l,u){var g=Y.T;Y.T=null;var p=at.p;try{at.p=2,im(s,a,l,u)}finally{at.p=p,Y.T=g}}function IR(s,a,l,u){var g=Y.T;Y.T=null;var p=at.p;try{at.p=8,im(s,a,l,u)}finally{at.p=p,Y.T=g}}function im(s,a,l,u){if(wh){var g=sm(u);if(g===null)qg(s,a,u,Rh,l),D0(s,u);else if(DR(g,s,a,l,u))u.stopPropagation();else if(D0(s,u),a&4&&-1<CR.indexOf(s)){for(;g!==null;){var p=oi(g);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var E=Gn(p.pendingLanes);if(E!==0){var S=p;for(S.pendingLanes|=2,S.entangledLanes|=2;E;){var O=1<<31-$e(E);S.entanglements[1]|=O,E&=~O}Ei(p),(Kt&6)===0&&(ch=In()+500,Zl(0))}}break;case 13:S=Qa(p,2),S!==null&&Rn(S,p,2),hh(),nm(p,2)}if(p=sm(u),p===null&&qg(s,a,u,Rh,l),p===g)break;g=p}g!==null&&u.stopPropagation()}else qg(s,a,u,null,l)}}function sm(s){return s=On(s),rm(s)}var Rh=null;function rm(s){if(Rh=null,s=Li(s),s!==null){var a=o(s);if(a===null)s=null;else{var l=a.tag;if(l===13){if(s=c(a),s!==null)return s;s=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Rh=s,null}function C0(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ld()){case il:return 2;case xa:return 8;case wr:case cd:return 32;case Ia:return 268435456;default:return 32}default:return 32}}var am=!1,Hs=null,Fs=null,qs=null,ac=new Map,oc=new Map,Gs=[],CR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function D0(s,a){switch(s){case"focusin":case"focusout":Hs=null;break;case"dragenter":case"dragleave":Fs=null;break;case"mouseover":case"mouseout":qs=null;break;case"pointerover":case"pointerout":ac.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":oc.delete(a.pointerId)}}function lc(s,a,l,u,g,p){return s===null||s.nativeEvent!==p?(s={blockedOn:a,domEventName:l,eventSystemFlags:u,nativeEvent:p,targetContainers:[g]},a!==null&&(a=oi(a),a!==null&&I0(a)),s):(s.eventSystemFlags|=u,a=s.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),s)}function DR(s,a,l,u,g){switch(a){case"focusin":return Hs=lc(Hs,s,a,l,u,g),!0;case"dragenter":return Fs=lc(Fs,s,a,l,u,g),!0;case"mouseover":return qs=lc(qs,s,a,l,u,g),!0;case"pointerover":var p=g.pointerId;return ac.set(p,lc(ac.get(p)||null,s,a,l,u,g)),!0;case"gotpointercapture":return p=g.pointerId,oc.set(p,lc(oc.get(p)||null,s,a,l,u,g)),!0}return!1}function O0(s){var a=Li(s.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=c(l),a!==null){s.blockedOn=a,hu(s.priority,function(){if(l.tag===13){var u=wn();u=vs(u);var g=Qa(l,u);g!==null&&Rn(g,l,u),nm(l,u)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function xh(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var l=sm(s.nativeEvent);if(l===null){l=s.nativeEvent;var u=new l.constructor(l.type,l);ji=u,l.target.dispatchEvent(u),ji=null}else return a=oi(l),a!==null&&I0(a),s.blockedOn=l,!1;a.shift()}return!0}function M0(s,a,l){xh(s)&&l.delete(a)}function OR(){am=!1,Hs!==null&&xh(Hs)&&(Hs=null),Fs!==null&&xh(Fs)&&(Fs=null),qs!==null&&xh(qs)&&(qs=null),ac.forEach(M0),oc.forEach(M0)}function Ih(s,a){s.blockedOn===a&&(s.blockedOn=null,am||(am=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,OR)))}var Ch=null;function k0(s){Ch!==s&&(Ch=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ch===s&&(Ch=null);for(var a=0;a<s.length;a+=3){var l=s[a],u=s[a+1],g=s[a+2];if(typeof u!="function"){if(rm(u||l)===null)continue;break}var p=oi(l);p!==null&&(s.splice(a,3),a-=3,rg(p,{pending:!0,data:g,method:l.method,action:u},u,g))}}))}function cc(s){function a(O){return Ih(O,s)}Hs!==null&&Ih(Hs,s),Fs!==null&&Ih(Fs,s),qs!==null&&Ih(qs,s),ac.forEach(a),oc.forEach(a);for(var l=0;l<Gs.length;l++){var u=Gs[l];u.blockedOn===s&&(u.blockedOn=null)}for(;0<Gs.length&&(l=Gs[0],l.blockedOn===null);)O0(l),l.blockedOn===null&&Gs.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var g=l[u],p=l[u+1],E=g[Ee]||null;if(typeof p=="function")E||k0(l);else if(E){var S=null;if(p&&p.hasAttribute("formAction")){if(g=p,E=p[Ee]||null)S=E.formAction;else if(rm(g)!==null)continue}else S=E.action;typeof S=="function"?l[u+1]=S:(l.splice(u,3),u-=3),k0(l)}}}function om(s){this._internalRoot=s}Dh.prototype.render=om.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var l=a.current,u=wn();R0(l,u,s,a,null,null)},Dh.prototype.unmount=om.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;R0(s.current,2,null,s,null,null),hh(),a[Cn]=null}};function Dh(s){this._internalRoot=s}Dh.prototype.unstable_scheduleHydration=function(s){if(s){var a=bs();s={blockedOn:null,target:s,priority:a};for(var l=0;l<Gs.length&&a!==0&&a<Gs[l].priority;l++);Gs.splice(l,0,s),l===0&&O0(s)}};var N0=t.version;if(N0!=="19.1.0")throw Error(i(527,N0,"19.1.0"));at.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=d(a),s=s!==null?m(s):null,s=s===null?null:s.stateNode,s};var MR={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oh.isDisabled&&Oh.supportsFiber)try{de=Oh.inject(MR),Yt=Oh}catch{}}return hc.createRoot=function(s,a){if(!r(s))throw Error(i(299));var l=!1,u="",g=Wy,p=$y,E=Zy,S=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(S=a.unstable_transitionCallbacks)),a=A0(s,1,!1,null,null,l,u,g,p,E,S,null),s[Cn]=a.current,Fg(s),new om(a)},hc.hydrateRoot=function(s,a,l){if(!r(s))throw Error(i(299));var u=!1,g="",p=Wy,E=$y,S=Zy,O=null,H=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(p=l.onUncaughtError),l.onCaughtError!==void 0&&(E=l.onCaughtError),l.onRecoverableError!==void 0&&(S=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(O=l.unstable_transitionCallbacks),l.formState!==void 0&&(H=l.formState)),a=A0(s,1,!0,a,l??null,u,g,p,E,S,O,H),a.context=w0(null),l=a.current,u=wn(),u=vs(u),g=Is(u),g.callback=null,Cs(l,g,u),l=u,a.current.lanes=l,Vi(a,l),Ei(a),s[Cn]=a.current,Fg(s),new Dh(a)},hc.version="19.1.0",hc}var q0;function FR(){if(q0)return um.exports;q0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),um.exports=HR(),um.exports}var qR=FR();const GR=()=>{};var G0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},YR=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const r=n[e++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=n[e++];t[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=n[e++],c=n[e++],h=n[e++],d=((r&7)<<18|(o&63)<<12|(c&63)<<6|h&63)-65536;t[i++]=String.fromCharCode(55296+(d>>10)),t[i++]=String.fromCharCode(56320+(d&1023))}else{const o=n[e++],c=n[e++];t[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|c&63)}}return t.join("")},zT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const o=n[r],c=r+1<n.length,h=c?n[r+1]:0,d=r+2<n.length,m=d?n[r+2]:0,_=o>>2,v=(o&3)<<4|h>>4;let T=(h&15)<<2|m>>6,A=m&63;d||(A=64,c||(T=64)),i.push(e[_],e[v],e[T],e[A])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(UT(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):YR(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const o=e[n.charAt(r++)],h=r<n.length?e[n.charAt(r)]:0;++r;const m=r<n.length?e[n.charAt(r)]:64;++r;const v=r<n.length?e[n.charAt(r)]:64;if(++r,o==null||h==null||m==null||v==null)throw new KR;const T=o<<2|h>>4;if(i.push(T),m!==64){const A=h<<4&240|m>>2;if(i.push(A),v!==64){const I=m<<6&192|v;i.push(I)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class KR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QR=function(n){const t=UT(n);return zT.encodeByteArray(t,!0)},hf=function(n){return QR(n).replace(/\./g,"")},BT=function(n){try{return zT.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=()=>XR().__FIREBASE_DEFAULTS__,$R=()=>{if(typeof process>"u"||typeof G0>"u")return;const n=G0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},ZR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&BT(n[1]);return t&&JSON.parse(t)},zf=()=>{try{return GR()||WR()||$R()||ZR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},jT=n=>{var t,e;return(e=(t=zf())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},JR=n=>{const t=jT(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},HT=()=>{var n;return(n=zf())===null||n===void 0?void 0:n.config},FT=n=>{var t;return(t=zf())===null||t===void 0?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Go(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function qT(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[hf(JSON.stringify(e)),hf(JSON.stringify(c)),""].join(".")}const Rc={};function nx(){const n={prod:[],emulator:[]};for(const t of Object.keys(Rc))Rc[t]?n.emulator.push(t):n.prod.push(t);return n}function ix(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let Y0=!1;function GT(n,t){if(typeof window>"u"||typeof document>"u"||!Go(window.location.host)||Rc[n]===t||Rc[n]||Y0)return;Rc[n]=t;function e(T){return`__firebase__banner__${T}`}const i="__firebase__banner",o=nx().prod.length>0;function c(){const T=document.getElementById(i);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function d(T,A){T.setAttribute("width","24"),T.setAttribute("id",A),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function m(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Y0=!0,c()},T}function _(T,A){T.setAttribute("id",A),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function v(){const T=ix(i),A=e("text"),I=document.getElementById(A)||document.createElement("span"),k=e("learnmore"),M=document.getElementById(k)||document.createElement("a"),G=e("preprendIcon"),X=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const et=T.element;h(et),_(M,k);const it=m();d(X,G),et.append(X,I,M,it),document.body.appendChild(et)}o?(I.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function rx(){var n;const t=(n=zf())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ax(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ox(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function lx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cx(){const n=sn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function ux(){return!rx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hx(){try{return typeof indexedDB=="object"}catch{return!1}}function fx(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var o;t(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx="FirebaseError";class ps extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=dx,Object.setPrototypeOf(this,ps.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xc.prototype.create)}}class Xc{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},r=`${this.service}/${t}`,o=this.errors[t],c=o?gx(o,i):"Error",h=`${this.serviceName}: ${c} (${r}).`;return new ps(r,h,i)}}function gx(n,t){return n.replace(mx,(e,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const mx=/\{\$([^}]+)}/g;function px(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function pa(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const r of e){if(!i.includes(r))return!1;const o=n[r],c=t[r];if(K0(o)&&K0(c)){if(!pa(o,c))return!1}else if(o!==c)return!1}for(const r of i)if(!e.includes(r))return!1;return!0}function K0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function _c(n){const t={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");t[decodeURIComponent(r)]=decodeURIComponent(o)}}),t}function yc(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function _x(n,t){const e=new yx(n,t);return e.subscribe.bind(e)}class yx{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let r;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");vx(t,["next","error","complete"])?r=t:r={next:t,error:e,complete:i},r.next===void 0&&(r.next=gm),r.error===void 0&&(r.error=gm),r.complete===void 0&&(r.complete=gm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vx(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function gm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(n){return n&&n._delegate?n._delegate:n}class _a{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new tx;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const i=this.normalizeInstanceIdentifier(t?.identifier),r=(e=t?.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Tx(t))try{this.getOrInitializeService({instanceIdentifier:ca})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(t=ca){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ca){return this.instances.has(t)}getOptions(t=ca){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[o,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&c.resolve(r)}return r}onInit(t,e){var i;const r=this.normalizeInstanceIdentifier(e),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(t),this.onInitCallbacks.set(r,o);const c=this.instances.get(r);return c&&t(c,r),()=>{o.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const r of i)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Ex(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=ca){return this.component?this.component.multipleInstances?t:ca:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ex(n){return n===ca?void 0:n}function Tx(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new bx(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Nt||(Nt={}));const Ax={debug:Nt.DEBUG,verbose:Nt.VERBOSE,info:Nt.INFO,warn:Nt.WARN,error:Nt.ERROR,silent:Nt.SILENT},wx=Nt.INFO,Rx={[Nt.DEBUG]:"log",[Nt.VERBOSE]:"log",[Nt.INFO]:"info",[Nt.WARN]:"warn",[Nt.ERROR]:"error"},xx=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),r=Rx[t];if(r)console[r](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class _p{constructor(t){this.name=t,this._logLevel=wx,this._logHandler=xx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Nt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Ax[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Nt.DEBUG,...t),this._logHandler(this,Nt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Nt.VERBOSE,...t),this._logHandler(this,Nt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Nt.INFO,...t),this._logHandler(this,Nt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Nt.WARN,...t),this._logHandler(this,Nt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Nt.ERROR,...t),this._logHandler(this,Nt.ERROR,...t)}}const Ix=(n,t)=>t.some(e=>n instanceof e);let Q0,X0;function Cx(){return Q0||(Q0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Dx(){return X0||(X0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const YT=new WeakMap,Lm=new WeakMap,KT=new WeakMap,mm=new WeakMap,yp=new WeakMap;function Ox(n){const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{e(nr(n.result)),r()},c=()=>{i(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&YT.set(e,n)}).catch(()=>{}),yp.set(t,n),t}function Mx(n){if(Lm.has(n))return;const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{e(),r()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});Lm.set(n,t)}let Um={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Lm.get(n);if(t==="objectStoreNames")return n.objectStoreNames||KT.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return nr(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function kx(n){Um=n(Um)}function Nx(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(pm(this),t,...e);return KT.set(i,t.sort?t.sort():[t]),nr(i)}:Dx().includes(n)?function(...t){return n.apply(pm(this),t),nr(YT.get(this))}:function(...t){return nr(n.apply(pm(this),t))}}function Px(n){return typeof n=="function"?Nx(n):(n instanceof IDBTransaction&&Mx(n),Ix(n,Cx())?new Proxy(n,Um):n)}function nr(n){if(n instanceof IDBRequest)return Ox(n);if(mm.has(n))return mm.get(n);const t=Px(n);return t!==n&&(mm.set(n,t),yp.set(t,n)),t}const pm=n=>yp.get(n);function Vx(n,t,{blocked:e,upgrade:i,blocking:r,terminated:o}={}){const c=indexedDB.open(n,t),h=nr(c);return i&&c.addEventListener("upgradeneeded",d=>{i(nr(c.result),d.oldVersion,d.newVersion,nr(c.transaction),d)}),e&&c.addEventListener("blocked",d=>e(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),r&&d.addEventListener("versionchange",m=>r(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const Lx=["get","getKey","getAll","getAllKeys","count"],Ux=["put","add","delete","clear"],_m=new Map;function W0(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(_m.get(t))return _m.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,r=Ux.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(r||Lx.includes(e)))return;const o=async function(c,...h){const d=this.transaction(c,r?"readwrite":"readonly");let m=d.store;return i&&(m=m.index(h.shift())),(await Promise.all([m[e](...h),r&&d.done]))[0]};return _m.set(t,o),o}kx(n=>({...n,get:(t,e,i)=>W0(t,e)||n.get(t,e,i),has:(t,e)=>!!W0(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(Bx(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function Bx(n){const t=n.getComponent();return t?.type==="VERSION"}const zm="@firebase/app",$0="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new _p("@firebase/app"),jx="@firebase/app-compat",Hx="@firebase/analytics-compat",Fx="@firebase/analytics",qx="@firebase/app-check-compat",Gx="@firebase/app-check",Yx="@firebase/auth",Kx="@firebase/auth-compat",Qx="@firebase/database",Xx="@firebase/data-connect",Wx="@firebase/database-compat",$x="@firebase/functions",Zx="@firebase/functions-compat",Jx="@firebase/installations",tI="@firebase/installations-compat",eI="@firebase/messaging",nI="@firebase/messaging-compat",iI="@firebase/performance",sI="@firebase/performance-compat",rI="@firebase/remote-config",aI="@firebase/remote-config-compat",oI="@firebase/storage",lI="@firebase/storage-compat",cI="@firebase/firestore",uI="@firebase/ai",hI="@firebase/firestore-compat",fI="firebase",dI="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="[DEFAULT]",gI={[zm]:"fire-core",[jx]:"fire-core-compat",[Fx]:"fire-analytics",[Hx]:"fire-analytics-compat",[Gx]:"fire-app-check",[qx]:"fire-app-check-compat",[Yx]:"fire-auth",[Kx]:"fire-auth-compat",[Qx]:"fire-rtdb",[Xx]:"fire-data-connect",[Wx]:"fire-rtdb-compat",[$x]:"fire-fn",[Zx]:"fire-fn-compat",[Jx]:"fire-iid",[tI]:"fire-iid-compat",[eI]:"fire-fcm",[nI]:"fire-fcm-compat",[iI]:"fire-perf",[sI]:"fire-perf-compat",[rI]:"fire-rc",[aI]:"fire-rc-compat",[oI]:"fire-gcs",[lI]:"fire-gcs-compat",[cI]:"fire-fst",[hI]:"fire-fst-compat",[uI]:"fire-vertex","fire-js":"fire-js",[fI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff=new Map,mI=new Map,jm=new Map;function Z0(n,t){try{n.container.addComponent(t)}catch(e){fs.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Po(n){const t=n.name;if(jm.has(t))return fs.debug(`There were multiple attempts to register component ${t}.`),!1;jm.set(t,n);for(const e of ff.values())Z0(e,n);for(const e of mI.values())Z0(e,n);return!0}function vp(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function $n(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ir=new Xc("app","Firebase",pI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new _a("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ir.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=dI;function QT(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i=Object.assign({name:Bm,automaticDataCollectionEnabled:!0},t),r=i.name;if(typeof r!="string"||!r)throw ir.create("bad-app-name",{appName:String(r)});if(e||(e=HT()),!e)throw ir.create("no-options");const o=ff.get(r);if(o){if(pa(e,o.options)&&pa(i,o.config))return o;throw ir.create("duplicate-app",{appName:r})}const c=new Sx(r);for(const d of jm.values())c.addComponent(d);const h=new _I(e,i,c);return ff.set(r,h),h}function XT(n=Bm){const t=ff.get(n);if(!t&&n===Bm&&HT())return QT();if(!t)throw ir.create("no-app",{appName:n});return t}function sr(n,t,e){var i;let r=(i=gI[n])!==null&&i!==void 0?i:n;e&&(r+=`-${e}`);const o=r.match(/\s|\//),c=t.match(/\s|\//);if(o||c){const h=[`Unable to register library "${r}" with version "${t}":`];o&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&c&&h.push("and"),c&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),fs.warn(h.join(" "));return}Po(new _a(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI="firebase-heartbeat-database",vI=1,Pc="firebase-heartbeat-store";let ym=null;function WT(){return ym||(ym=Vx(yI,vI,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Pc)}catch(e){console.warn(e)}}}}).catch(n=>{throw ir.create("idb-open",{originalErrorMessage:n.message})})),ym}async function bI(n){try{const e=(await WT()).transaction(Pc),i=await e.objectStore(Pc).get($T(n));return await e.done,i}catch(t){if(t instanceof ps)fs.warn(t.message);else{const e=ir.create("idb-get",{originalErrorMessage:t?.message});fs.warn(e.message)}}}async function J0(n,t){try{const i=(await WT()).transaction(Pc,"readwrite");await i.objectStore(Pc).put(t,$T(n)),await i.done}catch(e){if(e instanceof ps)fs.warn(e.message);else{const i=ir.create("idb-set",{originalErrorMessage:e?.message});fs.warn(i.message)}}}function $T(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI=1024,TI=30;class SI{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new wI(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,e;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=tb();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>TI){const c=RI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){fs.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=tb(),{heartbeatsToSend:i,unsentEntries:r}=AI(this._heartbeatsCache.heartbeats),o=hf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return fs.warn(e),""}}}function tb(){return new Date().toISOString().substring(0,10)}function AI(n,t=EI){const e=[];let i=n.slice();for(const r of n){const o=e.find(c=>c.agent===r.agent);if(o){if(o.dates.push(r.date),eb(e)>t){o.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),eb(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class wI{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hx()?fx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await bI(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return J0(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return J0(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function eb(n){return hf(JSON.stringify({version:2,heartbeats:n})).length}function RI(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(n){Po(new _a("platform-logger",t=>new zx(t),"PRIVATE")),Po(new _a("heartbeat",t=>new SI(t),"PRIVATE")),sr(zm,$0,n),sr(zm,$0,"esm2017"),sr("fire-js","")}xI("");function bp(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e}function ZT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const II=ZT,JT=new Xc("auth","Firebase",ZT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df=new _p("@firebase/auth");function CI(n,...t){df.logLevel<=Nt.WARN&&df.warn(`Auth (${Yo}): ${n}`,...t)}function $h(n,...t){df.logLevel<=Nt.ERROR&&df.error(`Auth (${Yo}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(n,...t){throw Ep(n,...t)}function Ri(n,...t){return Ep(n,...t)}function tS(n,t,e){const i=Object.assign(Object.assign({},II()),{[t]:e});return new Xc("auth","Firebase",i).create(t,{appName:n.name})}function rr(n){return tS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ep(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return JT.create(n,...t)}function bt(n,t,...e){if(!n)throw Ep(t,...e)}function us(n){const t="INTERNAL ASSERTION FAILED: "+n;throw $h(t),new Error(t)}function ds(n,t){n||us(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function DI(){return nb()==="http:"||nb()==="https:"}function nb(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(DI()||ox()||"connection"in navigator)?navigator.onLine:!0}function MI(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(t,e){this.shortDelay=t,this.longDelay=e,ds(e>t,"Short delay should be less than long delay!"),this.isMobile=sx()||lx()}get(){return OI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(n,t){ds(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;us("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;us("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;us("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],PI=new $c(3e4,6e4);function Ta(n,t){return n.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:n.tenantId}):t}async function Er(n,t,e,i,r={}){return nS(n,r,async()=>{let o={},c={};i&&(t==="GET"?c=i:o={body:JSON.stringify(i)});const h=Wc(Object.assign({key:n.config.apiKey},c)).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:t,headers:d},o);return ax()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Go(n.emulatorConfig.host)&&(m.credentials="include"),eS.fetch()(await iS(n,n.config.apiHost,e,h),m)})}async function nS(n,t,e){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},kI),t);try{const r=new LI(n),o=await Promise.race([e(),r.promise]);r.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw Mh(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const h=o.ok?c.errorMessage:c.error.message,[d,m]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mh(n,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw Mh(n,"email-already-in-use",c);if(d==="USER_DISABLED")throw Mh(n,"user-disabled",c);const _=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw tS(n,_,m);ni(n,_)}}catch(r){if(r instanceof ps)throw r;ni(n,"network-request-failed",{message:String(r)})}}async function Bf(n,t,e,i,r={}){const o=await Er(n,t,e,i,r);return"mfaPendingCredential"in o&&ni(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function iS(n,t,e,i){const r=`${t}${e}?${i}`,o=n,c=o.config.emulator?Tp(n.config,r):`${n.config.apiScheme}://${r}`;return NI.includes(e)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function VI(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class LI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(Ri(this.auth,"network-request-failed")),PI.get())})}}function Mh(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const r=Ri(n,t,i);return r.customData._tokenResponse=e,r}function ib(n){return n!==void 0&&n.enterprise!==void 0}class UI{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return VI(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function zI(n,t){return Er(n,"GET","/v2/recaptchaConfig",Ta(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BI(n,t){return Er(n,"POST","/v1/accounts:delete",t)}async function gf(n,t){return Er(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function jI(n,t=!1){const e=rn(n),i=await e.getIdToken(t),r=Sp(i);bt(r&&r.exp&&r.auth_time&&r.iat,e.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,c=o?.sign_in_provider;return{claims:r,token:i,authTime:xc(vm(r.auth_time)),issuedAtTime:xc(vm(r.iat)),expirationTime:xc(vm(r.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function vm(n){return Number(n)*1e3}function Sp(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return $h("JWT malformed, contained fewer than 3 sections"),null;try{const r=BT(e);return r?JSON.parse(r):($h("Failed to decode base64 JWT payload"),null)}catch(r){return $h("Caught error parsing JWT payload as JSON",r?.toString()),null}}function sb(n){const t=Sp(n);return bt(t,"internal-error"),bt(typeof t.exp<"u","internal-error"),bt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vc(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof ps&&HI(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function HI({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=xc(this.lastLoginAt),this.creationTime=xc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mf(n){var t;const e=n.auth,i=await n.getIdToken(),r=await Vc(n,gf(e,{idToken:i}));bt(r?.users.length,e,"internal-error");const o=r.users[0];n._notifyReloadListener(o);const c=!((t=o.providerUserInfo)===null||t===void 0)&&t.length?sS(o.providerUserInfo):[],h=GI(n.providerData,c),d=n.isAnonymous,m=!(n.email&&o.passwordHash)&&!h?.length,_=d?m:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Fm(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(n,v)}async function qI(n){const t=rn(n);await mf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function GI(n,t){return[...n.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function sS(n){return n.map(t=>{var{providerId:e}=t,i=bp(t,["providerId"]);return{providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YI(n,t){const e=await nS(n,{},async()=>{const i=Wc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,c=await iS(n,r,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:i};return n.emulatorConfig&&Go(n.emulatorConfig.host)&&(d.credentials="include"),eS.fetch()(c,d)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function KI(n,t){return Er(n,"POST","/v2/accounts:revokeToken",Ta(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){bt(t.idToken,"internal-error"),bt(typeof t.idToken<"u","internal-error"),bt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):sb(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){bt(t.length!==0,"internal-error");const e=sb(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(bt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:r,expiresIn:o}=await YI(t,e);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:r,expirationTime:o}=e,c=new xo;return i&&(bt(typeof i=="string","internal-error",{appName:t}),c.refreshToken=i),r&&(bt(typeof r=="string","internal-error",{appName:t}),c.accessToken=r),o&&(bt(typeof o=="number","internal-error",{appName:t}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new xo,this.toJSON())}_performRefresh(){return us("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(n,t){bt(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class Zn{constructor(t){var{uid:e,auth:i,stsTokenManager:r}=t,o=bp(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new FI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Fm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const e=await Vc(this,this.stsTokenManager.getToken(this.auth,t));return bt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return jI(this,t)}reload(){return qI(this)}_assign(t){this!==t&&(bt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Zn(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){bt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await mf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($n(this.auth.app))return Promise.reject(rr(this.auth));const t=await this.getIdToken();return await Vc(this,BI(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var i,r,o,c,h,d,m,_;const v=(i=e.displayName)!==null&&i!==void 0?i:void 0,T=(r=e.email)!==null&&r!==void 0?r:void 0,A=(o=e.phoneNumber)!==null&&o!==void 0?o:void 0,I=(c=e.photoURL)!==null&&c!==void 0?c:void 0,k=(h=e.tenantId)!==null&&h!==void 0?h:void 0,M=(d=e._redirectEventId)!==null&&d!==void 0?d:void 0,G=(m=e.createdAt)!==null&&m!==void 0?m:void 0,X=(_=e.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:et,emailVerified:it,isAnonymous:W,providerData:ot,stsTokenManager:C}=e;bt(et&&C,t,"internal-error");const R=xo.fromJSON(this.name,C);bt(typeof et=="string",t,"internal-error"),Ks(v,t.name),Ks(T,t.name),bt(typeof it=="boolean",t,"internal-error"),bt(typeof W=="boolean",t,"internal-error"),Ks(A,t.name),Ks(I,t.name),Ks(k,t.name),Ks(M,t.name),Ks(G,t.name),Ks(X,t.name);const x=new Zn({uid:et,auth:t,email:T,emailVerified:it,displayName:v,isAnonymous:W,photoURL:I,phoneNumber:A,tenantId:k,stsTokenManager:R,createdAt:G,lastLoginAt:X});return ot&&Array.isArray(ot)&&(x.providerData=ot.map(N=>Object.assign({},N))),M&&(x._redirectEventId=M),x}static async _fromIdTokenResponse(t,e,i=!1){const r=new xo;r.updateFromServerResponse(e);const o=new Zn({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await mf(o),o}static async _fromGetAccountInfoResponse(t,e,i){const r=e.users[0];bt(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?sS(r.providerUserInfo):[],c=!(r.email&&r.passwordHash)&&!o?.length,h=new xo;h.updateFromIdToken(i);const d=new Zn({uid:r.localId,auth:t,stsTokenManager:h,isAnonymous:c}),m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Fm(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!o?.length};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb=new Map;function hs(n){ds(n instanceof Function,"Expected a class definition");let t=rb.get(n);return t?(ds(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,rb.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}rS.type="NONE";const ab=rS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(n,t,e){return`firebase:${n}:${t}:${e}`}class Io{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Zh(this.userKey,r.apiKey,o),this.fullPersistenceKey=Zh("persistence",r.apiKey,o),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await gf(this.auth,{idToken:t}).catch(()=>{});return e?Zn._fromGetAccountInfoResponse(this.auth,e,t):null}return Zn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new Io(hs(ab),t,i);const r=(await Promise.all(e.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=r[0]||hs(ab);const c=Zh(i,t.config.apiKey,t.name);let h=null;for(const m of e)try{const _=await m._get(c);if(_){let v;if(typeof _=="string"){const T=await gf(t,{idToken:_}).catch(()=>{});if(!T)break;v=await Zn._fromGetAccountInfoResponse(t,T,_)}else v=Zn._fromJSON(t,_);m!==o&&(h=v),o=m;break}}catch{}const d=r.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Io(o,t,i):(o=d[0],h&&await o._set(c,h.toJSON()),await Promise.all(e.map(async m=>{if(m!==o)try{await m._remove(c)}catch{}})),new Io(o,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(cS(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(aS(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(hS(t))return"Blackberry";if(fS(t))return"Webos";if(oS(t))return"Safari";if((t.includes("chrome/")||lS(t))&&!t.includes("edge/"))return"Chrome";if(uS(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if(i?.length===2)return i[1]}return"Other"}function aS(n=sn()){return/firefox\//i.test(n)}function oS(n=sn()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function lS(n=sn()){return/crios\//i.test(n)}function cS(n=sn()){return/iemobile/i.test(n)}function uS(n=sn()){return/android/i.test(n)}function hS(n=sn()){return/blackberry/i.test(n)}function fS(n=sn()){return/webos/i.test(n)}function Ap(n=sn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function QI(n=sn()){var t;return Ap(n)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function XI(){return cx()&&document.documentMode===10}function dS(n=sn()){return Ap(n)||uS(n)||fS(n)||hS(n)||/windows phone/i.test(n)||cS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(n,t=[]){let e;switch(n){case"Browser":e=ob(sn());break;case"Worker":e=`${ob(sn())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Yo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=o=>new Promise((c,h)=>{try{const d=t(o);c(d)}catch(d){h(d)}});i.onAbort=e,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const r of e)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $I(n,t={}){return Er(n,"GET","/v2/passwordPolicy",Ta(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI=6;class JI{constructor(t){var e,i,r,o;const c=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=c.minPasswordLength)!==null&&e!==void 0?e:ZI,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=t.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,i,r,o,c,h;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,d),this.validatePasswordCharacterOptions(t,d),d.isValid&&(d.isValid=(e=d.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(r=d.containsLowercaseLetter)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(c=d.containsNumericCharacter)!==null&&c!==void 0?c:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),r&&(e.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(t,e,i,r){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lb(this),this.idTokenSubscription=new lb(this),this.beforeStateQueue=new WI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=hs(e)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await Io.create(this,t),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await gf(this,{idToken:t}),i=await Zn._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var e;if($n(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,h=r?._redirectEventId,d=await this.tryRedirectSignIn(t);(!c||c===h)&&d?.user&&(r=d.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return bt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await mf(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=MI()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if($n(this.app))return Promise.reject(rr(this));const e=t?rn(t):null;return e&&bt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&bt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return $n(this.app)?Promise.reject(rr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return $n(this.app)?Promise.reject(rr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hs(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await $I(this),e=new JI(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Xc("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await KI(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&hs(t)||this._popupRedirectResolver;bt(e,this,"argument-error"),this.redirectPersistenceManager=await Io.create(this,[hs(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,i;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,r){if(this._deleted)return()=>{};const o=typeof e=="function"?e:e.next.bind(e);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(bt(h,this,"internal-error"),h.then(()=>{c||o(this.currentUser)}),typeof e=="function"){const d=t.addObserver(e,i,r);return()=>{c=!0,d()}}else{const d=t.addObserver(e);return()=>{c=!0,d()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return bt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=gS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const i=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());i&&(e["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if($n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return e?.error&&CI(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ko(n){return rn(n)}class lb{constructor(t){this.auth=t,this.observer=null,this.addObserver=_x(e=>this.observer=e)}get next(){return bt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eC(n){jf=n}function mS(n){return jf.loadJS(n)}function nC(){return jf.recaptchaEnterpriseScript}function iC(){return jf.gapiScript}function sC(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class rC{constructor(){this.enterprise=new aC}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class aC{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const oC="recaptcha-enterprise",pS="NO_RECAPTCHA";class lC{constructor(t){this.type=oC,this.auth=Ko(t)}async verify(t="verify",e=!1){async function i(o){if(!e){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,h)=>{zI(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new UI(d);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,c(m.siteKey)}}).catch(d=>{h(d)})})}function r(o,c,h){const d=window.grecaptcha;ib(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:t}).then(m=>{c(m)}).catch(()=>{c(pS)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new rC().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{i(this.auth).then(h=>{if(!e&&ib(window.grecaptcha))r(h,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let d=nC();d.length!==0&&(d+=h),mS(d).then(()=>{r(h,o,c)}).catch(m=>{c(m)})}}).catch(h=>{c(h)})})}}async function cb(n,t,e,i=!1,r=!1){const o=new lC(n);let c;if(r)c=pS;else try{c=await o.verify(e)}catch{c=await o.verify(e,!0)}const h=Object.assign({},t);if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function ub(n,t,e,i,r){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await cb(n,t,e,e==="getOobCode");return i(n,c)}else return i(n,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await cb(n,t,e,e==="getOobCode");return i(n,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(n,t){const e=vp(n,"auth");if(e.isInitialized()){const r=e.getImmediate(),o=e.getOptions();if(pa(o,t??{}))return r;ni(r,"already-initialized")}return e.initialize({options:t})}function uC(n,t){const e=t?.persistence||[],i=(Array.isArray(e)?e:[e]).map(hs);t?.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t?.popupRedirectResolver)}function hC(n,t,e){const i=Ko(n);bt(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,o=_S(t),{host:c,port:h}=fC(t),d=h===null?"":`:${h}`,m={url:`${o}//${c}${d}/`},_=Object.freeze({host:c,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){bt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),bt(pa(m,i.config.emulator)&&pa(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Go(c)?(qT(`${o}//${c}${d}`),GT("Auth",!0)):dC()}function _S(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function fC(n){const t=_S(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:hb(i.substr(o.length+1))}}else{const[o,c]=i.split(":");return{host:o,port:hb(c)}}}function hb(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function dC(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return us("not implemented")}_getIdTokenResponse(t){return us("not implemented")}_linkToIdToken(t,e){return us("not implemented")}_getReauthenticationResolver(t){return us("not implemented")}}async function gC(n,t){return Er(n,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mC(n,t){return Bf(n,"POST","/v1/accounts:signInWithPassword",Ta(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pC(n,t){return Bf(n,"POST","/v1/accounts:signInWithEmailLink",Ta(n,t))}async function _C(n,t){return Bf(n,"POST","/v1/accounts:signInWithEmailLink",Ta(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc extends wp{constructor(t,e,i,r=null){super("password",i),this._email=t,this._password=e,this._tenantId=r}static _fromEmailAndPassword(t,e){return new Lc(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new Lc(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e?.email&&e?.password){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ub(t,e,"signInWithPassword",mC);case"emailLink":return pC(t,{email:this._email,oobCode:this._password});default:ni(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ub(t,i,"signUpPassword",gC);case"emailLink":return _C(t,{idToken:e,email:this._email,oobCode:this._password});default:ni(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Co(n,t){return Bf(n,"POST","/v1/accounts:signInWithIdp",Ta(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC="http://localhost";class ya extends wp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new ya(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):ni("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r}=e,o=bp(e,["providerId","signInMethod"]);if(!i||!r)return null;const c=new ya(i,r);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return Co(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,Co(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Co(t,e)}buildRequest(){const t={requestUri:yC,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Wc(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function bC(n){const t=_c(yc(n)).link,e=t?_c(yc(t)).deep_link_id:null,i=_c(yc(n)).deep_link_id;return(i?_c(yc(i)).link:null)||i||e||t||n}class Rp{constructor(t){var e,i,r,o,c,h;const d=_c(yc(t)),m=(e=d.apiKey)!==null&&e!==void 0?e:null,_=(i=d.oobCode)!==null&&i!==void 0?i:null,v=vC((r=d.mode)!==null&&r!==void 0?r:null);bt(m&&_&&v,"argument-error"),this.apiKey=m,this.operation=v,this.code=_,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(c=d.lang)!==null&&c!==void 0?c:null,this.tenantId=(h=d.tenantId)!==null&&h!==void 0?h:null}static parseLink(t){const e=bC(t);try{return new Rp(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(){this.providerId=Qo.PROVIDER_ID}static credential(t,e){return Lc._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const i=Rp.parseLink(e);return bt(i,"argument-error"),Lc._fromEmailAndCode(t,i.code,i.tenantId)}}Qo.PROVIDER_ID="password";Qo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc extends yS{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends Zc{constructor(){super("facebook.com")}static credential(t){return ya._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Qs.credentialFromTaggedObject(t)}static credentialFromError(t){return Qs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Qs.credential(t.oauthAccessToken)}catch{return null}}}Qs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends Zc{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return ya._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Xs.credentialFromTaggedObject(t)}static credentialFromError(t){return Xs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return Xs.credential(e,i)}catch{return null}}}Xs.GOOGLE_SIGN_IN_METHOD="google.com";Xs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends Zc{constructor(){super("github.com")}static credential(t){return ya._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ws.credentialFromTaggedObject(t)}static credentialFromError(t){return Ws.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ws.credential(t.oauthAccessToken)}catch{return null}}}Ws.GITHUB_SIGN_IN_METHOD="github.com";Ws.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends Zc{constructor(){super("twitter.com")}static credential(t,e){return ya._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return $s.credentialFromTaggedObject(t)}static credentialFromError(t){return $s.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return $s.credential(e,i)}catch{return null}}}$s.TWITTER_SIGN_IN_METHOD="twitter.com";$s.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,r=!1){const o=await Zn._fromIdTokenResponse(t,i,r),c=fb(i);return new Vo({user:o,providerId:c,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const r=fb(i);return new Vo({user:t,providerId:r,_tokenResponse:i,operationType:e})}}function fb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf extends ps{constructor(t,e,i,r){var o;super(e.code,e.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,pf.prototype),this.customData={appName:t.name,tenantId:(o=t.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,r){return new pf(t,e,i,r)}}function vS(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?pf._fromErrorAndOperation(n,o,t,i):o})}async function EC(n,t,e=!1){const i=await Vc(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return Vo._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TC(n,t,e=!1){const{auth:i}=n;if($n(i.app))return Promise.reject(rr(i));const r="reauthenticate";try{const o=await Vc(n,vS(i,r,t,n),e);bt(o.idToken,i,"internal-error");const c=Sp(o.idToken);bt(c,i,"internal-error");const{sub:h}=c;return bt(n.uid===h,i,"user-mismatch"),Vo._forOperation(n,r,o)}catch(o){throw o?.code==="auth/user-not-found"&&ni(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bS(n,t,e=!1){if($n(n.app))return Promise.reject(rr(n));const i="signIn",r=await vS(n,i,t),o=await Vo._fromIdTokenResponse(n,i,r);return e||await n._updateCurrentUser(o.user),o}async function SC(n,t){return bS(Ko(n),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AC(n){const t=Ko(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function wC(n,t,e){return $n(n.app)?Promise.reject(rr(n)):SC(rn(n),Qo.credential(t,e)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&AC(n),i})}function RC(n,t,e,i){return rn(n).onIdTokenChanged(t,e,i)}function xC(n,t,e){return rn(n).beforeAuthStateChanged(t,e)}function IC(n,t,e,i){return rn(n).onAuthStateChanged(t,e,i)}function CC(n){return rn(n).signOut()}const _f="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(_f,"1"),this.storage.removeItem(_f),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=1e3,OC=10;class TS extends ES{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dS(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),r=this.localCache[e];i!==r&&t(e,r,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,h,d)=>{this.notifyListeners(c,d)});return}const i=t.key;e?this.detachListener():this.stopPolling();const r=()=>{const c=this.storage.getItem(i);!e&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);XI()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,OC):r()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},DC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}TS.type="LOCAL";const MC=TS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS extends ES{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}SS.type="SESSION";const AS=SS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(r=>r.isListeningto(t));if(e)return e;const i=new Hf(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:r,data:o}=e.data,c=this.handlersMap[r];if(!c?.size)return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const h=Array.from(c).map(async m=>m(e.origin,o)),d=await kC(h);e.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:d})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,c;return new Promise((h,d)=>{const m=xp("",20);r.port1.start();const _=setTimeout(()=>{d(new Error("unsupported_event"))},i);c={messageChannel:r,onMessage(v){const T=v;if(T.data.eventId===m)switch(T.data.status){case"ack":clearTimeout(_),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(T.data.response);break;default:clearTimeout(_),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(c),r.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:m,data:e},[r.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(){return window}function PC(n){xi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(){return typeof xi().WorkerGlobalScope<"u"&&typeof xi().importScripts=="function"}async function VC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function LC(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function UC(){return wS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="firebaseLocalStorageDb",zC=1,yf="firebaseLocalStorage",xS="fbase_key";class Jc{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function Ff(n,t){return n.transaction([yf],t?"readwrite":"readonly").objectStore(yf)}function BC(){const n=indexedDB.deleteDatabase(RS);return new Jc(n).toPromise()}function qm(){const n=indexedDB.open(RS,zC);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(yf,{keyPath:xS})}catch(r){e(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(yf)?t(i):(i.close(),await BC(),t(await qm()))})})}async function db(n,t,e){const i=Ff(n,!0).put({[xS]:t,value:e});return new Jc(i).toPromise()}async function jC(n,t){const e=Ff(n,!1).get(t),i=await new Jc(e).toPromise();return i===void 0?null:i.value}function gb(n,t){const e=Ff(n,!0).delete(t);return new Jc(e).toPromise()}const HC=800,FC=3;class IS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qm(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>FC)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hf._getInstance(UC()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var t,e;if(this.activeServiceWorker=await VC(),!this.activeServiceWorker)return;this.sender=new NC(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((e=i[0])===null||e===void 0)&&e.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||LC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await qm();return await db(t,_f,"1"),await gb(t,_f),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>db(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>jC(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>gb(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const o=Ff(r,!1).getAll();return new Jc(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:o}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),e.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),e.push(r));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),HC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IS.type="LOCAL";const qC=IS;new $c(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(n,t){return t?hs(t):(bt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip extends wp{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Co(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Co(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Co(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function YC(n){return bS(n.auth,new Ip(n),n.bypassAuthState)}function KC(n){const{auth:t,user:e}=n;return bt(e,t,"internal-error"),TC(e,new Ip(n),n.bypassAuthState)}async function QC(n){const{auth:t,user:e}=n;return bt(e,t,"internal-error"),EC(e,new Ip(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(t,e,i,r,o=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:r,tenantId:o,error:c,type:h}=t;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:e,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(m){this.reject(m)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return YC;case"linkViaPopup":case"linkViaRedirect":return QC;case"reauthViaPopup":case"reauthViaRedirect":return KC;default:ni(this.auth,"internal-error")}}resolve(t){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=new $c(2e3,1e4);class wo extends CS{constructor(t,e,i,r,o){super(t,e,r,o),this.provider=i,this.authWindow=null,this.pollId=null,wo.currentPopupAction&&wo.currentPopupAction.cancel(),wo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return bt(t,this.auth,"internal-error"),t}async onExecution(){ds(this.filter.length===1,"Popup operations only handle one event");const t=xp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wo.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,i;if(!((i=(e=this.authWindow)===null||e===void 0?void 0:e.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,XC.get())};t()}}wo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC="pendingRedirect",Jh=new Map;class $C extends CS{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=Jh.get(this.auth._key());if(!t){try{const i=await ZC(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}Jh.set(this.auth._key(),t)}return this.bypassAuthState||Jh.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZC(n,t){const e=e2(t),i=t2(n);if(!await i._isAvailable())return!1;const r=await i._get(e)==="true";return await i._remove(e),r}function JC(n,t){Jh.set(n._key(),t)}function t2(n){return hs(n._redirectPersistence)}function e2(n){return Zh(WC,n.config.apiKey,n.name)}async function n2(n,t,e=!1){if($n(n.app))return Promise.reject(rr(n));const i=Ko(n),r=GC(i,t),c=await new $C(i,r,e).execute();return c&&!e&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=10*60*1e3;class s2{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!r2(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!DS(t)){const r=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";e.onError(Ri(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=i2&&this.cachedEventUids.clear(),this.cachedEventUids.has(mb(t))}saveEventToCache(t){this.cachedEventUids.add(mb(t)),this.lastProcessedEventTime=Date.now()}}function mb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function DS({type:n,error:t}){return n==="unknown"&&t?.code==="auth/no-auth-event"}function r2(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a2(n,t={}){return Er(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,l2=/^https?/;async function c2(n){if(n.config.emulator)return;const{authorizedDomains:t}=await a2(n);for(const e of t)try{if(u2(e))return}catch{}ni(n,"unauthorized-domain")}function u2(n){const t=Hm(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===i}if(!l2.test(e))return!1;if(o2.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2=new $c(3e4,6e4);function pb(){const n=xi().___jsl;if(n?.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function f2(n){return new Promise((t,e)=>{var i,r,o;function c(){pb(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{pb(),e(Ri(n,"network-request-failed"))},timeout:h2.get()})}if(!((r=(i=xi().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)t(gapi.iframes.getContext());else if(!((o=xi().gapi)===null||o===void 0)&&o.load)c();else{const h=sC("iframefcb");return xi()[h]=()=>{gapi.load?c():e(Ri(n,"network-request-failed"))},mS(`${iC()}?onload=${h}`).catch(d=>e(d))}}).catch(t=>{throw tf=null,t})}let tf=null;function d2(n){return tf=tf||f2(n),tf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2=new $c(5e3,15e3),m2="__/auth/iframe",p2="emulator/auth/iframe",_2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},y2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function v2(n){const t=n.config;bt(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?Tp(t,p2):`https://${n.config.authDomain}/${m2}`,i={apiKey:t.apiKey,appName:n.name,v:Yo},r=y2.get(n.config.apiHost);r&&(i.eid=r);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${e}?${Wc(i).slice(1)}`}async function b2(n){const t=await d2(n),e=xi().gapi;return bt(e,n,"internal-error"),t.open({where:document.body,url:v2(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_2,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const c=Ri(n,"network-request-failed"),h=xi().setTimeout(()=>{o(c)},g2.get());function d(){xi().clearTimeout(h),r(i)}i.ping(d).then(d,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},T2=500,S2=600,A2="_blank",w2="http://localhost";class _b{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function R2(n,t,e,i=T2,r=S2){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d=Object.assign(Object.assign({},E2),{width:i.toString(),height:r.toString(),top:o,left:c}),m=sn().toLowerCase();e&&(h=lS(m)?A2:e),aS(m)&&(t=t||w2,d.scrollbars="yes");const _=Object.entries(d).reduce((T,[A,I])=>`${T}${A}=${I},`,"");if(QI(m)&&h!=="_self")return x2(t||"",h),new _b(null);const v=window.open(t||"",h,_);bt(v,n,"popup-blocked");try{v.focus()}catch{}return new _b(v)}function x2(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2="__/auth/handler",C2="emulator/auth/handler",D2=encodeURIComponent("fac");async function yb(n,t,e,i,r,o){bt(n.config.authDomain,n,"auth-domain-config-required"),bt(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:Yo,eventId:r};if(t instanceof yS){t.setDefaultLanguage(n.languageCode),c.providerId=t.providerId||"",px(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[_,v]of Object.entries({}))c[_]=v}if(t instanceof Zc){const _=t.getScopes().filter(v=>v!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const d=await n._getAppCheckToken(),m=d?`#${D2}=${encodeURIComponent(d)}`:"";return`${O2(n)}?${Wc(h).slice(1)}${m}`}function O2({config:n}){return n.emulator?Tp(n,C2):`https://${n.authDomain}/${I2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="webStorageSupport";class M2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AS,this._completeRedirectFn=n2,this._overrideRedirectResult=JC}async _openPopup(t,e,i,r){var o;ds((o=this.eventManagers[t._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const c=await yb(t,e,i,Hm(),r);return R2(t,c,xp())}async _openRedirect(t,e,i,r){await this._originValidation(t);const o=await yb(t,e,i,Hm(),r);return PC(o),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:r,promise:o}=this.eventManagers[e];return r?Promise.resolve(r):(ds(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await b2(t),i=new s2(t);return e.register("authEvent",r=>(bt(r?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(bm,{type:bm},r=>{var o;const c=(o=r?.[0])===null||o===void 0?void 0:o[bm];c!==void 0&&e(!!c),ni(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=c2(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return dS()||oS()||Ap()}}const k2=M2;var vb="@firebase/auth",bb="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){bt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function V2(n){Po(new _a("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=i.options;bt(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gS(n)},m=new tC(i,r,o,d);return uC(m,e),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),Po(new _a("auth-internal",t=>{const e=Ko(t.getProvider("auth").getImmediate());return(i=>new N2(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),sr(vb,bb,P2(n)),sr(vb,bb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=5*60,U2=FT("authIdTokenMaxAge")||L2;let Eb=null;const z2=n=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>U2)return;const r=e?.token;Eb!==r&&(Eb=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function B2(n=XT()){const t=vp(n,"auth");if(t.isInitialized())return t.getImmediate();const e=cC(n,{popupRedirectResolver:k2,persistence:[qC,MC,AS]}),i=FT("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const c=z2(o.toString());xC(e,c,()=>c(e.currentUser)),RC(e,h=>c(h))}}const r=jT("auth");return r&&hC(e,`http://${r}`),e}function j2(){var n,t;return(t=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&t!==void 0?t:document}eC({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=r=>{const o=Ri("internal-error");o.customData=r,e(o)},i.type="text/javascript",i.charset="UTF-8",j2().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});V2("Browser");var H2="firebase",F2="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sr(H2,F2,"app");var Tb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ar,OS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(C,R){function x(){}x.prototype=R.prototype,C.D=R.prototype,C.prototype=new x,C.prototype.constructor=C,C.C=function(N,P,L){for(var D=Array(arguments.length-2),Wt=2;Wt<arguments.length;Wt++)D[Wt-2]=arguments[Wt];return R.prototype[P].apply(N,D)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(C,R,x){x||(x=0);var N=Array(16);if(typeof R=="string")for(var P=0;16>P;++P)N[P]=R.charCodeAt(x++)|R.charCodeAt(x++)<<8|R.charCodeAt(x++)<<16|R.charCodeAt(x++)<<24;else for(P=0;16>P;++P)N[P]=R[x++]|R[x++]<<8|R[x++]<<16|R[x++]<<24;R=C.g[0],x=C.g[1],P=C.g[2];var L=C.g[3],D=R+(L^x&(P^L))+N[0]+3614090360&4294967295;R=x+(D<<7&4294967295|D>>>25),D=L+(P^R&(x^P))+N[1]+3905402710&4294967295,L=R+(D<<12&4294967295|D>>>20),D=P+(x^L&(R^x))+N[2]+606105819&4294967295,P=L+(D<<17&4294967295|D>>>15),D=x+(R^P&(L^R))+N[3]+3250441966&4294967295,x=P+(D<<22&4294967295|D>>>10),D=R+(L^x&(P^L))+N[4]+4118548399&4294967295,R=x+(D<<7&4294967295|D>>>25),D=L+(P^R&(x^P))+N[5]+1200080426&4294967295,L=R+(D<<12&4294967295|D>>>20),D=P+(x^L&(R^x))+N[6]+2821735955&4294967295,P=L+(D<<17&4294967295|D>>>15),D=x+(R^P&(L^R))+N[7]+4249261313&4294967295,x=P+(D<<22&4294967295|D>>>10),D=R+(L^x&(P^L))+N[8]+1770035416&4294967295,R=x+(D<<7&4294967295|D>>>25),D=L+(P^R&(x^P))+N[9]+2336552879&4294967295,L=R+(D<<12&4294967295|D>>>20),D=P+(x^L&(R^x))+N[10]+4294925233&4294967295,P=L+(D<<17&4294967295|D>>>15),D=x+(R^P&(L^R))+N[11]+2304563134&4294967295,x=P+(D<<22&4294967295|D>>>10),D=R+(L^x&(P^L))+N[12]+1804603682&4294967295,R=x+(D<<7&4294967295|D>>>25),D=L+(P^R&(x^P))+N[13]+4254626195&4294967295,L=R+(D<<12&4294967295|D>>>20),D=P+(x^L&(R^x))+N[14]+2792965006&4294967295,P=L+(D<<17&4294967295|D>>>15),D=x+(R^P&(L^R))+N[15]+1236535329&4294967295,x=P+(D<<22&4294967295|D>>>10),D=R+(P^L&(x^P))+N[1]+4129170786&4294967295,R=x+(D<<5&4294967295|D>>>27),D=L+(x^P&(R^x))+N[6]+3225465664&4294967295,L=R+(D<<9&4294967295|D>>>23),D=P+(R^x&(L^R))+N[11]+643717713&4294967295,P=L+(D<<14&4294967295|D>>>18),D=x+(L^R&(P^L))+N[0]+3921069994&4294967295,x=P+(D<<20&4294967295|D>>>12),D=R+(P^L&(x^P))+N[5]+3593408605&4294967295,R=x+(D<<5&4294967295|D>>>27),D=L+(x^P&(R^x))+N[10]+38016083&4294967295,L=R+(D<<9&4294967295|D>>>23),D=P+(R^x&(L^R))+N[15]+3634488961&4294967295,P=L+(D<<14&4294967295|D>>>18),D=x+(L^R&(P^L))+N[4]+3889429448&4294967295,x=P+(D<<20&4294967295|D>>>12),D=R+(P^L&(x^P))+N[9]+568446438&4294967295,R=x+(D<<5&4294967295|D>>>27),D=L+(x^P&(R^x))+N[14]+3275163606&4294967295,L=R+(D<<9&4294967295|D>>>23),D=P+(R^x&(L^R))+N[3]+4107603335&4294967295,P=L+(D<<14&4294967295|D>>>18),D=x+(L^R&(P^L))+N[8]+1163531501&4294967295,x=P+(D<<20&4294967295|D>>>12),D=R+(P^L&(x^P))+N[13]+2850285829&4294967295,R=x+(D<<5&4294967295|D>>>27),D=L+(x^P&(R^x))+N[2]+4243563512&4294967295,L=R+(D<<9&4294967295|D>>>23),D=P+(R^x&(L^R))+N[7]+1735328473&4294967295,P=L+(D<<14&4294967295|D>>>18),D=x+(L^R&(P^L))+N[12]+2368359562&4294967295,x=P+(D<<20&4294967295|D>>>12),D=R+(x^P^L)+N[5]+4294588738&4294967295,R=x+(D<<4&4294967295|D>>>28),D=L+(R^x^P)+N[8]+2272392833&4294967295,L=R+(D<<11&4294967295|D>>>21),D=P+(L^R^x)+N[11]+1839030562&4294967295,P=L+(D<<16&4294967295|D>>>16),D=x+(P^L^R)+N[14]+4259657740&4294967295,x=P+(D<<23&4294967295|D>>>9),D=R+(x^P^L)+N[1]+2763975236&4294967295,R=x+(D<<4&4294967295|D>>>28),D=L+(R^x^P)+N[4]+1272893353&4294967295,L=R+(D<<11&4294967295|D>>>21),D=P+(L^R^x)+N[7]+4139469664&4294967295,P=L+(D<<16&4294967295|D>>>16),D=x+(P^L^R)+N[10]+3200236656&4294967295,x=P+(D<<23&4294967295|D>>>9),D=R+(x^P^L)+N[13]+681279174&4294967295,R=x+(D<<4&4294967295|D>>>28),D=L+(R^x^P)+N[0]+3936430074&4294967295,L=R+(D<<11&4294967295|D>>>21),D=P+(L^R^x)+N[3]+3572445317&4294967295,P=L+(D<<16&4294967295|D>>>16),D=x+(P^L^R)+N[6]+76029189&4294967295,x=P+(D<<23&4294967295|D>>>9),D=R+(x^P^L)+N[9]+3654602809&4294967295,R=x+(D<<4&4294967295|D>>>28),D=L+(R^x^P)+N[12]+3873151461&4294967295,L=R+(D<<11&4294967295|D>>>21),D=P+(L^R^x)+N[15]+530742520&4294967295,P=L+(D<<16&4294967295|D>>>16),D=x+(P^L^R)+N[2]+3299628645&4294967295,x=P+(D<<23&4294967295|D>>>9),D=R+(P^(x|~L))+N[0]+4096336452&4294967295,R=x+(D<<6&4294967295|D>>>26),D=L+(x^(R|~P))+N[7]+1126891415&4294967295,L=R+(D<<10&4294967295|D>>>22),D=P+(R^(L|~x))+N[14]+2878612391&4294967295,P=L+(D<<15&4294967295|D>>>17),D=x+(L^(P|~R))+N[5]+4237533241&4294967295,x=P+(D<<21&4294967295|D>>>11),D=R+(P^(x|~L))+N[12]+1700485571&4294967295,R=x+(D<<6&4294967295|D>>>26),D=L+(x^(R|~P))+N[3]+2399980690&4294967295,L=R+(D<<10&4294967295|D>>>22),D=P+(R^(L|~x))+N[10]+4293915773&4294967295,P=L+(D<<15&4294967295|D>>>17),D=x+(L^(P|~R))+N[1]+2240044497&4294967295,x=P+(D<<21&4294967295|D>>>11),D=R+(P^(x|~L))+N[8]+1873313359&4294967295,R=x+(D<<6&4294967295|D>>>26),D=L+(x^(R|~P))+N[15]+4264355552&4294967295,L=R+(D<<10&4294967295|D>>>22),D=P+(R^(L|~x))+N[6]+2734768916&4294967295,P=L+(D<<15&4294967295|D>>>17),D=x+(L^(P|~R))+N[13]+1309151649&4294967295,x=P+(D<<21&4294967295|D>>>11),D=R+(P^(x|~L))+N[4]+4149444226&4294967295,R=x+(D<<6&4294967295|D>>>26),D=L+(x^(R|~P))+N[11]+3174756917&4294967295,L=R+(D<<10&4294967295|D>>>22),D=P+(R^(L|~x))+N[2]+718787259&4294967295,P=L+(D<<15&4294967295|D>>>17),D=x+(L^(P|~R))+N[9]+3951481745&4294967295,C.g[0]=C.g[0]+R&4294967295,C.g[1]=C.g[1]+(P+(D<<21&4294967295|D>>>11))&4294967295,C.g[2]=C.g[2]+P&4294967295,C.g[3]=C.g[3]+L&4294967295}i.prototype.u=function(C,R){R===void 0&&(R=C.length);for(var x=R-this.blockSize,N=this.B,P=this.h,L=0;L<R;){if(P==0)for(;L<=x;)r(this,C,L),L+=this.blockSize;if(typeof C=="string"){for(;L<R;)if(N[P++]=C.charCodeAt(L++),P==this.blockSize){r(this,N),P=0;break}}else for(;L<R;)if(N[P++]=C[L++],P==this.blockSize){r(this,N),P=0;break}}this.h=P,this.o+=R},i.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var R=1;R<C.length-8;++R)C[R]=0;var x=8*this.o;for(R=C.length-8;R<C.length;++R)C[R]=x&255,x/=256;for(this.u(C),C=Array(16),R=x=0;4>R;++R)for(var N=0;32>N;N+=8)C[x++]=this.g[R]>>>N&255;return C};function o(C,R){var x=h;return Object.prototype.hasOwnProperty.call(x,C)?x[C]:x[C]=R(C)}function c(C,R){this.h=R;for(var x=[],N=!0,P=C.length-1;0<=P;P--){var L=C[P]|0;N&&L==R||(x[P]=L,N=!1)}this.g=x}var h={};function d(C){return-128<=C&&128>C?o(C,function(R){return new c([R|0],0>R?-1:0)}):new c([C|0],0>C?-1:0)}function m(C){if(isNaN(C)||!isFinite(C))return v;if(0>C)return M(m(-C));for(var R=[],x=1,N=0;C>=x;N++)R[N]=C/x|0,x*=4294967296;return new c(R,0)}function _(C,R){if(C.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(C.charAt(0)=="-")return M(_(C.substring(1),R));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=m(Math.pow(R,8)),N=v,P=0;P<C.length;P+=8){var L=Math.min(8,C.length-P),D=parseInt(C.substring(P,P+L),R);8>L?(L=m(Math.pow(R,L)),N=N.j(L).add(m(D))):(N=N.j(x),N=N.add(m(D)))}return N}var v=d(0),T=d(1),A=d(16777216);n=c.prototype,n.m=function(){if(k(this))return-M(this).m();for(var C=0,R=1,x=0;x<this.g.length;x++){var N=this.i(x);C+=(0<=N?N:4294967296+N)*R,R*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(I(this))return"0";if(k(this))return"-"+M(this).toString(C);for(var R=m(Math.pow(C,6)),x=this,N="";;){var P=it(x,R).g;x=G(x,P.j(R));var L=((0<x.g.length?x.g[0]:x.h)>>>0).toString(C);if(x=P,I(x))return L+N;for(;6>L.length;)L="0"+L;N=L+N}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function I(C){if(C.h!=0)return!1;for(var R=0;R<C.g.length;R++)if(C.g[R]!=0)return!1;return!0}function k(C){return C.h==-1}n.l=function(C){return C=G(this,C),k(C)?-1:I(C)?0:1};function M(C){for(var R=C.g.length,x=[],N=0;N<R;N++)x[N]=~C.g[N];return new c(x,~C.h).add(T)}n.abs=function(){return k(this)?M(this):this},n.add=function(C){for(var R=Math.max(this.g.length,C.g.length),x=[],N=0,P=0;P<=R;P++){var L=N+(this.i(P)&65535)+(C.i(P)&65535),D=(L>>>16)+(this.i(P)>>>16)+(C.i(P)>>>16);N=D>>>16,L&=65535,D&=65535,x[P]=D<<16|L}return new c(x,x[x.length-1]&-2147483648?-1:0)};function G(C,R){return C.add(M(R))}n.j=function(C){if(I(this)||I(C))return v;if(k(this))return k(C)?M(this).j(M(C)):M(M(this).j(C));if(k(C))return M(this.j(M(C)));if(0>this.l(A)&&0>C.l(A))return m(this.m()*C.m());for(var R=this.g.length+C.g.length,x=[],N=0;N<2*R;N++)x[N]=0;for(N=0;N<this.g.length;N++)for(var P=0;P<C.g.length;P++){var L=this.i(N)>>>16,D=this.i(N)&65535,Wt=C.i(P)>>>16,At=C.i(P)&65535;x[2*N+2*P]+=D*At,X(x,2*N+2*P),x[2*N+2*P+1]+=L*At,X(x,2*N+2*P+1),x[2*N+2*P+1]+=D*Wt,X(x,2*N+2*P+1),x[2*N+2*P+2]+=L*Wt,X(x,2*N+2*P+2)}for(N=0;N<R;N++)x[N]=x[2*N+1]<<16|x[2*N];for(N=R;N<2*R;N++)x[N]=0;return new c(x,0)};function X(C,R){for(;(C[R]&65535)!=C[R];)C[R+1]+=C[R]>>>16,C[R]&=65535,R++}function et(C,R){this.g=C,this.h=R}function it(C,R){if(I(R))throw Error("division by zero");if(I(C))return new et(v,v);if(k(C))return R=it(M(C),R),new et(M(R.g),M(R.h));if(k(R))return R=it(C,M(R)),new et(M(R.g),R.h);if(30<C.g.length){if(k(C)||k(R))throw Error("slowDivide_ only works with positive integers.");for(var x=T,N=R;0>=N.l(C);)x=W(x),N=W(N);var P=ot(x,1),L=ot(N,1);for(N=ot(N,2),x=ot(x,2);!I(N);){var D=L.add(N);0>=D.l(C)&&(P=P.add(x),L=D),N=ot(N,1),x=ot(x,1)}return R=G(C,P.j(R)),new et(P,R)}for(P=v;0<=C.l(R);){for(x=Math.max(1,Math.floor(C.m()/R.m())),N=Math.ceil(Math.log(x)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),L=m(x),D=L.j(R);k(D)||0<D.l(C);)x-=N,L=m(x),D=L.j(R);I(L)&&(L=T),P=P.add(L),C=G(C,D)}return new et(P,C)}n.A=function(C){return it(this,C).h},n.and=function(C){for(var R=Math.max(this.g.length,C.g.length),x=[],N=0;N<R;N++)x[N]=this.i(N)&C.i(N);return new c(x,this.h&C.h)},n.or=function(C){for(var R=Math.max(this.g.length,C.g.length),x=[],N=0;N<R;N++)x[N]=this.i(N)|C.i(N);return new c(x,this.h|C.h)},n.xor=function(C){for(var R=Math.max(this.g.length,C.g.length),x=[],N=0;N<R;N++)x[N]=this.i(N)^C.i(N);return new c(x,this.h^C.h)};function W(C){for(var R=C.g.length+1,x=[],N=0;N<R;N++)x[N]=C.i(N)<<1|C.i(N-1)>>>31;return new c(x,C.h)}function ot(C,R){var x=R>>5;R%=32;for(var N=C.g.length-x,P=[],L=0;L<N;L++)P[L]=0<R?C.i(L+x)>>>R|C.i(L+x+1)<<32-R:C.i(L+x);return new c(P,C.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,OS=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=_,ar=c}).apply(typeof Tb<"u"?Tb:typeof self<"u"?self:typeof window<"u"?window:{});var kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var MS,vc,kS,ef,Gm,NS,PS,VS;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,y,b){return f==Array.prototype||f==Object.prototype||(f[y]=b.value),f};function e(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof kh=="object"&&kh];for(var y=0;y<f.length;++y){var b=f[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=e(this);function r(f,y){if(y)t:{var b=i;f=f.split(".");for(var w=0;w<f.length-1;w++){var B=f[w];if(!(B in b))break t;b=b[B]}f=f[f.length-1],w=b[f],y=y(w),y!=w&&y!=null&&t(b,f,{configurable:!0,writable:!0,value:y})}}function o(f,y){f instanceof String&&(f+="");var b=0,w=!1,B={next:function(){if(!w&&b<f.length){var K=b++;return{value:y(K,f[K]),done:!1}}return w=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}r("Array.prototype.values",function(f){return f||function(){return o(this,function(y,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function d(f){var y=typeof f;return y=y!="object"?y:f?Array.isArray(f)?"array":y:"null",y=="array"||y=="object"&&typeof f.length=="number"}function m(f){var y=typeof f;return y=="object"&&f!=null||y=="function"}function _(f,y,b){return f.call.apply(f.bind,arguments)}function v(f,y,b){if(!f)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,w),f.apply(y,B)}}return function(){return f.apply(y,arguments)}}function T(f,y,b){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:v,T.apply(null,arguments)}function A(f,y){var b=Array.prototype.slice.call(arguments,1);return function(){var w=b.slice();return w.push.apply(w,arguments),f.apply(this,w)}}function I(f,y){function b(){}b.prototype=y.prototype,f.aa=y.prototype,f.prototype=new b,f.prototype.constructor=f,f.Qb=function(w,B,K){for(var lt=Array(arguments.length-2),Vt=2;Vt<arguments.length;Vt++)lt[Vt-2]=arguments[Vt];return y.prototype[B].apply(w,lt)}}function k(f){const y=f.length;if(0<y){const b=Array(y);for(let w=0;w<y;w++)b[w]=f[w];return b}return[]}function M(f,y){for(let b=1;b<arguments.length;b++){const w=arguments[b];if(d(w)){const B=f.length||0,K=w.length||0;f.length=B+K;for(let lt=0;lt<K;lt++)f[B+lt]=w[lt]}else f.push(w)}}class G{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function X(f){return/^[\s\xa0]*$/.test(f)}function et(){var f=h.navigator;return f&&(f=f.userAgent)?f:""}function it(f){return it[" "](f),f}it[" "]=function(){};var W=et().indexOf("Gecko")!=-1&&!(et().toLowerCase().indexOf("webkit")!=-1&&et().indexOf("Edge")==-1)&&!(et().indexOf("Trident")!=-1||et().indexOf("MSIE")!=-1)&&et().indexOf("Edge")==-1;function ot(f,y,b){for(const w in f)y.call(b,f[w],w,f)}function C(f,y){for(const b in f)y.call(void 0,f[b],b,f)}function R(f){const y={};for(const b in f)y[b]=f[b];return y}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(f,y){let b,w;for(let B=1;B<arguments.length;B++){w=arguments[B];for(b in w)f[b]=w[b];for(let K=0;K<x.length;K++)b=x[K],Object.prototype.hasOwnProperty.call(w,b)&&(f[b]=w[b])}}function P(f){var y=1;f=f.split(":");const b=[];for(;0<y&&f.length;)b.push(f.shift()),y--;return f.length&&b.push(f.join(":")),b}function L(f){h.setTimeout(()=>{throw f},0)}function D(){var f=kt;let y=null;return f.g&&(y=f.g,f.g=f.g.next,f.g||(f.h=null),y.next=null),y}class Wt{constructor(){this.h=this.g=null}add(y,b){const w=At.get();w.set(y,b),this.h?this.h.next=w:this.g=w,this.h=w}}var At=new G(()=>new Y,f=>f.reset());class Y{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let at,gt=!1,kt=new Wt,V=()=>{const f=h.Promise.resolve(void 0);at=()=>{f.then(nt)}};var nt=()=>{for(var f;f=D();){try{f.h.call(f.g)}catch(b){L(b)}var y=At;y.j(f),100>y.h&&(y.h++,f.next=y.g,y.g=f)}gt=!1};function ct(){this.s=this.s,this.C=this.C}ct.prototype.s=!1,ct.prototype.ma=function(){this.s||(this.s=!0,this.N())},ct.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(f,y){this.type=f,this.g=this.target=y,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var dt=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var f=!1,y=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const b=()=>{};h.addEventListener("test",b,y),h.removeEventListener("test",b,y)}catch{}return f}();function wt(f,y){if(st.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var b=this.type=f.type,w=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=y,y=f.relatedTarget){if(W){t:{try{it(y.nodeName);var B=!0;break t}catch{}B=!1}B||(y=null)}}else b=="mouseover"?y=f.fromElement:b=="mouseout"&&(y=f.toElement);this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:_t[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&wt.aa.h.call(this)}}I(wt,st);var _t={2:"touch",3:"pen",4:"mouse"};wt.prototype.h=function(){wt.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Pe="closure_listenable_"+(1e6*Math.random()|0),ie=0;function ri(f,y,b,w,B){this.listener=f,this.proxy=null,this.src=y,this.type=b,this.capture=!!w,this.ha=B,this.key=++ie,this.da=this.fa=!1}function ys(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Ni(f){this.src=f,this.g={},this.h=0}Ni.prototype.add=function(f,y,b,w,B){var K=f.toString();f=this.g[K],f||(f=this.g[K]=[],this.h++);var lt=Sr(f,y,w,B);return-1<lt?(y=f[lt],b||(y.fa=!1)):(y=new ri(y,this.src,K,!!w,B),y.fa=b,f.push(y)),y};function Tr(f,y){var b=y.type;if(b in f.g){var w=f.g[b],B=Array.prototype.indexOf.call(w,y,void 0),K;(K=0<=B)&&Array.prototype.splice.call(w,B,1),K&&(ys(y),f.g[b].length==0&&(delete f.g[b],f.h--))}}function Sr(f,y,b,w){for(var B=0;B<f.length;++B){var K=f[B];if(!K.da&&K.listener==y&&K.capture==!!b&&K.ha==w)return B}return-1}var Ar="closure_lm_"+(1e6*Math.random()|0),nl={};function lu(f,y,b,w,B){if(Array.isArray(y)){for(var K=0;K<y.length;K++)lu(f,y[K],b,w,B);return null}return b=cu(b),f&&f[Pe]?f.K(y,b,m(w)?!!w.capture:!1,B):In(f,y,b,!1,w,B)}function In(f,y,b,w,B,K){if(!y)throw Error("Invalid event type");var lt=m(B)?!!B.capture:!!B,Vt=Ia(f);if(Vt||(f[Ar]=Vt=new Ni(f)),b=Vt.add(y,b,w,lt,K),b.proxy)return b;if(w=ld(),b.proxy=w,w.src=f,w.listener=b,f.addEventListener)dt||(B=lt),B===void 0&&(B=!1),f.addEventListener(y.toString(),w,B);else if(f.attachEvent)f.attachEvent(wr(y.toString()),w);else if(f.addListener&&f.removeListener)f.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return b}function ld(){function f(b){return y.call(f.src,f.listener,b)}const y=cd;return f}function il(f,y,b,w,B){if(Array.isArray(y))for(var K=0;K<y.length;K++)il(f,y[K],b,w,B);else w=m(w)?!!w.capture:!!w,b=cu(b),f&&f[Pe]?(f=f.i,y=String(y).toString(),y in f.g&&(K=f.g[y],b=Sr(K,b,w,B),-1<b&&(ys(K[b]),Array.prototype.splice.call(K,b,1),K.length==0&&(delete f.g[y],f.h--)))):f&&(f=Ia(f))&&(y=f.g[y.toString()],f=-1,y&&(f=Sr(y,b,w,B)),(b=-1<f?y[f]:null)&&xa(b))}function xa(f){if(typeof f!="number"&&f&&!f.da){var y=f.src;if(y&&y[Pe])Tr(y.i,f);else{var b=f.type,w=f.proxy;y.removeEventListener?y.removeEventListener(b,w,f.capture):y.detachEvent?y.detachEvent(wr(b),w):y.addListener&&y.removeListener&&y.removeListener(w),(b=Ia(y))?(Tr(b,f),b.h==0&&(b.src=null,y[Ar]=null)):ys(f)}}}function wr(f){return f in nl?nl[f]:nl[f]="on"+f}function cd(f,y){if(f.da)f=!0;else{y=new wt(y,this);var b=f.listener,w=f.ha||f.src;f.fa&&xa(f),f=b.call(w,y)}return f}function Ia(f){return f=f[Ar],f instanceof Ni?f:null}var sl="__closure_events_fn_"+(1e9*Math.random()>>>0);function cu(f){return typeof f=="function"?f:(f[sl]||(f[sl]=function(y){return f.handleEvent(y)}),f[sl])}function de(){ct.call(this),this.i=new Ni(this),this.M=this,this.F=null}I(de,ct),de.prototype[Pe]=!0,de.prototype.removeEventListener=function(f,y,b,w){il(this,f,y,b,w)};function Yt(f,y){var b,w=f.F;if(w)for(b=[];w;w=w.F)b.push(w);if(f=f.M,w=y.type||y,typeof y=="string")y=new st(y,f);else if(y instanceof st)y.target=y.target||f;else{var B=y;y=new st(w,f),N(y,B)}if(B=!0,b)for(var K=b.length-1;0<=K;K--){var lt=y.g=b[K];B=yn(lt,w,!0,y)&&B}if(lt=y.g=f,B=yn(lt,w,!0,y)&&B,B=yn(lt,w,!1,y)&&B,b)for(K=0;K<b.length;K++)lt=y.g=b[K],B=yn(lt,w,!1,y)&&B}de.prototype.N=function(){if(de.aa.N.call(this),this.i){var f=this.i,y;for(y in f.g){for(var b=f.g[y],w=0;w<b.length;w++)ys(b[w]);delete f.g[y],f.h--}}this.F=null},de.prototype.K=function(f,y,b,w){return this.i.add(String(f),y,!1,b,w)},de.prototype.L=function(f,y,b,w){return this.i.add(String(f),y,!0,b,w)};function yn(f,y,b,w){if(y=f.i.g[String(y)],!y)return!0;y=y.concat();for(var B=!0,K=0;K<y.length;++K){var lt=y[K];if(lt&&!lt.da&&lt.capture==b){var Vt=lt.listener,Ce=lt.ha||lt.src;lt.fa&&Tr(f.i,lt),B=Vt.call(Ce,w)!==!1&&B}}return B&&!w.defaultPrevented}function $e(f,y,b){if(typeof f=="function")b&&(f=T(f,b));else if(f&&typeof f.handleEvent=="function")f=T(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:h.setTimeout(f,y||0)}function uu(f){f.g=$e(()=>{f.g=null,f.i&&(f.i=!1,uu(f))},f.l);const y=f.h;f.h=null,f.m.apply(null,y)}class ud extends ct{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:uu(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rr(f){ct.call(this),this.h=f,this.g={}}I(Rr,ct);var xr=[];function Ir(f){ot(f.g,function(y,b){this.g.hasOwnProperty(b)&&xa(y)},f),f.g={}}Rr.prototype.N=function(){Rr.aa.N.call(this),Ir(this)},Rr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gn=h.JSON.stringify,Ca=h.JSON.parse,Cr=class{stringify(f){return h.JSON.stringify(f,void 0)}parse(f){return h.JSON.parse(f,void 0)}};function rl(){}rl.prototype.h=null;function al(f){return f.h||(f.h=f.i())}function ol(){}var Pi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vi(){st.call(this,"d")}I(Vi,st);function ll(){st.call(this,"c")}I(ll,st);var ai={},cl=null;function vs(){return cl=cl||new de}ai.La="serverreachability";function Da(f){st.call(this,ai.La,f)}I(Da,st);function bs(f){const y=vs();Yt(y,new Da(y))}ai.STAT_EVENT="statevent";function hu(f,y){st.call(this,ai.STAT_EVENT,f),this.stat=y}I(hu,st);function ce(f){const y=vs();Yt(y,new hu(y,f))}ai.Ma="timingevent";function Ie(f,y){st.call(this,ai.Ma,f),this.size=y}I(Ie,st);function Ee(f,y){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){f()},y)}function Cn(){this.g=!0}Cn.prototype.xa=function(){this.g=!1};function ul(f,y,b,w,B,K){f.info(function(){if(f.g)if(K)for(var lt="",Vt=K.split("&"),Ce=0;Ce<Vt.length;Ce++){var Lt=Vt[Ce].split("=");if(1<Lt.length){var Le=Lt[0];Lt=Lt[1];var De=Le.split("_");lt=2<=De.length&&De[1]=="type"?lt+(Le+"="+Lt+"&"):lt+(Le+"=redacted&")}}else lt=null;else lt=K;return"XMLHTTP REQ ("+w+") [attempt "+B+"]: "+y+`
`+b+`
`+lt})}function hd(f,y,b,w,B,K,lt){f.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+B+"]: "+y+`
`+b+`
`+K+" "+lt})}function Es(f,y,b,w){f.info(function(){return"XMLHTTP TEXT ("+y+"): "+Dr(f,b)+(w?" "+w:"")})}function fu(f,y){f.info(function(){return"TIMEOUT: "+y})}Cn.prototype.info=function(){};function Dr(f,y){if(!f.g)return y;if(!y)return null;try{var b=JSON.parse(y);if(b){for(f=0;f<b.length;f++)if(Array.isArray(b[f])){var w=b[f];if(!(2>w.length)){var B=w[1];if(Array.isArray(B)&&!(1>B.length)){var K=B[0];if(K!="noop"&&K!="stop"&&K!="close")for(var lt=1;lt<B.length;lt++)B[lt]=""}}}}return Gn(b)}catch{return y}}var Ts={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Li={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},oi;function li(){}I(li,rl),li.prototype.g=function(){return new XMLHttpRequest},li.prototype.i=function(){return{}},oi=new li;function an(f,y,b,w){this.j=f,this.i=y,this.l=b,this.R=w||1,this.U=new Rr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pe}function pe(){this.i=null,this.g="",this.h=!1}var hl={},Oa={};function Yn(f,y,b){f.L=1,f.v=Pr(vn(y)),f.m=b,f.P=!0,Ui(f,null)}function Ui(f,y){f.F=Date.now(),Or(f),f.A=vn(f.v);var b=f.A,w=f.R;Array.isArray(w)||(w=[String(w)]),_l(b.i,"t",w),f.C=0,b=f.j.J,f.h=new pe,f.g=Iu(f.j,b?y:null,!f.m),0<f.O&&(f.M=new ud(T(f.Y,f,f.g),f.O)),y=f.U,b=f.g,w=f.ca;var B="readystatechange";Array.isArray(B)||(B&&(xr[0]=B.toString()),B=xr);for(var K=0;K<B.length;K++){var lt=lu(b,B[K],w||y.handleEvent,!1,y.h||y);if(!lt)break;y.g[lt.key]=lt}y=f.H?R(f.H):{},f.m?(f.u||(f.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,y)):(f.u="GET",f.g.ea(f.A,f.u,null,y)),bs(),ul(f.i,f.u,f.A,f.l,f.R,f.m)}an.prototype.ca=function(f){f=f.target;const y=this.M;y&&kn(f)==3?y.j():this.Y(f)},an.prototype.Y=function(f){try{if(f==this.g)t:{const De=kn(this.g);var y=this.g.Ba();const Yi=this.g.Z();if(!(3>De)&&(De!=3||this.g&&(this.h.h||this.g.oa()||bu(this.g)))){this.J||De!=4||y==7||(y==8||0>=Yi?bs(3):bs(2)),Ss(this);var b=this.g.Z();this.X=b;e:if(du(this)){var w=bu(this.g);f="";var B=w.length,K=kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fe(this),ci(this);var lt="";break e}this.h.i=new h.TextDecoder}for(y=0;y<B;y++)this.h.h=!0,f+=this.h.i.decode(w[y],{stream:!(K&&y==B-1)});w.length=0,this.h.g+=f,this.C=0,lt=this.h.g}else lt=this.g.oa();if(this.o=b==200,hd(this.i,this.u,this.A,this.l,this.R,De,b),this.o){if(this.T&&!this.K){e:{if(this.g){var Vt,Ce=this.g;if((Vt=Ce.g?Ce.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(Vt)){var Lt=Vt;break e}}Lt=null}if(b=Lt)Es(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mr(this,b);else{this.o=!1,this.s=3,ce(12),Fe(this),ci(this);break t}}if(this.P){b=!0;let qe;for(;!this.J&&this.C<lt.length;)if(qe=gu(this,lt),qe==Oa){De==4&&(this.s=4,ce(14),b=!1),Es(this.i,this.l,null,"[Incomplete Response]");break}else if(qe==hl){this.s=4,ce(15),Es(this.i,this.l,lt,"[Invalid Chunk]"),b=!1;break}else Es(this.i,this.l,qe,null),Mr(this,qe);if(du(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||lt.length!=0||this.h.h||(this.s=1,ce(16),b=!1),this.o=this.o&&b,!b)Es(this.i,this.l,lt,"[Invalid Chunked Response]"),Fe(this),ci(this);else if(0<lt.length&&!this.W){this.W=!0;var Le=this.j;Le.g==this&&Le.ba&&!Le.M&&(Le.j.info("Great, no buffering proxy detected. Bytes received: "+lt.length),Fr(Le),Le.M=!0,ce(11))}}else Es(this.i,this.l,lt,null),Mr(this,lt);De==4&&Fe(this),this.o&&!this.J&&(De==4?wu(this.j,this):(this.o=!1,Or(this)))}else pd(this.g),b==400&&0<lt.indexOf("Unknown SID")?(this.s=3,ce(12)):(this.s=0,ce(13)),Fe(this),ci(this)}}}catch{}finally{}};function du(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function gu(f,y){var b=f.C,w=y.indexOf(`
`,b);return w==-1?Oa:(b=Number(y.substring(b,w)),isNaN(b)?hl:(w+=1,w+b>y.length?Oa:(y=y.slice(w,w+b),f.C=w+b,y)))}an.prototype.cancel=function(){this.J=!0,Fe(this)};function Or(f){f.S=Date.now()+f.I,mu(f,f.I)}function mu(f,y){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Ee(T(f.ba,f),y)}function Ss(f){f.B&&(h.clearTimeout(f.B),f.B=null)}an.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(fu(this.i,this.A),this.L!=2&&(bs(),ce(17)),Fe(this),this.s=2,ci(this)):mu(this,this.S-f)};function ci(f){f.j.G==0||f.J||wu(f.j,f)}function Fe(f){Ss(f);var y=f.M;y&&typeof y.ma=="function"&&y.ma(),f.M=null,Ir(f.U),f.g&&(y=f.g,f.g=null,y.abort(),y.ma())}function Mr(f,y){try{var b=f.j;if(b.G!=0&&(b.g==f||fl(b.h,f))){if(!f.K&&fl(b.h,f)&&b.G==3){try{var w=b.Da.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var B=w;if(B[0]==0){t:if(!b.u){if(b.g)if(b.g.F+3e3<f.F)Fa(b),ja(b);else break t;Tl(b),ce(18)}}else b.za=B[1],0<b.za-b.T&&37500>B[2]&&b.F&&b.v==0&&!b.C&&(b.C=Ee(T(b.Za,b),6e3));if(1>=ka(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else Gi(b,11)}else if((f.K||b.g==f)&&Fa(b),!X(y))for(B=b.Da.g.parse(y),y=0;y<B.length;y++){let Lt=B[y];if(b.T=Lt[0],Lt=Lt[1],b.G==2)if(Lt[0]=="c"){b.K=Lt[1],b.ia=Lt[2];const Le=Lt[3];Le!=null&&(b.la=Le,b.j.info("VER="+b.la));const De=Lt[4];De!=null&&(b.Aa=De,b.j.info("SVER="+b.Aa));const Yi=Lt[5];Yi!=null&&typeof Yi=="number"&&0<Yi&&(w=1.5*Yi,b.L=w,b.j.info("backChannelRequestTimeoutMs_="+w)),w=b;const qe=f.g;if(qe){const pi=qe.g?qe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pi){var K=w.h;K.g||pi.indexOf("spdy")==-1&&pi.indexOf("quic")==-1&&pi.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Na(K,K.h),K.h=null))}if(w.D){const Al=qe.g?qe.g.getResponseHeader("X-HTTP-Session-Id"):null;Al&&(w.ya=Al,$t(w.I,w.D,Al))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-f.F,b.j.info("Handshake RTT: "+b.R+"ms")),w=b;var lt=f;if(w.qa=xu(w,w.J?w.ia:null,w.W),lt.K){on(w.h,lt);var Vt=lt,Ce=w.L;Ce&&(Vt.I=Ce),Vt.B&&(Ss(Vt),Or(Vt)),w.g=lt}else Su(w);0<b.i.length&&Ha(b)}else Lt[0]!="stop"&&Lt[0]!="close"||Gi(b,7);else b.G==3&&(Lt[0]=="stop"||Lt[0]=="close"?Lt[0]=="stop"?Gi(b,7):bl(b):Lt[0]!="noop"&&b.l&&b.l.ta(Lt),b.v=0)}}bs(4)}catch{}}var pu=class{constructor(f,y){this.g=f,this.map=y}};function zi(f){this.l=f||10,h.PerformanceNavigationTiming?(f=h.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ma(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function ka(f){return f.h?1:f.g?f.g.size:0}function fl(f,y){return f.h?f.h==y:f.g?f.g.has(y):!1}function Na(f,y){f.g?f.g.add(y):f.h=y}function on(f,y){f.h&&f.h==y?f.h=null:f.g&&f.g.has(y)&&f.g.delete(y)}zi.prototype.cancel=function(){if(this.i=dl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function dl(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let y=f.i;for(const b of f.g.values())y=y.concat(b.D);return y}return k(f.i)}function fd(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(d(f)){for(var y=[],b=f.length,w=0;w<b;w++)y.push(f[w]);return y}y=[],b=0;for(w in f)y[b++]=f[w];return y}function Pa(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(d(f)||typeof f=="string"){var y=[];f=f.length;for(var b=0;b<f;b++)y.push(b);return y}y=[],b=0;for(const w in f)y[b++]=w;return y}}}function gl(f,y){if(f.forEach&&typeof f.forEach=="function")f.forEach(y,void 0);else if(d(f)||typeof f=="string")Array.prototype.forEach.call(f,y,void 0);else for(var b=Pa(f),w=fd(f),B=w.length,K=0;K<B;K++)y.call(void 0,w[K],b&&b[K],f)}var kr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dd(f,y){if(f){f=f.split("&");for(var b=0;b<f.length;b++){var w=f[b].indexOf("="),B=null;if(0<=w){var K=f[b].substring(0,w);B=f[b].substring(w+1)}else K=f[b];y(K,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Te(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Te){this.h=f.h,Nr(this,f.j),this.o=f.o,this.g=f.g,As(this,f.s),this.l=f.l;var y=f.i,b=new ji;b.i=y.i,y.g&&(b.g=new Map(y.g),b.h=y.h),Bi(this,b),this.m=f.m}else f&&(y=String(f).match(kr))?(this.h=!1,Nr(this,y[1]||"",!0),this.o=Dn(y[2]||""),this.g=Dn(y[3]||"",!0),As(this,y[4]),this.l=Dn(y[5]||"",!0),Bi(this,y[6]||"",!0),this.m=Dn(y[7]||"")):(this.h=!1,this.i=new ji(null,this.h))}Te.prototype.toString=function(){var f=[],y=this.j;y&&f.push(Vr(y,ml,!0),":");var b=this.g;return(b||y=="file")&&(f.push("//"),(y=this.o)&&f.push(Vr(y,ml,!0),"@"),f.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&f.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&f.push("/"),f.push(Vr(b,b.charAt(0)=="/"?gd:pl,!0))),(b=this.i.toString())&&f.push("?",b),(b=this.m)&&f.push("#",Vr(b,Va)),f.join("")};function vn(f){return new Te(f)}function Nr(f,y,b){f.j=b?Dn(y,!0):y,f.j&&(f.j=f.j.replace(/:$/,""))}function As(f,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);f.s=y}else f.s=null}function Bi(f,y,b){y instanceof ji?(f.i=y,yu(f.i,f.h)):(b||(y=Vr(y,md)),f.i=new ji(y,f.h))}function $t(f,y,b){f.i.set(y,b)}function Pr(f){return $t(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Dn(f,y){return f?y?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Vr(f,y,b){return typeof f=="string"?(f=encodeURI(f).replace(y,_u),b&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function _u(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var ml=/[#\/\?@]/g,pl=/[#\?:]/g,gd=/[#\?]/g,md=/[#\?@]/g,Va=/#/g;function ji(f,y){this.h=this.g=null,this.i=f||null,this.j=!!y}function On(f){f.g||(f.g=new Map,f.h=0,f.i&&dd(f.i,function(y,b){f.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}n=ji.prototype,n.add=function(f,y){On(this),this.i=null,f=ui(this,f);var b=this.g.get(f);return b||this.g.set(f,b=[]),b.push(y),this.h+=1,this};function Hi(f,y){On(f),y=ui(f,y),f.g.has(y)&&(f.i=null,f.h-=f.g.get(y).length,f.g.delete(y))}function Fi(f,y){return On(f),y=ui(f,y),f.g.has(y)}n.forEach=function(f,y){On(this),this.g.forEach(function(b,w){b.forEach(function(B){f.call(y,B,w,this)},this)},this)},n.na=function(){On(this);const f=Array.from(this.g.values()),y=Array.from(this.g.keys()),b=[];for(let w=0;w<y.length;w++){const B=f[w];for(let K=0;K<B.length;K++)b.push(y[w])}return b},n.V=function(f){On(this);let y=[];if(typeof f=="string")Fi(this,f)&&(y=y.concat(this.g.get(ui(this,f))));else{f=Array.from(this.g.values());for(let b=0;b<f.length;b++)y=y.concat(f[b])}return y},n.set=function(f,y){return On(this),this.i=null,f=ui(this,f),Fi(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[y]),this.h+=1,this},n.get=function(f,y){return f?(f=this.V(f),0<f.length?String(f[0]):y):y};function _l(f,y,b){Hi(f,y),0<b.length&&(f.i=null,f.g.set(ui(f,y),k(b)),f.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],y=Array.from(this.g.keys());for(var b=0;b<y.length;b++){var w=y[b];const K=encodeURIComponent(String(w)),lt=this.V(w);for(w=0;w<lt.length;w++){var B=K;lt[w]!==""&&(B+="="+encodeURIComponent(String(lt[w]))),f.push(B)}}return this.i=f.join("&")};function ui(f,y){return y=String(y),f.j&&(y=y.toLowerCase()),y}function yu(f,y){y&&!f.j&&(On(f),f.i=null,f.g.forEach(function(b,w){var B=w.toLowerCase();w!=B&&(Hi(this,w),_l(this,B,b))},f)),f.j=y}function Lr(f,y){const b=new Cn;if(h.Image){const w=new Image;w.onload=A(Mn,b,"TestLoadImage: loaded",!0,y,w),w.onerror=A(Mn,b,"TestLoadImage: error",!1,y,w),w.onabort=A(Mn,b,"TestLoadImage: abort",!1,y,w),w.ontimeout=A(Mn,b,"TestLoadImage: timeout",!1,y,w),h.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=f}else y(!1)}function Kn(f,y){const b=new Cn,w=new AbortController,B=setTimeout(()=>{w.abort(),Mn(b,"TestPingServer: timeout",!1,y)},1e4);fetch(f,{signal:w.signal}).then(K=>{clearTimeout(B),K.ok?Mn(b,"TestPingServer: ok",!0,y):Mn(b,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),Mn(b,"TestPingServer: error",!1,y)})}function Mn(f,y,b,w,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),w(b)}catch{}}function Ur(){this.g=new Cr}function hi(f,y,b){const w=b||"";try{gl(f,function(B,K){let lt=B;m(B)&&(lt=Gn(B)),y.push(w+K+"="+encodeURIComponent(lt))})}catch(B){throw y.push(w+"type="+encodeURIComponent("_badmap")),B}}function ws(f){this.l=f.Ub||null,this.j=f.eb||!1}I(ws,rl),ws.prototype.g=function(){return new qi(this.l,this.j)},ws.prototype.i=function(f){return function(){return f}}({});function qi(f,y){de.call(this),this.D=f,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(qi,de),n=qi.prototype,n.open=function(f,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=y,this.readyState=1,di(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(y.body=f),(this.D||h).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fi(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,di(this)),this.g&&(this.readyState=3,di(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yl(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function yl(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var y=f.value?f.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!f.done}))&&(this.response=this.responseText+=y)}f.done?fi(this):di(this),this.readyState==3&&yl(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,fi(this))},n.Qa=function(f){this.g&&(this.response=f,fi(this))},n.ga=function(){this.g&&fi(this)};function fi(f){f.readyState=4,f.l=null,f.j=null,f.v=null,di(f)}n.setRequestHeader=function(f,y){this.u.append(f,y)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],y=this.h.entries();for(var b=y.next();!b.done;)b=b.value,f.push(b[0]+": "+b[1]),b=y.next();return f.join(`\r
`)};function di(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(qi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function vl(f){let y="";return ot(f,function(b,w){y+=w,y+=":",y+=b,y+=`\r
`}),y}function Ve(f,y,b){t:{for(w in b){var w=!1;break t}w=!0}w||(b=vl(b),typeof f=="string"?b!=null&&encodeURIComponent(String(b)):$t(f,y,b))}function qt(f){de.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(qt,de);var La=/^https?$/i,zr=["POST","PUT"];n=qt.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,y,b,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);y=y?y.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():oi.g(),this.v=this.o?al(this.o):al(oi),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(y,String(f),!0),this.B=!1}catch(K){vu(this,K);return}if(f=b||"",b=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var B in w)b.set(B,w[B]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const K of w.keys())b.set(K,w.get(K));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(b.keys()).find(K=>K.toLowerCase()=="content-type"),B=h.FormData&&f instanceof h.FormData,!(0<=Array.prototype.indexOf.call(zr,y,void 0))||w||B||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,lt]of b)this.g.setRequestHeader(K,lt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Br(this),this.u=!0,this.g.send(f),this.u=!1}catch(K){vu(this,K)}};function vu(f,y){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=y,f.m=5,Ua(f),gi(f)}function Ua(f){f.A||(f.A=!0,Yt(f,"complete"),Yt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Yt(this,"complete"),Yt(this,"abort"),gi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gi(this,!0)),qt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?za(this):this.bb())},n.bb=function(){za(this)};function za(f){if(f.h&&typeof c<"u"&&(!f.v[1]||kn(f)!=4||f.Z()!=2)){if(f.u&&kn(f)==4)$e(f.Ea,0,f);else if(Yt(f,"readystatechange"),kn(f)==4){f.h=!1;try{const lt=f.Z();t:switch(lt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break t;default:y=!1}var b;if(!(b=y)){var w;if(w=lt===0){var B=String(f.D).match(kr)[1]||null;!B&&h.self&&h.self.location&&(B=h.self.location.protocol.slice(0,-1)),w=!La.test(B?B.toLowerCase():"")}b=w}if(b)Yt(f,"complete"),Yt(f,"success");else{f.m=6;try{var K=2<kn(f)?f.g.statusText:""}catch{K=""}f.l=K+" ["+f.Z()+"]",Ua(f)}}finally{gi(f)}}}}function gi(f,y){if(f.g){Br(f);const b=f.g,w=f.v[0]?()=>{}:null;f.g=null,f.v=null,y||Yt(f,"ready");try{b.onreadystatechange=w}catch{}}}function Br(f){f.I&&(h.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function kn(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<kn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var y=this.g.responseText;return f&&y.indexOf(f)==0&&(y=y.substring(f.length)),Ca(y)}};function bu(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function pd(f){const y={};f=(f.g&&2<=kn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<f.length;w++){if(X(f[w]))continue;var b=P(f[w]);const B=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const K=y[B]||[];y[B]=K,K.push(b)}C(y,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function jr(f,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[f]||y}function Ba(f){this.Aa=0,this.i=[],this.j=new Cn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=jr("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=jr("baseRetryDelayMs",5e3,f),this.cb=jr("retryDelaySeedMs",1e4,f),this.Wa=jr("forwardChannelMaxRetries",2,f),this.wa=jr("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new zi(f&&f.concurrentRequestLimit),this.Da=new Ur,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ba.prototype,n.la=8,n.G=1,n.connect=function(f,y,b,w){ce(0),this.W=f,this.H=y||{},b&&w!==void 0&&(this.H.OSID=b,this.H.OAID=w),this.F=this.X,this.I=xu(this,null,this.W),Ha(this)};function bl(f){if(Eu(f),f.G==3){var y=f.U++,b=vn(f.I);if($t(b,"SID",f.K),$t(b,"RID",y),$t(b,"TYPE","terminate"),Hr(f,b),y=new an(f,f.j,y),y.L=2,y.v=Pr(vn(b)),b=!1,h.navigator&&h.navigator.sendBeacon)try{b=h.navigator.sendBeacon(y.v.toString(),"")}catch{}!b&&h.Image&&(new Image().src=y.v,b=!0),b||(y.g=Iu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Or(y)}Ru(f)}function ja(f){f.g&&(Fr(f),f.g.cancel(),f.g=null)}function Eu(f){ja(f),f.u&&(h.clearTimeout(f.u),f.u=null),Fa(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&h.clearTimeout(f.s),f.s=null)}function Ha(f){if(!Ma(f.h)&&!f.s){f.s=!0;var y=f.Ga;at||V(),gt||(at(),gt=!0),kt.add(y,f),f.B=0}}function _d(f,y){return ka(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=y.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Ee(T(f.Ga,f,y),Sl(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const B=new an(this,this.j,f);let K=this.o;if(this.S&&(K?(K=R(K),N(K,this.S)):K=this.S),this.m!==null||this.O||(B.H=K,K=null),this.P)t:{for(var y=0,b=0;b<this.i.length;b++){e:{var w=this.i[b];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break e}w=void 0}if(w===void 0)break;if(y+=w,4096<y){y=b;break t}if(y===4096||b===this.i.length-1){y=b+1;break t}}y=1e3}else y=1e3;y=Tu(this,B,y),b=vn(this.I),$t(b,"RID",f),$t(b,"CVER",22),this.D&&$t(b,"X-HTTP-Session-Id",this.D),Hr(this,b),K&&(this.O?y="headers="+encodeURIComponent(String(vl(K)))+"&"+y:this.m&&Ve(b,this.m,K)),Na(this.h,B),this.Ua&&$t(b,"TYPE","init"),this.P?($t(b,"$req",y),$t(b,"SID","null"),B.T=!0,Yn(B,b,null)):Yn(B,b,y),this.G=2}}else this.G==3&&(f?El(this,f):this.i.length==0||Ma(this.h)||El(this))};function El(f,y){var b;y?b=y.l:b=f.U++;const w=vn(f.I);$t(w,"SID",f.K),$t(w,"RID",b),$t(w,"AID",f.T),Hr(f,w),f.m&&f.o&&Ve(w,f.m,f.o),b=new an(f,f.j,b,f.B+1),f.m===null&&(b.H=f.o),y&&(f.i=y.D.concat(f.i)),y=Tu(f,b,1e3),b.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Na(f.h,b),Yn(b,w,y)}function Hr(f,y){f.H&&ot(f.H,function(b,w){$t(y,w,b)}),f.l&&gl({},function(b,w){$t(y,w,b)})}function Tu(f,y,b){b=Math.min(f.i.length,b);var w=f.l?T(f.l.Na,f.l,f):null;t:{var B=f.i;let K=-1;for(;;){const lt=["count="+b];K==-1?0<b?(K=B[0].g,lt.push("ofs="+K)):K=0:lt.push("ofs="+K);let Vt=!0;for(let Ce=0;Ce<b;Ce++){let Lt=B[Ce].g;const Le=B[Ce].map;if(Lt-=K,0>Lt)K=Math.max(0,B[Ce].g-100),Vt=!1;else try{hi(Le,lt,"req"+Lt+"_")}catch{w&&w(Le)}}if(Vt){w=lt.join("&");break t}}}return f=f.i.splice(0,b),y.D=f,w}function Su(f){if(!f.g&&!f.u){f.Y=1;var y=f.Fa;at||V(),gt||(at(),gt=!0),kt.add(y,f),f.v=0}}function Tl(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Ee(T(f.Fa,f),Sl(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,Au(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Ee(T(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ce(10),ja(this),Au(this))};function Fr(f){f.A!=null&&(h.clearTimeout(f.A),f.A=null)}function Au(f){f.g=new an(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var y=vn(f.qa);$t(y,"RID","rpc"),$t(y,"SID",f.K),$t(y,"AID",f.T),$t(y,"CI",f.F?"0":"1"),!f.F&&f.ja&&$t(y,"TO",f.ja),$t(y,"TYPE","xmlhttp"),Hr(f,y),f.m&&f.o&&Ve(y,f.m,f.o),f.L&&(f.g.I=f.L);var b=f.g;f=f.ia,b.L=1,b.v=Pr(vn(y)),b.m=null,b.P=!0,Ui(b,f)}n.Za=function(){this.C!=null&&(this.C=null,ja(this),Tl(this),ce(19))};function Fa(f){f.C!=null&&(h.clearTimeout(f.C),f.C=null)}function wu(f,y){var b=null;if(f.g==y){Fa(f),Fr(f),f.g=null;var w=2}else if(fl(f.h,y))b=y.D,on(f.h,y),w=1;else return;if(f.G!=0){if(y.o)if(w==1){b=y.m?y.m.length:0,y=Date.now()-y.F;var B=f.B;w=vs(),Yt(w,new Ie(w,b)),Ha(f)}else Su(f);else if(B=y.s,B==3||B==0&&0<y.X||!(w==1&&_d(f,y)||w==2&&Tl(f)))switch(b&&0<b.length&&(y=f.h,y.i=y.i.concat(b)),B){case 1:Gi(f,5);break;case 4:Gi(f,10);break;case 3:Gi(f,6);break;default:Gi(f,2)}}}function Sl(f,y){let b=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(b*=2),b*y}function Gi(f,y){if(f.j.info("Error code "+y),y==2){var b=T(f.fb,f),w=f.Xa;const B=!w;w=new Te(w||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Nr(w,"https"),Pr(w),B?Lr(w.toString(),b):Kn(w.toString(),b)}else ce(2);f.G=0,f.l&&f.l.sa(y),Ru(f),Eu(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),ce(2)):(this.j.info("Failed to ping google.com"),ce(1))};function Ru(f){if(f.G=0,f.ka=[],f.l){const y=dl(f.h);(y.length!=0||f.i.length!=0)&&(M(f.ka,y),M(f.ka,f.i),f.h.i.length=0,k(f.i),f.i.length=0),f.l.ra()}}function xu(f,y,b){var w=b instanceof Te?vn(b):new Te(b);if(w.g!="")y&&(w.g=y+"."+w.g),As(w,w.s);else{var B=h.location;w=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;var K=new Te(null);w&&Nr(K,w),y&&(K.g=y),B&&As(K,B),b&&(K.l=b),w=K}return b=f.D,y=f.ya,b&&y&&$t(w,b,y),$t(w,"VER",f.la),Hr(f,w),w}function Iu(f,y,b){if(y&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=f.Ca&&!f.pa?new qt(new ws({eb:b})):new qt(f.pa),y.Ha(f.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cu(){}n=Cu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function qa(){}qa.prototype.g=function(f,y){return new ln(f,y)};function ln(f,y){de.call(this),this.g=new Ba(y),this.l=f,this.h=y&&y.messageUrlParams||null,f=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(f?f["X-WebChannel-Content-Type"]=y.messageContentType:f={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(f?f["X-WebChannel-Client-Profile"]=y.va:f={"X-WebChannel-Client-Profile":y.va}),this.g.S=f,(f=y&&y.Sb)&&!X(f)&&(this.g.m=f),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!X(y)&&(this.g.D=y,f=this.h,f!==null&&y in f&&(f=this.h,y in f&&delete f[y])),this.j=new mi(this)}I(ln,de),ln.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){bl(this.g)},ln.prototype.o=function(f){var y=this.g;if(typeof f=="string"){var b={};b.__data__=f,f=b}else this.u&&(b={},b.__data__=Gn(f),f=b);y.i.push(new pu(y.Ya++,f)),y.G==3&&Ha(y)},ln.prototype.N=function(){this.g.l=null,delete this.j,bl(this.g),delete this.g,ln.aa.N.call(this)};function Du(f){Vi.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var y=f.__sm__;if(y){t:{for(const b in y){f=b;break t}f=void 0}(this.i=f)&&(f=this.i,y=y!==null&&f in y?y[f]:void 0),this.data=y}else this.data=f}I(Du,Vi);function Ou(){ll.call(this),this.status=1}I(Ou,ll);function mi(f){this.g=f}I(mi,Cu),mi.prototype.ua=function(){Yt(this.g,"a")},mi.prototype.ta=function(f){Yt(this.g,new Du(f))},mi.prototype.sa=function(f){Yt(this.g,new Ou)},mi.prototype.ra=function(){Yt(this.g,"b")},qa.prototype.createWebChannel=qa.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,VS=function(){return new qa},PS=function(){return vs()},NS=ai,Gm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ts.NO_ERROR=0,Ts.TIMEOUT=8,Ts.HTTP_ERROR=6,ef=Ts,Li.COMPLETE="complete",kS=Li,ol.EventType=Pi,Pi.OPEN="a",Pi.CLOSE="b",Pi.ERROR="c",Pi.MESSAGE="d",de.prototype.listen=de.prototype.K,vc=ol,qt.prototype.listenOnce=qt.prototype.L,qt.prototype.getLastError=qt.prototype.Ka,qt.prototype.getLastErrorCode=qt.prototype.Ba,qt.prototype.getStatus=qt.prototype.Z,qt.prototype.getResponseJson=qt.prototype.Oa,qt.prototype.getResponseText=qt.prototype.oa,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Ha,MS=qt}).apply(typeof kh<"u"?kh:typeof self<"u"?self:typeof window<"u"?window:{});const Sb="@firebase/firestore",Ab="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xo="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=new _p("@firebase/firestore");function Eo(){return va.logLevel}function ht(n,...t){if(va.logLevel<=Nt.DEBUG){const e=t.map(Cp);va.debug(`Firestore (${Xo}): ${n}`,...e)}}function gs(n,...t){if(va.logLevel<=Nt.ERROR){const e=t.map(Cp);va.error(`Firestore (${Xo}): ${n}`,...e)}}function dr(n,...t){if(va.logLevel<=Nt.WARN){const e=t.map(Cp);va.warn(`Firestore (${Xo}): ${n}`,...e)}}function Cp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,LS(n,i,e)}function LS(n,t,e){let i=`FIRESTORE (${Xo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw gs(i),new Error(i)}function Gt(n,t,e,i){let r="Unexpected state";typeof e=="string"?r=e:i=e,n||LS(t,r,i)}function Rt(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ut extends ps{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class q2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(en.UNAUTHENTICATED))}shutdown(){}}class G2{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class Y2{constructor(t){this.t=t,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Gt(this.o===void 0,42304);let i=this.i;const r=d=>this.i!==i?(i=this.i,e(d)):Promise.resolve();let o=new or;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new or,t.enqueueRetryable(()=>r(this.currentUser))};const c=()=>{const d=o;t.enqueueRetryable(async()=>{await d.promise,await r(this.currentUser)})},h=d=>{ht("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(ht("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new or)}},0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(ht("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Gt(typeof i.accessToken=="string",31837,{l:i}),new US(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Gt(t===null||typeof t=="string",2055,{h:t}),new en(t)}}class K2{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=en.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Q2{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new K2(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(en.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wb{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class X2{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$n(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Gt(this.o===void 0,3512);const i=o=>{o.error!=null&&ht("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,ht("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>i(o))};const r=o=>{ht("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):ht("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new wb(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Gt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new wb(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=W2(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<e&&(i+=t.charAt(r[o]%62))}return i}}function Ct(n,t){return n<t?-1:n>t?1:0}function Ym(n,t){let e=0;for(;e<n.length&&e<t.length;){const i=n.codePointAt(e),r=t.codePointAt(e);if(i!==r){if(i<128&&r<128)return Ct(i,r);{const o=zS(),c=$2(o.encode(Rb(n,e)),o.encode(Rb(t,e)));return c!==0?c:Ct(i,r)}}e+=i>65535?2:1}return Ct(n.length,t.length)}function Rb(n,t){return n.codePointAt(t)>65535?n.substring(t,t+2):n.substring(t,t+1)}function $2(n,t){for(let e=0;e<n.length&&e<t.length;++e)if(n[e]!==t[e])return Ct(n[e],t[e]);return Ct(n.length,t.length)}function Lo(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="__name__";class wi{constructor(t,e,i){e===void 0?e=0:e>t.length&&Et(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&Et(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return wi.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof wi?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const o=wi.compareSegments(t.get(r),e.get(r));if(o!==0)return o}return Ct(t.length,e.length)}static compareSegments(t,e){const i=wi.isNumericId(t),r=wi.isNumericId(e);return i&&!r?-1:!i&&r?1:i&&r?wi.extractNumericId(t).compare(wi.extractNumericId(e)):Ym(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ar.fromString(t.substring(4,t.length-2))}}class ae extends wi{construct(t,e,i){return new ae(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new ut(Z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new ae(e)}static emptyPath(){return new ae([])}}const Z2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends wi{construct(t,e,i){return new Xe(t,e,i)}static isValidIdentifier(t){return Z2.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xb}static keyField(){return new Xe([xb])}static fromServerFormat(t){const e=[];let i="",r=0;const o=()=>{if(i.length===0)throw new ut(Z.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;r<t.length;){const h=t[r];if(h==="\\"){if(r+1===t.length)throw new ut(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const d=t[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ut(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=d,r+=2}else h==="`"?(c=!c,r++):h!=="."||c?(i+=h,r++):(o(),r++)}if(o(),c)throw new ut(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Xe(e)}static emptyPath(){return new Xe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(t){this.path=t}static fromPath(t){return new pt(ae.fromString(t))}static fromName(t){return new pt(ae.fromString(t).popFirst(5))}static empty(){return new pt(ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ae.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return ae.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new pt(new ae(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(n,t,e){if(!e)throw new ut(Z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function J2(n,t,e,i){if(t===!0&&i===!0)throw new ut(Z.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function Ib(n){if(!pt.isDocumentKey(n))throw new ut(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Cb(n){if(pt.isDocumentKey(n))throw new ut(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function qf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":Et(12329,{type:typeof n})}function lr(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new ut(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=qf(n);throw new ut(Z.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(n,t){const e={typeString:n};return t&&(e.value=t),e}function tu(n,t){if(!jS(n))throw new ut(Z.INVALID_ARGUMENT,"JSON must be an object");let e;for(const i in t)if(t[i]){const r=t[i].typeString,o="value"in t[i]?{value:t[i].value}:void 0;if(!(i in n)){e=`JSON missing required field: '${i}'`;break}const c=n[i];if(r&&typeof c!==r){e=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&c!==o.value){e=`Expected '${i}' field to equal '${o.value}'`;break}}if(e)throw new ut(Z.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db=-62135596800,Ob=1e6;class le{static now(){return le.fromMillis(Date.now())}static fromDate(t){return le.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*Ob);return new le(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ut(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ut(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<Db)throw new ut(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ut(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ob}_compareTo(t){return this.seconds===t.seconds?Ct(this.nanoseconds,t.nanoseconds):Ct(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:le._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(tu(t,le._jsonSchema))return new le(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Db;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}le._jsonSchemaVersion="firestore/timestamp/1.0",le._jsonSchema={type:xe("string",le._jsonSchemaVersion),seconds:xe("number"),nanoseconds:xe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{static fromTimestamp(t){return new St(t)}static min(){return new St(new le(0,0))}static max(){return new St(new le(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc=-1;function tD(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=St.fromTimestamp(i===1e9?new le(e+1,0):new le(e,i));return new gr(r,pt.empty(),t)}function eD(n){return new gr(n.readTime,n.key,Uc)}class gr{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new gr(St.min(),pt.empty(),Uc)}static max(){return new gr(St.max(),pt.empty(),Uc)}}function nD(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=pt.comparator(n.documentKey,t.documentKey),e!==0?e:Ct(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wo(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==iD)throw n;ht("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Et(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new tt((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof tt?e:tt.resolve(e)}catch(e){return tt.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):tt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):tt.reject(e)}static resolve(t){return new tt((e,i)=>{e(t)})}static reject(t){return new tt((e,i)=>{i(t)})}static waitFor(t){return new tt((e,i)=>{let r=0,o=0,c=!1;t.forEach(h=>{++r,h.next(()=>{++o,c&&o===r&&e()},d=>i(d))}),c=!0,o===r&&e()})}static or(t){let e=tt.resolve(!1);for(const i of t)e=e.next(r=>r?tt.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,o)=>{i.push(e.call(this,r,o))}),this.waitFor(i)}static mapArray(t,e){return new tt((i,r)=>{const o=t.length,c=new Array(o);let h=0;for(let d=0;d<o;d++){const m=d;e(t[m]).next(_=>{c[m]=_,++h,h===o&&i(c)},_=>r(_))}})}static doWhile(t,e){return new tt((i,r)=>{const o=()=>{t()===!0?e().next(()=>{o()},r):i()};o()})}}function rD(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function $o(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this._e(i),this.ae=i=>e.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ae&&this.ae(t),t}}Gf.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op=-1;function Yf(n){return n==null}function vf(n){return n===0&&1/n==-1/0}function aD(n){return typeof n=="number"&&Number.isInteger(n)&&!vf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="";function oD(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=Mb(t)),t=lD(n.get(e),t);return Mb(t)}function lD(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const o=n.charAt(r);switch(o){case"\0":e+="";break;case HS:e+="";break;default:e+=o}}return e}function Mb(n){return n+HS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Sa(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function FS(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(t,e){this.comparator=t,this.root=e||Qe.EMPTY}insert(t,e){return new fe(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Qe.BLACK,null,null))}remove(t){return new fe(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Qe.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Nh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Nh(this.root,t,this.comparator,!1)}getReverseIterator(){return new Nh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Nh(this.root,t,this.comparator,!0)}}class Nh{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Qe{constructor(t,e,i,r,o){this.key=t,this.value=e,this.color=i??Qe.RED,this.left=r??Qe.EMPTY,this.right=o??Qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,o){return new Qe(t??this.key,e??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const o=i(t,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(t,e,i),null):o===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Qe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return Qe.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Et(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Et(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Et(27949);return t+(this.isRed()?0:1)}}Qe.EMPTY=null,Qe.RED=!0,Qe.BLACK=!1;Qe.EMPTY=new class{constructor(){this.size=0}get key(){throw Et(57766)}get value(){throw Et(16141)}get color(){throw Et(16727)}get left(){throw Et(29726)}get right(){throw Et(36894)}copy(t,e,i,r,o){return this}insert(t,e,i){return new Qe(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(t){this.comparator=t,this.data=new fe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Nb(this.data.getIterator())}getIteratorFrom(t){return new Nb(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof Ne)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Ne(this.comparator);return e.data=t,e}}class Nb{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(t){this.fields=t,t.sort(Xe.comparator)}static empty(){return new Jn([])}unionWith(t){let e=new Ne(Xe.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Jn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Lo(this.fields,t.fields,(e,i)=>e.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new qS("Invalid base64 string: "+o):o}}(t);return new We(e)}static fromUint8Array(t){const e=function(r){let o="";for(let c=0;c<r.length;++c)o+=String.fromCharCode(r[c]);return o}(t);return new We(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ct(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}We.EMPTY_BYTE_STRING=new We("");const cD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mr(n){if(Gt(!!n,39018),typeof n=="string"){let t=0;const e=cD.exec(n);if(Gt(!!e,46558,{timestamp:n}),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ve(n.seconds),nanos:ve(n.nanos)}}function ve(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function pr(n){return typeof n=="string"?We.fromBase64String(n):We.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="server_timestamp",YS="__type__",KS="__previous_value__",QS="__local_write_time__";function Mp(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{})[YS])===null||e===void 0?void 0:e.stringValue)===GS}function Kf(n){const t=n.mapValue.fields[KS];return Mp(t)?Kf(t):t}function zc(n){const t=mr(n.mapValue.fields[QS].timestampValue);return new le(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(t,e,i,r,o,c,h,d,m,_){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=m,this.isUsingEmulator=_}}const bf="(default)";class Bc{constructor(t,e){this.projectId=t,this.database=e||bf}static empty(){return new Bc("","")}get isDefaultDatabase(){return this.database===bf}isEqual(t){return t instanceof Bc&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS="__type__",hD="__max__",Ph={mapValue:{}},WS="__vector__",Ef="value";function _r(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Mp(n)?4:dD(n)?9007199254740991:fD(n)?10:11:Et(28295,{value:n})}function ki(n,t){if(n===t)return!0;const e=_r(n);if(e!==_r(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return zc(n).isEqual(zc(t));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const c=mr(r.timestampValue),h=mr(o.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,o){return pr(r.bytesValue).isEqual(pr(o.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,o){return ve(r.geoPointValue.latitude)===ve(o.geoPointValue.latitude)&&ve(r.geoPointValue.longitude)===ve(o.geoPointValue.longitude)}(n,t);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return ve(r.integerValue)===ve(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const c=ve(r.doubleValue),h=ve(o.doubleValue);return c===h?vf(c)===vf(h):isNaN(c)&&isNaN(h)}return!1}(n,t);case 9:return Lo(n.arrayValue.values||[],t.arrayValue.values||[],ki);case 10:case 11:return function(r,o){const c=r.mapValue.fields||{},h=o.mapValue.fields||{};if(kb(c)!==kb(h))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(h[d]===void 0||!ki(c[d],h[d])))return!1;return!0}(n,t);default:return Et(52216,{left:n})}}function jc(n,t){return(n.values||[]).find(e=>ki(e,t))!==void 0}function Uo(n,t){if(n===t)return 0;const e=_r(n),i=_r(t);if(e!==i)return Ct(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Ct(n.booleanValue,t.booleanValue);case 2:return function(o,c){const h=ve(o.integerValue||o.doubleValue),d=ve(c.integerValue||c.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(n,t);case 3:return Pb(n.timestampValue,t.timestampValue);case 4:return Pb(zc(n),zc(t));case 5:return Ym(n.stringValue,t.stringValue);case 6:return function(o,c){const h=pr(o),d=pr(c);return h.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(o,c){const h=o.split("/"),d=c.split("/");for(let m=0;m<h.length&&m<d.length;m++){const _=Ct(h[m],d[m]);if(_!==0)return _}return Ct(h.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(o,c){const h=Ct(ve(o.latitude),ve(c.latitude));return h!==0?h:Ct(ve(o.longitude),ve(c.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return Vb(n.arrayValue,t.arrayValue);case 10:return function(o,c){var h,d,m,_;const v=o.fields||{},T=c.fields||{},A=(h=v[Ef])===null||h===void 0?void 0:h.arrayValue,I=(d=T[Ef])===null||d===void 0?void 0:d.arrayValue,k=Ct(((m=A?.values)===null||m===void 0?void 0:m.length)||0,((_=I?.values)===null||_===void 0?void 0:_.length)||0);return k!==0?k:Vb(A,I)}(n.mapValue,t.mapValue);case 11:return function(o,c){if(o===Ph.mapValue&&c===Ph.mapValue)return 0;if(o===Ph.mapValue)return 1;if(c===Ph.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),m=c.fields||{},_=Object.keys(m);d.sort(),_.sort();for(let v=0;v<d.length&&v<_.length;++v){const T=Ym(d[v],_[v]);if(T!==0)return T;const A=Uo(h[d[v]],m[_[v]]);if(A!==0)return A}return Ct(d.length,_.length)}(n.mapValue,t.mapValue);default:throw Et(23264,{le:e})}}function Pb(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Ct(n,t);const e=mr(n),i=mr(t),r=Ct(e.seconds,i.seconds);return r!==0?r:Ct(e.nanos,i.nanos)}function Vb(n,t){const e=n.values||[],i=t.values||[];for(let r=0;r<e.length&&r<i.length;++r){const o=Uo(e[r],i[r]);if(o)return o}return Ct(e.length,i.length)}function zo(n){return Km(n)}function Km(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const i=mr(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return pr(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return pt.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",r=!0;for(const o of e.values||[])r?r=!1:i+=",",i+=Km(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){const i=Object.keys(e.fields||{}).sort();let r="{",o=!0;for(const c of i)o?o=!1:r+=",",r+=`${c}:${Km(e.fields[c])}`;return r+"}"}(n.mapValue):Et(61005,{value:n})}function nf(n){switch(_r(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Kf(n);return t?16+nf(t):16;case 5:return 2*n.stringValue.length;case 6:return pr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+nf(o),0)}(n.arrayValue);case 10:case 11:return function(i){let r=0;return Sa(i.fields,(o,c)=>{r+=o.length+nf(c)}),r}(n.mapValue);default:throw Et(13486,{value:n})}}function Lb(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Qm(n){return!!n&&"integerValue"in n}function kp(n){return!!n&&"arrayValue"in n}function Ub(n){return!!n&&"nullValue"in n}function zb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function sf(n){return!!n&&"mapValue"in n}function fD(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{})[XS])===null||e===void 0?void 0:e.stringValue)===WS}function Ic(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Sa(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Ic(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Ic(n.arrayValue.values[e]);return t}return Object.assign({},n)}function dD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===hD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(t){this.value=t}static empty(){return new Hn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!sf(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ic(e)}setAll(t){let e=Xe.emptyPath(),i={},r=[];t.forEach((c,h)=>{if(!e.isImmediateParentOf(h)){const d=this.getFieldsMap(e);this.applyChanges(d,i,r),i={},r=[],e=h.popLast()}c?i[h.lastSegment()]=Ic(c):r.push(h.lastSegment())});const o=this.getFieldsMap(e);this.applyChanges(o,i,r)}delete(t){const e=this.field(t.popLast());sf(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return ki(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];sf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Sa(e,(r,o)=>t[r]=o);for(const r of i)delete t[r]}clone(){return new Hn(Ic(this.value))}}function $S(n){const t=[];return Sa(n.fields,(e,i)=>{const r=new Xe([e]);if(sf(i)){const o=$S(i.mapValue).fields;if(o.length===0)t.push(r);else for(const c of o)t.push(r.child(c))}else t.push(r)}),new Jn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(t,e,i,r,o,c,h){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=o,this.data=c,this.documentState=h}static newInvalidDocument(t){return new nn(t,0,St.min(),St.min(),St.min(),Hn.empty(),0)}static newFoundDocument(t,e,i,r){return new nn(t,1,e,St.min(),i,r,0)}static newNoDocument(t,e){return new nn(t,2,e,St.min(),St.min(),Hn.empty(),0)}static newUnknownDocument(t,e){return new nn(t,3,e,St.min(),St.min(),Hn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(St.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Hn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=St.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof nn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(t,e){this.position=t,this.inclusive=e}}function Bb(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const o=t[r],c=n.position[r];if(o.field.isKeyField()?i=pt.comparator(pt.fromName(c.referenceValue),e.key):i=Uo(c,e.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function jb(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!ki(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(t,e="asc"){this.field=t,this.dir=e}}function gD(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{}class Re extends ZS{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new pD(t,e,i):e==="array-contains"?new vD(t,i):e==="in"?new bD(t,i):e==="not-in"?new ED(t,i):e==="array-contains-any"?new TD(t,i):new Re(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new _D(t,i):new yD(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Uo(e,this.value)):e!==null&&_r(this.value)===_r(e)&&this.matchesComparison(Uo(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Et(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ii extends ZS{constructor(t,e){super(),this.filters=t,this.op=e,this.he=null}static create(t,e){return new ii(t,e)}matches(t){return JS(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function JS(n){return n.op==="and"}function tA(n){return mD(n)&&JS(n)}function mD(n){for(const t of n.filters)if(t instanceof ii)return!1;return!0}function Xm(n){if(n instanceof Re)return n.field.canonicalString()+n.op.toString()+zo(n.value);if(tA(n))return n.filters.map(t=>Xm(t)).join(",");{const t=n.filters.map(e=>Xm(e)).join(",");return`${n.op}(${t})`}}function eA(n,t){return n instanceof Re?function(i,r){return r instanceof Re&&i.op===r.op&&i.field.isEqual(r.field)&&ki(i.value,r.value)}(n,t):n instanceof ii?function(i,r){return r instanceof ii&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,c,h)=>o&&eA(c,r.filters[h]),!0):!1}(n,t):void Et(19439)}function nA(n){return n instanceof Re?function(e){return`${e.field.canonicalString()} ${e.op} ${zo(e.value)}`}(n):n instanceof ii?function(e){return e.op.toString()+" {"+e.getFilters().map(nA).join(" ,")+"}"}(n):"Filter"}class pD extends Re{constructor(t,e,i){super(t,e,i),this.key=pt.fromName(i.referenceValue)}matches(t){const e=pt.comparator(t.key,this.key);return this.matchesComparison(e)}}class _D extends Re{constructor(t,e){super(t,"in",e),this.keys=iA("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class yD extends Re{constructor(t,e){super(t,"not-in",e),this.keys=iA("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function iA(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>pt.fromName(i.referenceValue))}class vD extends Re{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return kp(e)&&jc(e.arrayValue,this.value)}}class bD extends Re{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&jc(this.value.arrayValue,e)}}class ED extends Re{constructor(t,e){super(t,"not-in",e)}matches(t){if(jc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!jc(this.value.arrayValue,e)}}class TD extends Re{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!kp(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>jc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(t,e=null,i=[],r=[],o=null,c=null,h=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=c,this.endAt=h,this.Pe=null}}function Hb(n,t=null,e=[],i=[],r=null,o=null,c=null){return new SD(n,t,e,i,r,o,c)}function Np(n){const t=Rt(n);if(t.Pe===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>Xm(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Yf(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>zo(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>zo(i)).join(",")),t.Pe=e}return t.Pe}function Pp(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!gD(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!eA(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!jb(n.startAt,t.startAt)&&jb(n.endAt,t.endAt)}function Wm(n){return pt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(t,e=null,i=[],r=[],o=null,c="F",h=null,d=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=c,this.startAt=h,this.endAt=d,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function AD(n,t,e,i,r,o,c,h){return new Zo(n,t,e,i,r,o,c,h)}function Vp(n){return new Zo(n)}function Fb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function sA(n){return n.collectionGroup!==null}function Cc(n){const t=Rt(n);if(t.Te===null){t.Te=[];const e=new Set;for(const o of t.explicitOrderBy)t.Te.push(o),e.add(o.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Ne(Xe.comparator);return c.filters.forEach(d=>{d.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(t).forEach(o=>{e.has(o.canonicalString())||o.isKeyField()||t.Te.push(new Hc(o,i))}),e.has(Xe.keyField().canonicalString())||t.Te.push(new Hc(Xe.keyField(),i))}return t.Te}function Ii(n){const t=Rt(n);return t.Ie||(t.Ie=wD(t,Cc(n))),t.Ie}function wD(n,t){if(n.limitType==="F")return Hb(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Hc(r.field,o)});const e=n.endAt?new Tf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Tf(n.startAt.position,n.startAt.inclusive):null;return Hb(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function $m(n,t){const e=n.filters.concat([t]);return new Zo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function Sf(n,t,e){return new Zo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Qf(n,t){return Pp(Ii(n),Ii(t))&&n.limitType===t.limitType}function rA(n){return`${Np(Ii(n))}|lt:${n.limitType}`}function To(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(r=>nA(r)).join(", ")}]`),Yf(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(r=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(r)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(r=>zo(r)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(r=>zo(r)).join(",")),`Target(${i})`}(Ii(n))}; limitType=${n.limitType})`}function Xf(n,t){return t.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):pt.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,t)&&function(i,r){for(const o of Cc(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(n,t)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(n,t)&&function(i,r){return!(i.startAt&&!function(c,h,d){const m=Bb(c,h,d);return c.inclusive?m<=0:m<0}(i.startAt,Cc(i),r)||i.endAt&&!function(c,h,d){const m=Bb(c,h,d);return c.inclusive?m>=0:m>0}(i.endAt,Cc(i),r))}(n,t)}function RD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function aA(n){return(t,e)=>{let i=!1;for(const r of Cc(n)){const o=xD(r,t,e);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function xD(n,t,e){const i=n.field.isKeyField()?pt.comparator(t.key,e.key):function(o,c,h){const d=c.data.field(o),m=h.data.field(o);return d!==null&&m!==null?Uo(d,m):Et(42886)}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Et(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return void(r[o]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Sa(this.inner,(e,i)=>{for(const[r,o]of i)t(r,o)})}isEmpty(){return FS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID=new fe(pt.comparator);function ms(){return ID}const oA=new fe(pt.comparator);function bc(...n){let t=oA;for(const e of n)t=t.insert(e.key,e);return t}function lA(n){let t=oA;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function ha(){return Dc()}function cA(){return Dc()}function Dc(){return new Aa(n=>n.toString(),(n,t)=>n.isEqual(t))}const CD=new fe(pt.comparator),DD=new Ne(pt.comparator);function Pt(...n){let t=DD;for(const e of n)t=t.add(e);return t}const OD=new Ne(Ct);function MD(){return OD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vf(t)?"-0":t}}function uA(n){return{integerValue:""+n}}function kD(n,t){return aD(t)?uA(t):Lp(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(){this._=void 0}}function ND(n,t,e){return n instanceof Af?function(r,o){const c={fields:{[YS]:{stringValue:GS},[QS]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Mp(o)&&(o=Kf(o)),o&&(c.fields[KS]=o),{mapValue:c}}(e,t):n instanceof Fc?fA(n,t):n instanceof qc?dA(n,t):function(r,o){const c=hA(r,o),h=qb(c)+qb(r.Ee);return Qm(c)&&Qm(r.Ee)?uA(h):Lp(r.serializer,h)}(n,t)}function PD(n,t,e){return n instanceof Fc?fA(n,t):n instanceof qc?dA(n,t):e}function hA(n,t){return n instanceof wf?function(i){return Qm(i)||function(o){return!!o&&"doubleValue"in o}(i)}(t)?t:{integerValue:0}:null}class Af extends Wf{}class Fc extends Wf{constructor(t){super(),this.elements=t}}function fA(n,t){const e=gA(t);for(const i of n.elements)e.some(r=>ki(r,i))||e.push(i);return{arrayValue:{values:e}}}class qc extends Wf{constructor(t){super(),this.elements=t}}function dA(n,t){let e=gA(t);for(const i of n.elements)e=e.filter(r=>!ki(r,i));return{arrayValue:{values:e}}}class wf extends Wf{constructor(t,e){super(),this.serializer=t,this.Ee=e}}function qb(n){return ve(n.integerValue||n.doubleValue)}function gA(n){return kp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function VD(n,t){return n.field.isEqual(t.field)&&function(i,r){return i instanceof Fc&&r instanceof Fc||i instanceof qc&&r instanceof qc?Lo(i.elements,r.elements,ki):i instanceof wf&&r instanceof wf?ki(i.Ee,r.Ee):i instanceof Af&&r instanceof Af}(n.transform,t.transform)}class LD{constructor(t,e){this.version=t,this.transformResults=e}}class Ci{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ci}static exists(t){return new Ci(void 0,t)}static updateTime(t){return new Ci(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function rf(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class $f{}function mA(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Up(n.key,Ci.none()):new eu(n.key,n.data,Ci.none());{const e=n.data,i=Hn.empty();let r=new Ne(Xe.comparator);for(let o of t.fields)if(!r.has(o)){let c=e.field(o);c===null&&o.length>1&&(o=o.popLast(),c=e.field(o)),c===null?i.delete(o):i.set(o,c),r=r.add(o)}return new wa(n.key,i,new Jn(r.toArray()),Ci.none())}}function UD(n,t,e){n instanceof eu?function(r,o,c){const h=r.value.clone(),d=Yb(r.fieldTransforms,o,c.transformResults);h.setAll(d),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,t,e):n instanceof wa?function(r,o,c){if(!rf(r.precondition,o))return void o.convertToUnknownDocument(c.version);const h=Yb(r.fieldTransforms,o,c.transformResults),d=o.data;d.setAll(pA(r)),d.setAll(h),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,t,e):function(r,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,t,e)}function Oc(n,t,e,i){return n instanceof eu?function(o,c,h,d){if(!rf(o.precondition,c))return h;const m=o.value.clone(),_=Kb(o.fieldTransforms,d,c);return m.setAll(_),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null}(n,t,e,i):n instanceof wa?function(o,c,h,d){if(!rf(o.precondition,c))return h;const m=Kb(o.fieldTransforms,d,c),_=c.data;return _.setAll(pA(o)),_.setAll(m),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(n,t,e,i):function(o,c,h){return rf(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(n,t,e)}function zD(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),o=hA(i.transform,r||null);o!=null&&(e===null&&(e=Hn.empty()),e.set(i.field,o))}return e||null}function Gb(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Lo(i,r,(o,c)=>VD(o,c))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class eu extends $f{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class wa extends $f{constructor(t,e,i,r,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function pA(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function Yb(n,t,e){const i=new Map;Gt(n.length===e.length,32656,{Ae:e.length,Re:n.length});for(let r=0;r<e.length;r++){const o=n[r],c=o.transform,h=t.data.field(o.field);i.set(o.field,PD(c,h,e[r]))}return i}function Kb(n,t,e){const i=new Map;for(const r of n){const o=r.transform,c=e.data.field(r.field);i.set(r.field,ND(o,c,t))}return i}class Up extends $f{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BD extends $f{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(t.key)&&UD(o,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=Oc(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=Oc(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=cA();return this.mutations.forEach(r=>{const o=t.get(r.key),c=o.overlayedDocument;let h=this.applyToLocalView(c,o.mutatedFields);h=e.has(r.key)?null:h;const d=mA(c,h);d!==null&&i.set(r.key,d),c.isValidDocument()||c.convertToNoDocument(St.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Pt())}isEqual(t){return this.batchId===t.batchId&&Lo(this.mutations,t.mutations,(e,i)=>Gb(e,i))&&Lo(this.baseMutations,t.baseMutations,(e,i)=>Gb(e,i))}}class zp{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){Gt(t.mutations.length===i.length,58842,{Ve:t.mutations.length,me:i.length});let r=function(){return CD}();const o=t.mutations;for(let c=0;c<o.length;c++)r=r.insert(o[c].key,i[c].version);return new zp(t,e,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we,zt;function qD(n){switch(n){case Z.OK:return Et(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Et(15467,{code:n})}}function _A(n){if(n===void 0)return gs("GRPC error has no .code"),Z.UNKNOWN;switch(n){case we.OK:return Z.OK;case we.CANCELLED:return Z.CANCELLED;case we.UNKNOWN:return Z.UNKNOWN;case we.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case we.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case we.INTERNAL:return Z.INTERNAL;case we.UNAVAILABLE:return Z.UNAVAILABLE;case we.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case we.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case we.NOT_FOUND:return Z.NOT_FOUND;case we.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case we.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case we.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case we.ABORTED:return Z.ABORTED;case we.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case we.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case we.DATA_LOSS:return Z.DATA_LOSS;default:return Et(39323,{code:n})}}(zt=we||(we={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD=new ar([4294967295,4294967295],0);function Qb(n){const t=zS().encode(n),e=new OS;return e.update(t),new Uint8Array(e.digest())}function Xb(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new ar([e,i],0),new ar([r,o],0)]}class Bp{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new Ec(`Invalid padding: ${e}`);if(i<0)throw new Ec(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Ec(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new Ec(`Invalid padding when bitmap length is 0: ${e}`);this.fe=8*t.length-e,this.ge=ar.fromNumber(this.fe)}pe(t,e,i){let r=t.add(e.multiply(ar.fromNumber(i)));return r.compare(GD)===1&&(r=new ar([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.fe===0)return!1;const e=Qb(t),[i,r]=Xb(e);for(let o=0;o<this.hashCount;o++){const c=this.pe(i,r,o);if(!this.ye(c))return!1}return!0}static create(t,e,i){const r=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),c=new Bp(o,r,e);return i.forEach(h=>c.insert(h)),c}insert(t){if(this.fe===0)return;const e=Qb(t),[i,r]=Xb(e);for(let o=0;o<this.hashCount;o++){const c=this.pe(i,r,o);this.we(c)}}we(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class Ec extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(t,e,i,r,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,nu.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new Zf(St.min(),r,new fe(Ct),ms(),Pt())}}class nu{constructor(t,e,i,r,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new nu(i,e,Pt(),Pt(),Pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(t,e,i,r){this.Se=t,this.removedTargetIds=e,this.key=i,this.be=r}}class yA{constructor(t,e){this.targetId=t,this.De=e}}class vA{constructor(t,e,i=We.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class Wb{constructor(){this.ve=0,this.Ce=$b(),this.Fe=We.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(t){t.approximateByteSize()>0&&(this.xe=!0,this.Fe=t)}Le(){let t=Pt(),e=Pt(),i=Pt();return this.Ce.forEach((r,o)=>{switch(o){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:Et(38017,{changeType:o})}}),new nu(this.Fe,this.Me,t,e,i)}ke(){this.xe=!1,this.Ce=$b()}qe(t,e){this.xe=!0,this.Ce=this.Ce.insert(t,e)}Qe(t){this.xe=!0,this.Ce=this.Ce.remove(t)}$e(){this.ve+=1}Ue(){this.ve-=1,Gt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class YD{constructor(t){this.We=t,this.Ge=new Map,this.ze=ms(),this.je=Vh(),this.Je=Vh(),this.He=new fe(Ct)}Ye(t){for(const e of t.Se)t.be&&t.be.isFoundDocument()?this.Ze(e,t.be):this.Xe(e,t.key,t.be);for(const e of t.removedTargetIds)this.Xe(e,t.key,t.be)}et(t){this.forEachTarget(t,e=>{const i=this.tt(e);switch(t.state){case 0:this.nt(e)&&i.Be(t.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(t.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(e);break;case 3:this.nt(e)&&(i.Ke(),i.Be(t.resumeToken));break;case 4:this.nt(e)&&(this.rt(e),i.Be(t.resumeToken));break;default:Et(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Ge.forEach((i,r)=>{this.nt(r)&&e(r)})}it(t){const e=t.targetId,i=t.De.count,r=this.st(e);if(r){const o=r.target;if(Wm(o))if(i===0){const c=new pt(o.path);this.Xe(e,c,nn.newNoDocument(c,St.min()))}else Gt(i===1,20013,{expectedCount:i});else{const c=this.ot(e);if(c!==i){const h=this._t(t),d=h?this.ut(h,t,c):1;if(d!==0){this.rt(e);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(e,m)}}}}}_t(t){const e=t.De.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=e;let c,h;try{c=pr(i).toUint8Array()}catch(d){if(d instanceof qS)return dr("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new Bp(c,r,o)}catch(d){return dr(d instanceof Ec?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.fe===0?null:h}ut(t,e,i){return e.De.count===i-this.ht(t,e.targetId)?0:2}ht(t,e){const i=this.We.getRemoteKeysForTarget(e);let r=0;return i.forEach(o=>{const c=this.We.lt(),h=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;t.mightContain(h)||(this.Xe(e,o,null),r++)}),r}Pt(t){const e=new Map;this.Ge.forEach((o,c)=>{const h=this.st(c);if(h){if(o.current&&Wm(h.target)){const d=new pt(h.target.path);this.Tt(d).has(c)||this.It(c,d)||this.Xe(c,d,nn.newNoDocument(d,t))}o.Ne&&(e.set(c,o.Le()),o.ke())}});let i=Pt();this.Je.forEach((o,c)=>{let h=!0;c.forEachWhile(d=>{const m=this.st(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.ze.forEach((o,c)=>c.setReadTime(t));const r=new Zf(t,e,this.He,this.ze,i);return this.ze=ms(),this.je=Vh(),this.Je=Vh(),this.He=new fe(Ct),r}Ze(t,e){if(!this.nt(t))return;const i=this.It(t,e.key)?2:0;this.tt(t).qe(e.key,i),this.ze=this.ze.insert(e.key,e),this.je=this.je.insert(e.key,this.Tt(e.key).add(t)),this.Je=this.Je.insert(e.key,this.dt(e.key).add(t))}Xe(t,e,i){if(!this.nt(t))return;const r=this.tt(t);this.It(t,e)?r.qe(e,1):r.Qe(e),this.Je=this.Je.insert(e,this.dt(e).delete(t)),this.Je=this.Je.insert(e,this.dt(e).add(t)),i&&(this.ze=this.ze.insert(e,i))}removeTarget(t){this.Ge.delete(t)}ot(t){const e=this.tt(t).Le();return this.We.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}$e(t){this.tt(t).$e()}tt(t){let e=this.Ge.get(t);return e||(e=new Wb,this.Ge.set(t,e)),e}dt(t){let e=this.Je.get(t);return e||(e=new Ne(Ct),this.Je=this.Je.insert(t,e)),e}Tt(t){let e=this.je.get(t);return e||(e=new Ne(Ct),this.je=this.je.insert(t,e)),e}nt(t){const e=this.st(t)!==null;return e||ht("WatchChangeAggregator","Detected inactive target",t),e}st(t){const e=this.Ge.get(t);return e&&e.Oe?null:this.We.Et(t)}rt(t){this.Ge.set(t,new Wb),this.We.getRemoteKeysForTarget(t).forEach(e=>{this.Xe(t,e,null)})}It(t,e){return this.We.getRemoteKeysForTarget(t).has(e)}}function Vh(){return new fe(pt.comparator)}function $b(){return new fe(pt.comparator)}const KD={asc:"ASCENDING",desc:"DESCENDING"},QD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XD={and:"AND",or:"OR"};class WD{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Zm(n,t){return n.useProto3Json||Yf(t)?t:{value:t}}function Rf(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function bA(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function $D(n,t){return Rf(n,t.toTimestamp())}function Di(n){return Gt(!!n,49232),St.fromTimestamp(function(e){const i=mr(e);return new le(i.seconds,i.nanos)}(n))}function jp(n,t){return Jm(n,t).canonicalString()}function Jm(n,t){const e=function(r){return new ae(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function EA(n){const t=ae.fromString(n);return Gt(RA(t),10190,{key:t.toString()}),t}function tp(n,t){return jp(n.databaseId,t.path)}function Em(n,t){const e=EA(t);if(e.get(1)!==n.databaseId.projectId)throw new ut(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new ut(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new pt(SA(e))}function TA(n,t){return jp(n.databaseId,t)}function ZD(n){const t=EA(n);return t.length===4?ae.emptyPath():SA(t)}function ep(n){return new ae(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function SA(n){return Gt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Zb(n,t,e){return{name:tp(n,t),fields:e.value.mapValue.fields}}function JD(n,t){let e;if("targetChange"in t){t.targetChange;const i=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Et(39313,{state:m})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],o=function(m,_){return m.useProto3Json?(Gt(_===void 0||typeof _=="string",58123),We.fromBase64String(_||"")):(Gt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),We.fromUint8Array(_||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,h=c&&function(m){const _=m.code===void 0?Z.UNKNOWN:_A(m.code);return new ut(_,m.message||"")}(c);e=new vA(i,r,o,h||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=Em(n,i.document.name),o=Di(i.document.updateTime),c=i.document.createTime?Di(i.document.createTime):St.min(),h=new Hn({mapValue:{fields:i.document.fields}}),d=nn.newFoundDocument(r,o,c,h),m=i.targetIds||[],_=i.removedTargetIds||[];e=new af(m,_,d.key,d)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=Em(n,i.document),o=i.readTime?Di(i.readTime):St.min(),c=nn.newNoDocument(r,o),h=i.removedTargetIds||[];e=new af([],h,c.key,c)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=Em(n,i.document),o=i.removedTargetIds||[];e=new af([],o,r,null)}else{if(!("filter"in t))return Et(11601,{At:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,c=new FD(r,o),h=i.targetId;e=new yA(h,c)}}return e}function tO(n,t){let e;if(t instanceof eu)e={update:Zb(n,t.key,t.value)};else if(t instanceof Up)e={delete:tp(n,t.key)};else if(t instanceof wa)e={update:Zb(n,t.key,t.data),updateMask:cO(t.fieldMask)};else{if(!(t instanceof BD))return Et(16599,{Rt:t.type});e={verify:tp(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(o,c){const h=c.transform;if(h instanceof Af)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Fc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof qc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof wf)return{fieldPath:c.field.canonicalString(),increment:h.Ee};throw Et(20930,{transform:c.transform})}(0,i))),t.precondition.isNone||(e.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:$D(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Et(27497)}(n,t.precondition)),e}function eO(n,t){return n&&n.length>0?(Gt(t!==void 0,14353),n.map(e=>function(r,o){let c=r.updateTime?Di(r.updateTime):Di(o);return c.isEqual(St.min())&&(c=Di(o)),new LD(c,r.transformResults||[])}(e,t))):[]}function nO(n,t){return{documents:[TA(n,t.path)]}}function iO(n,t){const e={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=TA(n,r);const o=function(m){if(m.length!==0)return wA(ii.create(m,"and"))}(t.filters);o&&(e.structuredQuery.where=o);const c=function(m){if(m.length!==0)return m.map(_=>function(T){return{field:So(T.field),direction:aO(T.dir)}}(_))}(t.orderBy);c&&(e.structuredQuery.orderBy=c);const h=Zm(n,t.limit);return h!==null&&(e.structuredQuery.limit=h),t.startAt&&(e.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(t.endAt)),{Vt:e,parent:r}}function sO(n){let t=ZD(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){Gt(i===1,65062);const _=e.from[0];_.allDescendants?r=_.collectionId:t=t.child(_.collectionId)}let o=[];e.where&&(o=function(v){const T=AA(v);return T instanceof ii&&tA(T)?T.getFilters():[T]}(e.where));let c=[];e.orderBy&&(c=function(v){return v.map(T=>function(I){return new Hc(Ao(I.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(T))}(e.orderBy));let h=null;e.limit&&(h=function(v){let T;return T=typeof v=="object"?v.value:v,Yf(T)?null:T}(e.limit));let d=null;e.startAt&&(d=function(v){const T=!!v.before,A=v.values||[];return new Tf(A,T)}(e.startAt));let m=null;return e.endAt&&(m=function(v){const T=!v.before,A=v.values||[];return new Tf(A,T)}(e.endAt)),AD(t,r,c,o,h,"F",d,m)}function rO(n,t){const e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Et(28987,{purpose:r})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function AA(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Ao(e.unaryFilter.field);return Re.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Ao(e.unaryFilter.field);return Re.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ao(e.unaryFilter.field);return Re.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ao(e.unaryFilter.field);return Re.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Et(61313);default:return Et(60726)}}(n):n.fieldFilter!==void 0?function(e){return Re.create(Ao(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Et(58110);default:return Et(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return ii.create(e.compositeFilter.filters.map(i=>AA(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Et(1026)}}(e.compositeFilter.op))}(n):Et(30097,{filter:n})}function aO(n){return KD[n]}function oO(n){return QD[n]}function lO(n){return XD[n]}function So(n){return{fieldPath:n.canonicalString()}}function Ao(n){return Xe.fromServerFormat(n.fieldPath)}function wA(n){return n instanceof Re?function(e){if(e.op==="=="){if(zb(e.value))return{unaryFilter:{field:So(e.field),op:"IS_NAN"}};if(Ub(e.value))return{unaryFilter:{field:So(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(zb(e.value))return{unaryFilter:{field:So(e.field),op:"IS_NOT_NAN"}};if(Ub(e.value))return{unaryFilter:{field:So(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:So(e.field),op:oO(e.op),value:e.value}}}(n):n instanceof ii?function(e){const i=e.getFilters().map(r=>wA(r));return i.length===1?i[0]:{compositeFilter:{op:lO(e.op),filters:i}}}(n):Et(54877,{filter:n})}function cO(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function RA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(t,e,i,r,o=St.min(),c=St.min(),h=We.EMPTY_BYTE_STRING,d=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(t){return new Zs(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Zs(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(t){this.gt=t}}function hO(n){const t=sO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Sf(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(){this.Dn=new dO}addToCollectionParentIndex(t,e){return this.Dn.add(e),tt.resolve()}getCollectionParents(t,e){return tt.resolve(this.Dn.getEntries(e))}addFieldIndex(t,e){return tt.resolve()}deleteFieldIndex(t,e){return tt.resolve()}deleteAllFieldIndexes(t){return tt.resolve()}createTargetIndexes(t,e){return tt.resolve()}getDocumentsMatchingTarget(t,e){return tt.resolve(null)}getIndexType(t,e){return tt.resolve(0)}getFieldIndexes(t,e){return tt.resolve([])}getNextCollectionGroupToUpdate(t){return tt.resolve(null)}getMinOffset(t,e){return tt.resolve(gr.min())}getMinOffsetFromCollectionGroup(t,e){return tt.resolve(gr.min())}updateCollectionGroup(t,e,i){return tt.resolve()}updateIndexEntries(t,e){return tt.resolve()}}class dO{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new Ne(ae.comparator),o=!r.has(i);return this.index[e]=r.add(i),o}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Ne(ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xA=41943040;class gn{static withCacheSize(t){return new gn(t,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(xA,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(t){this._r=t}next(){return this._r+=2,this._r}static ar(){return new Bo(0)}static ur(){return new Bo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="LruGarbageCollector",gO=1048576;function eE([n,t],[e,i]){const r=Ct(n,e);return r===0?Ct(t,i):r}class mO{constructor(t){this.Tr=t,this.buffer=new Ne(eE),this.Ir=0}dr(){return++this.Ir}Er(t){const e=[t,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();eE(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class pO{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(t){ht(tE,`Garbage collection scheduled in ${t}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){$o(e)?ht(tE,"Ignoring IndexedDB error during garbage collection: ",e):await Wo(e)}await this.Rr(3e5)})}}class _O{constructor(t,e){this.Vr=t,this.params=e}calculateTargetCount(t,e){return this.Vr.mr(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return tt.resolve(Gf.ue);const i=new mO(e);return this.Vr.forEachTarget(t,r=>i.Er(r.sequenceNumber)).next(()=>this.Vr.gr(t,r=>i.Er(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.Vr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Vr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(ht("LruGarbageCollector","Garbage collection skipped; disabled"),tt.resolve(Jb)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(ht("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Jb):this.pr(t,e))}getCacheSize(t){return this.Vr.getCacheSize(t)}pr(t,e){let i,r,o,c,h,d,m;const _=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(ht("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),r=this.params.maximumSequenceNumbersToCollect):r=v,c=Date.now(),this.nthSequenceNumber(t,r))).next(v=>(i=v,h=Date.now(),this.removeTargets(t,i,e))).next(v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(t,i))).next(v=>(m=Date.now(),Eo()<=Nt.DEBUG&&ht("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${r} in `+(h-c)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${v} documents in `+(m-d)+`ms
Total Duration: ${m-_}ms`),tt.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:v})))}}function yO(n,t){return new _O(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(){this.changes=new Aa(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,nn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?tt.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(i!==null&&Oc(i.mutation,r,Jn.empty(),le.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,Pt()).next(()=>i))}getLocalViewOfDocuments(t,e,i=Pt()){const r=ha();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(o=>{let c=bc();return o.forEach((h,d)=>{c=c.insert(h,d.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const i=ha();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,Pt()))}populateOverlays(t,e,i){const r=[];return i.forEach(o=>{e.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(t,r).next(o=>{o.forEach((c,h)=>{e.set(c,h)})})}computeViews(t,e,i,r){let o=ms();const c=Dc(),h=function(){return Dc()}();return e.forEach((d,m)=>{const _=i.get(m.key);r.has(m.key)&&(_===void 0||_.mutation instanceof wa)?o=o.insert(m.key,m):_!==void 0?(c.set(m.key,_.mutation.getFieldMask()),Oc(_.mutation,m,_.mutation.getFieldMask(),le.now())):c.set(m.key,Jn.empty())}),this.recalculateAndSaveOverlays(t,o).next(d=>(d.forEach((m,_)=>c.set(m,_)),e.forEach((m,_)=>{var v;return h.set(m,new bO(_,(v=c.get(m))!==null&&v!==void 0?v:null))}),h))}recalculateAndSaveOverlays(t,e){const i=Dc();let r=new fe((c,h)=>c-h),o=Pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const h of c)h.keys().forEach(d=>{const m=e.get(d);if(m===null)return;let _=i.get(d)||Jn.empty();_=h.applyToLocalView(m,_),i.set(d,_);const v=(r.get(h.batchId)||Pt()).add(d);r=r.insert(h.batchId,v)})}).next(()=>{const c=[],h=r.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),m=d.key,_=d.value,v=cA();_.forEach(T=>{if(!o.has(T)){const A=mA(e.get(T),i.get(T));A!==null&&v.set(T,A),o=o.add(T)}}),c.push(this.documentOverlayCache.saveOverlays(t,m,v))}return tt.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,r){return function(c){return pt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):sA(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(o=>{const c=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-o.size):tt.resolve(ha());let h=Uc,d=o;return c.next(m=>tt.forEach(m,(_,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),o.get(_)?tt.resolve():this.remoteDocumentCache.getEntry(t,_).next(T=>{d=d.insert(_,T)}))).next(()=>this.populateOverlays(t,m,o)).next(()=>this.computeViews(t,d,m,Pt())).next(_=>({batchId:h,changes:lA(_)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new pt(e)).next(i=>{let r=bc();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){const o=e.collectionGroup;let c=bc();return this.indexManager.getCollectionParents(t,o).next(h=>tt.forEach(h,d=>{const m=function(v,T){return new Zo(T,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(e,d.child(o));return this.getDocumentsMatchingCollectionQuery(t,m,i,r).next(_=>{_.forEach((v,T)=>{c=c.insert(v,T)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(t,e,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,o,r))).next(c=>{o.forEach((d,m)=>{const _=m.getKey();c.get(_)===null&&(c=c.insert(_,nn.newInvalidDocument(_)))});let h=bc();return c.forEach((d,m)=>{const _=o.get(d);_!==void 0&&Oc(_.mutation,m,Jn.empty(),le.now()),Xf(e,m)&&(h=h.insert(d,m))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(t){this.serializer=t,this.Br=new Map,this.Lr=new Map}getBundleMetadata(t,e){return tt.resolve(this.Br.get(e))}saveBundleMetadata(t,e){return this.Br.set(e.id,function(r){return{id:r.id,version:r.version,createTime:Di(r.createTime)}}(e)),tt.resolve()}getNamedQuery(t,e){return tt.resolve(this.Lr.get(e))}saveNamedQuery(t,e){return this.Lr.set(e.name,function(r){return{name:r.name,query:hO(r.bundledQuery),readTime:Di(r.readTime)}}(e)),tt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(){this.overlays=new fe(pt.comparator),this.kr=new Map}getOverlay(t,e){return tt.resolve(this.overlays.get(e))}getOverlays(t,e){const i=ha();return tt.forEach(e,r=>this.getOverlay(t,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,o)=>{this.wt(t,e,o)}),tt.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.kr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(i)),tt.resolve()}getOverlaysForCollection(t,e,i){const r=ha(),o=e.length+1,c=new pt(e.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const d=h.getNext().value,m=d.getKey();if(!e.isPrefixOf(m.path))break;m.path.length===o&&d.largestBatchId>i&&r.set(d.getKey(),d)}return tt.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let o=new fe((m,_)=>m-_);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===e&&m.largestBatchId>i){let _=o.get(m.largestBatchId);_===null&&(_=ha(),o=o.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const h=ha(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((m,_)=>h.set(m,_)),!(h.size()>=r)););return tt.resolve(h)}wt(t,e,i){const r=this.overlays.get(i.key);if(r!==null){const c=this.kr.get(r.largestBatchId).delete(i.key);this.kr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new HD(e,i));let o=this.kr.get(e);o===void 0&&(o=Pt(),this.kr.set(e,o)),this.kr.set(e,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(){this.sessionToken=We.EMPTY_BYTE_STRING}getSessionToken(t){return tt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,tt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(){this.qr=new Ne(je.Qr),this.$r=new Ne(je.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(t,e){const i=new je(t,e);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Wr(new je(t,e))}Gr(t,e){t.forEach(i=>this.removeReference(i,e))}zr(t){const e=new pt(new ae([])),i=new je(e,t),r=new je(e,t+1),o=[];return this.$r.forEachInRange([i,r],c=>{this.Wr(c),o.push(c.key)}),o}jr(){this.qr.forEach(t=>this.Wr(t))}Wr(t){this.qr=this.qr.delete(t),this.$r=this.$r.delete(t)}Jr(t){const e=new pt(new ae([])),i=new je(e,t),r=new je(e,t+1);let o=Pt();return this.$r.forEachInRange([i,r],c=>{o=o.add(c.key)}),o}containsKey(t){const e=new je(t,0),i=this.qr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class je{constructor(t,e){this.key=t,this.Hr=e}static Qr(t,e){return pt.comparator(t.key,e.key)||Ct(t.Hr,e.Hr)}static Ur(t,e){return Ct(t.Hr,e.Hr)||pt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.er=1,this.Yr=new Ne(je.Qr)}checkEmpty(t){return tt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new jD(o,e,i,r);this.mutationQueue.push(c);for(const h of r)this.Yr=this.Yr.add(new je(h.key,o)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return tt.resolve(c)}lookupMutationBatch(t,e){return tt.resolve(this.Zr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=this.Xr(i),o=r<0?0:r;return tt.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return tt.resolve(this.mutationQueue.length===0?Op:this.er-1)}getAllMutationBatches(t){return tt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new je(e,0),r=new je(e,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([i,r],c=>{const h=this.Zr(c.Hr);o.push(h)}),tt.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Ne(Ct);return e.forEach(r=>{const o=new je(r,0),c=new je(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,c],h=>{i=i.add(h.Hr)})}),tt.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let o=i;pt.isDocumentKey(o)||(o=o.child(""));const c=new je(new pt(o),0);let h=new Ne(Ct);return this.Yr.forEachWhile(d=>{const m=d.key.path;return!!i.isPrefixOf(m)&&(m.length===r&&(h=h.add(d.Hr)),!0)},c),tt.resolve(this.ei(h))}ei(t){const e=[];return t.forEach(i=>{const r=this.Zr(i);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){Gt(this.ti(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return tt.forEach(e.mutations,r=>{const o=new je(r.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Yr=i})}rr(t){}containsKey(t,e){const i=new je(e,0),r=this.Yr.firstAfterOrEqual(i);return tt.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,tt.resolve()}ti(t,e){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const e=this.Xr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(t){this.ni=t,this.docs=function(){return new fe(pt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),o=r?r.size:0,c=this.ni(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return tt.resolve(i?i.document.mutableCopy():nn.newInvalidDocument(e))}getEntries(t,e){let i=ms();return e.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():nn.newInvalidDocument(r))}),tt.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let o=ms();const c=e.path,h=new pt(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:m,value:{document:_}}=d.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||nD(eD(_),i)<=0||(r.has(_.key)||Xf(e,_))&&(o=o.insert(_.key,_.mutableCopy()))}return tt.resolve(o)}getAllFromCollectionGroup(t,e,i,r){Et(9500)}ri(t,e){return tt.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new xO(this)}getSize(t){return tt.resolve(this.size)}}class xO extends vO{constructor(t){super(),this.Or=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.Or.addEntry(t,r)):this.Or.removeEntry(i)}),tt.waitFor(e)}getFromCache(t,e){return this.Or.getEntry(t,e)}getAllFromCache(t,e){return this.Or.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(t){this.persistence=t,this.ii=new Aa(e=>Np(e),Pp),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.si=0,this.oi=new Hp,this.targetCount=0,this._i=Bo.ar()}forEachTarget(t,e){return this.ii.forEach((i,r)=>e(r)),tt.resolve()}getLastRemoteSnapshotVersion(t){return tt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return tt.resolve(this.si)}allocateTargetId(t){return this.highestTargetId=this._i.next(),tt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.si&&(this.si=e),tt.resolve()}hr(t){this.ii.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this._i=new Bo(e),this.highestTargetId=e),t.sequenceNumber>this.si&&(this.si=t.sequenceNumber)}addTargetData(t,e){return this.hr(e),this.targetCount+=1,tt.resolve()}updateTargetData(t,e){return this.hr(e),tt.resolve()}removeTargetData(t,e){return this.ii.delete(e.target),this.oi.zr(e.targetId),this.targetCount-=1,tt.resolve()}removeTargets(t,e,i){let r=0;const o=[];return this.ii.forEach((c,h)=>{h.sequenceNumber<=e&&i.get(h.targetId)===null&&(this.ii.delete(c),o.push(this.removeMatchingKeysForTargetId(t,h.targetId)),r++)}),tt.waitFor(o).next(()=>r)}getTargetCount(t){return tt.resolve(this.targetCount)}getTargetData(t,e){const i=this.ii.get(e)||null;return tt.resolve(i)}addMatchingKeys(t,e,i){return this.oi.Kr(e,i),tt.resolve()}removeMatchingKeys(t,e,i){this.oi.Gr(e,i);const r=this.persistence.referenceDelegate,o=[];return r&&e.forEach(c=>{o.push(r.markPotentiallyOrphaned(t,c))}),tt.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this.oi.zr(e),tt.resolve()}getMatchingKeysForTargetId(t,e){const i=this.oi.Jr(e);return tt.resolve(i)}containsKey(t,e){return tt.resolve(this.oi.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(t,e){this.ai={},this.overlays={},this.ui=new Gf(0),this.ci=!1,this.ci=!0,this.li=new AO,this.referenceDelegate=t(this),this.hi=new IO(this),this.indexManager=new fO,this.remoteDocumentCache=function(r){return new RO(r)}(i=>this.referenceDelegate.Pi(i)),this.serializer=new uO(e),this.Ti=new TO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new SO,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.ai[t.toKey()];return i||(i=new wO(e,this.referenceDelegate),this.ai[t.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(t,e,i){ht("MemoryPersistence","Starting transaction:",t);const r=new CO(this.ui.next());return this.referenceDelegate.Ii(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ei(t,e){return tt.or(Object.values(this.ai).map(i=>()=>i.containsKey(t,e)))}}class CO extends sD{constructor(t){super(),this.currentSequenceNumber=t}}class Fp{constructor(t){this.persistence=t,this.Ai=new Hp,this.Ri=null}static Vi(t){return new Fp(t)}get mi(){if(this.Ri)return this.Ri;throw Et(60996)}addReference(t,e,i){return this.Ai.addReference(i,e),this.mi.delete(i.toString()),tt.resolve()}removeReference(t,e,i){return this.Ai.removeReference(i,e),this.mi.add(i.toString()),tt.resolve()}markPotentiallyOrphaned(t,e){return this.mi.add(e.toString()),tt.resolve()}removeTarget(t,e){this.Ai.zr(e.targetId).forEach(r=>this.mi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(o=>this.mi.add(o.toString()))}).next(()=>i.removeTargetData(t,e))}Ii(){this.Ri=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return tt.forEach(this.mi,i=>{const r=pt.fromPath(i);return this.fi(t,r).next(o=>{o||e.removeEntry(r,St.min())})}).next(()=>(this.Ri=null,e.apply(t)))}updateLimboDocument(t,e){return this.fi(t,e).next(i=>{i?this.mi.delete(e.toString()):this.mi.add(e.toString())})}Pi(t){return 0}fi(t,e){return tt.or([()=>tt.resolve(this.Ai.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ei(t,e)])}}class xf{constructor(t,e){this.persistence=t,this.gi=new Aa(i=>oD(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=yO(this,e)}static Vi(t,e){return new xf(t,e)}Ii(){}di(t){return tt.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}mr(t){const e=this.yr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}yr(t){let e=0;return this.gr(t,i=>{e++}).next(()=>e)}gr(t,e){return tt.forEach(this.gi,(i,r)=>this.Sr(t,i,r).next(o=>o?tt.resolve():e(r)))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ri(t,c=>this.Sr(t,c,e).next(h=>{h||(i++,o.removeEntry(c,St.min()))})).next(()=>o.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,e){return this.gi.set(e,t.currentSequenceNumber),tt.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.gi.set(i,t.currentSequenceNumber),tt.resolve()}removeReference(t,e,i){return this.gi.set(i,t.currentSequenceNumber),tt.resolve()}updateLimboDocument(t,e){return this.gi.set(e,t.currentSequenceNumber),tt.resolve()}Pi(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=nf(t.data.value)),e}Sr(t,e,i){return tt.or([()=>this.persistence.Ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const r=this.gi.get(e);return tt.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Is=i,this.ds=r}static Es(t,e){let i=Pt(),r=Pt();for(const o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new qp(t,e.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return ux()?8:rD(sn())>0?6:4}()}initialize(t,e){this.gs=t,this.indexManager=e,this.As=!0}getDocumentsMatchingQuery(t,e,i,r){const o={result:null};return this.ps(t,e).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.ys(t,e,r,i).next(c=>{o.result=c})}).next(()=>{if(o.result)return;const c=new DO;return this.ws(t,e,c).next(h=>{if(o.result=h,this.Rs)return this.Ss(t,e,c,h.size)})}).next(()=>o.result)}Ss(t,e,i,r){return i.documentReadCount<this.Vs?(Eo()<=Nt.DEBUG&&ht("QueryEngine","SDK will not create cache indexes for query:",To(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),tt.resolve()):(Eo()<=Nt.DEBUG&&ht("QueryEngine","Query:",To(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.fs*r?(Eo()<=Nt.DEBUG&&ht("QueryEngine","The SDK decides to create cache indexes for query:",To(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ii(e))):tt.resolve())}ps(t,e){if(Fb(e))return tt.resolve(null);let i=Ii(e);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=Sf(e,null,"F"),i=Ii(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(o=>{const c=Pt(...o);return this.gs.getDocuments(t,c).next(h=>this.indexManager.getMinOffset(t,i).next(d=>{const m=this.bs(e,h);return this.Ds(e,m,c,d.readTime)?this.ps(t,Sf(e,null,"F")):this.vs(t,m,e,d)}))})))}ys(t,e,i,r){return Fb(e)||r.isEqual(St.min())?tt.resolve(null):this.gs.getDocuments(t,i).next(o=>{const c=this.bs(e,o);return this.Ds(e,c,i,r)?tt.resolve(null):(Eo()<=Nt.DEBUG&&ht("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),To(e)),this.vs(t,c,e,tD(r,Uc)).next(h=>h))})}bs(t,e){let i=new Ne(aA(t));return e.forEach((r,o)=>{Xf(t,o)&&(i=i.add(o))}),i}Ds(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}ws(t,e,i){return Eo()<=Nt.DEBUG&&ht("QueryEngine","Using full collection scan to execute query:",To(e)),this.gs.getDocumentsMatchingQuery(t,e,gr.min(),i)}vs(t,e,i,r){return this.gs.getDocumentsMatchingQuery(t,i,r).next(o=>(e.forEach(c=>{o=o.insert(c.key,c)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp="LocalStore",MO=3e8;class kO{constructor(t,e,i,r){this.persistence=t,this.Cs=e,this.serializer=r,this.Fs=new fe(Ct),this.Ms=new Aa(o=>Np(o),Pp),this.xs=new Map,this.Os=t.getRemoteDocumentCache(),this.hi=t.getTargetCache(),this.Ti=t.getBundleCache(),this.Ns(i)}Ns(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new EO(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Fs))}}function NO(n,t,e,i){return new kO(n,t,e,i)}async function CA(n,t){const e=Rt(n);return await e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,e.Ns(t),e.mutationQueue.getAllMutationBatches(i))).next(o=>{const c=[],h=[];let d=Pt();for(const m of r){c.push(m.batchId);for(const _ of m.mutations)d=d.add(_.key)}for(const m of o){h.push(m.batchId);for(const _ of m.mutations)d=d.add(_.key)}return e.localDocuments.getDocuments(i,d).next(m=>({Bs:m,removedBatchIds:c,addedBatchIds:h}))})})}function PO(n,t){const e=Rt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),o=e.Os.newChangeBuffer({trackRemovals:!0});return function(h,d,m,_){const v=m.batch,T=v.keys();let A=tt.resolve();return T.forEach(I=>{A=A.next(()=>_.getEntry(d,I)).next(k=>{const M=m.docVersions.get(I);Gt(M!==null,48541),k.version.compareTo(M)<0&&(v.applyToRemoteDocument(k,m),k.isValidDocument()&&(k.setReadTime(m.commitVersion),_.addEntry(k)))})}),A.next(()=>h.mutationQueue.removeMutationBatch(d,v))}(e,i,t,o).next(()=>o.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let d=Pt();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(d=d.add(h.batch.mutations[m].key));return d}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function DA(n){const t=Rt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.hi.getLastRemoteSnapshotVersion(e))}function VO(n,t){const e=Rt(n),i=t.snapshotVersion;let r=e.Fs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=e.Os.newChangeBuffer({trackRemovals:!0});r=e.Fs;const h=[];t.targetChanges.forEach((_,v)=>{const T=r.get(v);if(!T)return;h.push(e.hi.removeMatchingKeys(o,_.removedDocuments,v).next(()=>e.hi.addMatchingKeys(o,_.addedDocuments,v)));let A=T.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(v)!==null?A=A.withResumeToken(We.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):_.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(_.resumeToken,i)),r=r.insert(v,A),function(k,M,G){return k.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=MO?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0}(T,A,_)&&h.push(e.hi.updateTargetData(o,A))});let d=ms(),m=Pt();if(t.documentUpdates.forEach(_=>{t.resolvedLimboDocuments.has(_)&&h.push(e.persistence.referenceDelegate.updateLimboDocument(o,_))}),h.push(LO(o,c,t.documentUpdates).next(_=>{d=_.Ls,m=_.ks})),!i.isEqual(St.min())){const _=e.hi.getLastRemoteSnapshotVersion(o).next(v=>e.hi.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(_)}return tt.waitFor(h).next(()=>c.apply(o)).next(()=>e.localDocuments.getLocalViewOfDocuments(o,d,m)).next(()=>d)}).then(o=>(e.Fs=r,o))}function LO(n,t,e){let i=Pt(),r=Pt();return e.forEach(o=>i=i.add(o)),t.getEntries(n,i).next(o=>{let c=ms();return e.forEach((h,d)=>{const m=o.get(h);d.isFoundDocument()!==m.isFoundDocument()&&(r=r.add(h)),d.isNoDocument()&&d.version.isEqual(St.min())?(t.removeEntry(h,d.readTime),c=c.insert(h,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(t.addEntry(d),c=c.insert(h,d)):ht(Gp,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",d.version)}),{Ls:c,ks:r}})}function UO(n,t){const e=Rt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=Op),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function zO(n,t){const e=Rt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.hi.getTargetData(i,t).next(o=>o?(r=o,tt.resolve(r)):e.hi.allocateTargetId(i).next(c=>(r=new Zs(t,c,"TargetPurposeListen",i.currentSequenceNumber),e.hi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.Fs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Fs=e.Fs.insert(i.targetId,i),e.Ms.set(t,i.targetId)),i})}async function np(n,t,e){const i=Rt(n),r=i.Fs.get(t),o=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",o,c=>i.persistence.referenceDelegate.removeTarget(c,r))}catch(c){if(!$o(c))throw c;ht(Gp,`Failed to update sequence numbers for target ${t}: ${c}`)}i.Fs=i.Fs.remove(t),i.Ms.delete(r.target)}function nE(n,t,e){const i=Rt(n);let r=St.min(),o=Pt();return i.persistence.runTransaction("Execute query","readwrite",c=>function(d,m,_){const v=Rt(d),T=v.Ms.get(_);return T!==void 0?tt.resolve(v.Fs.get(T)):v.hi.getTargetData(m,_)}(i,c,Ii(t)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(c,h.targetId).next(d=>{o=d})}).next(()=>i.Cs.getDocumentsMatchingQuery(c,t,e?r:St.min(),e?o:Pt())).next(h=>(BO(i,RD(t),h),{documents:h,qs:o})))}function BO(n,t,e){let i=n.xs.get(t)||St.min();e.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.xs.set(t,i)}class iE{constructor(){this.activeTargetIds=MD()}Gs(t){this.activeTargetIds=this.activeTargetIds.add(t)}zs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class jO{constructor(){this.Fo=new iE,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.Fo.Gs(t),this.Mo[t]||"not-current"}updateQueryState(t,e,i){this.Mo[t]=e}removeLocalQueryTarget(t){this.Fo.zs(t)}isLocalQueryTarget(t){return this.Fo.activeTargetIds.has(t)}clearQueryState(t){delete this.Mo[t]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(t){return this.Fo.activeTargetIds.has(t)}start(){return this.Fo=new iE,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{xo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="ConnectivityMonitor";class rE{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(t){this.ko.push(t)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ht(sE,"Network connectivity changed: AVAILABLE");for(const t of this.ko)t(0)}Lo(){ht(sE,"Network connectivity changed: UNAVAILABLE");for(const t of this.ko)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lh=null;function ip(){return Lh===null?Lh=function(){return 268435456+Math.round(2147483648*Math.random())}():Lh++,"0x"+Lh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm="RestConnection",FO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qO{get Qo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=e+"://"+t.host,this.Uo=`projects/${i}/databases/${r}`,this.Ko=this.databaseId.database===bf?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(t,e,i,r,o){const c=ip(),h=this.Go(t,e.toUriEncodedString());ht(Tm,`Sending RPC '${t}' ${c}:`,h,i);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(d,r,o);const{host:m}=new URL(h),_=Go(m);return this.jo(t,h,d,i,_).then(v=>(ht(Tm,`Received RPC '${t}' ${c}: `,v),v),v=>{throw dr(Tm,`RPC '${t}' ${c} failed with error: `,v,"url: ",h,"request:",i),v})}Jo(t,e,i,r,o,c){return this.Wo(t,e,i,r,o)}zo(t,e,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,o)=>t[o]=r),i&&i.headers.forEach((r,o)=>t[o]=r)}Go(t,e){const i=FO[t];return`${this.$o}/v1/${e}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(t){this.Ho=t.Ho,this.Yo=t.Yo}Zo(t){this.Xo=t}e_(t){this.t_=t}n_(t){this.r_=t}onMessage(t){this.i_=t}close(){this.Yo()}send(t){this.Ho(t)}s_(){this.Xo()}o_(){this.t_()}__(t){this.r_(t)}a_(t){this.i_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection";class YO extends qO{constructor(t){super(t),this.u_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}jo(t,e,i,r,o){const c=ip();return new Promise((h,d)=>{const m=new MS;m.setWithCredentials(!0),m.listenOnce(kS.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case ef.NO_ERROR:const v=m.getResponseJson();ht(tn,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(v)),h(v);break;case ef.TIMEOUT:ht(tn,`RPC '${t}' ${c} timed out`),d(new ut(Z.DEADLINE_EXCEEDED,"Request time out"));break;case ef.HTTP_ERROR:const T=m.getStatus();if(ht(tn,`RPC '${t}' ${c} failed with status:`,T,"response text:",m.getResponseText()),T>0){let A=m.getResponseJson();Array.isArray(A)&&(A=A[0]);const I=A?.error;if(I&&I.status&&I.message){const k=function(G){const X=G.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(X)>=0?X:Z.UNKNOWN}(I.status);d(new ut(k,I.message))}else d(new ut(Z.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new ut(Z.UNAVAILABLE,"Connection failed."));break;default:Et(9055,{c_:t,streamId:c,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{ht(tn,`RPC '${t}' ${c} completed.`)}});const _=JSON.stringify(r);ht(tn,`RPC '${t}' ${c} sending request:`,r),m.send(e,"POST",_,i,15)})}P_(t,e,i){const r=ip(),o=[this.$o,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=VS(),h=PS(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.zo(d.initMessageHeaders,e,i),d.encodeInitMessageHeaders=!0;const _=o.join("");ht(tn,`Creating RPC '${t}' stream ${r}: ${_}`,d);const v=c.createWebChannel(_,d);this.T_(v);let T=!1,A=!1;const I=new GO({Ho:M=>{A?ht(tn,`Not sending because RPC '${t}' stream ${r} is closed:`,M):(T||(ht(tn,`Opening RPC '${t}' stream ${r} transport.`),v.open(),T=!0),ht(tn,`RPC '${t}' stream ${r} sending:`,M),v.send(M))},Yo:()=>v.close()}),k=(M,G,X)=>{M.listen(G,et=>{try{X(et)}catch(it){setTimeout(()=>{throw it},0)}})};return k(v,vc.EventType.OPEN,()=>{A||(ht(tn,`RPC '${t}' stream ${r} transport opened.`),I.s_())}),k(v,vc.EventType.CLOSE,()=>{A||(A=!0,ht(tn,`RPC '${t}' stream ${r} transport closed`),I.__(),this.I_(v))}),k(v,vc.EventType.ERROR,M=>{A||(A=!0,dr(tn,`RPC '${t}' stream ${r} transport errored. Name:`,M.name,"Message:",M.message),I.__(new ut(Z.UNAVAILABLE,"The operation could not be completed")))}),k(v,vc.EventType.MESSAGE,M=>{var G;if(!A){const X=M.data[0];Gt(!!X,16349);const et=X,it=et?.error||((G=et[0])===null||G===void 0?void 0:G.error);if(it){ht(tn,`RPC '${t}' stream ${r} received error:`,it);const W=it.status;let ot=function(x){const N=we[x];if(N!==void 0)return _A(N)}(W),C=it.message;ot===void 0&&(ot=Z.INTERNAL,C="Unknown error status: "+W+" with message "+it.message),A=!0,I.__(new ut(ot,C)),v.close()}else ht(tn,`RPC '${t}' stream ${r} received:`,X),I.a_(X)}}),k(h,NS.STAT_EVENT,M=>{M.stat===Gm.PROXY?ht(tn,`RPC '${t}' stream ${r} detected buffering proxy`):M.stat===Gm.NOPROXY&&ht(tn,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{I.o_()},0),I}terminate(){this.u_.forEach(t=>t.close()),this.u_=[]}T_(t){this.u_.push(t)}I_(t){this.u_=this.u_.filter(e=>e===t)}}function Sm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(n){return new WD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(t,e,i=1e3,r=1.5,o=6e4){this.Fi=t,this.timerId=e,this.d_=i,this.E_=r,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const e=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),r=Math.max(0,e-i);r>0&&ht("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),t())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="PersistentStream";class MA{constructor(t,e,i,r,o,c,h,d){this.Fi=t,this.w_=i,this.S_=r,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new OA(t,e)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(t){this.q_(),this.stream.send(t)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,t!==4?this.F_.reset():e&&e.code===Z.RESOURCE_EXHAUSTED?(gs(e.toString()),gs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):e&&e.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.n_(e)}U_(){}auth(){this.state=1;const t=this.K_(this.b_),e=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.b_===e&&this.W_(i,r)},i=>{t(()=>{const r=new ut(Z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(r)})})}W_(t,e){const i=this.K_(this.b_);this.stream=this.z_(t,e),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(r=>{i(()=>this.G_(r))}),this.stream.onMessage(r=>{i(()=>++this.C_==1?this.j_(r):this.onNext(r))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(t){return ht(aE,`close with error: ${t}`),this.stream=null,this.close(4,t)}K_(t){return e=>{this.Fi.enqueueAndForget(()=>this.b_===t?e():(ht(aE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class KO extends MA{constructor(t,e,i,r,o,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,c),this.serializer=o}z_(t,e){return this.connection.P_("Listen",t,e)}j_(t){return this.onNext(t)}onNext(t){this.F_.reset();const e=JD(this.serializer,t),i=function(o){if(!("targetChange"in o))return St.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?St.min():c.readTime?Di(c.readTime):St.min()}(t);return this.listener.J_(e,i)}H_(t){const e={};e.database=ep(this.serializer),e.addTarget=function(o,c){let h;const d=c.target;if(h=Wm(d)?{documents:nO(o,d)}:{query:iO(o,d).Vt},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=bA(o,c.resumeToken);const m=Zm(o,c.expectedCount);m!==null&&(h.expectedCount=m)}else if(c.snapshotVersion.compareTo(St.min())>0){h.readTime=Rf(o,c.snapshotVersion.toTimestamp());const m=Zm(o,c.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,t);const i=rO(this.serializer,t);i&&(e.labels=i),this.k_(e)}Y_(t){const e={};e.database=ep(this.serializer),e.removeTarget=t,this.k_(e)}}class QO extends MA{constructor(t,e,i,r,o,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,c),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(t,e){return this.connection.P_("Write",t,e)}j_(t){return Gt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Gt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ea()}onNext(t){Gt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.F_.reset();const e=eO(t.writeResults,t.commitTime),i=Di(t.commitTime);return this.listener.ta(i,e)}na(){const t={};t.database=ep(this.serializer),this.k_(t)}X_(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>tO(this.serializer,i))};this.k_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{}class WO extends XO{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new ut(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,e,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Wo(t,Jm(e,i),r,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ut(Z.UNKNOWN,o.toString())})}Jo(t,e,i,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Jo(t,Jm(e,i),r,c,h,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ut(Z.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class $O{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(t){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ua("Offline")))}set(t){this.ha(),this.sa=0,t==="Online"&&(this._a=!1),this.ua(t)}ua(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ca(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(gs(e),this._a=!1):ht("OnlineStateTracker",e)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba="RemoteStore";class ZO{constructor(t,e,i,r,o){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(c=>{i.enqueueAndForget(async()=>{Ra(this)&&(ht(ba,"Restarting streams for network reachability change."),await async function(d){const m=Rt(d);m.Ia.add(4),await iu(m),m.Aa.set("Unknown"),m.Ia.delete(4),await td(m)}(this))})}),this.Aa=new $O(i,r)}}async function td(n){if(Ra(n))for(const t of n.da)await t(!0)}async function iu(n){for(const t of n.da)await t(!1)}function kA(n,t){const e=Rt(n);e.Ta.has(t.targetId)||(e.Ta.set(t.targetId,t),Xp(e)?Qp(e):Jo(e).x_()&&Kp(e,t))}function Yp(n,t){const e=Rt(n),i=Jo(e);e.Ta.delete(t),i.x_()&&NA(e,t),e.Ta.size===0&&(i.x_()?i.B_():Ra(e)&&e.Aa.set("Unknown"))}function Kp(n,t){if(n.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(St.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Jo(n).H_(t)}function NA(n,t){n.Ra.$e(t),Jo(n).Y_(t)}function Qp(n){n.Ra=new YD({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>n.Ta.get(t)||null,lt:()=>n.datastore.serializer.databaseId}),Jo(n).start(),n.Aa.aa()}function Xp(n){return Ra(n)&&!Jo(n).M_()&&n.Ta.size>0}function Ra(n){return Rt(n).Ia.size===0}function PA(n){n.Ra=void 0}async function JO(n){n.Aa.set("Online")}async function tM(n){n.Ta.forEach((t,e)=>{Kp(n,t)})}async function eM(n,t){PA(n),Xp(n)?(n.Aa.la(t),Qp(n)):n.Aa.set("Unknown")}async function nM(n,t,e){if(n.Aa.set("Online"),t instanceof vA&&t.state===2&&t.cause)try{await async function(r,o){const c=o.cause;for(const h of o.targetIds)r.Ta.has(h)&&(await r.remoteSyncer.rejectListen(h,c),r.Ta.delete(h),r.Ra.removeTarget(h))}(n,t)}catch(i){ht(ba,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await If(n,i)}else if(t instanceof af?n.Ra.Ye(t):t instanceof yA?n.Ra.it(t):n.Ra.et(t),!e.isEqual(St.min()))try{const i=await DA(n.localStore);e.compareTo(i)>=0&&await function(o,c){const h=o.Ra.Pt(c);return h.targetChanges.forEach((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const _=o.Ta.get(m);_&&o.Ta.set(m,_.withResumeToken(d.resumeToken,c))}}),h.targetMismatches.forEach((d,m)=>{const _=o.Ta.get(d);if(!_)return;o.Ta.set(d,_.withResumeToken(We.EMPTY_BYTE_STRING,_.snapshotVersion)),NA(o,d);const v=new Zs(_.target,d,m,_.sequenceNumber);Kp(o,v)}),o.remoteSyncer.applyRemoteEvent(h)}(n,e)}catch(i){ht(ba,"Failed to raise snapshot:",i),await If(n,i)}}async function If(n,t,e){if(!$o(t))throw t;n.Ia.add(1),await iu(n),n.Aa.set("Offline"),e||(e=()=>DA(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ht(ba,"Retrying IndexedDB access"),await e(),n.Ia.delete(1),await td(n)})}function VA(n,t){return t().catch(e=>If(n,e,t))}async function ed(n){const t=Rt(n),e=yr(t);let i=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:Op;for(;iM(t);)try{const r=await UO(t.localStore,i);if(r===null){t.Pa.length===0&&e.B_();break}i=r.batchId,sM(t,r)}catch(r){await If(t,r)}LA(t)&&UA(t)}function iM(n){return Ra(n)&&n.Pa.length<10}function sM(n,t){n.Pa.push(t);const e=yr(n);e.x_()&&e.Z_&&e.X_(t.mutations)}function LA(n){return Ra(n)&&!yr(n).M_()&&n.Pa.length>0}function UA(n){yr(n).start()}async function rM(n){yr(n).na()}async function aM(n){const t=yr(n);for(const e of n.Pa)t.X_(e.mutations)}async function oM(n,t,e){const i=n.Pa.shift(),r=zp.from(i,t,e);await VA(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),await ed(n)}async function lM(n,t){t&&yr(n).Z_&&await async function(i,r){if(function(c){return qD(c)&&c!==Z.ABORTED}(r.code)){const o=i.Pa.shift();yr(i).N_(),await VA(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await ed(i)}}(n,t),LA(n)&&UA(n)}async function oE(n,t){const e=Rt(n);e.asyncQueue.verifyOperationInProgress(),ht(ba,"RemoteStore received new credentials");const i=Ra(e);e.Ia.add(3),await iu(e),i&&e.Aa.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ia.delete(3),await td(e)}async function cM(n,t){const e=Rt(n);t?(e.Ia.delete(2),await td(e)):t||(e.Ia.add(2),await iu(e),e.Aa.set("Unknown"))}function Jo(n){return n.Va||(n.Va=function(e,i,r){const o=Rt(e);return o.ia(),new KO(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Zo:JO.bind(null,n),e_:tM.bind(null,n),n_:eM.bind(null,n),J_:nM.bind(null,n)}),n.da.push(async t=>{t?(n.Va.N_(),Xp(n)?Qp(n):n.Aa.set("Unknown")):(await n.Va.stop(),PA(n))})),n.Va}function yr(n){return n.ma||(n.ma=function(e,i,r){const o=Rt(e);return o.ia(),new QO(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:rM.bind(null,n),n_:lM.bind(null,n),ea:aM.bind(null,n),ta:oM.bind(null,n)}),n.da.push(async t=>{t?(n.ma.N_(),await ed(n)):(await n.ma.stop(),n.Pa.length>0&&(ht(ba,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(t,e,i,r,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,o){const c=Date.now()+i,h=new Wp(t,e,c,r,o);return h.start(i),h}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ut(Z.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $p(n,t){if(gs("AsyncQueue",`${t}: ${n}`),$o(n))return new ut(Z.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{static emptySet(t){return new Do(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||pt.comparator(e.key,i.key):(e,i)=>pt.comparator(e.key,i.key),this.keyedMap=bc(),this.sortedSet=new fe(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Do)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new Do;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(){this.fa=new fe(pt.comparator)}track(t){const e=t.doc.key,i=this.fa.get(e);i?t.type!==0&&i.type===3?this.fa=this.fa.insert(e,t):t.type===3&&i.type!==1?this.fa=this.fa.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.fa=this.fa.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.fa=this.fa.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.fa=this.fa.remove(e):t.type===1&&i.type===2?this.fa=this.fa.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.fa=this.fa.insert(e,{type:2,doc:t.doc}):Et(63341,{At:t,ga:i}):this.fa=this.fa.insert(e,t)}pa(){const t=[];return this.fa.inorderTraversal((e,i)=>{t.push(i)}),t}}class jo{constructor(t,e,i,r,o,c,h,d,m){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(t,e,i,r,o){const c=[];return e.forEach(h=>{c.push({type:0,doc:h})}),new jo(t,e,Do.emptySet(e),c,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Qf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(t=>t.ba())}}class hM{constructor(){this.queries=cE(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(e,i){const r=Rt(e),o=r.queries;r.queries=cE(),o.forEach((c,h)=>{for(const d of h.wa)d.onError(i)})})(this,new ut(Z.ABORTED,"Firestore shutting down"))}}function cE(){return new Aa(n=>rA(n),Qf)}async function zA(n,t){const e=Rt(n);let i=3;const r=t.query;let o=e.queries.get(r);o?!o.Sa()&&t.ba()&&(i=2):(o=new uM,i=t.ba()?0:1);try{switch(i){case 0:o.ya=await e.onListen(r,!0);break;case 1:o.ya=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(c){const h=$p(c,`Initialization of query '${To(t.query)}' failed`);return void t.onError(h)}e.queries.set(r,o),o.wa.push(t),t.va(e.onlineState),o.ya&&t.Ca(o.ya)&&Zp(e)}async function BA(n,t){const e=Rt(n),i=t.query;let r=3;const o=e.queries.get(i);if(o){const c=o.wa.indexOf(t);c>=0&&(o.wa.splice(c,1),o.wa.length===0?r=t.ba()?0:1:!o.Sa()&&t.ba()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function fM(n,t){const e=Rt(n);let i=!1;for(const r of t){const o=r.query,c=e.queries.get(o);if(c){for(const h of c.wa)h.Ca(r)&&(i=!0);c.ya=r}}i&&Zp(e)}function dM(n,t,e){const i=Rt(n),r=i.queries.get(t);if(r)for(const o of r.wa)o.onError(e);i.queries.delete(t)}function Zp(n){n.Da.forEach(t=>{t.next()})}var sp,uE;(uE=sp||(sp={})).Fa="default",uE.Cache="cache";class jA{constructor(t,e,i){this.query=t,this.Ma=e,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new jo(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.xa?this.Na(t)&&(this.Ma.next(t),e=!0):this.Ba(t,this.onlineState)&&(this.La(t),e=!0),this.Oa=t,e}onError(t){this.Ma.error(t)}va(t){this.onlineState=t;let e=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,t)&&(this.La(this.Oa),e=!0),e}Ba(t,e){if(!t.fromCache||!this.ba())return!0;const i=e!=="Offline";return(!this.options.ka||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Na(t){if(t.docChanges.length>0)return!0;const e=this.Oa&&this.Oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}La(t){t=jo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.xa=!0,this.Ma.next(t)}ba(){return this.options.source!==sp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(t){this.key=t}}class FA{constructor(t){this.key=t}}class gM{constructor(t,e){this.query=t,this.Ha=e,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Pt(),this.mutatedKeys=Pt(),this.Xa=aA(t),this.eu=new Do(this.Xa)}get tu(){return this.Ha}nu(t,e){const i=e?e.ru:new lE,r=e?e.eu:this.eu;let o=e?e.mutatedKeys:this.mutatedKeys,c=r,h=!1;const d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,m=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((_,v)=>{const T=r.get(_),A=Xf(this.query,v)?v:null,I=!!T&&this.mutatedKeys.has(T.key),k=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let M=!1;T&&A?T.data.isEqual(A.data)?I!==k&&(i.track({type:3,doc:A}),M=!0):this.iu(T,A)||(i.track({type:2,doc:A}),M=!0,(d&&this.Xa(A,d)>0||m&&this.Xa(A,m)<0)&&(h=!0)):!T&&A?(i.track({type:0,doc:A}),M=!0):T&&!A&&(i.track({type:1,doc:T}),M=!0,(d||m)&&(h=!0)),M&&(A?(c=c.add(A),o=k?o.add(_):o.delete(_)):(c=c.delete(_),o=o.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),o=o.delete(_.key),i.track({type:1,doc:_})}return{eu:c,ru:i,Ds:h,mutatedKeys:o}}iu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){const o=this.eu;this.eu=t.eu,this.mutatedKeys=t.mutatedKeys;const c=t.ru.pa();c.sort((_,v)=>function(A,I){const k=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et(20277,{At:M})}};return k(A)-k(I)}(_.type,v.type)||this.Xa(_.doc,v.doc)),this.su(i),r=r!=null&&r;const h=e&&!r?this.ou():[],d=this.Za.size===0&&this.current&&!r?1:0,m=d!==this.Ya;return this.Ya=d,c.length!==0||m?{snapshot:new jo(this.query,t.eu,o,c,t.mutatedKeys,d===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:h}:{_u:h}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new lE,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(t){return!this.Ha.has(t)&&!!this.eu.has(t)&&!this.eu.get(t).hasLocalMutations}su(t){t&&(t.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=t.current)}ou(){if(!this.current)return[];const t=this.Za;this.Za=Pt(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});const e=[];return t.forEach(i=>{this.Za.has(i)||e.push(new FA(i))}),this.Za.forEach(i=>{t.has(i)||e.push(new HA(i))}),e}uu(t){this.Ha=t.qs,this.Za=Pt();const e=this.nu(t.documents);return this.applyChanges(e,!0)}cu(){return jo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Jp="SyncEngine";class mM{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class pM{constructor(t){this.key=t,this.lu=!1}}class _M{constructor(t,e,i,r,o,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new Aa(h=>rA(h),Qf),this.Tu=new Map,this.Iu=new Set,this.du=new fe(pt.comparator),this.Eu=new Map,this.Au=new Hp,this.Ru={},this.Vu=new Map,this.mu=Bo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function yM(n,t,e=!0){const i=XA(n);let r;const o=i.Pu.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.cu()):r=await qA(i,t,e,!0),r}async function vM(n,t){const e=XA(n);await qA(e,t,!0,!1)}async function qA(n,t,e,i){const r=await zO(n.localStore,Ii(t)),o=r.targetId,c=n.sharedClientState.addLocalQueryTarget(o,e);let h;return i&&(h=await bM(n,t,o,c==="current",r.resumeToken)),n.isPrimaryClient&&e&&kA(n.remoteStore,r),h}async function bM(n,t,e,i,r){n.gu=(v,T,A)=>async function(k,M,G,X){let et=M.view.nu(G);et.Ds&&(et=await nE(k.localStore,M.query,!1).then(({documents:C})=>M.view.nu(C,et)));const it=X&&X.targetChanges.get(M.targetId),W=X&&X.targetMismatches.get(M.targetId)!=null,ot=M.view.applyChanges(et,k.isPrimaryClient,it,W);return fE(k,M.targetId,ot._u),ot.snapshot}(n,v,T,A);const o=await nE(n.localStore,t,!0),c=new gM(t,o.qs),h=c.nu(o.documents),d=nu.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),m=c.applyChanges(h,n.isPrimaryClient,d);fE(n,e,m._u);const _=new mM(t,e,c);return n.Pu.set(t,_),n.Tu.has(e)?n.Tu.get(e).push(t):n.Tu.set(e,[t]),m.snapshot}async function EM(n,t,e){const i=Rt(n),r=i.Pu.get(t),o=i.Tu.get(r.targetId);if(o.length>1)return i.Tu.set(r.targetId,o.filter(c=>!Qf(c,t))),void i.Pu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await np(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),e&&Yp(i.remoteStore,r.targetId),rp(i,r.targetId)}).catch(Wo)):(rp(i,r.targetId),await np(i.localStore,r.targetId,!0))}async function TM(n,t){const e=Rt(n),i=e.Pu.get(t),r=e.Tu.get(i.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),Yp(e.remoteStore,i.targetId))}async function SM(n,t,e){const i=DM(n);try{const r=await function(c,h){const d=Rt(c),m=le.now(),_=h.reduce((A,I)=>A.add(I.key),Pt());let v,T;return d.persistence.runTransaction("Locally write mutations","readwrite",A=>{let I=ms(),k=Pt();return d.Os.getEntries(A,_).next(M=>{I=M,I.forEach((G,X)=>{X.isValidDocument()||(k=k.add(G))})}).next(()=>d.localDocuments.getOverlayedDocuments(A,I)).next(M=>{v=M;const G=[];for(const X of h){const et=zD(X,v.get(X.key).overlayedDocument);et!=null&&G.push(new wa(X.key,et,$S(et.value.mapValue),Ci.exists(!0)))}return d.mutationQueue.addMutationBatch(A,m,G,h)}).next(M=>{T=M;const G=M.applyToLocalDocumentSet(v,k);return d.documentOverlayCache.saveOverlays(A,M.batchId,G)})}).then(()=>({batchId:T.batchId,changes:lA(v)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(c,h,d){let m=c.Ru[c.currentUser.toKey()];m||(m=new fe(Ct)),m=m.insert(h,d),c.Ru[c.currentUser.toKey()]=m}(i,r.batchId,e),await su(i,r.changes),await ed(i.remoteStore)}catch(r){const o=$p(r,"Failed to persist write");e.reject(o)}}async function GA(n,t){const e=Rt(n);try{const i=await VO(e.localStore,t);t.targetChanges.forEach((r,o)=>{const c=e.Eu.get(o);c&&(Gt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?c.lu=!0:r.modifiedDocuments.size>0?Gt(c.lu,14607):r.removedDocuments.size>0&&(Gt(c.lu,42227),c.lu=!1))}),await su(e,i,t)}catch(i){await Wo(i)}}function hE(n,t,e){const i=Rt(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const r=[];i.Pu.forEach((o,c)=>{const h=c.view.va(t);h.snapshot&&r.push(h.snapshot)}),function(c,h){const d=Rt(c);d.onlineState=h;let m=!1;d.queries.forEach((_,v)=>{for(const T of v.wa)T.va(h)&&(m=!0)}),m&&Zp(d)}(i.eventManager,t),r.length&&i.hu.J_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function AM(n,t,e){const i=Rt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.Eu.get(t),o=r&&r.key;if(o){let c=new fe(pt.comparator);c=c.insert(o,nn.newNoDocument(o,St.min()));const h=Pt().add(o),d=new Zf(St.min(),new Map,new fe(Ct),c,h);await GA(i,d),i.du=i.du.remove(o),i.Eu.delete(t),t_(i)}else await np(i.localStore,t,!1).then(()=>rp(i,t,e)).catch(Wo)}async function wM(n,t){const e=Rt(n),i=t.batch.batchId;try{const r=await PO(e.localStore,t);KA(e,i,null),YA(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await su(e,r)}catch(r){await Wo(r)}}async function RM(n,t,e){const i=Rt(n);try{const r=await function(c,h){const d=Rt(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let _;return d.mutationQueue.lookupMutationBatch(m,h).next(v=>(Gt(v!==null,37113),_=v.keys(),d.mutationQueue.removeMutationBatch(m,v))).next(()=>d.mutationQueue.performConsistencyCheck(m)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(m,_,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_)).next(()=>d.localDocuments.getDocuments(m,_))})}(i.localStore,t);KA(i,t,e),YA(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await su(i,r)}catch(r){await Wo(r)}}function YA(n,t){(n.Vu.get(t)||[]).forEach(e=>{e.resolve()}),n.Vu.delete(t)}function KA(n,t,e){const i=Rt(n);let r=i.Ru[i.currentUser.toKey()];if(r){const o=r.get(t);o&&(e?o.reject(e):o.resolve(),r=r.remove(t)),i.Ru[i.currentUser.toKey()]=r}}function rp(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Tu.get(t))n.Pu.delete(i),e&&n.hu.pu(i,e);n.Tu.delete(t),n.isPrimaryClient&&n.Au.zr(t).forEach(i=>{n.Au.containsKey(i)||QA(n,i)})}function QA(n,t){n.Iu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(Yp(n.remoteStore,e),n.du=n.du.remove(t),n.Eu.delete(e),t_(n))}function fE(n,t,e){for(const i of e)i instanceof HA?(n.Au.addReference(i.key,t),xM(n,i)):i instanceof FA?(ht(Jp,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,t),n.Au.containsKey(i.key)||QA(n,i.key)):Et(19791,{yu:i})}function xM(n,t){const e=t.key,i=e.path.canonicalString();n.du.get(e)||n.Iu.has(i)||(ht(Jp,"New document in limbo: "+e),n.Iu.add(i),t_(n))}function t_(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Iu.values().next().value;n.Iu.delete(t);const e=new pt(ae.fromString(t)),i=n.mu.next();n.Eu.set(i,new pM(e)),n.du=n.du.insert(e,i),kA(n.remoteStore,new Zs(Ii(Vp(e.path)),i,"TargetPurposeLimboResolution",Gf.ue))}}async function su(n,t,e){const i=Rt(n),r=[],o=[],c=[];i.Pu.isEmpty()||(i.Pu.forEach((h,d)=>{c.push(i.gu(d,t,e).then(m=>{var _;if((m||e)&&i.isPrimaryClient){const v=m?!m.fromCache:(_=e?.targetChanges.get(d.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(m){r.push(m);const v=qp.Es(d.targetId,m);o.push(v)}}))}),await Promise.all(c),i.hu.J_(r),await async function(d,m){const _=Rt(d);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>tt.forEach(m,T=>tt.forEach(T.Is,A=>_.persistence.referenceDelegate.addReference(v,T.targetId,A)).next(()=>tt.forEach(T.ds,A=>_.persistence.referenceDelegate.removeReference(v,T.targetId,A)))))}catch(v){if(!$o(v))throw v;ht(Gp,"Failed to update sequence numbers: "+v)}for(const v of m){const T=v.targetId;if(!v.fromCache){const A=_.Fs.get(T),I=A.snapshotVersion,k=A.withLastLimboFreeSnapshotVersion(I);_.Fs=_.Fs.insert(T,k)}}}(i.localStore,o))}async function IM(n,t){const e=Rt(n);if(!e.currentUser.isEqual(t)){ht(Jp,"User change. New user:",t.toKey());const i=await CA(e.localStore,t);e.currentUser=t,function(o,c){o.Vu.forEach(h=>{h.forEach(d=>{d.reject(new ut(Z.CANCELLED,c))})}),o.Vu.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await su(e,i.Bs)}}function CM(n,t){const e=Rt(n),i=e.Eu.get(t);if(i&&i.lu)return Pt().add(i.key);{let r=Pt();const o=e.Tu.get(t);if(!o)return r;for(const c of o){const h=e.Pu.get(c);r=r.unionWith(h.view.tu)}return r}}function XA(n){const t=Rt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=GA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=CM.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=AM.bind(null,t),t.hu.J_=fM.bind(null,t.eventManager),t.hu.pu=dM.bind(null,t.eventManager),t}function DM(n){const t=Rt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=wM.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=RM.bind(null,t),t}class Cf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Jf(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,e){return null}Fu(t,e){return null}vu(t){return NO(this.persistence,new OO,t.initialUser,this.serializer)}Du(t){return new IA(Fp.Vi,this.serializer)}bu(t){return new jO}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cf.provider={build:()=>new Cf};class OM extends Cf{constructor(t){super(),this.cacheSizeBytes=t}Cu(t,e){Gt(this.persistence.referenceDelegate instanceof xf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new pO(i,t.asyncQueue,e)}Du(t){const e=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new IA(i=>xf.Vi(i,e),this.serializer)}}class ap{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>hE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=IM.bind(null,this.syncEngine),await cM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new hM}()}createDatastore(t){const e=Jf(t.databaseInfo.databaseId),i=function(o){return new YO(o)}(t.databaseInfo);return function(o,c,h,d){return new WO(o,c,h,d)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,r,o,c,h){return new ZO(i,r,o,c,h)}(this.localStore,this.datastore,t.asyncQueue,e=>hE(this.syncEngine,e,0),function(){return rE.C()?new rE:new HO}())}createSyncEngine(t,e){return function(r,o,c,h,d,m,_){const v=new _M(r,o,c,h,d,m);return _&&(v.fu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(r){const o=Rt(r);ht(ba,"RemoteStore shutting down."),o.Ia.add(5),await iu(o),o.Ea.shutdown(),o.Aa.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}ap.provider={build:()=>new ap};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.xu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.xu(this.observer.error,t):gs("Uncaught Error in snapshot listener:",t.toString()))}Ou(){this.muted=!0}xu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr="FirestoreClient";class MM{constructor(t,e,i,r,o){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=en.UNAUTHENTICATED,this.clientId=Dp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async c=>{ht(vr,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(ht(vr,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=$p(e,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function Am(n,t){n.asyncQueue.verifyOperationInProgress(),ht(vr,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(async r=>{i.isEqual(r)||(await CA(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>{dr("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{ht("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(r=>{dr("Terminating Firestore due to IndexedDb database deletion failed",r)})}),n._offlineComponents=t}async function dE(n,t){n.asyncQueue.verifyOperationInProgress();const e=await kM(n);ht(vr,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>oE(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>oE(t.remoteStore,r)),n._onlineComponents=t}async function kM(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ht(vr,"Using user provided OfflineComponentProvider");try{await Am(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(r){return r.name==="FirebaseError"?r.code===Z.FAILED_PRECONDITION||r.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(e))throw e;dr("Error using user provided cache. Falling back to memory cache: "+e),await Am(n,new Cf)}}else ht(vr,"Using default OfflineComponentProvider"),await Am(n,new OM(void 0));return n._offlineComponents}async function $A(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ht(vr,"Using user provided OnlineComponentProvider"),await dE(n,n._uninitializedComponentsProvider._online)):(ht(vr,"Using default OnlineComponentProvider"),await dE(n,new ap))),n._onlineComponents}function NM(n){return $A(n).then(t=>t.syncEngine)}async function op(n){const t=await $A(n),e=t.eventManager;return e.onListen=yM.bind(null,t.syncEngine),e.onUnlisten=EM.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=vM.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=TM.bind(null,t.syncEngine),e}function PM(n,t,e={}){const i=new or;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,h,d,m){const _=new WA({next:T=>{_.Ou(),c.enqueueAndForget(()=>BA(o,v)),T.fromCache&&d.source==="server"?m.reject(new ut(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(T)},error:T=>m.reject(T)}),v=new jA(h,_,{includeMetadataChanges:!0,ka:!0});return zA(o,v)}(await op(n),n.asyncQueue,t,e,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="firestore.googleapis.com",mE=!0;class pE{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new ut(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=JA,this.ssl=mE}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:mE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=xA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<gO)throw new ut(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}J2("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZA((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ut(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ut(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ut(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class nd{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ut(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ut(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new q2;switch(i.type){case"firstParty":return new Q2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ut(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=gE.get(e);i&&(ht("ComponentProvider","Removing Datastore"),gE.delete(e),i.terminate())}(this),Promise.resolve()}}function VM(n,t,e,i={}){var r;n=lr(n,nd);const o=Go(t),c=n._getSettings(),h=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),d=`${t}:${e}`;o&&(qT(`https://${d}`),GT("Firestore",!0)),c.host!==JA&&c.host!==d&&dr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},c),{host:d,ssl:o,emulatorOptions:i});if(!pa(m,h)&&(n._setSettings(m),i.mockUserToken)){let _,v;if(typeof i.mockUserToken=="string")_=i.mockUserToken,v=en.MOCK_USER;else{_=ex(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new ut(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new en(T)}n._authCredentials=new G2(new US(_,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new _s(this.firestore,t,this._query)}}class ke{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ke(this.firestore,t,this._key)}toJSON(){return{type:ke._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(tu(e,ke._jsonSchema))return new ke(t,i||null,new pt(ae.fromString(e.referencePath)))}}ke._jsonSchemaVersion="firestore/documentReference/1.0",ke._jsonSchema={type:xe("string",ke._jsonSchemaVersion),referencePath:xe("string")};class cr extends _s{constructor(t,e,i){super(t,e,Vp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ke(this.firestore,null,new pt(t))}withConverter(t){return new cr(this.firestore,t,this._path)}}function Oo(n,t,...e){if(n=rn(n),BS("collection","path",t),n instanceof nd){const i=ae.fromString(t,...e);return Cb(i),new cr(n,null,i)}{if(!(n instanceof ke||n instanceof cr))throw new ut(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ae.fromString(t,...e));return Cb(i),new cr(n.firestore,null,i)}}function tw(n,t,...e){if(n=rn(n),arguments.length===1&&(t=Dp.newId()),BS("doc","path",t),n instanceof nd){const i=ae.fromString(t,...e);return Ib(i),new ke(n,null,new pt(i))}{if(!(n instanceof ke||n instanceof cr))throw new ut(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ae.fromString(t,...e));return Ib(i),new ke(n.firestore,n instanceof cr?n.converter:null,new pt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="AsyncQueue";class yE{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new OA(this,"async_queue_retry"),this.oc=()=>{const i=Sm();i&&ht(_E,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=t;const e=Sm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const e=Sm();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise(()=>{});const e=new or;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Zu.push(t),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!$o(t))throw t;ht(_E,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(t){const e=this._c.then(()=>(this.nc=!0,t().catch(i=>{throw this.tc=i,this.nc=!1,gs("INTERNAL UNHANDLED ERROR: ",vE(i)),i}).then(i=>(this.nc=!1,i))));return this._c=e,e}enqueueAfterDelay(t,e,i){this.ac(),this.sc.indexOf(t)>-1&&(e=0);const r=Wp.createAndSchedule(this,t,e,i,o=>this.lc(o));return this.ec.push(r),r}ac(){this.tc&&Et(47125,{hc:vE(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const e of this.ec)if(e.timerId===t)return!0;return!1}Ic(t){return this.Pc().then(()=>{this.ec.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.ec)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Pc()})}dc(t){this.sc.push(t)}lc(t){const e=this.ec.indexOf(t);this.ec.splice(e,1)}}function vE(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(n){return function(e,i){if(typeof e!="object"||e===null)return!1;const r=e;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(n,["next","error","complete"])}class Ho extends nd{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new yE,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new yE(t),this._firestoreClient=void 0,await t}}}function ew(n,t){const e=typeof n=="object"?n:XT(),i=typeof n=="string"?n:bf,r=vp(e,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=JR("firestore");o&&VM(r,...o)}return r}function e_(n){if(n._terminated)throw new ut(Z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||LM(n),n._firestoreClient}function LM(n){var t,e,i;const r=n._freezeSettings(),o=function(h,d,m,_){return new uD(h,d,m,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,ZA(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new MM(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(h){const d=h?._online.build();return{_offline:h?._offline.build(d),_online:d}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Fn(We.fromBase64String(t))}catch(e){throw new ut(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Fn(We.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(tu(t,Fn._jsonSchema))return Fn.fromBase64String(t.bytes)}}Fn._jsonSchemaVersion="firestore/bytes/1.0",Fn._jsonSchema={type:xe("string",Fn._jsonSchemaVersion),bytes:xe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new ut(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ut(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ut(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Ct(this._lat,t._lat)||Ct(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Oi._jsonSchemaVersion}}static fromJSON(t){if(tu(t,Oi._jsonSchema))return new Oi(t.latitude,t.longitude)}}Oi._jsonSchemaVersion="firestore/geoPoint/1.0",Oi._jsonSchema={type:xe("string",Oi._jsonSchemaVersion),latitude:xe("number"),longitude:xe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Mi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(tu(t,Mi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(e=>typeof e=="number"))return new Mi(t.vectorValues);throw new ut(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Mi._jsonSchemaVersion="firestore/vectorValue/1.0",Mi._jsonSchema={type:xe("string",Mi._jsonSchemaVersion),vectorValues:xe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM=/^__.*__$/;class zM{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new wa(t,this.data,this.fieldMask,e,this.fieldTransforms):new eu(t,this.data,e,this.fieldTransforms)}}function iw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et(40011,{Ec:n})}}class i_{constructor(t,e,i,r,o,c){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new i_(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.Rc({path:i,mc:!1});return r.fc(t),r}gc(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.Rc({path:i,mc:!1});return r.Ac(),r}yc(t){return this.Rc({path:void 0,mc:!0})}wc(t){return Df(t,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Ac(){if(this.path)for(let t=0;t<this.path.length;t++)this.fc(this.path.get(t))}fc(t){if(t.length===0)throw this.wc("Document fields must not be empty");if(iw(this.Ec)&&UM.test(t))throw this.wc('Document fields cannot begin and end with "__"')}}class BM{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||Jf(t)}Dc(t,e,i,r=!1){return new i_({Ec:t,methodName:e,bc:i,path:Xe.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sw(n){const t=n._freezeSettings(),e=Jf(n._databaseId);return new BM(n._databaseId,!!t.ignoreUndefinedProperties,e)}function jM(n,t,e,i,r,o={}){const c=n.Dc(o.merge||o.mergeFields?2:0,t,e,r);ow("Data must be an object, but it was:",c,i);const h=rw(i,c);let d,m;if(o.merge)d=new Jn(c.fieldMask),m=c.fieldTransforms;else if(o.mergeFields){const _=[];for(const v of o.mergeFields){const T=FM(t,v,e);if(!c.contains(T))throw new ut(Z.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);GM(_,T)||_.push(T)}d=new Jn(_),m=c.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,m=c.fieldTransforms;return new zM(new Hn(h),d,m)}function HM(n,t,e,i=!1){return s_(e,n.Dc(i?4:3,t))}function s_(n,t){if(aw(n=rn(n)))return ow("Unsupported field value:",t,n),rw(n,t);if(n instanceof nw)return function(i,r){if(!iw(r.Ec))throw r.wc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.mc&&t.Ec!==4)throw t.wc("Nested arrays are not supported");return function(i,r){const o=[];let c=0;for(const h of i){let d=s_(h,r.yc(c));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),c++}return{arrayValue:{values:o}}}(n,t)}return function(i,r){if((i=rn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return kD(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=le.fromDate(i);return{timestampValue:Rf(r.serializer,o)}}if(i instanceof le){const o=new le(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Rf(r.serializer,o)}}if(i instanceof Oi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Fn)return{bytesValue:bA(r.serializer,i._byteString)};if(i instanceof ke){const o=r.databaseId,c=i.firestore._databaseId;if(!c.isEqual(o))throw r.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:jp(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Mi)return function(c,h){return{mapValue:{fields:{[XS]:{stringValue:WS},[Ef]:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw h.wc("VectorValues must only contain numeric values.");return Lp(h.serializer,m)})}}}}}}(i,r);throw r.wc(`Unsupported field value: ${qf(i)}`)}(n,t)}function rw(n,t){const e={};return FS(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Sa(n,(i,r)=>{const o=s_(r,t.Vc(i));o!=null&&(e[i]=o)}),{mapValue:{fields:e}}}function aw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof le||n instanceof Oi||n instanceof Fn||n instanceof ke||n instanceof nw||n instanceof Mi)}function ow(n,t,e){if(!aw(e)||!jS(e)){const i=qf(e);throw i==="an object"?t.wc(n+" a custom object"):t.wc(n+" "+i)}}function FM(n,t,e){if((t=rn(t))instanceof n_)return t._internalPath;if(typeof t=="string")return lw(n,t);throw Df("Field path arguments must be of type string or ",n,!1,void 0,e)}const qM=new RegExp("[~\\*/\\[\\]]");function lw(n,t,e){if(t.search(qM)>=0)throw Df(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new n_(...t.split("."))._internalPath}catch{throw Df(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function Df(n,t,e,i,r){const o=i&&!i.isEmpty(),c=r!==void 0;let h=`Function ${t}() called with invalid data`;e&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||c)&&(d+=" (found",o&&(d+=` in field ${i}`),c&&(d+=` in document ${r}`),d+=")"),new ut(Z.INVALID_ARGUMENT,h+n+d)}function GM(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(t,e,i,r,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ke(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new YM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(id("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class YM extends cw{data(){return super.data()}}function id(n,t){return typeof t=="string"?lw(n,t):t instanceof n_?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ut(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class r_{}class a_ extends r_{}function lp(n,t,...e){let i=[];t instanceof r_&&i.push(t),i=i.concat(e),function(o){const c=o.filter(d=>d instanceof o_).length,h=o.filter(d=>d instanceof sd).length;if(c>1||c>0&&h>0)throw new ut(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class sd extends a_{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new sd(t,e,i)}_apply(t){const e=this._parse(t);return fw(t._query,e),new _s(t.firestore,t.converter,$m(t._query,e))}_parse(t){const e=sw(t.firestore);return function(o,c,h,d,m,_,v){let T;if(m.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ut(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){SE(v,_);const I=[];for(const k of v)I.push(TE(d,o,k));T={arrayValue:{values:I}}}else T=TE(d,o,v)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||SE(v,_),T=HM(h,c,v,_==="in"||_==="not-in");return Re.create(m,_,T)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function EE(n,t,e){const i=t,r=id("where",n);return sd._create(r,i,e)}class o_ extends r_{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new o_(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:ii.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(r,o){let c=r;const h=o.getFlattenedFilters();for(const d of h)fw(c,d),c=$m(c,d)}(t._query,e),new _s(t.firestore,t.converter,$m(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class l_ extends a_{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new l_(t,e)}_apply(t){const e=function(r,o,c){if(r.startAt!==null)throw new ut(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ut(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Hc(o,c)}(t._query,this._field,this._direction);return new _s(t.firestore,t.converter,function(r,o){const c=r.explicitOrderBy.concat([o]);return new Zo(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}}function hw(n,t="asc"){const e=t,i=id("orderBy",n);return l_._create(i,e)}class c_ extends a_{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new c_(t,e,i)}_apply(t){return new _s(t.firestore,t.converter,Sf(t._query,this._limit,this._limitType))}}function KM(n){return c_._create("limit",n,"F")}function TE(n,t,e){if(typeof(e=rn(e))=="string"){if(e==="")throw new ut(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sA(t)&&e.indexOf("/")!==-1)throw new ut(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(ae.fromString(e));if(!pt.isDocumentKey(i))throw new ut(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Lb(n,new pt(i))}if(e instanceof ke)return Lb(n,e._key);throw new ut(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qf(e)}.`)}function SE(n,t){if(!Array.isArray(n)||n.length===0)throw new ut(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function fw(n,t){const e=function(r,o){for(const c of r)for(const h of c.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new ut(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ut(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class QM{convertValue(t,e="none"){switch(_r(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ve(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(pr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Et(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Sa(t,(r,o)=>{i[r]=this.convertValue(o,e)}),i}convertVectorValue(t){var e,i,r;const o=(r=(i=(e=t.fields)===null||e===void 0?void 0:e[Ef].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(c=>ve(c.doubleValue));return new Mi(o)}convertGeoPoint(t){return new Oi(ve(t.latitude),ve(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=Kf(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(zc(t));default:return null}}convertTimestamp(t){const e=mr(t);return new le(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=ae.fromString(t);Gt(RA(i),9688,{name:t});const r=new Bc(i.get(1),i.get(3)),o=new pt(i.popFirst(5));return r.isEqual(e)||gs(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XM(n,t,e){let i;return i=n?n.toFirestore(t):t,i}class Tc{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class da extends cw{constructor(t,e,i,r,o,c){super(t,e,i,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new of(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(id("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ut(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=da._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}da._jsonSchemaVersion="firestore/documentSnapshot/1.0",da._jsonSchema={type:xe("string",da._jsonSchemaVersion),bundleSource:xe("string","DocumentSnapshot"),bundleName:xe("string"),bundle:xe("string")};class of extends da{data(t={}){return super.data(t)}}class ga{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Tc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new of(this._firestore,this._userDataWriter,i.key,i,new Tc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ut(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(h=>{const d=new of(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Tc(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}})}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new of(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Tc(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,_=-1;return h.type!==0&&(m=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),_=c.indexOf(h.doc.key)),{type:WM(h.type),doc:d,oldIndex:m,newIndex:_}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ut(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=ga._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Dp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(e.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function WM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et(61501,{type:n})}}ga._jsonSchemaVersion="firestore/querySnapshot/1.0",ga._jsonSchema={type:xe("string",ga._jsonSchemaVersion),bundleSource:xe("string","QuerySnapshot"),bundleName:xe("string"),bundle:xe("string")};class u_ extends QM{constructor(t){super(),this.firestore=t}convertBytes(t){return new Fn(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ke(this.firestore,null,e)}}function dw(n){n=lr(n,_s);const t=lr(n.firestore,Ho),e=e_(t),i=new u_(t);return uw(n._query),PM(e,n._query).then(r=>new ga(t,i,n,r))}function $M(n){return mw(lr(n.firestore,Ho),[new Up(n._key,Ci.none())])}function gw(n,t){const e=lr(n.firestore,Ho),i=tw(n),r=XM(n.converter,t);return mw(e,[jM(sw(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Ci.exists(!1))]).then(()=>i)}function AE(n,...t){var e,i,r;n=rn(n);let o={includeMetadataChanges:!1,source:"default"},c=0;typeof t[c]!="object"||bE(t[c])||(o=t[c++]);const h={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(bE(t[c])){const v=t[c];t[c]=(e=v.next)===null||e===void 0?void 0:e.bind(v),t[c+1]=(i=v.error)===null||i===void 0?void 0:i.bind(v),t[c+2]=(r=v.complete)===null||r===void 0?void 0:r.bind(v)}let d,m,_;if(n instanceof ke)m=lr(n.firestore,Ho),_=Vp(n._key.path),d={next:v=>{t[c]&&t[c](ZM(m,n,v))},error:t[c+1],complete:t[c+2]};else{const v=lr(n,_s);m=lr(v.firestore,Ho),_=v._query;const T=new u_(m);d={next:A=>{t[c]&&t[c](new ga(m,T,v,A))},error:t[c+1],complete:t[c+2]},uw(n._query)}return function(T,A,I,k){const M=new WA(k),G=new jA(A,M,I);return T.asyncQueue.enqueueAndForget(async()=>zA(await op(T),G)),()=>{M.Ou(),T.asyncQueue.enqueueAndForget(async()=>BA(await op(T),G))}}(e_(m),_,h,d)}function mw(n,t){return function(i,r){const o=new or;return i.asyncQueue.enqueueAndForget(async()=>SM(await NM(i),r,o)),o.promise}(e_(n),t)}function ZM(n,t,e){const i=e.docs.get(t._key),r=new u_(n);return new da(n,r,t._key,i,new Tc(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(r){Xo=r})(Yo),Po(new _a("firestore",(i,{instanceIdentifier:r,options:o})=>{const c=i.getProvider("app").getImmediate(),h=new Ho(new Y2(i.getProvider("auth-internal")),new X2(c,i.getProvider("app-check-internal")),function(m,_){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ut(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bc(m.options.projectId,_)}(c,r),c);return o=Object.assign({useFetchStreams:e},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),sr(Sb,Ab,t),sr(Sb,Ab,"esm2017")})();const JM={apiKey:"AIzaSyBCquZbrEGg9CHUhbzrFhFwDejhc0Mw-aQ",authDomain:"pruebas-c80da.firebaseapp.com",projectId:"pruebas-c80da",storageBucket:"pruebas-c80da.firebasestorage.app",messagingSenderId:"168916926366",appId:"1:168916926366:web:a3b7e882356f6d0cb8a08f",measurementId:"G-XMVGNQ24XY"},pw=QT(JM),cp=B2(pw),Mo=ew(pw);function tk({onLogin:n}){const[t,e]=re.useState(""),[i,r]=re.useState(""),[o,c]=re.useState(""),h=async d=>{d.preventDefault();try{await wC(cp,t,i),n()}catch{c("Credenciales incorrectas o usuario no autorizado")}};return rt.jsxs("div",{className:"max-w-sm mx-auto mt-10 p-4 border rounded shadow",children:[rt.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Inicia sesin"}),rt.jsxs("form",{onSubmit:h,className:"flex flex-col gap-4",children:[rt.jsx("input",{type:"email",placeholder:"Correo",value:t,onChange:d=>e(d.target.value),className:"p-2 border rounded",required:!0}),rt.jsx("input",{type:"password",placeholder:"Contrasea",value:i,onChange:d=>r(d.target.value),className:"p-2 border rounded",required:!0}),o&&rt.jsx("p",{className:"text-red-500 text-sm",children:o}),rt.jsx("button",{type:"submit",className:"bg-blue-500 text-white py-2 rounded hover:bg-blue-600",children:"Entrar"})]})]})}function ek({onAdd:n}){const[t,e]=re.useState(""),i=()=>{t&&(n(t),e(""))};return rt.jsxs("div",{className:"flex flex-col items-center gap-4",children:[rt.jsxs("select",{value:t,onChange:r=>e(r.target.value),className:"border border-gray-300 rounded px-4 py-2",children:[rt.jsx("option",{value:"",children:"Selecciona una bebida"}),rt.jsx("option",{value:"cubata",children:"Cubata"}),rt.jsx("option",{value:"chupito",children:"Chupito"}),rt.jsx("option",{value:"cerveza",children:"Cerveza"})]}),rt.jsx("button",{onClick:i,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-50",disabled:!t,children:"Aadir bebida"})]})}const nk={"vilari.ser@gmail.com":"Sergio","iriasanchezgarcia@gmail.com":"Iria"};function h_({email:n}){const t=nk[n]||"Usuario Desconocido";return rt.jsx("span",{className:"text-gray-700 font-semibold",children:t})}function ik({bebidas:n,uid:t,email:e}){const i=new Date,r=new Date(i.getTime()-24*60*60*1e3),o=n.filter(_=>{const v=new Date(_.timestamp);return _.uid===t&&v>r}),c=o.reduce((_,v)=>(_[v.tipo]=_[v.tipo]?[..._[v.tipo],v]:[v],_),{}),h=["cerveza","cubata","chupito"],d=async _=>{try{await gw(Oo(Mo,"bebidas"),{uid:t,tipo:_,email:e,timestamp:new Date().toISOString()})}catch(v){console.error("Error aadiendo bebida:",v)}},m=async _=>{try{const v=lp(Oo(Mo,"bebidas"),EE("uid","==",t),EE("tipo","==",_),hw("timestamp","desc"),KM(1)),T=await dw(v);if(!T.empty){const A=T.docs[0];await $M(tw(Mo,"bebidas",A.id))}}catch(v){console.error("Error eliminando bebida:",v)}};return rt.jsxs("div",{className:"mt-6",children:[rt.jsx("h2",{className:"text-lg font-bold mb-2",children:" Editar Mis Bebidas (ltimas 24h)"}),h.map(_=>{const v=c[_]?.length||0;return rt.jsxs("div",{className:"flex items-center justify-between border rounded p-2 my-1",children:[rt.jsxs("span",{className:"font-semibold",children:[_,"s"]}),rt.jsxs("div",{className:"flex items-center space-x-3",children:[rt.jsx("button",{onClick:()=>m(_),className:"bg-red-500 text-white px-3 py-1 rounded disabled:opacity-50",disabled:v===0,"aria-label":`Eliminar una bebida de tipo ${_}`,children:"-"}),rt.jsx("span",{className:"w-6 text-center",children:v}),rt.jsx("button",{onClick:()=>d(_),className:"bg-green-500 text-white px-3 py-1 rounded","aria-label":`Aadir una bebida de tipo ${_}`,children:"+"})]})]},_)}),o.length===0&&rt.jsx("p",{className:"text-sm text-gray-600 mt-4",children:"No tienes bebidas registradas."})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ru(n){return n+.5|0}const Js=(n,t,e)=>Math.max(Math.min(n,e),t);function Sc(n){return Js(ru(n*2.55),0,255)}function ur(n){return Js(ru(n*255),0,255)}function cs(n){return Js(ru(n/2.55)/100,0,1)}function wE(n){return Js(ru(n*100),0,100)}const jn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},up=[..."0123456789ABCDEF"],sk=n=>up[n&15],rk=n=>up[(n&240)>>4]+up[n&15],Uh=n=>(n&240)>>4===(n&15),ak=n=>Uh(n.r)&&Uh(n.g)&&Uh(n.b)&&Uh(n.a);function ok(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&jn[n[1]]*17,g:255&jn[n[2]]*17,b:255&jn[n[3]]*17,a:t===5?jn[n[4]]*17:255}:(t===7||t===9)&&(e={r:jn[n[1]]<<4|jn[n[2]],g:jn[n[3]]<<4|jn[n[4]],b:jn[n[5]]<<4|jn[n[6]],a:t===9?jn[n[7]]<<4|jn[n[8]]:255})),e}const lk=(n,t)=>n<255?t(n):"";function ck(n){var t=ak(n)?sk:rk;return n?"#"+t(n.r)+t(n.g)+t(n.b)+lk(n.a,t):void 0}const uk=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function _w(n,t,e){const i=t*Math.min(e,1-e),r=(o,c=(o+n/30)%12)=>e-i*Math.max(Math.min(c-3,9-c,1),-1);return[r(0),r(8),r(4)]}function hk(n,t,e){const i=(r,o=(r+n/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function fk(n,t,e){const i=_w(n,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)i[r]*=1-t-e,i[r]+=t;return i}function dk(n,t,e,i,r){return n===r?(t-e)/i+(t<e?6:0):t===r?(e-n)/i+2:(n-t)/i+4}function f_(n){const e=n.r/255,i=n.g/255,r=n.b/255,o=Math.max(e,i,r),c=Math.min(e,i,r),h=(o+c)/2;let d,m,_;return o!==c&&(_=o-c,m=h>.5?_/(2-o-c):_/(o+c),d=dk(e,i,r,_,o),d=d*60+.5),[d|0,m||0,h]}function d_(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(ur)}function g_(n,t,e){return d_(_w,n,t,e)}function gk(n,t,e){return d_(fk,n,t,e)}function mk(n,t,e){return d_(hk,n,t,e)}function yw(n){return(n%360+360)%360}function pk(n){const t=uk.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?Sc(+t[5]):ur(+t[5]));const r=yw(+t[2]),o=+t[3]/100,c=+t[4]/100;return t[1]==="hwb"?i=gk(r,o,c):t[1]==="hsv"?i=mk(r,o,c):i=g_(r,o,c),{r:i[0],g:i[1],b:i[2],a:e}}function _k(n,t){var e=f_(n);e[0]=yw(e[0]+t),e=g_(e),n.r=e[0],n.g=e[1],n.b=e[2]}function yk(n){if(!n)return;const t=f_(n),e=t[0],i=wE(t[1]),r=wE(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${r}%, ${cs(n.a)})`:`hsl(${e}, ${i}%, ${r}%)`}const RE={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},xE={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function vk(){const n={},t=Object.keys(xE),e=Object.keys(RE);let i,r,o,c,h;for(i=0;i<t.length;i++){for(c=h=t[i],r=0;r<e.length;r++)o=e[r],h=h.replace(o,RE[o]);o=parseInt(xE[c],16),n[h]=[o>>16&255,o>>8&255,o&255]}return n}let zh;function bk(n){zh||(zh=vk(),zh.transparent=[0,0,0,0]);const t=zh[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const Ek=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Tk(n){const t=Ek.exec(n);let e=255,i,r,o;if(t){if(t[7]!==i){const c=+t[7];e=t[8]?Sc(c):Js(c*255,0,255)}return i=+t[1],r=+t[3],o=+t[5],i=255&(t[2]?Sc(i):Js(i,0,255)),r=255&(t[4]?Sc(r):Js(r,0,255)),o=255&(t[6]?Sc(o):Js(o,0,255)),{r:i,g:r,b:o,a:e}}}function Sk(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${cs(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const wm=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,bo=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function Ak(n,t,e){const i=bo(cs(n.r)),r=bo(cs(n.g)),o=bo(cs(n.b));return{r:ur(wm(i+e*(bo(cs(t.r))-i))),g:ur(wm(r+e*(bo(cs(t.g))-r))),b:ur(wm(o+e*(bo(cs(t.b))-o))),a:n.a+e*(t.a-n.a)}}function Bh(n,t,e){if(n){let i=f_(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=g_(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function vw(n,t){return n&&Object.assign(t||{},n)}function IE(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=ur(n[3]))):(t=vw(n,{r:0,g:0,b:0,a:1}),t.a=ur(t.a)),t}function wk(n){return n.charAt(0)==="r"?Tk(n):pk(n)}class Gc{constructor(t){if(t instanceof Gc)return t;const e=typeof t;let i;e==="object"?i=IE(t):e==="string"&&(i=ok(t)||bk(t)||wk(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=vw(this._rgb);return t&&(t.a=cs(t.a)),t}set rgb(t){this._rgb=IE(t)}rgbString(){return this._valid?Sk(this._rgb):void 0}hexString(){return this._valid?ck(this._rgb):void 0}hslString(){return this._valid?yk(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,r=t.rgb;let o;const c=e===o?.5:e,h=2*c-1,d=i.a-r.a,m=((h*d===-1?h:(h+d)/(1+h*d))+1)/2;o=1-m,i.r=255&m*i.r+o*r.r+.5,i.g=255&m*i.g+o*r.g+.5,i.b=255&m*i.b+o*r.b+.5,i.a=c*i.a+(1-c)*r.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=Ak(this._rgb,t._rgb,e)),this}clone(){return new Gc(this.rgb)}alpha(t){return this._rgb.a=ur(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=ru(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Bh(this._rgb,2,t),this}darken(t){return Bh(this._rgb,2,-t),this}saturate(t){return Bh(this._rgb,1,t),this}desaturate(t){return Bh(this._rgb,1,-t),this}rotate(t){return _k(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function as(){}const Rk=(()=>{let n=0;return()=>n++})();function ne(n){return n==null}function He(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function jt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function qn(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Ti(n,t){return qn(n)?n:t}function Ft(n,t){return typeof n>"u"?t:n}const xk=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function oe(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function Xt(n,t,e,i){let r,o,c;if(He(n))for(o=n.length,r=0;r<o;r++)t.call(e,n[r],r);else if(jt(n))for(c=Object.keys(n),o=c.length,r=0;r<o;r++)t.call(e,n[c[r]],c[r])}function Of(n,t){let e,i,r,o;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(r=n[e],o=t[e],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function Mf(n){if(He(n))return n.map(Mf);if(jt(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let r=0;for(;r<i;++r)t[e[r]]=Mf(n[e[r]]);return t}return n}function bw(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function Ik(n,t,e,i){if(!bw(n))return;const r=t[n],o=e[n];jt(r)&&jt(o)?Yc(r,o,i):t[n]=Mf(o)}function Yc(n,t,e){const i=He(t)?t:[t],r=i.length;if(!jt(n))return n;e=e||{};const o=e.merger||Ik;let c;for(let h=0;h<r;++h){if(c=i[h],!jt(c))continue;const d=Object.keys(c);for(let m=0,_=d.length;m<_;++m)o(d[m],n,c,e)}return n}function Mc(n,t){return Yc(n,t,{merger:Ck})}function Ck(n,t,e){if(!bw(n))return;const i=t[n],r=e[n];jt(i)&&jt(r)?Mc(i,r):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=Mf(r))}const CE={"":n=>n,x:n=>n.x,y:n=>n.y};function Dk(n){const t=n.split("."),e=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function Ok(n){const t=Dk(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function Fo(n,t){return(CE[t]||(CE[t]=Ok(t)))(n)}function m_(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Kc=n=>typeof n<"u",br=n=>typeof n=="function",DE=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function Mk(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const _n=Math.PI,hr=2*_n,kf=Number.POSITIVE_INFINITY,kk=_n/180,ti=_n/2,ra=_n/4,OE=_n*2/3,Ew=Math.log10,fr=Math.sign;function lf(n,t,e){return Math.abs(n-t)<e}function ME(n){const t=Math.round(n);n=lf(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(Ew(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function Nk(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((r,o)=>r-o).pop(),t}function Pk(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Nf(n){return!Pk(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function Vk(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function Lk(n,t,e){let i,r,o;for(i=0,r=n.length;i<r;i++)o=n[i][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function fa(n){return n*(_n/180)}function Uk(n){return n*(180/_n)}function kE(n){if(!qn(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function zk(n,t){const e=t.x-n.x,i=t.y-n.y,r=Math.sqrt(e*e+i*i);let o=Math.atan2(i,e);return o<-.5*_n&&(o+=hr),{angle:o,distance:r}}function Bk(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function aa(n){return(n%hr+hr)%hr}function jk(n,t,e,i){const r=aa(n),o=aa(t),c=aa(e),h=aa(o-r),d=aa(c-r),m=aa(r-o),_=aa(r-c);return r===o||r===c||i||h>d&&m<_}function ei(n,t,e){return Math.max(t,Math.min(e,n))}function Hk(n){return ei(n,-32768,32767)}function Ro(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function p_(n,t,e){e=e||(c=>n[c]<t);let i=n.length-1,r=0,o;for(;i-r>1;)o=r+i>>1,e(o)?r=o:i=o;return{lo:r,hi:i}}const hp=(n,t,e,i)=>p_(n,e,i?r=>{const o=n[r][t];return o<e||o===e&&n[r+1][t]===e}:r=>n[r][t]<e),Fk=(n,t,e)=>p_(n,e,i=>n[i][t]>=e);function qk(n,t,e){let i=0,r=n.length;for(;i<r&&n[i]<t;)i++;for(;r>i&&n[r-1]>e;)r--;return i>0||r<n.length?n.slice(i,r):n}const Tw=["push","pop","shift","splice","unshift"];function Gk(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Tw.forEach(e=>{const i="_onData"+m_(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...o){const c=r.apply(this,o);return n._chartjs.listeners.forEach(h=>{typeof h[i]=="function"&&h[i](...o)}),c}})})}function NE(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(Tw.forEach(o=>{delete n[o]}),delete n._chartjs)}function Sw(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const Aw=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function ww(n,t){let e=[],i=!1;return function(...r){e=r,i||(i=!0,Aw.call(window,()=>{i=!1,n.apply(t,e)}))}}function Yk(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const Rw=n=>n==="start"?"left":n==="end"?"right":"center",xn=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,Kk=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t,jh=n=>n===0||n===1,PE=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*hr/e)),VE=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*hr/e)+1,kc={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*ti)+1,easeOutSine:n=>Math.sin(n*ti),easeInOutSine:n=>-.5*(Math.cos(_n*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>jh(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>jh(n)?n:PE(n,.075,.3),easeOutElastic:n=>jh(n)?n:VE(n,.075,.3),easeInOutElastic(n){return jh(n)?n:n<.5?.5*PE(n*2,.1125,.45):.5+.5*VE(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-kc.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?kc.easeInBounce(n*2)*.5:kc.easeOutBounce(n*2-1)*.5+.5};function xw(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function LE(n){return xw(n)?n:new Gc(n)}function Rm(n){return xw(n)?n:new Gc(n).saturate(.5).darken(.1).hexString()}const Qk=["x","y","borderWidth","radius","tension"],Xk=["color","borderColor","backgroundColor"];function Wk(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:Xk},numbers:{type:"number",properties:Qk}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function $k(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const UE=new Map;function Zk(n,t){t=t||{};const e=n+JSON.stringify(t);let i=UE.get(e);return i||(i=new Intl.NumberFormat(n,t),UE.set(e,i)),i}function Iw(n,t,e){return Zk(t,e).format(n)}const Jk={values(n){return He(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let r,o=n;if(e.length>1){const m=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(m<1e-4||m>1e15)&&(r="scientific"),o=tN(n,e)}const c=Ew(Math.abs(o)),h=isNaN(c)?1:Math.max(Math.min(-1*Math.floor(c),20),0),d={notation:r,minimumFractionDigits:h,maximumFractionDigits:h};return Object.assign(d,this.options.ticks.format),Iw(n,i,d)}};function tN(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var Cw={formatters:Jk};function eN(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Cw.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Ea=Object.create(null),fp=Object.create(null);function Nc(n,t){if(!t)return n;const e=t.split(".");for(let i=0,r=e.length;i<r;++i){const o=e[i];n=n[o]||(n[o]=Object.create(null))}return n}function xm(n,t,e){return typeof t=="string"?Yc(Nc(n,t),e):Yc(Nc(n,""),t)}class nN{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>Rm(r.backgroundColor),this.hoverBorderColor=(i,r)=>Rm(r.borderColor),this.hoverColor=(i,r)=>Rm(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return xm(this,t,e)}get(t){return Nc(this,t)}describe(t,e){return xm(fp,t,e)}override(t,e){return xm(Ea,t,e)}route(t,e,i,r){const o=Nc(this,t),c=Nc(this,i),h="_"+e;Object.defineProperties(o,{[h]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const d=this[h],m=c[r];return jt(d)?Object.assign({},m,d):Ft(d,m)},set(d){this[h]=d}}})}apply(t){t.forEach(e=>e(this))}}var be=new nN({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Wk,$k,eN]);function iN(n){return!n||ne(n.size)||ne(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function zE(n,t,e,i,r){let o=t[r];return o||(o=t[r]=n.measureText(r).width,e.push(r)),o>i&&(i=o),i}function oa(n,t,e){const i=n.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((t-r)*i)/i+r}function BE(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function jE(n,t,e,i){Dw(n,t,e,i,null)}function Dw(n,t,e,i,r){let o,c,h,d,m,_,v,T;const A=t.pointStyle,I=t.rotation,k=t.radius;let M=(I||0)*kk;if(A&&typeof A=="object"&&(o=A.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(M),n.drawImage(A,-A.width/2,-A.height/2,A.width,A.height),n.restore();return}if(!(isNaN(k)||k<=0)){switch(n.beginPath(),A){default:r?n.ellipse(e,i,r/2,k,0,0,hr):n.arc(e,i,k,0,hr),n.closePath();break;case"triangle":_=r?r/2:k,n.moveTo(e+Math.sin(M)*_,i-Math.cos(M)*k),M+=OE,n.lineTo(e+Math.sin(M)*_,i-Math.cos(M)*k),M+=OE,n.lineTo(e+Math.sin(M)*_,i-Math.cos(M)*k),n.closePath();break;case"rectRounded":m=k*.516,d=k-m,c=Math.cos(M+ra)*d,v=Math.cos(M+ra)*(r?r/2-m:d),h=Math.sin(M+ra)*d,T=Math.sin(M+ra)*(r?r/2-m:d),n.arc(e-v,i-h,m,M-_n,M-ti),n.arc(e+T,i-c,m,M-ti,M),n.arc(e+v,i+h,m,M,M+ti),n.arc(e-T,i+c,m,M+ti,M+_n),n.closePath();break;case"rect":if(!I){d=Math.SQRT1_2*k,_=r?r/2:d,n.rect(e-_,i-d,2*_,2*d);break}M+=ra;case"rectRot":v=Math.cos(M)*(r?r/2:k),c=Math.cos(M)*k,h=Math.sin(M)*k,T=Math.sin(M)*(r?r/2:k),n.moveTo(e-v,i-h),n.lineTo(e+T,i-c),n.lineTo(e+v,i+h),n.lineTo(e-T,i+c),n.closePath();break;case"crossRot":M+=ra;case"cross":v=Math.cos(M)*(r?r/2:k),c=Math.cos(M)*k,h=Math.sin(M)*k,T=Math.sin(M)*(r?r/2:k),n.moveTo(e-v,i-h),n.lineTo(e+v,i+h),n.moveTo(e+T,i-c),n.lineTo(e-T,i+c);break;case"star":v=Math.cos(M)*(r?r/2:k),c=Math.cos(M)*k,h=Math.sin(M)*k,T=Math.sin(M)*(r?r/2:k),n.moveTo(e-v,i-h),n.lineTo(e+v,i+h),n.moveTo(e+T,i-c),n.lineTo(e-T,i+c),M+=ra,v=Math.cos(M)*(r?r/2:k),c=Math.cos(M)*k,h=Math.sin(M)*k,T=Math.sin(M)*(r?r/2:k),n.moveTo(e-v,i-h),n.lineTo(e+v,i+h),n.moveTo(e+T,i-c),n.lineTo(e-T,i+c);break;case"line":c=r?r/2:Math.cos(M)*k,h=Math.sin(M)*k,n.moveTo(e-c,i-h),n.lineTo(e+c,i+h);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(M)*(r?r/2:k),i+Math.sin(M)*k);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function Ow(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function __(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function y_(n){n.restore()}function sN(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),ne(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function rN(n,t,e,i,r){if(r.strikethrough||r.underline){const o=n.measureText(i),c=t-o.actualBoundingBoxLeft,h=t+o.actualBoundingBoxRight,d=e-o.actualBoundingBoxAscent,m=e+o.actualBoundingBoxDescent,_=r.strikethrough?(d+m)/2:m;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(c,_),n.lineTo(h,_),n.stroke()}}function aN(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function Pf(n,t,e,i,r,o={}){const c=He(t)?t:[t],h=o.strokeWidth>0&&o.strokeColor!=="";let d,m;for(n.save(),n.font=r.string,sN(n,o),d=0;d<c.length;++d)m=c[d],o.backdrop&&aN(n,o.backdrop),h&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),ne(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(m,e,i,o.maxWidth)),n.fillText(m,e,i,o.maxWidth),rN(n,e,i,m,o),i+=Number(r.lineHeight);n.restore()}function Vf(n,t){const{x:e,y:i,w:r,h:o,radius:c}=t;n.arc(e+c.topLeft,i+c.topLeft,c.topLeft,1.5*_n,_n,!0),n.lineTo(e,i+o-c.bottomLeft),n.arc(e+c.bottomLeft,i+o-c.bottomLeft,c.bottomLeft,_n,ti,!0),n.lineTo(e+r-c.bottomRight,i+o),n.arc(e+r-c.bottomRight,i+o-c.bottomRight,c.bottomRight,ti,0,!0),n.lineTo(e+r,i+c.topRight),n.arc(e+r-c.topRight,i+c.topRight,c.topRight,0,-ti,!0),n.lineTo(e+c.topLeft,i)}const oN=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,lN=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function cN(n,t){const e=(""+n).match(oN);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const uN=n=>+n||0;function Mw(n,t){const e={},i=jt(t),r=i?Object.keys(t):t,o=jt(n)?i?c=>Ft(n[c],n[t[c]]):c=>n[c]:()=>n;for(const c of r)e[c]=uN(o(c));return e}function kw(n){return Mw(n,{top:"y",right:"x",bottom:"y",left:"x"})}function ko(n){return Mw(n,["topLeft","topRight","bottomLeft","bottomRight"])}function si(n){const t=kw(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function pn(n,t){n=n||{},t=t||be.font;let e=Ft(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=Ft(n.style,t.style);i&&!(""+i).match(lN)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Ft(n.family,t.family),lineHeight:cN(Ft(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:Ft(n.weight,t.weight),string:""};return r.string=iN(r),r}function Hh(n,t,e,i){let r,o,c;for(r=0,o=n.length;r<o;++r)if(c=n[r],c!==void 0&&c!==void 0)return c}function hN(n,t,e){const{min:i,max:r}=n,o=xk(t,(r-i)/2),c=(h,d)=>e&&h===0?0:h+d;return{min:c(i,-Math.abs(o)),max:c(r,o)}}function tl(n,t){return Object.assign(Object.create(n),t)}function v_(n,t=[""],e,i,r=()=>n[0]){const o=e||n;typeof i>"u"&&(i=Lw("_fallback",n));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:i,_getTarget:r,override:h=>v_([h,...n],t,o,i)};return new Proxy(c,{deleteProperty(h,d){return delete h[d],delete h._keys,delete n[0][d],!0},get(h,d){return Pw(h,d,()=>vN(d,t,n,h))},getOwnPropertyDescriptor(h,d){return Reflect.getOwnPropertyDescriptor(h._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(h,d){return FE(h).includes(d)},ownKeys(h){return FE(h)},set(h,d,m){const _=h._storage||(h._storage=r());return h[d]=_[d]=m,delete h._keys,!0}})}function qo(n,t,e,i){const r={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:Nw(n,i),setContext:o=>qo(n,o,e,i),override:o=>qo(n.override(o),t,e,i)};return new Proxy(r,{deleteProperty(o,c){return delete o[c],delete n[c],!0},get(o,c,h){return Pw(o,c,()=>dN(o,c,h))},getOwnPropertyDescriptor(o,c){return o._descriptors.allKeys?Reflect.has(n,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,c)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,c){return Reflect.has(n,c)},ownKeys(){return Reflect.ownKeys(n)},set(o,c,h){return n[c]=h,delete o[c],!0}})}function Nw(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=n;return{allKeys:r,scriptable:e,indexable:i,isScriptable:br(e)?e:()=>e,isIndexable:br(i)?i:()=>i}}const fN=(n,t)=>n?n+m_(t):t,b_=(n,t)=>jt(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Pw(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function dN(n,t,e){const{_proxy:i,_context:r,_subProxy:o,_descriptors:c}=n;let h=i[t];return br(h)&&c.isScriptable(t)&&(h=gN(t,h,n,e)),He(h)&&h.length&&(h=mN(t,h,n,c.isIndexable)),b_(t,h)&&(h=qo(h,r,o&&o[t],c)),h}function gN(n,t,e,i){const{_proxy:r,_context:o,_subProxy:c,_stack:h}=e;if(h.has(n))throw new Error("Recursion detected: "+Array.from(h).join("->")+"->"+n);h.add(n);let d=t(o,c||i);return h.delete(n),b_(n,d)&&(d=E_(r._scopes,r,n,d)),d}function mN(n,t,e,i){const{_proxy:r,_context:o,_subProxy:c,_descriptors:h}=e;if(typeof o.index<"u"&&i(n))return t[o.index%t.length];if(jt(t[0])){const d=t,m=r._scopes.filter(_=>_!==d);t=[];for(const _ of d){const v=E_(m,r,n,_);t.push(qo(v,o,c&&c[n],h))}}return t}function Vw(n,t,e){return br(n)?n(t,e):n}const pN=(n,t)=>n===!0?t:typeof n=="string"?Fo(t,n):void 0;function _N(n,t,e,i,r){for(const o of t){const c=pN(e,o);if(c){n.add(c);const h=Vw(c._fallback,e,r);if(typeof h<"u"&&h!==e&&h!==i)return h}else if(c===!1&&typeof i<"u"&&e!==i)return null}return!1}function E_(n,t,e,i){const r=t._rootScopes,o=Vw(t._fallback,e,i),c=[...n,...r],h=new Set;h.add(i);let d=HE(h,c,e,o||e,i);return d===null||typeof o<"u"&&o!==e&&(d=HE(h,c,o,d,i),d===null)?!1:v_(Array.from(h),[""],r,o,()=>yN(t,e,i))}function HE(n,t,e,i,r){for(;e;)e=_N(n,t,e,i,r);return e}function yN(n,t,e){const i=n._getTarget();t in i||(i[t]={});const r=i[t];return He(r)&&jt(e)?e:r||{}}function vN(n,t,e,i){let r;for(const o of t)if(r=Lw(fN(o,n),e),typeof r<"u")return b_(n,r)?E_(e,i,n,r):r}function Lw(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function FE(n){let t=n._keys;return t||(t=n._keys=bN(n._scopes)),t}function bN(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}function T_(){return typeof window<"u"&&typeof document<"u"}function S_(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Lf(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const rd=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function EN(n,t){return rd(n).getPropertyValue(t)}const TN=["top","right","bottom","left"];function ma(n,t,e){const i={};e=e?"-"+e:"";for(let r=0;r<4;r++){const o=TN[r];i[o]=parseFloat(n[t+"-"+o+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const SN=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function AN(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:r,offsetY:o}=i;let c=!1,h,d;if(SN(r,o,n.target))h=r,d=o;else{const m=t.getBoundingClientRect();h=i.clientX-m.left,d=i.clientY-m.top,c=!0}return{x:h,y:d,box:c}}function ua(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,r=rd(e),o=r.boxSizing==="border-box",c=ma(r,"padding"),h=ma(r,"border","width"),{x:d,y:m,box:_}=AN(n,e),v=c.left+(_&&h.left),T=c.top+(_&&h.top);let{width:A,height:I}=t;return o&&(A-=c.width+h.width,I-=c.height+h.height),{x:Math.round((d-v)/A*e.width/i),y:Math.round((m-T)/I*e.height/i)}}function wN(n,t,e){let i,r;if(t===void 0||e===void 0){const o=n&&S_(n);if(!o)t=n.clientWidth,e=n.clientHeight;else{const c=o.getBoundingClientRect(),h=rd(o),d=ma(h,"border","width"),m=ma(h,"padding");t=c.width-m.width-d.width,e=c.height-m.height-d.height,i=Lf(h.maxWidth,o,"clientWidth"),r=Lf(h.maxHeight,o,"clientHeight")}}return{width:t,height:e,maxWidth:i||kf,maxHeight:r||kf}}const Fh=n=>Math.round(n*10)/10;function RN(n,t,e,i){const r=rd(n),o=ma(r,"margin"),c=Lf(r.maxWidth,n,"clientWidth")||kf,h=Lf(r.maxHeight,n,"clientHeight")||kf,d=wN(n,t,e);let{width:m,height:_}=d;if(r.boxSizing==="content-box"){const T=ma(r,"border","width"),A=ma(r,"padding");m-=A.width+T.width,_-=A.height+T.height}return m=Math.max(0,m-o.width),_=Math.max(0,i?m/i:_-o.height),m=Fh(Math.min(m,c,d.maxWidth)),_=Fh(Math.min(_,h,d.maxHeight)),m&&!_&&(_=Fh(m/2)),(t!==void 0||e!==void 0)&&i&&d.height&&_>d.height&&(_=d.height,m=Fh(Math.floor(_*i))),{width:m,height:_}}function qE(n,t,e){const i=t||1,r=Math.floor(n.height*i),o=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const c=n.canvas;return c.style&&(e||!c.style.height&&!c.style.width)&&(c.style.height=`${n.height}px`,c.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||c.height!==r||c.width!==o?(n.currentDevicePixelRatio=i,c.height=r,c.width=o,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const xN=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};T_()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function GE(n,t){const e=EN(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const IN=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},CN=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function No(n,t,e){return n?IN(t,e):CN()}function Uw(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function zw(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function qh(n,t,e){return n.options.clip?n[e]:t[e]}function DN(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:qh(e,t,"left"),right:qh(e,t,"right"),top:qh(i,t,"top"),bottom:qh(i,t,"bottom")}:t}function ON(n,t){const e=t._clip;if(e.disabled)return!1;const i=DN(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class MN{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){const o=e.listeners[r],c=e.duration;o.forEach(h=>h({chart:t,initial:e.initial,numSteps:c,currentStep:Math.min(i-e.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=Aw.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const o=i.items;let c=o.length-1,h=!1,d;for(;c>=0;--c)d=o[c],d._active?(d._total>i.duration&&(i.duration=d._total),d.tick(t),h=!0):(o[c]=o[o.length-1],o.pop());h&&(r.draw(),this._notify(r,i,t,"progress")),o.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var os=new MN;const YE="transparent",kN={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=LE(n||YE),r=i.valid&&LE(t||YE);return r&&r.valid?r.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class NN{constructor(t,e,i,r){const o=e[i];r=Hh([t.to,r,o,t.from]);const c=Hh([t.from,o,r]);this._active=!0,this._fn=t.fn||kN[t.type||typeof c],this._easing=kc[t.easing]||kc.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=c,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const r=this._target[this._prop],o=i-this._start,c=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(c,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=Hh([t.to,e,r,t.from]),this._from=Hh([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,r=this._prop,o=this._from,c=this._loop,h=this._to;let d;if(this._active=o!==h&&(c||e<i),!this._active){this._target[r]=h,this._notify(!0);return}if(e<0){this._target[r]=o;return}d=e/i%2,d=c&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[r]=this._fn(o,h,d)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][e]()}}class Bw{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!jt(t))return;const e=Object.keys(be.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const o=t[r];if(!jt(o))return;const c={};for(const h of e)c[h]=o[h];(He(o.properties)&&o.properties||[r]).forEach(h=>{(h===r||!i.has(h))&&i.set(h,c)})})}_animateOptions(t,e){const i=e.options,r=VN(t,i);if(!r)return[];const o=this._createAnimations(r,i);return i.$shared&&PN(t.options.$animations,i).then(()=>{t.options=i},()=>{}),o}_createAnimations(t,e){const i=this._properties,r=[],o=t.$animations||(t.$animations={}),c=Object.keys(e),h=Date.now();let d;for(d=c.length-1;d>=0;--d){const m=c[d];if(m.charAt(0)==="$")continue;if(m==="options"){r.push(...this._animateOptions(t,e));continue}const _=e[m];let v=o[m];const T=i.get(m);if(v)if(T&&v.active()){v.update(T,_,h);continue}else v.cancel();if(!T||!T.duration){t[m]=_;continue}o[m]=v=new NN(T,t,m,_),r.push(v)}return r}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return os.add(this._chart,i),!0}}function PN(n,t){const e=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const o=n[i[r]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function VN(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function KE(n,t){const e=n&&n.options||{},i=e.reverse,r=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:i?o:r,end:i?r:o}}function LN(n,t,e){if(e===!1)return!1;const i=KE(n,e),r=KE(t,e);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function UN(n){let t,e,i,r;return jt(n)?(t=n.top,e=n.right,i=n.bottom,r=n.left):t=e=i=r=n,{top:t,right:e,bottom:i,left:r,disabled:n===!1}}function jw(n,t){const e=[],i=n._getSortedDatasetMetas(t);let r,o;for(r=0,o=i.length;r<o;++r)e.push(i[r].index);return e}function QE(n,t,e,i={}){const r=n.keys,o=i.mode==="single";let c,h,d,m;if(t===null)return;let _=!1;for(c=0,h=r.length;c<h;++c){if(d=+r[c],d===e){if(_=!0,i.all)continue;break}m=n.values[d],qn(m)&&(o||t===0||fr(t)===fr(m))&&(t+=m)}return!_&&!i.all?0:t}function zN(n,t){const{iScale:e,vScale:i}=t,r=e.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",c=Object.keys(n),h=new Array(c.length);let d,m,_;for(d=0,m=c.length;d<m;++d)_=c[d],h[d]={[r]:_,[o]:n[_]};return h}function Im(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function BN(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function jN(n){const{min:t,max:e,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function HN(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function XE(n,t,e,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const o=n[r.index];if(e&&o>0||!e&&o<0)return r.index}return null}function WE(n,t){const{chart:e,_cachedMeta:i}=n,r=e._stacks||(e._stacks={}),{iScale:o,vScale:c,index:h}=i,d=o.axis,m=c.axis,_=BN(o,c,i),v=t.length;let T;for(let A=0;A<v;++A){const I=t[A],{[d]:k,[m]:M}=I,G=I._stacks||(I._stacks={});T=G[m]=HN(r,_,k),T[h]=M,T._top=XE(T,c,!0,i.type),T._bottom=XE(T,c,!1,i.type);const X=T._visualValues||(T._visualValues={});X[h]=M}}function Cm(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function FN(n,t){return tl(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function qN(n,t,e){return tl(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function fc(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const r of t){const o=r._stacks;if(!o||o[i]===void 0||o[i][e]===void 0)return;delete o[i][e],o[i]._visualValues!==void 0&&o[i]._visualValues[e]!==void 0&&delete o[i]._visualValues[e]}}}const Dm=n=>n==="reset"||n==="none",$E=(n,t)=>t?n:Object.assign({},n),GN=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:jw(e,!0),values:null};class Hw{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Im(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&fc(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),r=(v,T,A,I)=>v==="x"?T:v==="r"?I:A,o=e.xAxisID=Ft(i.xAxisID,Cm(t,"x")),c=e.yAxisID=Ft(i.yAxisID,Cm(t,"y")),h=e.rAxisID=Ft(i.rAxisID,Cm(t,"r")),d=e.indexAxis,m=e.iAxisID=r(d,o,c,h),_=e.vAxisID=r(d,c,o,h);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(c),e.rScale=this.getScaleForId(h),e.iScale=this.getScaleForId(m),e.vScale=this.getScaleForId(_)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&NE(this._data,this),t._stacked&&fc(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(jt(e)){const r=this._cachedMeta;this._data=zN(e,r)}else if(i!==e){if(i){NE(i,this);const r=this._cachedMeta;fc(r),r._parsed=[]}e&&Object.isExtensible(e)&&Gk(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const o=e._stacked;e._stacked=Im(e.vScale,e),e.stack!==i.stack&&(r=!0,fc(e),e.stack=i.stack),this._resyncElements(t),(r||o!==e._stacked)&&(WE(this,e._parsed),e._stacked=Im(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:r}=this,{iScale:o,_stacked:c}=i,h=o.axis;let d=t===0&&e===r.length?!0:i._sorted,m=t>0&&i._parsed[t-1],_,v,T;if(this._parsing===!1)i._parsed=r,i._sorted=!0,T=r;else{He(r[t])?T=this.parseArrayData(i,r,t,e):jt(r[t])?T=this.parseObjectData(i,r,t,e):T=this.parsePrimitiveData(i,r,t,e);const A=()=>v[h]===null||m&&v[h]<m[h];for(_=0;_<e;++_)i._parsed[_+t]=v=T[_],d&&(A()&&(d=!1),m=v);i._sorted=d}c&&WE(this,T)}parsePrimitiveData(t,e,i,r){const{iScale:o,vScale:c}=t,h=o.axis,d=c.axis,m=o.getLabels(),_=o===c,v=new Array(r);let T,A,I;for(T=0,A=r;T<A;++T)I=T+i,v[T]={[h]:_||o.parse(m[I],I),[d]:c.parse(e[I],I)};return v}parseArrayData(t,e,i,r){const{xScale:o,yScale:c}=t,h=new Array(r);let d,m,_,v;for(d=0,m=r;d<m;++d)_=d+i,v=e[_],h[d]={x:o.parse(v[0],_),y:c.parse(v[1],_)};return h}parseObjectData(t,e,i,r){const{xScale:o,yScale:c}=t,{xAxisKey:h="x",yAxisKey:d="y"}=this._parsing,m=new Array(r);let _,v,T,A;for(_=0,v=r;_<v;++_)T=_+i,A=e[T],m[_]={x:o.parse(Fo(A,h),T),y:c.parse(Fo(A,d),T)};return m}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const r=this.chart,o=this._cachedMeta,c=e[t.axis],h={keys:jw(r,!0),values:e._stacks[t.axis]._visualValues};return QE(h,c,o.index,{mode:i})}updateRangeFromParsed(t,e,i,r){const o=i[e.axis];let c=o===null?NaN:o;const h=r&&i._stacks[e.axis];r&&h&&(r.values=h,c=QE(r,o,this._cachedMeta.index)),t.min=Math.min(t.min,c),t.max=Math.max(t.max,c)}getMinMax(t,e){const i=this._cachedMeta,r=i._parsed,o=i._sorted&&t===i.iScale,c=r.length,h=this._getOtherScale(t),d=GN(e,i,this.chart),m={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:_,max:v}=jN(h);let T,A;function I(){A=r[T];const k=A[h.axis];return!qn(A[t.axis])||_>k||v<k}for(T=0;T<c&&!(!I()&&(this.updateRangeFromParsed(m,t,A,d),o));++T);if(o){for(T=c-1;T>=0;--T)if(!I()){this.updateRangeFromParsed(m,t,A,d);break}}return m}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let r,o,c;for(r=0,o=e.length;r<o;++r)c=e[r][t.axis],qn(c)&&i.push(c);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,r=e.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:r?""+r.getLabelForValue(o[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=UN(Ft(this.options.clip,LN(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,r=i.data||[],o=e.chartArea,c=[],h=this._drawStart||0,d=this._drawCount||r.length-h,m=this.options.drawActiveElementsOnTop;let _;for(i.dataset&&i.dataset.draw(t,o,h,d),_=h;_<h+d;++_){const v=r[_];v.hidden||(v.active&&m?c.push(v):v.draw(t,o))}for(_=0;_<c.length;++_)c[_].draw(t,o)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const r=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const c=this._cachedMeta.data[t];o=c.$context||(c.$context=qN(this.getContext(),t,c)),o.parsed=this.getParsed(t),o.raw=r.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=FN(this.chart.getContext(),this.index)),o.dataset=r,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const r=e==="active",o=this._cachedDataOpts,c=t+"-"+e,h=o[c],d=this.enableOptionSharing&&Kc(i);if(h)return $E(h,d);const m=this.chart.config,_=m.datasetElementScopeKeys(this._type,t),v=r?[`${t}Hover`,"hover",t,""]:[t,""],T=m.getOptionScopes(this.getDataset(),_),A=Object.keys(be.elements[t]),I=()=>this.getContext(i,r,e),k=m.resolveNamedOptions(T,A,I,v);return k.$shared&&(k.$shared=d,o[c]=Object.freeze($E(k,d))),k}_resolveAnimations(t,e,i){const r=this.chart,o=this._cachedDataOpts,c=`animation-${e}`,h=o[c];if(h)return h;let d;if(r.options.animation!==!1){const _=this.chart.config,v=_.datasetAnimationScopeKeys(this._type,e),T=_.getOptionScopes(this.getDataset(),v);d=_.createResolver(T,this.getContext(t,i,e))}const m=new Bw(r,d&&d.animations);return d&&d._cacheable&&(o[c]=Object.freeze(m)),m}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Dm(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),r=this._sharedOptions,o=this.getSharedOptions(i),c=this.includeOptions(e,o)||o!==r;return this.updateSharedOptions(o,e,i),{sharedOptions:o,includeOptions:c}}updateElement(t,e,i,r){Dm(r)?Object.assign(t,i):this._resolveAnimations(e,r).update(t,i)}updateSharedOptions(t,e,i){t&&!Dm(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,r){t.active=r;const o=this.getStyle(e,r);this._resolveAnimations(e,i,r).update(t,{options:!r&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[h,d,m]of this._syncList)this[h](d,m);this._syncList=[];const r=i.length,o=e.length,c=Math.min(o,r);c&&this.parse(0,c),o>r?this._insertElements(r,o-r,t):o<r&&this._removeElements(o,r-o)}_insertElements(t,e,i=!0){const r=this._cachedMeta,o=r.data,c=t+e;let h;const d=m=>{for(m.length+=e,h=m.length-1;h>=c;h--)m[h]=m[h-e]};for(d(o),h=t;h<c;++h)o[h]=new this.dataElementType;this._parsing&&d(r._parsed),this.parse(t,e),i&&this.updateElements(o,t,e,"reset")}updateElements(t,e,i,r){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(t,e);i._stacked&&fc(i,r)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,r]=t;this[e](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function YN(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let i=[];for(let r=0,o=e.length;r<o;r++)i=i.concat(e[r].controller.getAllParsedValues(n));n._cache.$bar=Sw(i.sort((r,o)=>r-o))}return n._cache.$bar}function KN(n){const t=n.iScale,e=YN(t,n.type);let i=t._length,r,o,c,h;const d=()=>{c===32767||c===-32768||(Kc(h)&&(i=Math.min(i,Math.abs(c-h)||i)),h=c)};for(r=0,o=e.length;r<o;++r)c=t.getPixelForValue(e[r]),d();for(h=void 0,r=0,o=t.ticks.length;r<o;++r)c=t.getPixelForTick(r),d();return i}function QN(n,t,e,i){const r=e.barThickness;let o,c;return ne(r)?(o=t.min*e.categoryPercentage,c=e.barPercentage):(o=r*i,c=1),{chunk:o/i,ratio:c,start:t.pixels[n]-o/2}}function XN(n,t,e,i){const r=t.pixels,o=r[n];let c=n>0?r[n-1]:null,h=n<r.length-1?r[n+1]:null;const d=e.categoryPercentage;c===null&&(c=o-(h===null?t.end-t.start:h-o)),h===null&&(h=o+o-c);const m=o-(o-Math.min(c,h))/2*d;return{chunk:Math.abs(h-c)/2*d/i,ratio:e.barPercentage,start:m}}function WN(n,t,e,i){const r=e.parse(n[0],i),o=e.parse(n[1],i),c=Math.min(r,o),h=Math.max(r,o);let d=c,m=h;Math.abs(c)>Math.abs(h)&&(d=h,m=c),t[e.axis]=m,t._custom={barStart:d,barEnd:m,start:r,end:o,min:c,max:h}}function Fw(n,t,e,i){return He(n)?WN(n,t,e,i):t[e.axis]=e.parse(n,i),t}function ZE(n,t,e,i){const r=n.iScale,o=n.vScale,c=r.getLabels(),h=r===o,d=[];let m,_,v,T;for(m=e,_=e+i;m<_;++m)T=t[m],v={},v[r.axis]=h||r.parse(c[m],m),d.push(Fw(T,v,o,m));return d}function Om(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function $N(n,t,e){return n!==0?fr(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function ZN(n){let t,e,i,r,o;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(r="end",o="start"):(r="start",o="end"),{start:e,end:i,reverse:t,top:r,bottom:o}}function JN(n,t,e,i){let r=t.borderSkipped;const o={};if(!r){n.borderSkipped=o;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:c,end:h,reverse:d,top:m,bottom:_}=ZN(n);r==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?r=m:(e._bottom||0)===i?r=_:(o[JE(_,c,h,d)]=!0,r=m)),o[JE(r,c,h,d)]=!0,n.borderSkipped=o}function JE(n,t,e,i){return i?(n=tP(n,t,e),n=tT(n,e,t)):n=tT(n,t,e),n}function tP(n,t,e){return n===t?e:n===e?t:n}function tT(n,t,e){return n==="start"?t:n==="end"?e:n}function eP(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class nP extends Hw{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,i,r){return ZE(t,e,i,r)}parseArrayData(t,e,i,r){return ZE(t,e,i,r)}parseObjectData(t,e,i,r){const{iScale:o,vScale:c}=t,{xAxisKey:h="x",yAxisKey:d="y"}=this._parsing,m=o.axis==="x"?h:d,_=c.axis==="x"?h:d,v=[];let T,A,I,k;for(T=i,A=i+r;T<A;++T)k=e[T],I={},I[o.axis]=o.parse(Fo(k,m),T),v.push(Fw(Fo(k,_),I,c,T));return v}updateRangeFromParsed(t,e,i,r){super.updateRangeFromParsed(t,e,i,r);const o=i._custom;o&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:r}=e,o=this.getParsed(t),c=o._custom,h=Om(c)?"["+c.start+", "+c.end+"]":""+r.getLabelForValue(o[r.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:h}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,r){const o=r==="reset",{index:c,_cachedMeta:{vScale:h}}=this,d=h.getBasePixel(),m=h.isHorizontal(),_=this._getRuler(),{sharedOptions:v,includeOptions:T}=this._getSharedOptions(e,r);for(let A=e;A<e+i;A++){const I=this.getParsed(A),k=o||ne(I[h.axis])?{base:d,head:d}:this._calculateBarValuePixels(A),M=this._calculateBarIndexPixels(A,_),G=(I._stacks||{})[h.axis],X={horizontal:m,base:k.base,enableBorderRadius:!G||Om(I._custom)||c===G._top||c===G._bottom,x:m?k.head:M.center,y:m?M.center:k.head,height:m?M.size:Math.abs(k.size),width:m?Math.abs(k.size):M.size};T&&(X.options=v||this.resolveDataElementOptions(A,t[A].active?"active":r));const et=X.options||t[A].options;JN(X,et,G,c),eP(X,et,_.ratio),this.updateElement(t[A],A,X,r)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(_=>_.controller.options.grouped),o=i.options.stacked,c=[],h=this._cachedMeta.controller.getParsed(e),d=h&&h[i.axis],m=_=>{const v=_._parsed.find(A=>A[i.axis]===d),T=v&&v[_.vScale.axis];if(ne(T)||isNaN(T))return!0};for(const _ of r)if(!(e!==void 0&&m(_))&&((o===!1||c.indexOf(_.stack)===-1||o===void 0&&_.stack===void 0)&&c.push(_.stack),_.index===t))break;return c.length||c.push(void 0),c}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)t[Ft(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,i){const r=this._getStacks(t,i),o=e!==void 0?r.indexOf(e):-1;return o===-1?r.length-1:o}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,r=[];let o,c;for(o=0,c=e.data.length;o<c;++o)r.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));const h=t.barThickness;return{min:h||KN(e),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:h?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i,index:r},options:{base:o,minBarLength:c}}=this,h=o||0,d=this.getParsed(t),m=d._custom,_=Om(m);let v=d[e.axis],T=0,A=i?this.applyStack(e,d,i):v,I,k;A!==v&&(T=A-v,A=v),_&&(v=m.barStart,A=m.barEnd-m.barStart,v!==0&&fr(v)!==fr(m.barEnd)&&(T=0),T+=v);const M=!ne(o)&&!_?o:T;let G=e.getPixelForValue(M);if(this.chart.getDataVisibility(t)?I=e.getPixelForValue(T+A):I=G,k=I-G,Math.abs(k)<c){k=$N(k,e,h)*c,v===h&&(G-=k/2);const X=e.getPixelForDecimal(0),et=e.getPixelForDecimal(1),it=Math.min(X,et),W=Math.max(X,et);G=Math.max(Math.min(G,W),it),I=G+k,i&&!_&&(d._stacks[e.axis]._visualValues[r]=e.getValueForPixel(I)-e.getValueForPixel(G))}if(G===e.getPixelForValue(h)){const X=fr(k)*e.getLineWidthForValue(h)/2;G+=X,k-=X}return{size:k,base:G,head:I,center:I+k/2}}_calculateBarIndexPixels(t,e){const i=e.scale,r=this.options,o=r.skipNull,c=Ft(r.maxBarThickness,1/0);let h,d;const m=this._getAxisCount();if(e.grouped){const _=o?this._getStackCount(t):e.stackCount,v=r.barThickness==="flex"?XN(t,e,r,_*m):QN(t,e,r,_*m),T=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,A=this._getAxis().indexOf(Ft(T,this.getFirstScaleIdForIndexAxis())),I=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0)+A;h=v.start+v.chunk*I+v.chunk/2,d=Math.min(c,v.chunk*v.ratio)}else h=i.getPixelForValue(this.getParsed(t)[i.axis],t),d=Math.min(c,e.min*e.ratio);return{base:h-d/2,head:h+d/2,center:h,size:d}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,r=i.length;let o=0;for(;o<r;++o)this.getParsed(o)[e.axis]!==null&&!i[o].hidden&&i[o].draw(this._ctx)}}function la(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class A_{static override(t){Object.assign(A_.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return la()}parse(){return la()}format(){return la()}add(){return la()}diff(){return la()}startOf(){return la()}endOf(){return la()}}var iP={_date:A_};function sP(n,t,e,i){const{controller:r,data:o,_sorted:c}=n,h=r._cachedMeta.iScale,d=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(h&&t===h.axis&&t!=="r"&&c&&o.length){const m=h._reversePixels?Fk:hp;if(i){if(r._sharedOptions){const _=o[0],v=typeof _.getRange=="function"&&_.getRange(t);if(v){const T=m(o,t,e-v),A=m(o,t,e+v);return{lo:T.lo,hi:A.hi}}}}else{const _=m(o,t,e);if(d){const{vScale:v}=r._cachedMeta,{_parsed:T}=n,A=T.slice(0,_.lo+1).reverse().findIndex(k=>!ne(k[v.axis]));_.lo-=Math.max(0,A);const I=T.slice(_.hi).findIndex(k=>!ne(k[v.axis]));_.hi+=Math.max(0,I)}return _}}return{lo:0,hi:o.length-1}}function ad(n,t,e,i,r){const o=n.getSortedVisibleDatasetMetas(),c=e[t];for(let h=0,d=o.length;h<d;++h){const{index:m,data:_}=o[h],{lo:v,hi:T}=sP(o[h],t,c,r);for(let A=v;A<=T;++A){const I=_[A];I.skip||i(I,m,A)}}}function rP(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,r){const o=t?Math.abs(i.x-r.x):0,c=e?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(c,2))}}function Mm(n,t,e,i,r){const o=[];return!r&&!n.isPointInArea(t)||ad(n,e,t,function(h,d,m){!r&&!Ow(h,n.chartArea,0)||h.inRange(t.x,t.y,i)&&o.push({element:h,datasetIndex:d,index:m})},!0),o}function aP(n,t,e,i){let r=[];function o(c,h,d){const{startAngle:m,endAngle:_}=c.getProps(["startAngle","endAngle"],i),{angle:v}=zk(c,{x:t.x,y:t.y});jk(v,m,_)&&r.push({element:c,datasetIndex:h,index:d})}return ad(n,e,t,o),r}function oP(n,t,e,i,r,o){let c=[];const h=rP(e);let d=Number.POSITIVE_INFINITY;function m(_,v,T){const A=_.inRange(t.x,t.y,r);if(i&&!A)return;const I=_.getCenterPoint(r);if(!(!!o||n.isPointInArea(I))&&!A)return;const M=h(t,I);M<d?(c=[{element:_,datasetIndex:v,index:T}],d=M):M===d&&c.push({element:_,datasetIndex:v,index:T})}return ad(n,e,t,m),c}function km(n,t,e,i,r,o){return!o&&!n.isPointInArea(t)?[]:e==="r"&&!i?aP(n,t,e,r):oP(n,t,e,i,r,o)}function eT(n,t,e,i,r){const o=[],c=e==="x"?"inXRange":"inYRange";let h=!1;return ad(n,e,t,(d,m,_)=>{d[c]&&d[c](t[e],r)&&(o.push({element:d,datasetIndex:m,index:_}),h=h||d.inRange(t.x,t.y,r))}),i&&!h?[]:o}var lP={modes:{index(n,t,e,i){const r=ua(t,n),o=e.axis||"x",c=e.includeInvisible||!1,h=e.intersect?Mm(n,r,o,i,c):km(n,r,o,!1,i,c),d=[];return h.length?(n.getSortedVisibleDatasetMetas().forEach(m=>{const _=h[0].index,v=m.data[_];v&&!v.skip&&d.push({element:v,datasetIndex:m.index,index:_})}),d):[]},dataset(n,t,e,i){const r=ua(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;let h=e.intersect?Mm(n,r,o,i,c):km(n,r,o,!1,i,c);if(h.length>0){const d=h[0].datasetIndex,m=n.getDatasetMeta(d).data;h=[];for(let _=0;_<m.length;++_)h.push({element:m[_],datasetIndex:d,index:_})}return h},point(n,t,e,i){const r=ua(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;return Mm(n,r,o,i,c)},nearest(n,t,e,i){const r=ua(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;return km(n,r,o,e.intersect,i,c)},x(n,t,e,i){const r=ua(t,n);return eT(n,r,"x",e.intersect,i)},y(n,t,e,i){const r=ua(t,n);return eT(n,r,"y",e.intersect,i)}}};const qw=["left","top","right","bottom"];function dc(n,t){return n.filter(e=>e.pos===t)}function nT(n,t){return n.filter(e=>qw.indexOf(e.pos)===-1&&e.box.axis===t)}function gc(n,t){return n.sort((e,i)=>{const r=t?i:e,o=t?e:i;return r.weight===o.weight?r.index-o.index:r.weight-o.weight})}function cP(n){const t=[];let e,i,r,o,c,h;for(e=0,i=(n||[]).length;e<i;++e)r=n[e],{position:o,options:{stack:c,stackWeight:h=1}}=r,t.push({index:e,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:c&&o+c,stackWeight:h});return t}function uP(n){const t={};for(const e of n){const{stack:i,pos:r,stackWeight:o}=e;if(!i||!qw.includes(r))continue;const c=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=o}return t}function hP(n,t){const e=uP(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let o,c,h;for(o=0,c=n.length;o<c;++o){h=n[o];const{fullSize:d}=h.box,m=e[h.stack],_=m&&h.stackWeight/m.weight;h.horizontal?(h.width=_?_*i:d&&t.availableWidth,h.height=r):(h.width=i,h.height=_?_*r:d&&t.availableHeight)}return e}function fP(n){const t=cP(n),e=gc(t.filter(m=>m.box.fullSize),!0),i=gc(dc(t,"left"),!0),r=gc(dc(t,"right")),o=gc(dc(t,"top"),!0),c=gc(dc(t,"bottom")),h=nT(t,"x"),d=nT(t,"y");return{fullSize:e,leftAndTop:i.concat(o),rightAndBottom:r.concat(d).concat(c).concat(h),chartArea:dc(t,"chartArea"),vertical:i.concat(r).concat(d),horizontal:o.concat(c).concat(h)}}function iT(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function Gw(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function dP(n,t,e,i){const{pos:r,box:o}=e,c=n.maxPadding;if(!jt(r)){e.size&&(n[r]-=e.size);const v=i[e.stack]||{size:0,count:1};v.size=Math.max(v.size,e.horizontal?o.height:o.width),e.size=v.size/v.count,n[r]+=e.size}o.getPadding&&Gw(c,o.getPadding());const h=Math.max(0,t.outerWidth-iT(c,n,"left","right")),d=Math.max(0,t.outerHeight-iT(c,n,"top","bottom")),m=h!==n.w,_=d!==n.h;return n.w=h,n.h=d,e.horizontal?{same:m,other:_}:{same:_,other:m}}function gP(n){const t=n.maxPadding;function e(i){const r=Math.max(t[i]-n[i],0);return n[i]+=r,r}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function mP(n,t){const e=t.maxPadding;function i(r){const o={left:0,top:0,right:0,bottom:0};return r.forEach(c=>{o[c]=Math.max(t[c],e[c])}),o}return i(n?["left","right"]:["top","bottom"])}function Ac(n,t,e,i){const r=[];let o,c,h,d,m,_;for(o=0,c=n.length,m=0;o<c;++o){h=n[o],d=h.box,d.update(h.width||t.w,h.height||t.h,mP(h.horizontal,t));const{same:v,other:T}=dP(t,e,h,i);m|=v&&r.length,_=_||T,d.fullSize||r.push(h)}return m&&Ac(r,t,e,i)||_}function Gh(n,t,e,i,r){n.top=e,n.left=t,n.right=t+i,n.bottom=e+r,n.width=i,n.height=r}function sT(n,t,e,i){const r=e.padding;let{x:o,y:c}=t;for(const h of n){const d=h.box,m=i[h.stack]||{placed:0,weight:1},_=h.stackWeight/m.weight||1;if(h.horizontal){const v=t.w*_,T=m.size||d.height;Kc(m.start)&&(c=m.start),d.fullSize?Gh(d,r.left,c,e.outerWidth-r.right-r.left,T):Gh(d,t.left+m.placed,c,v,T),m.start=c,m.placed+=v,c=d.bottom}else{const v=t.h*_,T=m.size||d.width;Kc(m.start)&&(o=m.start),d.fullSize?Gh(d,o,r.top,T,e.outerHeight-r.bottom-r.top):Gh(d,o,t.top+m.placed,T,v),m.start=o,m.placed+=v,o=d.right}}t.x=o,t.y=c}var tr={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const r=si(n.options.layout.padding),o=Math.max(t-r.width,0),c=Math.max(e-r.height,0),h=fP(n.boxes),d=h.vertical,m=h.horizontal;Xt(n.boxes,k=>{typeof k.beforeLayout=="function"&&k.beforeLayout()});const _=d.reduce((k,M)=>M.box.options&&M.box.options.display===!1?k:k+1,0)||1,v=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:o,availableHeight:c,vBoxMaxWidth:o/2/_,hBoxMaxHeight:c/2}),T=Object.assign({},r);Gw(T,si(i));const A=Object.assign({maxPadding:T,w:o,h:c,x:r.left,y:r.top},r),I=hP(d.concat(m),v);Ac(h.fullSize,A,v,I),Ac(d,A,v,I),Ac(m,A,v,I)&&Ac(d,A,v,I),gP(A),sT(h.leftAndTop,A,v,I),A.x+=A.w,A.y+=A.h,sT(h.rightAndBottom,A,v,I),n.chartArea={left:A.left,top:A.top,right:A.left+A.w,bottom:A.top+A.h,height:A.h,width:A.w},Xt(h.chartArea,k=>{const M=k.box;Object.assign(M,n.chartArea),M.update(A.w,A.h,{left:0,top:0,right:0,bottom:0})})}};class Yw{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}}class pP extends Yw{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const cf="$chartjs",_P={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},rT=n=>n===null||n==="";function yP(n,t){const e=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[cf]={initial:{height:i,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",rT(r)){const o=GE(n,"width");o!==void 0&&(n.width=o)}if(rT(i))if(n.style.height==="")n.height=n.width/(t||2);else{const o=GE(n,"height");o!==void 0&&(n.height=o)}return n}const Kw=xN?{passive:!0}:!1;function vP(n,t,e){n&&n.addEventListener(t,e,Kw)}function bP(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,Kw)}function EP(n,t){const e=_P[n.type]||n.type,{x:i,y:r}=ua(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Uf(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function TP(n,t,e){const i=n.canvas,r=new MutationObserver(o=>{let c=!1;for(const h of o)c=c||Uf(h.addedNodes,i),c=c&&!Uf(h.removedNodes,i);c&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function SP(n,t,e){const i=n.canvas,r=new MutationObserver(o=>{let c=!1;for(const h of o)c=c||Uf(h.removedNodes,i),c=c&&!Uf(h.addedNodes,i);c&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const Qc=new Map;let aT=0;function Qw(){const n=window.devicePixelRatio;n!==aT&&(aT=n,Qc.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function AP(n,t){Qc.size||window.addEventListener("resize",Qw),Qc.set(n,t)}function wP(n){Qc.delete(n),Qc.size||window.removeEventListener("resize",Qw)}function RP(n,t,e){const i=n.canvas,r=i&&S_(i);if(!r)return;const o=ww((h,d)=>{const m=r.clientWidth;e(h,d),m<r.clientWidth&&e()},window),c=new ResizeObserver(h=>{const d=h[0],m=d.contentRect.width,_=d.contentRect.height;m===0&&_===0||o(m,_)});return c.observe(r),AP(n,o),c}function Nm(n,t,e){e&&e.disconnect(),t==="resize"&&wP(n)}function xP(n,t,e){const i=n.canvas,r=ww(o=>{n.ctx!==null&&e(EP(o,n))},n);return vP(i,t,r),r}class IP extends Yw{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(yP(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[cf])return!1;const i=e[cf].initial;["height","width"].forEach(o=>{const c=i[o];ne(c)?e.removeAttribute(o):e.setAttribute(o,c)});const r=i.style||{};return Object.keys(r).forEach(o=>{e.style[o]=r[o]}),e.width=e.width,delete e[cf],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),c={attach:TP,detach:SP,resize:RP}[e]||xP;r[e]=c(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),r=i[e];if(!r)return;({attach:Nm,detach:Nm,resize:Nm}[e]||bP)(t,e,r),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return RN(t,e,i,r)}isAttached(t){const e=t&&S_(t);return!!(e&&e.isConnected)}}function CP(n){return!T_()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?pP:IP}class au{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Nf(this.x)&&Nf(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const r={};return t.forEach(o=>{r[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),r}}function DP(n,t){const e=n.options.ticks,i=OP(n),r=Math.min(e.maxTicksLimit||i,i),o=e.major.enabled?kP(t):[],c=o.length,h=o[0],d=o[c-1],m=[];if(c>r)return NP(t,m,o,c/r),m;const _=MP(o,t,r);if(c>0){let v,T;const A=c>1?Math.round((d-h)/(c-1)):null;for(Yh(t,m,_,ne(A)?0:h-A,h),v=0,T=c-1;v<T;v++)Yh(t,m,_,o[v],o[v+1]);return Yh(t,m,_,d,ne(A)?t.length:d+A),m}return Yh(t,m,_),m}function OP(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),r=n._maxLength/e;return Math.floor(Math.min(i,r))}function MP(n,t,e){const i=PP(n),r=t.length/e;if(!i)return Math.max(r,1);const o=Nk(i);for(let c=0,h=o.length-1;c<h;c++){const d=o[c];if(d>r)return d}return Math.max(r,1)}function kP(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function NP(n,t,e,i){let r=0,o=e[0],c;for(i=Math.ceil(i),c=0;c<n.length;c++)c===o&&(t.push(n[c]),r++,o=e[r*i])}function Yh(n,t,e,i,r){const o=Ft(i,0),c=Math.min(Ft(r,n.length),n.length);let h=0,d,m,_;for(e=Math.ceil(e),r&&(d=r-i,e=d/Math.floor(d/e)),_=o;_<0;)h++,_=Math.round(o+h*e);for(m=Math.max(o,0);m<c;m++)m===_&&(t.push(n[m]),h++,_=Math.round(o+h*e))}function PP(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const VP=n=>n==="left"?"right":n==="right"?"left":n,oT=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,lT=(n,t)=>Math.min(t||n,n);function cT(n,t){const e=[],i=n.length/t,r=n.length;let o=0;for(;o<r;o+=i)e.push(n[Math.floor(o)]);return e}function LP(n,t,e){const i=n.ticks.length,r=Math.min(t,i-1),o=n._startPixel,c=n._endPixel,h=1e-6;let d=n.getPixelForTick(r),m;if(!(e&&(i===1?m=Math.max(d-o,c-d):t===0?m=(n.getPixelForTick(1)-d)/2:m=(d-n.getPixelForTick(r-1))/2,d+=r<t?m:-m,d<o-h||d>c+h)))return d}function UP(n,t){Xt(n,e=>{const i=e.gc,r=i.length/2;let o;if(r>t){for(o=0;o<r;++o)delete e.data[i[o]];i.splice(0,r)}})}function mc(n){return n.drawTicks?n.tickLength:0}function uT(n,t){if(!n.display)return 0;const e=pn(n.font,t),i=si(n.padding);return(He(n.text)?n.text.length:1)*e.lineHeight+i.height}function zP(n,t){return tl(n,{scale:t,type:"scale"})}function BP(n,t,e){return tl(n,{tick:e,index:t,type:"tick"})}function jP(n,t,e){let i=Rw(n);return(e&&t!=="right"||!e&&t==="right")&&(i=VP(i)),i}function HP(n,t,e,i){const{top:r,left:o,bottom:c,right:h,chart:d}=n,{chartArea:m,scales:_}=d;let v=0,T,A,I;const k=c-r,M=h-o;if(n.isHorizontal()){if(A=xn(i,o,h),jt(e)){const G=Object.keys(e)[0],X=e[G];I=_[G].getPixelForValue(X)+k-t}else e==="center"?I=(m.bottom+m.top)/2+k-t:I=oT(n,e,t);T=h-o}else{if(jt(e)){const G=Object.keys(e)[0],X=e[G];A=_[G].getPixelForValue(X)-M+t}else e==="center"?A=(m.left+m.right)/2-M+t:A=oT(n,e,t);I=xn(i,c,r),v=e==="left"?-ti:ti}return{titleX:A,titleY:I,maxWidth:T,rotation:v}}class el extends au{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=Ti(t,Number.POSITIVE_INFINITY),e=Ti(e,Number.NEGATIVE_INFINITY),i=Ti(i,Number.POSITIVE_INFINITY),r=Ti(r,Number.NEGATIVE_INFINITY),{min:Ti(t,i),max:Ti(e,r),minDefined:qn(t),maxDefined:qn(e)}}getMinMax(t){let{min:e,max:i,minDefined:r,maxDefined:o}=this.getUserBounds(),c;if(r&&o)return{min:e,max:i};const h=this.getMatchingVisibleMetas();for(let d=0,m=h.length;d<m;++d)c=h[d].controller.getMinMax(this,t),r||(e=Math.min(e,c.min)),o||(i=Math.max(i,c.max));return e=o&&e>i?i:e,i=r&&e>i?e:i,{min:Ti(e,Ti(i,e)),max:Ti(i,Ti(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){oe(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:r,grace:o,ticks:c}=this.options,h=c.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=hN(this,o,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=h<this.ticks.length;this._convertTicksToLabels(d?cT(this.ticks,h):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=DP(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){oe(this.options.afterUpdate,[this])}beforeSetDimensions(){oe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){oe(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),oe(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){oe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,r,o;for(i=0,r=t.length;i<r;i++)o=t[i],o.label=oe(e.callback,[o.value,i,t],this)}afterTickToLabelConversion(){oe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){oe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=lT(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,o=e.maxRotation;let c=r,h,d,m;if(!this._isVisible()||!e.display||r>=o||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const _=this._getLabelSizes(),v=_.widest.width,T=_.highest.height,A=ei(this.chart.width-v,0,this.maxWidth);h=t.offset?this.maxWidth/i:A/(i-1),v+6>h&&(h=A/(i-(t.offset?.5:1)),d=this.maxHeight-mc(t.grid)-e.padding-uT(t.title,this.chart.options.font),m=Math.sqrt(v*v+T*T),c=Uk(Math.min(Math.asin(ei((_.highest.height+6)/h,-1,1)),Math.asin(ei(d/m,-1,1))-Math.asin(ei(T/m,-1,1)))),c=Math.max(r,Math.min(o,c))),this.labelRotation=c}afterCalculateLabelRotation(){oe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){oe(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:o}}=this,c=this._isVisible(),h=this.isHorizontal();if(c){const d=uT(r,e.options.font);if(h?(t.width=this.maxWidth,t.height=mc(o)+d):(t.height=this.maxHeight,t.width=mc(o)+d),i.display&&this.ticks.length){const{first:m,last:_,widest:v,highest:T}=this._getLabelSizes(),A=i.padding*2,I=fa(this.labelRotation),k=Math.cos(I),M=Math.sin(I);if(h){const G=i.mirror?0:M*v.width+k*T.height;t.height=Math.min(this.maxHeight,t.height+G+A)}else{const G=i.mirror?0:k*v.width+M*T.height;t.width=Math.min(this.maxWidth,t.width+G+A)}this._calculatePadding(m,_,M,k)}}this._handleMargins(),h?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){const{ticks:{align:o,padding:c},position:h}=this.options,d=this.labelRotation!==0,m=h!=="top"&&this.axis==="x";if(this.isHorizontal()){const _=this.getPixelForTick(0)-this.left,v=this.right-this.getPixelForTick(this.ticks.length-1);let T=0,A=0;d?m?(T=r*t.width,A=i*e.height):(T=i*t.height,A=r*e.width):o==="start"?A=e.width:o==="end"?T=t.width:o!=="inner"&&(T=t.width/2,A=e.width/2),this.paddingLeft=Math.max((T-_+c)*this.width/(this.width-_),0),this.paddingRight=Math.max((A-v+c)*this.width/(this.width-v),0)}else{let _=e.height/2,v=t.height/2;o==="start"?(_=0,v=t.height):o==="end"&&(_=e.height,v=0),this.paddingTop=_+c,this.paddingBottom=v+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){oe(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)ne(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=cT(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:r,_longestTextCache:o}=this,c=[],h=[],d=Math.floor(e/lT(e,i));let m=0,_=0,v,T,A,I,k,M,G,X,et,it,W;for(v=0;v<e;v+=d){if(I=t[v].label,k=this._resolveTickFontOptions(v),r.font=M=k.string,G=o[M]=o[M]||{data:{},gc:[]},X=k.lineHeight,et=it=0,!ne(I)&&!He(I))et=zE(r,G.data,G.gc,et,I),it=X;else if(He(I))for(T=0,A=I.length;T<A;++T)W=I[T],!ne(W)&&!He(W)&&(et=zE(r,G.data,G.gc,et,W),it+=X);c.push(et),h.push(it),m=Math.max(et,m),_=Math.max(it,_)}UP(o,e);const ot=c.indexOf(m),C=h.indexOf(_),R=x=>({width:c[x]||0,height:h[x]||0});return{first:R(0),last:R(e-1),widest:R(ot),highest:R(C),widths:c,heights:h}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Hk(this._alignToPixels?oa(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=BP(this.getContext(),t,i))}return this.$context||(this.$context=zP(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=fa(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),o=this._getLabelSizes(),c=t.autoSkipPadding||0,h=o?o.widest.width+c:0,d=o?o.highest.height+c:0;return this.isHorizontal()?d*i>h*r?h/i:d/r:d*r<h*i?d/i:h/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,r=this.options,{grid:o,position:c,border:h}=r,d=o.offset,m=this.isHorizontal(),v=this.ticks.length+(d?1:0),T=mc(o),A=[],I=h.setContext(this.getContext()),k=I.display?I.width:0,M=k/2,G=function(Y){return oa(i,Y,k)};let X,et,it,W,ot,C,R,x,N,P,L,D;if(c==="top")X=G(this.bottom),C=this.bottom-T,x=X-M,P=G(t.top)+M,D=t.bottom;else if(c==="bottom")X=G(this.top),P=t.top,D=G(t.bottom)-M,C=X+M,x=this.top+T;else if(c==="left")X=G(this.right),ot=this.right-T,R=X-M,N=G(t.left)+M,L=t.right;else if(c==="right")X=G(this.left),N=t.left,L=G(t.right)-M,ot=X+M,R=this.left+T;else if(e==="x"){if(c==="center")X=G((t.top+t.bottom)/2+.5);else if(jt(c)){const Y=Object.keys(c)[0],at=c[Y];X=G(this.chart.scales[Y].getPixelForValue(at))}P=t.top,D=t.bottom,C=X+M,x=C+T}else if(e==="y"){if(c==="center")X=G((t.left+t.right)/2);else if(jt(c)){const Y=Object.keys(c)[0],at=c[Y];X=G(this.chart.scales[Y].getPixelForValue(at))}ot=X-M,R=ot-T,N=t.left,L=t.right}const Wt=Ft(r.ticks.maxTicksLimit,v),At=Math.max(1,Math.ceil(v/Wt));for(et=0;et<v;et+=At){const Y=this.getContext(et),at=o.setContext(Y),gt=h.setContext(Y),kt=at.lineWidth,V=at.color,nt=gt.dash||[],ct=gt.dashOffset,st=at.tickWidth,dt=at.tickColor,wt=at.tickBorderDash||[],_t=at.tickBorderDashOffset;it=LP(this,et,d),it!==void 0&&(W=oa(i,it,kt),m?ot=R=N=L=W:C=x=P=D=W,A.push({tx1:ot,ty1:C,tx2:R,ty2:x,x1:N,y1:P,x2:L,y2:D,width:kt,color:V,borderDash:nt,borderDashOffset:ct,tickWidth:st,tickColor:dt,tickBorderDash:wt,tickBorderDashOffset:_t}))}return this._ticksLength=v,this._borderValue=X,A}_computeLabelItems(t){const e=this.axis,i=this.options,{position:r,ticks:o}=i,c=this.isHorizontal(),h=this.ticks,{align:d,crossAlign:m,padding:_,mirror:v}=o,T=mc(i.grid),A=T+_,I=v?-_:A,k=-fa(this.labelRotation),M=[];let G,X,et,it,W,ot,C,R,x,N,P,L,D="middle";if(r==="top")ot=this.bottom-I,C=this._getXAxisLabelAlignment();else if(r==="bottom")ot=this.top+I,C=this._getXAxisLabelAlignment();else if(r==="left"){const At=this._getYAxisLabelAlignment(T);C=At.textAlign,W=At.x}else if(r==="right"){const At=this._getYAxisLabelAlignment(T);C=At.textAlign,W=At.x}else if(e==="x"){if(r==="center")ot=(t.top+t.bottom)/2+A;else if(jt(r)){const At=Object.keys(r)[0],Y=r[At];ot=this.chart.scales[At].getPixelForValue(Y)+A}C=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")W=(t.left+t.right)/2-A;else if(jt(r)){const At=Object.keys(r)[0],Y=r[At];W=this.chart.scales[At].getPixelForValue(Y)}C=this._getYAxisLabelAlignment(T).textAlign}e==="y"&&(d==="start"?D="top":d==="end"&&(D="bottom"));const Wt=this._getLabelSizes();for(G=0,X=h.length;G<X;++G){et=h[G],it=et.label;const At=o.setContext(this.getContext(G));R=this.getPixelForTick(G)+o.labelOffset,x=this._resolveTickFontOptions(G),N=x.lineHeight,P=He(it)?it.length:1;const Y=P/2,at=At.color,gt=At.textStrokeColor,kt=At.textStrokeWidth;let V=C;c?(W=R,C==="inner"&&(G===X-1?V=this.options.reverse?"left":"right":G===0?V=this.options.reverse?"right":"left":V="center"),r==="top"?m==="near"||k!==0?L=-P*N+N/2:m==="center"?L=-Wt.highest.height/2-Y*N+N:L=-Wt.highest.height+N/2:m==="near"||k!==0?L=N/2:m==="center"?L=Wt.highest.height/2-Y*N:L=Wt.highest.height-P*N,v&&(L*=-1),k!==0&&!At.showLabelBackdrop&&(W+=N/2*Math.sin(k))):(ot=R,L=(1-P)*N/2);let nt;if(At.showLabelBackdrop){const ct=si(At.backdropPadding),st=Wt.heights[G],dt=Wt.widths[G];let wt=L-ct.top,_t=0-ct.left;switch(D){case"middle":wt-=st/2;break;case"bottom":wt-=st;break}switch(C){case"center":_t-=dt/2;break;case"right":_t-=dt;break;case"inner":G===X-1?_t-=dt:G>0&&(_t-=dt/2);break}nt={left:_t,top:wt,width:dt+ct.width,height:st+ct.height,color:At.backdropColor}}M.push({label:it,font:x,textOffset:L,options:{rotation:k,color:at,strokeColor:gt,strokeWidth:kt,textAlign:V,textBaseline:D,translation:[W,ot],backdrop:nt}})}return M}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-fa(this.labelRotation))return t==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:r,padding:o}}=this.options,c=this._getLabelSizes(),h=t+o,d=c.widest.width;let m,_;return e==="left"?r?(_=this.right+o,i==="near"?m="left":i==="center"?(m="center",_+=d/2):(m="right",_+=d)):(_=this.right-h,i==="near"?m="right":i==="center"?(m="center",_-=d/2):(m="left",_=this.left)):e==="right"?r?(_=this.left+o,i==="near"?m="right":i==="center"?(m="center",_-=d/2):(m="left",_-=d)):(_=this.left+h,i==="near"?m="left":i==="center"?(m="center",_+=d/2):(m="right",_=this.right)):m="right",{textAlign:m,x:_}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:r,width:o,height:c}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,o,c),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(o=>o.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,c;const h=(d,m,_)=>{!_.width||!_.color||(i.save(),i.lineWidth=_.width,i.strokeStyle=_.color,i.setLineDash(_.borderDash||[]),i.lineDashOffset=_.borderDashOffset,i.beginPath(),i.moveTo(d.x,d.y),i.lineTo(m.x,m.y),i.stroke(),i.restore())};if(e.display)for(o=0,c=r.length;o<c;++o){const d=r[o];e.drawOnChartArea&&h({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),e.drawTicks&&h({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:r}}=this,o=i.setContext(this.getContext()),c=i.display?o.width:0;if(!c)return;const h=r.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let m,_,v,T;this.isHorizontal()?(m=oa(t,this.left,c)-c/2,_=oa(t,this.right,h)+h/2,v=T=d):(v=oa(t,this.top,c)-c/2,T=oa(t,this.bottom,h)+h/2,m=_=d),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(m,v),e.lineTo(_,T),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&__(i,r);const o=this.getLabelItems(t);for(const c of o){const h=c.options,d=c.font,m=c.label,_=c.textOffset;Pf(i,m,0,_,d,h)}r&&y_(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:r}}=this;if(!i.display)return;const o=pn(i.font),c=si(i.padding),h=i.align;let d=o.lineHeight/2;e==="bottom"||e==="center"||jt(e)?(d+=c.bottom,He(i.text)&&(d+=o.lineHeight*(i.text.length-1))):d+=c.top;const{titleX:m,titleY:_,maxWidth:v,rotation:T}=HP(this,d,e,h);Pf(t,i.text,0,0,o,{color:i.color,maxWidth:v,rotation:T,textAlign:jP(h,e,r),textBaseline:"middle",translation:[m,_]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=Ft(t.grid&&t.grid.z,-1),r=Ft(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==el.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let o,c;for(o=0,c=e.length;o<c;++o){const h=e[o];h[i]===this.id&&(!t||h.type===t)&&r.push(h)}return r}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return pn(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Kh{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;GP(e)&&(i=this.register(e));const r=this.items,o=t.id,c=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in r||(r[o]=t,FP(t,c,i),this.override&&be.override(t.id,t.overrides)),c}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in be[r]&&(delete be[r][i],this.override&&delete Ea[i])}}function FP(n,t,e){const i=Yc(Object.create(null),[e?be.get(e):{},be.get(t),n.defaults]);be.set(t,i),n.defaultRoutes&&qP(t,n.defaultRoutes),n.descriptors&&be.describe(t,n.descriptors)}function qP(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),r=i.pop(),o=[n].concat(i).join("."),c=t[e].split("."),h=c.pop(),d=c.join(".");be.route(o,r,d,h)})}function GP(n){return"id"in n&&"defaults"in n}class YP{constructor(){this.controllers=new Kh(Hw,"datasets",!0),this.elements=new Kh(au,"elements"),this.plugins=new Kh(Object,"plugins"),this.scales=new Kh(el,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(r=>{const o=i||this._getRegistryForType(r);i||o.isForType(r)||o===this.plugins&&r.id?this._exec(t,o,r):Xt(r,c=>{const h=i||this._getRegistryForType(c);this._exec(t,h,c)})})}_exec(t,e,i){const r=m_(t);oe(i["before"+r],[],i),e[t](i),oe(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const r=e.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var Ai=new YP;class KP{constructor(){this._init=[]}notify(t,e,i,r){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=r?this._descriptors(t).filter(r):this._descriptors(t),c=this._notify(o,t,e,i);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),c}_notify(t,e,i,r){r=r||{};for(const o of t){const c=o.plugin,h=c[i],d=[e,r,o.options];if(oe(h,d,c)===!1&&r.cancelable)return!1}return!0}invalidate(){ne(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,r=Ft(i.options&&i.options.plugins,{}),o=QP(i);return r===!1&&!e?[]:WP(t,o,r,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,r=(o,c)=>o.filter(h=>!c.some(d=>h.plugin.id===d.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}}function QP(n){const t={},e=[],i=Object.keys(Ai.plugins.items);for(let o=0;o<i.length;o++)e.push(Ai.getPlugin(i[o]));const r=n.plugins||[];for(let o=0;o<r.length;o++){const c=r[o];e.indexOf(c)===-1&&(e.push(c),t[c.id]=!0)}return{plugins:e,localIds:t}}function XP(n,t){return!t&&n===!1?null:n===!0?{}:n}function WP(n,{plugins:t,localIds:e},i,r){const o=[],c=n.getContext();for(const h of t){const d=h.id,m=XP(i[d],r);m!==null&&o.push({plugin:h,options:$P(n.config,{plugin:h,local:e[d]},m,c)})}return o}function $P(n,{plugin:t,local:e},i,r){const o=n.pluginScopeKeys(t),c=n.getOptionScopes(i,o);return e&&t.defaults&&c.push(t.defaults),n.createResolver(c,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function dp(n,t){const e=be.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function ZP(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function JP(n,t){return n===t?"_index_":"_value_"}function hT(n){if(n==="x"||n==="y"||n==="r")return n}function tV(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function gp(n,...t){if(hT(n))return n;for(const e of t){const i=e.axis||tV(e.position)||n.length>1&&hT(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function fT(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function eV(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return fT(n,"x",e[0])||fT(n,"y",e[0])}return{}}function nV(n,t){const e=Ea[n.type]||{scales:{}},i=t.scales||{},r=dp(n.type,t),o=Object.create(null);return Object.keys(i).forEach(c=>{const h=i[c];if(!jt(h))return console.error(`Invalid scale configuration for scale: ${c}`);if(h._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);const d=gp(c,h,eV(c,n),be.scales[h.type]),m=JP(d,r),_=e.scales||{};o[c]=Mc(Object.create(null),[{axis:d},h,_[d],_[m]])}),n.data.datasets.forEach(c=>{const h=c.type||n.type,d=c.indexAxis||dp(h,t),_=(Ea[h]||{}).scales||{};Object.keys(_).forEach(v=>{const T=ZP(v,d),A=c[T+"AxisID"]||T;o[A]=o[A]||Object.create(null),Mc(o[A],[{axis:T},i[A],_[v]])})}),Object.keys(o).forEach(c=>{const h=o[c];Mc(h,[be.scales[h.type],be.scale])}),o}function Xw(n){const t=n.options||(n.options={});t.plugins=Ft(t.plugins,{}),t.scales=nV(n,t)}function Ww(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function iV(n){return n=n||{},n.data=Ww(n.data),Xw(n),n}const dT=new Map,$w=new Set;function Qh(n,t){let e=dT.get(n);return e||(e=t(),dT.set(n,e),$w.add(e)),e}const pc=(n,t,e)=>{const i=Fo(t,e);i!==void 0&&n.add(i)};class sV{constructor(t){this._config=iV(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Ww(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Xw(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Qh(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Qh(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Qh(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return Qh(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){const{options:r,type:o}=this,c=this._cachedScopes(t,i),h=c.get(e);if(h)return h;const d=new Set;e.forEach(_=>{t&&(d.add(t),_.forEach(v=>pc(d,t,v))),_.forEach(v=>pc(d,r,v)),_.forEach(v=>pc(d,Ea[o]||{},v)),_.forEach(v=>pc(d,be,v)),_.forEach(v=>pc(d,fp,v))});const m=Array.from(d);return m.length===0&&m.push(Object.create(null)),$w.has(e)&&c.set(e,m),m}chartOptionScopes(){const{options:t,type:e}=this;return[t,Ea[e]||{},be.datasets[e]||{},{type:e},be,fp]}resolveNamedOptions(t,e,i,r=[""]){const o={$shared:!0},{resolver:c,subPrefixes:h}=gT(this._resolverCache,t,r);let d=c;if(aV(c,e)){o.$shared=!1,i=br(i)?i():i;const m=this.createResolver(t,i,h);d=qo(c,i,m)}for(const m of e)o[m]=d[m];return o}createResolver(t,e,i=[""],r){const{resolver:o}=gT(this._resolverCache,t,i);return jt(e)?qo(o,e,void 0,r):o}}function gT(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const r=e.join();let o=i.get(r);return o||(o={resolver:v_(t,e),subPrefixes:e.filter(h=>!h.toLowerCase().includes("hover"))},i.set(r,o)),o}const rV=n=>jt(n)&&Object.getOwnPropertyNames(n).some(t=>br(n[t]));function aV(n,t){const{isScriptable:e,isIndexable:i}=Nw(n);for(const r of t){const o=e(r),c=i(r),h=(c||o)&&n[r];if(o&&(br(h)||rV(h))||c&&He(h))return!0}return!1}var oV="4.5.0";const lV=["top","bottom","left","right","chartArea"];function mT(n,t){return n==="top"||n==="bottom"||lV.indexOf(n)===-1&&t==="x"}function pT(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function _T(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),oe(e&&e.onComplete,[n],t)}function cV(n){const t=n.chart,e=t.options.animation;oe(e&&e.onProgress,[n],t)}function Zw(n){return T_()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const uf={},yT=n=>{const t=Zw(n);return Object.values(uf).filter(e=>e.canvas===t).pop()};function uV(n,t,e){const i=Object.keys(n);for(const r of i){const o=+r;if(o>=t){const c=n[r];delete n[r],(e>0||o>t)&&(n[o+e]=c)}}}function hV(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}let ou=class{static defaults=be;static instances=uf;static overrides=Ea;static registry=Ai;static version=oV;static getChart=yT;static register(...t){Ai.add(...t),vT()}static unregister(...t){Ai.remove(...t),vT()}constructor(t,e){const i=this.config=new sV(e),r=Zw(t),o=yT(r);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const c=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||CP(r)),this.platform.updateConfig(i);const h=this.platform.acquireContext(r,c.aspectRatio),d=h&&h.canvas,m=d&&d.height,_=d&&d.width;if(this.id=Rk(),this.ctx=h,this.canvas=d,this.width=_,this.height=m,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new KP,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Yk(v=>this.update(v),c.resizeDelay||0),this._dataChanges=[],uf[this.id]=this,!h||!d){console.error("Failed to create chart: can't acquire context from the given item");return}os.listen(this,"complete",_T),os.listen(this,"progress",cV),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:r,_aspectRatio:o}=this;return ne(t)?e&&o?o:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Ai}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():qE(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return BE(this.canvas,this.ctx),this}stop(){return os.stop(this),this}resize(t,e){os.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,r=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(r,t,e,o),h=i.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,qE(this,h,!0)&&(this.notifyPlugins("resize",{size:c}),oe(i.onResize,[this,c],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};Xt(e,(i,r)=>{i.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,r=Object.keys(i).reduce((c,h)=>(c[h]=!1,c),{});let o=[];e&&(o=o.concat(Object.keys(e).map(c=>{const h=e[c],d=gp(c,h),m=d==="r",_=d==="x";return{options:h,dposition:m?"chartArea":_?"bottom":"left",dtype:m?"radialLinear":_?"category":"linear"}}))),Xt(o,c=>{const h=c.options,d=h.id,m=gp(d,h),_=Ft(h.type,c.dtype);(h.position===void 0||mT(h.position,m)!==mT(c.dposition))&&(h.position=c.dposition),r[d]=!0;let v=null;if(d in i&&i[d].type===_)v=i[d];else{const T=Ai.getScale(_);v=new T({id:d,type:_,ctx:this.ctx,chart:this}),i[v.id]=v}v.init(h,t)}),Xt(r,(c,h)=>{c||delete i[h]}),Xt(i,c=>{tr.configure(this,c,c.options),tr.addBox(this,c)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((r,o)=>r.index-o.index),i>e){for(let r=e;r<i;++r)this._destroyDatasetMeta(r);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(pT("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,r)=>{e.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=e.length;i<r;i++){const o=e[i];let c=this.getDatasetMeta(i);const h=o.type||this.config.type;if(c.type&&c.type!==h&&(this._destroyDatasetMeta(i),c=this.getDatasetMeta(i)),c.type=h,c.indexAxis=o.indexAxis||dp(h,this.options),c.order=o.order||0,c.index=i,c.label=""+o.label,c.visible=this.isDatasetVisible(i),c.controller)c.controller.updateIndex(i),c.controller.linkScales();else{const d=Ai.getController(h),{datasetElementType:m,dataElementType:_}=be.datasets[h];Object.assign(d,{dataElementType:Ai.getElement(_),datasetElementType:m&&Ai.getElement(m)}),c.controller=new d(this,i),t.push(c.controller)}}return this._updateMetasets(),t}_resetElements(){Xt(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let m=0,_=this.data.datasets.length;m<_;m++){const{controller:v}=this.getDatasetMeta(m),T=!r&&o.indexOf(v)===-1;v.buildOrUpdateElements(T),c=Math.max(+v.getMaxOverflow(),c)}c=this._minPadding=i.layout.autoPadding?c:0,this._updateLayout(c),r||Xt(o,m=>{m.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(pT("z","_idx"));const{_active:h,_lastEvent:d}=this;d?this._eventHandler(d,!0):h.length&&this._updateHoverStyles(h,h,!0),this.render()}_updateScales(){Xt(this.scales,t=>{tr.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!DE(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:o}of e){const c=i==="_removeElements"?-o:o;uV(t,r,c)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=o=>new Set(t.filter(c=>c[0]===o).map((c,h)=>h+","+c.splice(1).join(","))),r=i(0);for(let o=1;o<e;o++)if(!DE(r,i(o)))return;return Array.from(r).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;tr.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],Xt(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,o)=>{r._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,br(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),r={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(os.has(this)?this.attached&&!os.running(this)&&os.start(this):(this.draw(),_T({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let r,o;for(r=0,o=e.length;r<o;++r){const c=e[r];(!t||c.visible)&&i.push(c)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},r=ON(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&__(e,r),t.controller.draw(),r&&y_(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return Ow(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,r){const o=lP.modes[e];return typeof o=="function"?o(this,t,i,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let r=i.filter(o=>o&&o._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=tl(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const r=i?"show":"hide",o=this.getDatasetMeta(t),c=o.controller._resolveAnimations(void 0,r);Kc(e)?(o.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),c.update(o,{visible:i}),this.update(h=>h.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),os.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),BE(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete uf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(o,c)=>{e.addEventListener(this,o,c),t[o]=c},r=(o,c,h)=>{o.offsetX=c,o.offsetY=h,this._eventHandler(o)};Xt(this.options.events,o=>i(o,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(d,m)=>{e.addEventListener(this,d,m),t[d]=m},r=(d,m)=>{t[d]&&(e.removeEventListener(this,d,m),delete t[d])},o=(d,m)=>{this.canvas&&this.resize(d,m)};let c;const h=()=>{r("attach",h),this.attached=!0,this.resize(),i("resize",o),i("detach",c)};c=()=>{this.attached=!1,r("resize",o),this._stop(),this._resize(0,0),i("attach",h)},e.isAttached(this.canvas)?h():c()}unbindEvents(){Xt(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Xt(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const r=i?"set":"remove";let o,c,h,d;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+r+"DatasetHoverStyle"]()),h=0,d=t.length;h<d;++h){c=t[h];const m=c&&this.getDatasetMeta(c.datasetIndex).controller;m&&m[r+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:o,index:c})=>{const h=this.getDatasetMeta(o);if(!h)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:h.data[c],index:c}});!Of(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const r=this.options.hover,o=(d,m)=>d.filter(_=>!m.some(v=>_.datasetIndex===v.datasetIndex&&_.index===v.index)),c=o(e,t),h=i?t:o(t,e);c.length&&this.updateHoverStyle(c,r.mode,!1),h.length&&r.mode&&this.updateHoverStyle(h,r.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=c=>(c.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const o=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(o||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:r=[],options:o}=this,c=e,h=this._getActiveElements(t,r,i,c),d=Mk(t),m=hV(t,this._lastEvent,i,d);i&&(this._lastEvent=null,oe(o.onHover,[t,h,this],this),d&&oe(o.onClick,[t,h,this],this));const _=!Of(h,r);return(_||e)&&(this._active=h,this._updateHoverStyles(h,r,e)),this._lastEvent=m,_}_getActiveElements(t,e,i,r){if(t.type==="mouseout")return[];if(!i)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,r)}};function vT(){return Xt(ou.instances,n=>n._plugins.invalidate())}function Jw(n,t){const{x:e,y:i,base:r,width:o,height:c}=n.getProps(["x","y","base","width","height"],t);let h,d,m,_,v;return n.horizontal?(v=c/2,h=Math.min(e,r),d=Math.max(e,r),m=i-v,_=i+v):(v=o/2,h=e-v,d=e+v,m=Math.min(i,r),_=Math.max(i,r)),{left:h,top:m,right:d,bottom:_}}function er(n,t,e,i){return n?0:ei(t,e,i)}function fV(n,t,e){const i=n.options.borderWidth,r=n.borderSkipped,o=kw(i);return{t:er(r.top,o.top,0,e),r:er(r.right,o.right,0,t),b:er(r.bottom,o.bottom,0,e),l:er(r.left,o.left,0,t)}}function dV(n,t,e){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,o=ko(r),c=Math.min(t,e),h=n.borderSkipped,d=i||jt(r);return{topLeft:er(!d||h.top||h.left,o.topLeft,0,c),topRight:er(!d||h.top||h.right,o.topRight,0,c),bottomLeft:er(!d||h.bottom||h.left,o.bottomLeft,0,c),bottomRight:er(!d||h.bottom||h.right,o.bottomRight,0,c)}}function gV(n){const t=Jw(n),e=t.right-t.left,i=t.bottom-t.top,r=fV(n,e/2,i/2),o=dV(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:o},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,o.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(r.b,r.r))}}}}function Pm(n,t,e,i){const r=t===null,o=e===null,h=n&&!(r&&o)&&Jw(n,i);return h&&(r||Ro(t,h.left,h.right))&&(o||Ro(e,h.top,h.bottom))}function mV(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function pV(n,t){n.rect(t.x,t.y,t.w,t.h)}function Vm(n,t,e={}){const i=n.x!==e.x?-t:0,r=n.y!==e.y?-t:0,o=(n.x+n.w!==e.x+e.w?t:0)-i,c=(n.y+n.h!==e.y+e.h?t:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+o,h:n.h+c,radius:n.radius}}class t1 extends au{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:r}}=this,{inner:o,outer:c}=gV(this),h=mV(c.radius)?Vf:pV;t.save(),(c.w!==o.w||c.h!==o.h)&&(t.beginPath(),h(t,Vm(c,e,o)),t.clip(),h(t,Vm(o,-e,c)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),h(t,Vm(o,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,i){return Pm(this,t,e,i)}inXRange(t,e){return Pm(this,t,null,e)}inYRange(t,e){return Pm(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:r,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(e+r)/2:e,y:o?i:(i+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}const bT=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},_V=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class ET extends au{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=oe(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,r=pn(i.font),o=r.size,c=this._computeTitleHeight(),{boxWidth:h,itemHeight:d}=bT(i,o);let m,_;e.font=r.string,this.isHorizontal()?(m=this.maxWidth,_=this._fitRows(c,o,h,d)+10):(_=this.maxHeight,m=this._fitCols(c,r,h,d)+10),this.width=Math.min(m,t.maxWidth||this.maxWidth),this.height=Math.min(_,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,r){const{ctx:o,maxWidth:c,options:{labels:{padding:h}}}=this,d=this.legendHitBoxes=[],m=this.lineWidths=[0],_=r+h;let v=t;o.textAlign="left",o.textBaseline="middle";let T=-1,A=-_;return this.legendItems.forEach((I,k)=>{const M=i+e/2+o.measureText(I.text).width;(k===0||m[m.length-1]+M+2*h>c)&&(v+=_,m[m.length-(k>0?0:1)]=0,A+=_,T++),d[k]={left:0,top:A,row:T,width:M,height:r},m[m.length-1]+=M+h}),v}_fitCols(t,e,i,r){const{ctx:o,maxHeight:c,options:{labels:{padding:h}}}=this,d=this.legendHitBoxes=[],m=this.columnSizes=[],_=c-t;let v=h,T=0,A=0,I=0,k=0;return this.legendItems.forEach((M,G)=>{const{itemWidth:X,itemHeight:et}=yV(i,e,o,M,r);G>0&&A+et+2*h>_&&(v+=T+h,m.push({width:T,height:A}),I+=T+h,k++,T=A=0),d[G]={left:I,top:A,col:k,width:X,height:et},T=Math.max(T,X),A+=et+h}),v+=T,m.push({width:T,height:A}),v}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:o}}=this,c=No(o,this.left,this.width);if(this.isHorizontal()){let h=0,d=xn(i,this.left+r,this.right-this.lineWidths[h]);for(const m of e)h!==m.row&&(h=m.row,d=xn(i,this.left+r,this.right-this.lineWidths[h])),m.top+=this.top+t+r,m.left=c.leftForLtr(c.x(d),m.width),d+=m.width+r}else{let h=0,d=xn(i,this.top+t+r,this.bottom-this.columnSizes[h].height);for(const m of e)m.col!==h&&(h=m.col,d=xn(i,this.top+t+r,this.bottom-this.columnSizes[h].height)),m.top=d,m.left+=this.left+r,m.left=c.leftForLtr(c.x(m.left),m.width),d+=m.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;__(t,this),this._draw(),y_(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:r}=this,{align:o,labels:c}=t,h=be.color,d=No(t.rtl,this.left,this.width),m=pn(c.font),{padding:_}=c,v=m.size,T=v/2;let A;this.drawTitle(),r.textAlign=d.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=m.string;const{boxWidth:I,boxHeight:k,itemHeight:M}=bT(c,v),G=function(ot,C,R){if(isNaN(I)||I<=0||isNaN(k)||k<0)return;r.save();const x=Ft(R.lineWidth,1);if(r.fillStyle=Ft(R.fillStyle,h),r.lineCap=Ft(R.lineCap,"butt"),r.lineDashOffset=Ft(R.lineDashOffset,0),r.lineJoin=Ft(R.lineJoin,"miter"),r.lineWidth=x,r.strokeStyle=Ft(R.strokeStyle,h),r.setLineDash(Ft(R.lineDash,[])),c.usePointStyle){const N={radius:k*Math.SQRT2/2,pointStyle:R.pointStyle,rotation:R.rotation,borderWidth:x},P=d.xPlus(ot,I/2),L=C+T;Dw(r,N,P,L,c.pointStyleWidth&&I)}else{const N=C+Math.max((v-k)/2,0),P=d.leftForLtr(ot,I),L=ko(R.borderRadius);r.beginPath(),Object.values(L).some(D=>D!==0)?Vf(r,{x:P,y:N,w:I,h:k,radius:L}):r.rect(P,N,I,k),r.fill(),x!==0&&r.stroke()}r.restore()},X=function(ot,C,R){Pf(r,R.text,ot,C+M/2,m,{strikethrough:R.hidden,textAlign:d.textAlign(R.textAlign)})},et=this.isHorizontal(),it=this._computeTitleHeight();et?A={x:xn(o,this.left+_,this.right-i[0]),y:this.top+_+it,line:0}:A={x:this.left+_,y:xn(o,this.top+it+_,this.bottom-e[0].height),line:0},Uw(this.ctx,t.textDirection);const W=M+_;this.legendItems.forEach((ot,C)=>{r.strokeStyle=ot.fontColor,r.fillStyle=ot.fontColor;const R=r.measureText(ot.text).width,x=d.textAlign(ot.textAlign||(ot.textAlign=c.textAlign)),N=I+T+R;let P=A.x,L=A.y;d.setWidth(this.width),et?C>0&&P+N+_>this.right&&(L=A.y+=W,A.line++,P=A.x=xn(o,this.left+_,this.right-i[A.line])):C>0&&L+W>this.bottom&&(P=A.x=P+e[A.line].width+_,A.line++,L=A.y=xn(o,this.top+it+_,this.bottom-e[A.line].height));const D=d.x(P);if(G(D,L,ot),P=Kk(x,P+I+T,et?P+N:this.right,t.rtl),X(d.x(P),L,ot),et)A.x+=N+_;else if(typeof ot.text!="string"){const Wt=m.lineHeight;A.y+=e1(ot,Wt)+_}else A.y+=W}),zw(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=pn(e.font),r=si(e.padding);if(!e.display)return;const o=No(t.rtl,this.left,this.width),c=this.ctx,h=e.position,d=i.size/2,m=r.top+d;let _,v=this.left,T=this.width;if(this.isHorizontal())T=Math.max(...this.lineWidths),_=this.top+m,v=xn(t.align,v,this.right-T);else{const I=this.columnSizes.reduce((k,M)=>Math.max(k,M.height),0);_=m+xn(t.align,this.top,this.bottom-I-t.labels.padding-this._computeTitleHeight())}const A=xn(h,v,v+T);c.textAlign=o.textAlign(Rw(h)),c.textBaseline="middle",c.strokeStyle=e.color,c.fillStyle=e.color,c.font=i.string,Pf(c,e.text,A,_,i)}_computeTitleHeight(){const t=this.options.title,e=pn(t.font),i=si(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,o;if(Ro(t,this.left,this.right)&&Ro(e,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(r=o[i],Ro(t,r.left,r.left+r.width)&&Ro(e,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!EV(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,o=_V(r,i);r&&!o&&oe(e.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!o&&oe(e.onHover,[t,i,this],this)}else i&&oe(e.onClick,[t,i,this],this)}}function yV(n,t,e,i,r){const o=vV(i,n,t,e),c=bV(r,i,t.lineHeight);return{itemWidth:o,itemHeight:c}}function vV(n,t,e,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((o,c)=>o.length>c.length?o:c)),t+e.size/2+i.measureText(r).width}function bV(n,t,e){let i=n;return typeof t.text!="string"&&(i=e1(t,e)),i}function e1(n,t){const e=n.text?n.text.length:0;return t*e}function EV(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var n1={id:"legend",_element:ET,start(n,t,e){const i=n.legend=new ET({ctx:n.ctx,options:e,chart:n});tr.configure(n,i,e),tr.addBox(n,i)},stop(n){tr.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;tr.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,r=e.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:r,color:o,useBorderRadius:c,borderRadius:h}}=n.legend.options;return n._getSortedDatasetMetas().map(d=>{const m=d.controller.getStyle(e?0:void 0),_=si(m.borderWidth);return{text:t[d.index].label,fillStyle:m.backgroundColor,fontColor:o,hidden:!d.visible,lineCap:m.borderCapStyle,lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:(_.width+_.height)/4,strokeStyle:m.borderColor,pointStyle:i||m.pointStyle,rotation:m.rotation,textAlign:r||m.textAlign,borderRadius:c&&(h||m.borderRadius),datasetIndex:d.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};const wc={average(n){if(!n.length)return!1;let t,e,i=new Set,r=0,o=0;for(t=0,e=n.length;t<e;++t){const h=n[t].element;if(h&&h.hasValue()){const d=h.tooltipPosition();i.add(d.x),r+=d.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((h,d)=>h+d)/i.size,y:r/o}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,r=Number.POSITIVE_INFINITY,o,c,h;for(o=0,c=n.length;o<c;++o){const d=n[o].element;if(d&&d.hasValue()){const m=d.getCenterPoint(),_=Bk(t,m);_<r&&(r=_,h=d)}}if(h){const d=h.tooltipPosition();e=d.x,i=d.y}return{x:e,y:i}}};function Si(n,t){return t&&(He(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function ls(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function TV(n,t){const{element:e,datasetIndex:i,index:r}=t,o=n.getDatasetMeta(i).controller,{label:c,value:h}=o.getLabelAndValue(r);return{chart:n,label:c,parsed:o.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:h,dataset:o.getDataset(),dataIndex:r,datasetIndex:i,element:e}}function TT(n,t){const e=n.chart.ctx,{body:i,footer:r,title:o}=n,{boxWidth:c,boxHeight:h}=t,d=pn(t.bodyFont),m=pn(t.titleFont),_=pn(t.footerFont),v=o.length,T=r.length,A=i.length,I=si(t.padding);let k=I.height,M=0,G=i.reduce((it,W)=>it+W.before.length+W.lines.length+W.after.length,0);if(G+=n.beforeBody.length+n.afterBody.length,v&&(k+=v*m.lineHeight+(v-1)*t.titleSpacing+t.titleMarginBottom),G){const it=t.displayColors?Math.max(h,d.lineHeight):d.lineHeight;k+=A*it+(G-A)*d.lineHeight+(G-1)*t.bodySpacing}T&&(k+=t.footerMarginTop+T*_.lineHeight+(T-1)*t.footerSpacing);let X=0;const et=function(it){M=Math.max(M,e.measureText(it).width+X)};return e.save(),e.font=m.string,Xt(n.title,et),e.font=d.string,Xt(n.beforeBody.concat(n.afterBody),et),X=t.displayColors?c+2+t.boxPadding:0,Xt(i,it=>{Xt(it.before,et),Xt(it.lines,et),Xt(it.after,et)}),X=0,e.font=_.string,Xt(n.footer,et),e.restore(),M+=I.width,{width:M,height:k}}function SV(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function AV(n,t,e,i){const{x:r,width:o}=i,c=e.caretSize+e.caretPadding;if(n==="left"&&r+o+c>t.width||n==="right"&&r-o-c<0)return!0}function wV(n,t,e,i){const{x:r,width:o}=e,{width:c,chartArea:{left:h,right:d}}=n;let m="center";return i==="center"?m=r<=(h+d)/2?"left":"right":r<=o/2?m="left":r>=c-o/2&&(m="right"),AV(m,n,t,e)&&(m="center"),m}function ST(n,t,e){const i=e.yAlign||t.yAlign||SV(n,e);return{xAlign:e.xAlign||t.xAlign||wV(n,t,e,i),yAlign:i}}function RV(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function xV(n,t,e){let{y:i,height:r}=n;return t==="top"?i+=e:t==="bottom"?i-=r+e:i-=r/2,i}function AT(n,t,e,i){const{caretSize:r,caretPadding:o,cornerRadius:c}=n,{xAlign:h,yAlign:d}=e,m=r+o,{topLeft:_,topRight:v,bottomLeft:T,bottomRight:A}=ko(c);let I=RV(t,h);const k=xV(t,d,m);return d==="center"?h==="left"?I+=m:h==="right"&&(I-=m):h==="left"?I-=Math.max(_,T)+r:h==="right"&&(I+=Math.max(v,A)+r),{x:ei(I,0,i.width-t.width),y:ei(k,0,i.height-t.height)}}function Xh(n,t,e){const i=si(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function wT(n){return Si([],ls(n))}function IV(n,t,e){return tl(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function RT(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const i1={beforeTitle:as,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:as,beforeBody:as,beforeLabel:as,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return ne(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:as,afterBody:as,beforeFooter:as,footer:as,afterFooter:as};function dn(n,t,e,i){const r=n[t].call(e,i);return typeof r>"u"?i1[t].call(e,i):r}class xT extends au{static positioners=wc;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&e.options.animation&&i.animations,o=new Bw(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=IV(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,r=dn(i,"beforeTitle",this,t),o=dn(i,"title",this,t),c=dn(i,"afterTitle",this,t);let h=[];return h=Si(h,ls(r)),h=Si(h,ls(o)),h=Si(h,ls(c)),h}getBeforeBody(t,e){return wT(dn(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,r=[];return Xt(t,o=>{const c={before:[],lines:[],after:[]},h=RT(i,o);Si(c.before,ls(dn(h,"beforeLabel",this,o))),Si(c.lines,dn(h,"label",this,o)),Si(c.after,ls(dn(h,"afterLabel",this,o))),r.push(c)}),r}getAfterBody(t,e){return wT(dn(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,r=dn(i,"beforeFooter",this,t),o=dn(i,"footer",this,t),c=dn(i,"afterFooter",this,t);let h=[];return h=Si(h,ls(r)),h=Si(h,ls(o)),h=Si(h,ls(c)),h}_createItems(t){const e=this._active,i=this.chart.data,r=[],o=[],c=[];let h=[],d,m;for(d=0,m=e.length;d<m;++d)h.push(TV(this.chart,e[d]));return t.filter&&(h=h.filter((_,v,T)=>t.filter(_,v,T,i))),t.itemSort&&(h=h.sort((_,v)=>t.itemSort(_,v,i))),Xt(h,_=>{const v=RT(t.callbacks,_);r.push(dn(v,"labelColor",this,_)),o.push(dn(v,"labelPointStyle",this,_)),c.push(dn(v,"labelTextColor",this,_))}),this.labelColors=r,this.labelPointStyles=o,this.labelTextColors=c,this.dataPoints=h,h}update(t,e){const i=this.options.setContext(this.getContext()),r=this._active;let o,c=[];if(!r.length)this.opacity!==0&&(o={opacity:0});else{const h=wc[i.position].call(this,r,this._eventPosition);c=this._createItems(i),this.title=this.getTitle(c,i),this.beforeBody=this.getBeforeBody(c,i),this.body=this.getBody(c,i),this.afterBody=this.getAfterBody(c,i),this.footer=this.getFooter(c,i);const d=this._size=TT(this,i),m=Object.assign({},h,d),_=ST(this.chart,i,m),v=AT(i,m,_,this.chart);this.xAlign=_.xAlign,this.yAlign=_.yAlign,o={opacity:1,x:v.x,y:v.y,width:d.width,height:d.height,caretX:h.x,caretY:h.y}}this._tooltipItems=c,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,r){const o=this.getCaretPosition(t,i,r);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,i){const{xAlign:r,yAlign:o}=this,{caretSize:c,cornerRadius:h}=i,{topLeft:d,topRight:m,bottomLeft:_,bottomRight:v}=ko(h),{x:T,y:A}=t,{width:I,height:k}=e;let M,G,X,et,it,W;return o==="center"?(it=A+k/2,r==="left"?(M=T,G=M-c,et=it+c,W=it-c):(M=T+I,G=M+c,et=it-c,W=it+c),X=M):(r==="left"?G=T+Math.max(d,_)+c:r==="right"?G=T+I-Math.max(m,v)-c:G=this.caretX,o==="top"?(et=A,it=et-c,M=G-c,X=G+c):(et=A+k,it=et+c,M=G+c,X=G-c),W=et),{x1:M,x2:G,x3:X,y1:et,y2:it,y3:W}}drawTitle(t,e,i){const r=this.title,o=r.length;let c,h,d;if(o){const m=No(i.rtl,this.x,this.width);for(t.x=Xh(this,i.titleAlign,i),e.textAlign=m.textAlign(i.titleAlign),e.textBaseline="middle",c=pn(i.titleFont),h=i.titleSpacing,e.fillStyle=i.titleColor,e.font=c.string,d=0;d<o;++d)e.fillText(r[d],m.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+h,d+1===o&&(t.y+=i.titleMarginBottom-h)}}_drawColorBox(t,e,i,r,o){const c=this.labelColors[i],h=this.labelPointStyles[i],{boxHeight:d,boxWidth:m}=o,_=pn(o.bodyFont),v=Xh(this,"left",o),T=r.x(v),A=d<_.lineHeight?(_.lineHeight-d)/2:0,I=e.y+A;if(o.usePointStyle){const k={radius:Math.min(m,d)/2,pointStyle:h.pointStyle,rotation:h.rotation,borderWidth:1},M=r.leftForLtr(T,m)+m/2,G=I+d/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,jE(t,k,M,G),t.strokeStyle=c.borderColor,t.fillStyle=c.backgroundColor,jE(t,k,M,G)}else{t.lineWidth=jt(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,t.strokeStyle=c.borderColor,t.setLineDash(c.borderDash||[]),t.lineDashOffset=c.borderDashOffset||0;const k=r.leftForLtr(T,m),M=r.leftForLtr(r.xPlus(T,1),m-2),G=ko(c.borderRadius);Object.values(G).some(X=>X!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,Vf(t,{x:k,y:I,w:m,h:d,radius:G}),t.fill(),t.stroke(),t.fillStyle=c.backgroundColor,t.beginPath(),Vf(t,{x:M,y:I+1,w:m-2,h:d-2,radius:G}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(k,I,m,d),t.strokeRect(k,I,m,d),t.fillStyle=c.backgroundColor,t.fillRect(M,I+1,m-2,d-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:r}=this,{bodySpacing:o,bodyAlign:c,displayColors:h,boxHeight:d,boxWidth:m,boxPadding:_}=i,v=pn(i.bodyFont);let T=v.lineHeight,A=0;const I=No(i.rtl,this.x,this.width),k=function(R){e.fillText(R,I.x(t.x+A),t.y+T/2),t.y+=T+o},M=I.textAlign(c);let G,X,et,it,W,ot,C;for(e.textAlign=c,e.textBaseline="middle",e.font=v.string,t.x=Xh(this,M,i),e.fillStyle=i.bodyColor,Xt(this.beforeBody,k),A=h&&M!=="right"?c==="center"?m/2+_:m+2+_:0,it=0,ot=r.length;it<ot;++it){for(G=r[it],X=this.labelTextColors[it],e.fillStyle=X,Xt(G.before,k),et=G.lines,h&&et.length&&(this._drawColorBox(e,t,it,I,i),T=Math.max(v.lineHeight,d)),W=0,C=et.length;W<C;++W)k(et[W]),T=v.lineHeight;Xt(G.after,k)}A=0,T=v.lineHeight,Xt(this.afterBody,k),t.y-=o}drawFooter(t,e,i){const r=this.footer,o=r.length;let c,h;if(o){const d=No(i.rtl,this.x,this.width);for(t.x=Xh(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=d.textAlign(i.footerAlign),e.textBaseline="middle",c=pn(i.footerFont),e.fillStyle=i.footerColor,e.font=c.string,h=0;h<o;++h)e.fillText(r[h],d.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+i.footerSpacing}}drawBackground(t,e,i,r){const{xAlign:o,yAlign:c}=this,{x:h,y:d}=t,{width:m,height:_}=i,{topLeft:v,topRight:T,bottomLeft:A,bottomRight:I}=ko(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(h+v,d),c==="top"&&this.drawCaret(t,e,i,r),e.lineTo(h+m-T,d),e.quadraticCurveTo(h+m,d,h+m,d+T),c==="center"&&o==="right"&&this.drawCaret(t,e,i,r),e.lineTo(h+m,d+_-I),e.quadraticCurveTo(h+m,d+_,h+m-I,d+_),c==="bottom"&&this.drawCaret(t,e,i,r),e.lineTo(h+A,d+_),e.quadraticCurveTo(h,d+_,h,d+_-A),c==="center"&&o==="left"&&this.drawCaret(t,e,i,r),e.lineTo(h,d+v),e.quadraticCurveTo(h,d,h+v,d),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,r=i&&i.x,o=i&&i.y;if(r||o){const c=wc[t.position].call(this,this._active,this._eventPosition);if(!c)return;const h=this._size=TT(this,t),d=Object.assign({},c,this._size),m=ST(e,t,d),_=AT(t,d,m,e);(r._to!==_.x||o._to!==_.y)&&(this.xAlign=m.xAlign,this.yAlign=m.yAlign,this.width=h.width,this.height=h.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,_))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const c=si(e.padding),h=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&h&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,r,e),Uw(t,e.textDirection),o.y+=c.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),zw(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,r=t.map(({datasetIndex:h,index:d})=>{const m=this.chart.getDatasetMeta(h);if(!m)throw new Error("Cannot find a dataset at index "+h);return{datasetIndex:h,element:m.data[d],index:d}}),o=!Of(i,r),c=this._positionChanged(r,e);(o||c)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,o=this._active||[],c=this._getActiveElements(t,o,e,i),h=this._positionChanged(c,t),d=e||!Of(c,o)||h;return d&&(this._active=c,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),d}_getActiveElements(t,e,i,r){const o=this.options;if(t.type==="mouseout")return[];if(!r)return e.filter(h=>this.chart.data.datasets[h.datasetIndex]&&this.chart.getDatasetMeta(h.datasetIndex).controller.getParsed(h.index)!==void 0);const c=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&c.reverse(),c}_positionChanged(t,e){const{caretX:i,caretY:r,options:o}=this,c=wc[o.position].call(this,t,e);return c!==!1&&(i!==c.x||r!==c.y)}}var s1={id:"tooltip",_element:xT,positioners:wc,afterInit(n,t,e){e&&(n.tooltip=new xT({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:i1},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const CV=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function DV(n,t,e,i){const r=n.indexOf(t);if(r===-1)return CV(n,t,e,i);const o=n.lastIndexOf(t);return r!==o?e:r}const OV=(n,t)=>n===null?null:ei(Math.round(n),0,t);function IT(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class r1 extends el{static id="category";static defaults={ticks:{callback:IT}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:r,label:o}of e)i[r]===o&&i.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(ne(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:DV(i,t,Ft(e,t),this._addedLabels),OV(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,r=[];let o=this.getLabels();o=t===0&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let c=t;c<=e;c++)r.push({value:c});return r}getLabelForValue(t){return IT.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function MV(n,t){const e=[],{bounds:r,step:o,min:c,max:h,precision:d,count:m,maxTicks:_,maxDigits:v,includeBounds:T}=n,A=o||1,I=_-1,{min:k,max:M}=t,G=!ne(c),X=!ne(h),et=!ne(m),it=(M-k)/(v+1);let W=ME((M-k)/I/A)*A,ot,C,R,x;if(W<1e-14&&!G&&!X)return[{value:k},{value:M}];x=Math.ceil(M/W)-Math.floor(k/W),x>I&&(W=ME(x*W/I/A)*A),ne(d)||(ot=Math.pow(10,d),W=Math.ceil(W*ot)/ot),r==="ticks"?(C=Math.floor(k/W)*W,R=Math.ceil(M/W)*W):(C=k,R=M),G&&X&&o&&Vk((h-c)/o,W/1e3)?(x=Math.round(Math.min((h-c)/W,_)),W=(h-c)/x,C=c,R=h):et?(C=G?c:C,R=X?h:R,x=m-1,W=(R-C)/x):(x=(R-C)/W,lf(x,Math.round(x),W/1e3)?x=Math.round(x):x=Math.ceil(x));const N=Math.max(kE(W),kE(C));ot=Math.pow(10,ne(d)?N:d),C=Math.round(C*ot)/ot,R=Math.round(R*ot)/ot;let P=0;for(G&&(T&&C!==c?(e.push({value:c}),C<c&&P++,lf(Math.round((C+P*W)*ot)/ot,c,CT(c,it,n))&&P++):C<c&&P++);P<x;++P){const L=Math.round((C+P*W)*ot)/ot;if(X&&L>h)break;e.push({value:L})}return X&&T&&R!==h?e.length&&lf(e[e.length-1].value,h,CT(h,it,n))?e[e.length-1].value=h:e.push({value:h}):(!X||R===h)&&e.push({value:R}),e}function CT(n,t,{horizontal:e,minRotation:i}){const r=fa(i),o=(e?Math.sin(r):Math.cos(r))||.001,c=.75*t*(""+n).length;return Math.min(t/o,c)}class kV extends el{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return ne(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:r,max:o}=this;const c=d=>r=e?r:d,h=d=>o=i?o:d;if(t){const d=fr(r),m=fr(o);d<0&&m<0?h(0):d>0&&m>0&&c(0)}if(r===o){let d=o===0?1:Math.abs(o*.05);h(o+d),t||c(r-d)}this.min=r,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},o=this._range||this,c=MV(r,o);return t.bounds==="ticks"&&Lk(c,this,"value"),t.reverse?(c.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),c}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const r=(i-e)/Math.max(t.length-1,1)/2;e-=r,i+=r}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Iw(t,this.chart.options.locale,this.options.ticks.format)}}class a1 extends kV{static id="linear";static defaults={ticks:{callback:Cw.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=qn(t)?t:0,this.max=qn(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=fa(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const od={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},mn=Object.keys(od);function DT(n,t){return n-t}function OT(n,t){if(ne(t))return null;const e=n._adapter,{parser:i,round:r,isoWeekday:o}=n._parseOpts;let c=t;return typeof i=="function"&&(c=i(c)),qn(c)||(c=typeof i=="string"?e.parse(c,i):e.parse(c)),c===null?null:(r&&(c=r==="week"&&(Nf(o)||o===!0)?e.startOf(c,"isoWeek",o):e.startOf(c,r)),+c)}function MT(n,t,e,i){const r=mn.length;for(let o=mn.indexOf(n);o<r-1;++o){const c=od[mn[o]],h=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((e-t)/(h*c.size))<=i)return mn[o]}return mn[r-1]}function NV(n,t,e,i,r){for(let o=mn.length-1;o>=mn.indexOf(e);o--){const c=mn[o];if(od[c].common&&n._adapter.diff(r,i,c)>=t-1)return c}return mn[e?mn.indexOf(e):0]}function PV(n){for(let t=mn.indexOf(n)+1,e=mn.length;t<e;++t)if(od[mn[t]].common)return mn[t]}function kT(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:r}=p_(e,t),o=e[i]>=t?e[i]:e[r];n[o]=!0}}function VV(n,t,e,i){const r=n._adapter,o=+r.startOf(t[0].value,i),c=t[t.length-1].value;let h,d;for(h=o;h<=c;h=+r.add(h,1,i))d=e[h],d>=0&&(t[d].major=!0);return t}function NT(n,t,e){const i=[],r={},o=t.length;let c,h;for(c=0;c<o;++c)h=t[c],r[h]=c,i.push({value:h,major:!1});return o===0||!e?i:VV(n,i,r,e)}class PT extends el{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),r=this._adapter=new iP._date(t.adapters.date);r.init(e),Mc(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:OT(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:r,max:o,minDefined:c,maxDefined:h}=this.getUserBounds();function d(m){!c&&!isNaN(m.min)&&(r=Math.min(r,m.min)),!h&&!isNaN(m.max)&&(o=Math.max(o,m.max))}(!c||!h)&&(d(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&d(this.getMinMax(!1))),r=qn(r)&&!isNaN(r)?r:+e.startOf(Date.now(),i),o=qn(o)&&!isNaN(o)?o:+e.endOf(Date.now(),i)+1,this.min=Math.min(r,o-1),this.max=Math.max(r+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const o=this.min,c=this.max,h=qk(r,o,c);return this._unit=e.unit||(i.autoSkip?MT(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):NV(this,h.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:PV(this._unit),this.initOffsets(r),t.reverse&&h.reverse(),NT(this,h,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,r,o;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?e=1-r:e=(this.getDecimalForValue(t[1])-r)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?i=o:i=(o-this.getDecimalForValue(t[t.length-2]))/2);const c=t.length<3?.5:.25;e=ei(e,0,c),i=ei(i,0,c),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,r=this.options,o=r.time,c=o.unit||MT(o.minUnit,e,i,this._getLabelCapacity(e)),h=Ft(r.ticks.stepSize,1),d=c==="week"?o.isoWeekday:!1,m=Nf(d)||d===!0,_={};let v=e,T,A;if(m&&(v=+t.startOf(v,"isoWeek",d)),v=+t.startOf(v,m?"day":c),t.diff(i,e,c)>1e5*h)throw new Error(e+" and "+i+" are too far apart with stepSize of "+h+" "+c);const I=r.ticks.source==="data"&&this.getDataTimestamps();for(T=v,A=0;T<i;T=+t.add(T,h,c),A++)kT(_,T,I);return(T===i||r.bounds==="ticks"||A===1)&&kT(_,T,I),Object.keys(_).sort(DT).map(k=>+k)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const r=this.options.time.displayFormats,o=this._unit,c=e||r[o];return this._adapter.format(t,c)}_tickFormatFunction(t,e,i,r){const o=this.options,c=o.ticks.callback;if(c)return oe(c,[t,e,i],this);const h=o.time.displayFormats,d=this._unit,m=this._majorUnit,_=d&&h[d],v=m&&h[m],T=i[e],A=m&&v&&T&&T.major;return this._adapter.format(t,r||(A?v:_))}generateTickLabels(t){let e,i,r;for(e=0,i=t.length;e<i;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,r=fa(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(r),c=Math.sin(r),h=this._resolveTickFontOptions(0).size;return{w:i*o+h*c,h:i*c+h*o}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,r=i[e.unit]||i.millisecond,o=this._tickFormatFunction(t,0,NT(this,[t],this._majorUnit),r),c=this._getLabelSize(o),h=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return h>0?h:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,i=r.length;e<i;++e)t=t.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const r=this.getLabels();for(e=0,i=r.length;e<i;++e)t.push(OT(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Sw(t.sort(DT))}}function Wh(n,t,e){let i=0,r=n.length-1,o,c,h,d;e?(t>=n[i].pos&&t<=n[r].pos&&({lo:i,hi:r}=hp(n,"pos",t)),{pos:o,time:h}=n[i],{pos:c,time:d}=n[r]):(t>=n[i].time&&t<=n[r].time&&({lo:i,hi:r}=hp(n,"time",t)),{time:o,pos:h}=n[i],{time:c,pos:d}=n[r]);const m=c-o;return m?h+(d-h)*(t-o)/m:h}class $V extends PT{static id="timeseries";static defaults=PT.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Wh(e,this.min),this._tableRange=Wh(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,r=[],o=[];let c,h,d,m,_;for(c=0,h=t.length;c<h;++c)m=t[c],m>=e&&m<=i&&r.push(m);if(r.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(c=0,h=r.length;c<h;++c)_=r[c+1],d=r[c-1],m=r[c],Math.round((_+d)/2)!==m&&o.push({time:m,pos:c/(h-1)});return o}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((r,o)=>r-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Wh(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return Wh(this._table,i*this._tableRange+this._minPos,!0)}}const o1="label";function VT(n,t){typeof n=="function"?n(t):n&&(n.current=t)}function LV(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function l1(n,t){n.labels=t}function c1(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o1;const i=[];n.datasets=t.map(r=>{const o=n.datasets.find(c=>c[e]===r[e]);return!o||!r.data||i.includes(o)?{...r}:(i.push(o),Object.assign(o,r),o)})}function UV(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o1;const e={labels:[],datasets:[]};return l1(e,n.labels),c1(e,n.datasets,t),e}function zV(n,t){const{height:e=150,width:i=300,redraw:r=!1,datasetIdKey:o,type:c,data:h,options:d,plugins:m=[],fallbackContent:_,updateMode:v,...T}=n,A=re.useRef(null),I=re.useRef(null),k=()=>{A.current&&(I.current=new ou(A.current,{type:c,data:UV(h,o),options:d&&{...d},plugins:m}),VT(t,I.current))},M=()=>{VT(t,null),I.current&&(I.current.destroy(),I.current=null)};return re.useEffect(()=>{!r&&I.current&&d&&LV(I.current,d)},[r,d]),re.useEffect(()=>{!r&&I.current&&l1(I.current.config.data,h.labels)},[r,h.labels]),re.useEffect(()=>{!r&&I.current&&h.datasets&&c1(I.current.config.data,h.datasets,o)},[r,h.datasets]),re.useEffect(()=>{I.current&&(r?(M(),setTimeout(k)):I.current.update(v))},[r,d,h.labels,h.datasets,v]),re.useEffect(()=>{I.current&&(M(),setTimeout(k))},[c]),re.useEffect(()=>(k(),()=>M()),[]),LT.createElement("canvas",{ref:A,role:"img",height:e,width:i,...T},_)}const BV=re.forwardRef(zV);function jV(n,t){return ou.register(t),re.forwardRef((e,i)=>LT.createElement(BV,{...e,ref:i,type:n}))}const mp=jV("bar",nP);ou.register(t1,r1,a1,s1,n1);function HV({bebidas:n}){if(!n.length)return rt.jsx("p",{className:"text-sm italic",children:"Sin datos."});const t=n.reduce((c,h)=>(c[h.tipo]=(c[h.tipo]||0)+1,c),{}),e=Object.keys(t),i=Object.values(t),r={labels:e,datasets:[{label:"Cantidad",data:i,backgroundColor:"rgba(59, 130, 246, 0.6)",borderRadius:4}]},o={indexAxis:"y",scales:{x:{beginAtZero:!0,ticks:{stepSize:1}}},plugins:{legend:{display:!1}}};return rt.jsx("div",{className:"bg-white rounded p-2 mt-2",children:rt.jsx(mp,{data:r,options:o})})}function FV({bebidas:n}){if(!n.length)return rt.jsx("p",{children:"No hay datos an."});const t=new Date,e=24,i=n.reduce((r,o)=>{const c=o.email||"Annimo";return r[c]||(r[c]=[]),r[c].push(o),r},{});return rt.jsxs("div",{className:"mt-6",children:[rt.jsx("h2",{className:"text-lg font-bold mb-2",children:" Estadsticas Globales"}),Object.entries(i).map(([r,o])=>{const c=o[0],h=o.filter(_=>{const v=new Date(_.timestamp);return(t-v)/(1e3*60*60)<e}),d=h.reduce((_,v)=>(_[v.tipo]=(_[v.tipo]||0)+1,_),{}),m=Object.entries(d).map(([_,v])=>`${v} ${_}${v>1?"s":""}`).join(", ");return rt.jsxs("div",{className:"mb-4 border-b pb-2",children:[rt.jsx("p",{className:"font-semibold",children:rt.jsx(h_,{email:r})}),rt.jsxs("p",{className:"text-sm text-gray-600",children:["ltima bebida: ",c.tipo,"  ",new Date(c.timestamp).toLocaleTimeString()]}),rt.jsx("p",{className:"text-sm mt-1",children:h.length>0?`ltimas ${e}h: ${m}`:rt.jsx("span",{className:"italic text-gray-500",children:"Sin datos recientes"})}),rt.jsx(HV,{bebidas:h})]},r)})]})}ou.register(t1,r1,a1,s1,n1);function qV({bebidas:n}){if(!n.length)return rt.jsx("p",{className:"mt-4 text-sm",children:"No has aadido bebidas an."});const t=new Date,e=6,i=24,r=n[0],c=n.filter(it=>{const W=new Date(it.timestamp);return(t-W)/(1e3*60*60)<e}).reduce((it,W)=>(it[W.tipo]=(it[W.tipo]||0)+1,it),{}),d=n.filter(it=>{const W=new Date(it.timestamp);return(t-W)/(1e3*60*60)<i}).reduce((it,W)=>(it[W.tipo]=(it[W.tipo]||0)+1,it),{}),m=Object.keys(d),_=Object.values(d),v={labels:m,datasets:[{label:"Cantidad",data:_,backgroundColor:"rgba(59, 130, 246, 0.6)",borderRadius:4}]},T={indexAxis:"y",scales:{x:{beginAtZero:!0,ticks:{stepSize:1}}},plugins:{legend:{display:!1}}},A=new Date,I=new Date(A);I.setMinutes(0,0,0),I.setHours(I.getHours()+1);const k=Array.from({length:24},(it,W)=>{const ot=new Date(I.getTime()-W*60*60*1e3);return{tInicio:new Date(ot.getTime()-60*60*1e3),tFin:ot}}).reverse(),M=k.map(({tInicio:it,tFin:W})=>n.filter(ot=>{const C=new Date(ot.timestamp);return C>=it&&C<W}).length),X={labels:k.map(({tInicio:it})=>`${it.getHours()}:00`),datasets:[{label:"Bebidas por hora",data:M,backgroundColor:"rgba(59, 130, 246, 0.6)",borderRadius:4}]},et={scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}};return rt.jsxs("div",{className:"mt-6",children:[rt.jsx("h2",{className:" text-center text-lg font-bold mb-2",children:" Tus estadsticas"}),rt.jsxs("p",{children:["ltima bebida: ",r.tipo,"  ",new Date(r.timestamp).toLocaleTimeString()]}),rt.jsxs("p",{children:["Bebidas en las ltimas ",e,"h:"]}),rt.jsx("ul",{className:"list-disc pl-4 text-sm text-gray-700 mb-2",children:Object.entries(c).map(([it,W])=>rt.jsxs("li",{children:[it,"s: ",W]},it))}),rt.jsx("p",{className:"text-center text-sm mt-4 font-semibold",children:"Bebidas en las ltimas 24h (por tipo):"}),rt.jsx("div",{className:"bg-white rounded p-2 mt-2",children:rt.jsx(mp,{data:v,options:T})}),rt.jsx("p",{className:"text-center text-sm mt-4 font-semibold",children:"Bebidas en las ltimas 24h (por hora):"}),rt.jsx("div",{className:"bg-white rounded p-2 mt-2",children:rt.jsx(mp,{data:X,options:et})})]})}function GV({resumenUsuarios:n}){const t=[...n].sort((i,r)=>r.total-i.total).slice(0,3),e=["","",""];return rt.jsxs("div",{className:"mt-6",children:[rt.jsx("h2",{className:"text-xl font-bold mb-4",children:" Top 3 Borrachos (24h)"}),rt.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:t.map((i,r)=>rt.jsxs("div",{className:`p-4 rounded shadow text-center ${r===0?"bg-yellow-200":r===1?"bg-gray-300":"bg-orange-300"}`,children:[rt.jsx("div",{className:"text-3xl",children:e[r]}),rt.jsx("div",{className:"text-lg font-semibold mt-2",children:rt.jsx(h_,{email:i.email})}),rt.jsxs("div",{className:"text-sm text-gray-700 mt-1",children:[i.total," bebidas"]})]},i.uid))})]})}function YV({usuarios:n,bebidas:t}){const e=new Date,i=new Date(e.getTime()-24*60*60*1e3),r=n.map(o=>{const c=t.filter(h=>h.uid===o.id&&new Date(h.timestamp)>i);return{uid:o.id,email:o.email,total:c.length}});return rt.jsxs("div",{className:"text-center mt-6 text-gray-700",children:[rt.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Ranking"}),r.length===0?rt.jsx("p",{className:"text-lg italic",children:"Sin datos recientes "}):rt.jsx(GV,{resumenUsuarios:r})]})}function KV({bebidas:n}){const[t,e]=re.useState([]),[i,r]=re.useState("");return re.useEffect(()=>{async function o(){const c=ew(),h=await dw(Oo(c,"usuarios")),d=[];h.forEach(m=>{const _=m.data();d.push({uid:m.id,email:_.email,Nombre:_.Nombre||"Annimo"})}),e(d)}o()},[]),rt.jsxs("div",{className:"mt-6",children:[rt.jsx("h2",{className:"text-lg font-bold mb-4",children:" Editar Bebidas Globales (ltimas 24h)"}),rt.jsxs("div",{className:"mb-4",children:[rt.jsx("label",{className:"block text-sm font-medium mb-1",children:"Seleccionar usuario:"}),rt.jsxs("select",{className:"border p-2 rounded w-full",onChange:o=>r(o.target.value),value:i,children:[rt.jsx("option",{value:"",disabled:!0,children:"-- Selecciona un usuario --"}),t.map(({uid:o,Nombre:c,email:h})=>rt.jsx("option",{value:o,children:`${c}`},o))]})]}),i&&rt.jsx("div",{className:"mt-4 border-t pt-4",children:rt.jsx(ik,{bebidas:n,uid:i,email:t.find(o=>o.uid===i)?.email||"Annimo"})})]})}function QV(){const[n,t]=re.useState(null),[e,i]=re.useState([]),[r,o]=re.useState("inicio"),[c,h]=re.useState([]);re.useEffect(()=>{const _=lp(Oo(Mo,"usuarios")),v=AE(_,T=>{const A=T.docs.map(I=>({id:I.id,...I.data()}));h(A)});return()=>v()},[]),re.useEffect(()=>{const _=IC(cp,v=>{t(v)});return()=>_()},[]),re.useEffect(()=>{const _=lp(Oo(Mo,"bebidas"),hw("timestamp","desc")),v=AE(_,T=>{const A=T.docs.map(I=>({id:I.id,...I.data()}));i(A)});return()=>v()},[]);const d=async _=>{const v={tipo:_,timestamp:new Date().toISOString(),uid:n.uid,email:n.email};await gw(Oo(Mo,"bebidas"),v)};if(!n)return rt.jsx(tk,{onLogin:()=>{}});const m=e.filter(_=>_.uid===n.uid);return rt.jsxs("div",{className:`max-w-md w-full mx-auto mt-6 p-4 border rounded shadow
                md:max-w-md md:p-4`,children:[rt.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-4 gap-2",children:[rt.jsx("h1",{className:"text-xl font-bold text-center md:text-left",children:" Contador de Bebidas"}),rt.jsx("button",{onClick:()=>CC(cp),className:"text-sm text-red-600 underline md:self-center",children:"Cerrar sesin"})]}),rt.jsxs("div",{className:"flex flex-wrap justify-center gap-2 mb-4",children:[rt.jsx("button",{onClick:()=>o("inicio"),className:`px-3 py-1 rounded min-w-[80px] text-center ${r==="inicio"?"bg-blue-500 text-white":"bg-gray-200"}`,children:"Inicio"}),rt.jsx("button",{onClick:()=>o("global"),className:`px-3 py-1 rounded min-w-[80px] text-center ${r==="global"?"bg-blue-500 text-white":"bg-gray-200"}`,children:"Global"}),rt.jsx("button",{onClick:()=>o("editar"),className:`px-3 py-1 rounded min-w-[80px] text-center ${r==="editar"?"bg-blue-500 text-white":"bg-gray-200"}`,children:"Editar Bebidas"}),rt.jsx("button",{onClick:()=>o("ranking"),className:`px-3 py-1 rounded min-w-[80px] text-center ${r==="ranking"?"bg-blue-500 text-white":"bg-gray-200"}`,children:"Ranking"})]}),r==="inicio"&&rt.jsxs(rt.Fragment,{children:[rt.jsxs("p",{className:"text-sm text-gray-600 mb-2 text-center",children:["Bienvenido: ",rt.jsx(h_,{email:n.email})]}),rt.jsx(ek,{onAdd:d}),rt.jsx(qV,{bebidas:m})]}),r==="global"&&rt.jsx(FV,{bebidas:e}),r==="editar"&&rt.jsx(KV,{bebidas:e}),r==="ranking"&&rt.jsx(YV,{usuarios:c,bebidas:e})]})}qR.createRoot(document.getElementById("root")).render(rt.jsx(re.StrictMode,{children:rt.jsx(QV,{})}));
